---
title: ClickHouse Cloud サービスの状態を確認する方法
description: ClickHouse Cloud API を使用して、サービスを起動させることなく、停止中・待機中・実行中のいずれの状態かを確認する方法を解説します。
date: 2023-11-16
tags: ['クラウドの管理']
keywords: ['クラウドサービスの状態']
---

{frontMatter.description}

{/* 途中省略 */}


## ClickHouse Cloud サービスの状態を確認する方法 \{#how-to-check-your-clickhouse-cloud-service-state\}

ClickHouse Cloud サービスの状態はどのように確認できますか？サービスが停止、アイドル状態、または実行中かを確認したいのですが、その際にサービスを起動させたくありません。

## 回答 \{#answer\}

[ClickHouse Cloud API](/cloud/manage/api/api-overview) は、クラウドサービスの状態を確認するのに便利です。Cloud API を使用する前に、対象サービスで API キーを作成する必要があります。これは ClickHouse Cloud の [clickhouse.cloud](https://console.clickhouse.cloud) で行えます：

- [API 概要](/cloud/manage/api/api-overview)
- [Swagger](https://clickhouse.com/docs/cloud/manage/api/swagger)

1. サービスの状態を確認するには、次を実行します。`Key-ID` と `Key-Secret` はそれぞれ自身の値に置き換えてください。

   ```shell
   curl --user '[Key-ID]:[Key-Secret]' https://api.clickhouse.cloud/v1/organizations/[Org-ID]/services/[Service-ID]
   ```

   次のような出力が得られます。

   ```json
   result":{"id":"[Service-ID]","name":"[Service-Name]","provider":"aws","region":"us-east-1","state":"**idle**","endpoints":[{"protocol":"nativesecure","host":"[Connect-URL]","port":9440},{"protocol":"https","host":"[Connect-URL]","port":8443}],"tier":"development","idleScaling":true,"idleTimeoutMinutes":15,"ipAccessList":[{"source":"[my-IP]","description":"[my-IP-name]"}],"createdAt":"2023-04-13T23:47:47Z"},"status":200}
   ```

1. [jq ユーティリティ](https://jqlang.github.io/jq/) を使用して `state` キーのみを抽出できます。

   ```shell
   curl --user '[Key-ID]:[Key-Secret]' https://api.clickhouse.cloud/v1/organizations/[Org-ID]/services/[Service-ID] | jq '.state'
   ```

   次のような出力が得られます。

   ```json
   **idle**
   ```

1. 稼働中のサービスに対して同じコマンドを実行すると、次のような出力が得られます。

   ```json
   **running**
   ```