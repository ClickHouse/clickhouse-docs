---
date: 2023-03-24
title: "複数のターミナル間で小さなテーブルを素早く再作成する方法"
description: "開発環境でコピー＆ペーストを使って、小さなテーブルとそのデータを複数のターミナル間で素早く再作成する方法を説明します。"
tags: ['ツールとユーティリティ']
keywords: ['テーブルの再作成', 'ターミナル']
---

{frontMatter.description}

{/* 省略 */}

## 質問 \{#question\}

異なるターミナル間でコピー＆ペーストだけを使って、テーブルとそのデータを手早く再現するにはどうすればよいですか？

## 回答 \{#answer\}

これは、あるデータベースから別のデータベースへデータを移行するための推奨手順ではなく、本番データの移行には決して使用すべきではありません。

これは、複数の環境間で開発を行う際に、少量のデータを手っ取り早く簡易的に再現するためだけの方法です。

1. `SHOW CREATE table` を使って CREATE TABLE 文を取得します:

```sql
SHOW CREATE TABLE cookies;

SHOW CREATE TABLE cookies

Query id: 248ec8e2-5bce-45b3-97d9-ed68edf445a5

┌─statement────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ CREATE TABLE default.cookies
(
    `id` String,
    `timestamp` DateTime
)
ENGINE = MergeTree
ORDER BY id
│
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

```

2. `FORMAT SQLInsert` を使用してデータをエクスポートする

```sql
SELECT * FROM cookies FORMAT SQLInsert;

SELECT *
FROM cookies
FORMAT SQLInsert

Query id: 383759b8-69c0-4561-ab95-f8224abc0071

INSERT INTO table (`id`, `timestamp`) VALUES ('4', '2023-03-15 16:28:46')
, ('2', '2023-03-15 16:28:41')
, ('1', '2023-03-15 16:11:02'), ('1', '2023-03-15 16:11:40'), ('1', '2023-03-15 16:11:48'), ('1', '2023-03-15 16:16:05'), ('2', '2023-03-15 16:11:06'), ('3', '2023-03-15 16:11:12'), ('3', '2023-03-15 16:11:45'), ('3', '2023-03-15 16:16:08'), ('4', '2023-03-15 16:11:14'), ('4', '2023-03-15 16:11:50'), ('4', '2023-03-15 16:16:01'), ('5', '2023-03-15 16:11:18'), ('5', '2023-03-15 16:16:11')
;

15行のセット。経過時間: 0.023秒
```

手順 2 では、`table` という名前を実際のテーブル名（この例では `cookies`）に置き換える必要がある点に注意してください。
