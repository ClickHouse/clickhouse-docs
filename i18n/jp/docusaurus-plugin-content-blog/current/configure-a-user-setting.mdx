---
title: ClickHouse でユーザー設定を行う方法
description: ClickHouse で、`SET` および `ALTER USER` コマンドを使用して、個々のクエリ、クライアントセッション、または特定のユーザーごとに設定を定義する方法を学びます。
date: 2023-03-01
tags: ['設定']
keywords: ['SET', 'ALTER', 'ユーザー', 'クエリ', 'セッション']
---

{frontMatter.description}

{/* トランケート */}

## はじめに \{#introduction\}

ClickHouse でユーザーの設定を定義する方法はいくつかあります。どの方法を取るかは、ユースケースやその設定をどのくらいの期間有効にしておきたいかによって異なります。いくつかのシナリオを見ていきましょう…

## 単一のクエリに対して設定を行う \{#configure-a-setting-for-a-single-query\}

`SELECT` クエリには `SETTINGS` 句を含めることができ、そこに任意の数の設定を定義できます。これらの設定はそのクエリに対してのみ適用されます。例えば：

```sql
SELECT *
FROM my_table
SETTINGS max_threads = 8;
```

このクエリでは、使用されるスレッド数の最大値は 8 です。

## セッションに対する設定を構成する \{#configure-a-setting-for-a-session\}

`SET` 句を使用して、クライアントセッションの存続期間に有効な設定を定義できます。これはアドホックなテストや、いくつかのクエリを実行している間だけ有効な設定にしたい場合に便利ですが、それ以上の期間は有効にしたくない場合に適しています。

```sql
SET max_threads = 8;

SELECT *
FROM my_table;
```

## 特定のユーザー向けの設定を構成する \{#configure-a-setting-for-a-particular-user\}

`ALTER USER` を使用して、特定のユーザーだけに適用される設定を定義します。例えば:

```sql
ALTER USER my_user_name SETTINGS max_threads = 8;
```

クライアントから一度ログアウトして再度ログインし、その後に `getSetting` 関数を使用することで、設定が正しく反映されたことを確認できます。

```sql
SELECT getSetting('max_threads');
```
