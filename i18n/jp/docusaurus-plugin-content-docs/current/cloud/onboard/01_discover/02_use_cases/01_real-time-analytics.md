---
slug: /cloud/get-started/cloud/use-cases/real-time-analytics
title: 'リアルタイム分析'
description: 'ClickHouse Cloud を使用してリアルタイム分析アプリケーションを構築し、即時のインサイトとデータドリブンな意思決定を実現する方法を学びます'
keywords: ['ユースケース', 'リアルタイム分析']
sidebar_label: 'リアルタイム分析'
doc_type: 'guide'
---

import Image from '@theme/IdealImage';
import rta_0 from '@site/static/images/cloud/onboard/discover/use_cases/0_rta.png';
import rta_1 from '@site/static/images/cloud/onboard/discover/use_cases/1_rta.png';
import rta_2 from '@site/static/images/cloud/onboard/discover/use_cases/2_rta.png';
import rta_3 from '@site/static/images/cloud/onboard/discover/use_cases/3_rta.png';

<iframe width="758" height="426" src="https://www.youtube.com/embed/SnFff0KYwuo?si=aNpGzSobzFhUlyX5" title="YouTube 動画プレーヤー" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen />


## リアルタイム分析とは {#what-is-real-time-analytics}

リアルタイム分析とは、データが生成されると同時にエンドユーザーや顧客に洞察を提供するデータ処理のことです。データをバッチで収集し、生成されてから長時間経過した後に処理することが多い従来のバッチ分析とは異なります。

リアルタイム分析システムは、時系列に並べられた一連のイベントで構成されるイベントストリーム上に構築されます。イベントとは、既に発生した事象のことです。例えば、eコマースサイトでのショッピングカートへの商品追加、IoTセンサーからの測定値の送信、サッカーの試合でのシュートなどが該当します。

以下に、架空のIoTセンサーからのイベントの例を示します。

```json
{
  "deviceId": "sensor-001",
  "timestamp": "2023-10-05T14:30:00Z",
  "eventType": "temperatureAlert",
  "data": {
    "temperature": 28.5,
    "unit": "Celsius",
    "thresholdExceeded": true
  }
}
```

組織は、このようなイベントを集約・分析することで、顧客に関する洞察を発見できます。従来はバッチ分析を使用して行われてきましたが、次のセクションでは、バッチ分析とリアルタイム分析を比較します。


## リアルタイム分析 vs バッチ分析 {#real-time-analytics-vs-batch-analytics}

以下の図は、個々のイベントの観点から見た典型的なバッチ分析システムの様子を示しています。

<Image img={rta_0} size='md' border alt='batch analytics diagram' />

イベントが発生してから処理を行い、そこから洞察を得るまでにかなり大きな時間差があることがわかります。従来、これがデータ分析の唯一の手段であり、データをバッチで処理するために人為的な時間境界を設ける必要がありました。例えば、1日の終わりに収集されたすべてのデータを処理するといった方法です。これは多くのユースケースで機能しましたが、古いデータを扱うことになり、データに対して十分に迅速に対応できないため、他のケースでは最適とは言えません。

対照的に、リアルタイム分析システムでは、以下の図に示すように、イベントが発生するとすぐに対応します。

<Image img={rta_1} size='md' border alt='Real-time analytics diagram' />

これにより、イベントが生成されるとほぼ同時に洞察を導き出すことができます。しかし、なぜこれが有用なのでしょうか。


## リアルタイム分析の利点 {#benefits-of-real-time-analytics}

今日の変化の激しい世界において、組織は常に変化する状況に対して機敏かつ迅速に対応するため、リアルタイム分析に依存しています。リアルタイム分析システムは、ビジネスに多くの利点をもたらします。

### より優れた意思決定 {#better-decision-making}

リアルタイム分析による実用的なインサイトへのアクセスにより、意思決定を改善できます。ビジネス運用者がイベントの発生をリアルタイムで確認できれば、タイムリーな介入を行うことがはるかに容易になります。

例えば、アプリケーションに変更を加え、それがユーザーエクスペリエンスに悪影響を及ぼしているかどうかを知りたい場合、必要に応じて変更を元に戻せるよう、できるだけ早くそれを知る必要があります。リアルタイム性の低いアプローチでは、この分析を行うために翌日まで待たなければならない可能性があり、その時点では多くの不満を持つユーザーが発生してしまいます。

### 新しい製品と収益源 {#new-products-and-revenue-streams}

リアルタイム分析は、ビジネスが新しい収益源を生み出すのに役立ちます。組織は、ユーザーに分析クエリ機能へのアクセスを提供する、データを中心とした新しい製品やサービスを開発できます。これらの製品は、ユーザーがアクセスに対して料金を支払うのに十分な魅力を持つことがよくあります。

さらに、既存のアプリケーションをより魅力的にすることで、ユーザーのエンゲージメントと定着率を向上させることができます。これにより、アプリケーションの利用が増加し、組織により多くの収益をもたらします。

### 顧客体験の向上 {#improved-customer-experience}

リアルタイム分析により、ビジネスは顧客の行動、嗜好、ニーズに関する即座のインサイトを得ることができます。これにより、ビジネスはタイムリーなサポートを提供し、インタラクションをパーソナライズし、顧客が再び訪れるようなより魅力的な体験を創出できます。


## リアルタイム分析のユースケース {#real-time-analytics-use-cases}

リアルタイム分析の真の価値は、実用的な応用例を考えることで明らかになります。いくつかの例を見ていきましょう。

### 不正検知 {#fraud-detection}

不正検知とは、偽アカウントから決済詐欺まで、不正なパターンを検出することです。疑わしい活動にフラグを立て、取引をブロックし、必要に応じてアカウントを無効化するなど、できるだけ迅速に不正を検出することが求められます。

このユースケースは、医療、デジタルバンキング、金融サービス、小売など、さまざまな業界に適用されます。

[Instacart](https://www.instacart.com/)は北米を代表するオンライン食料品企業であり、数百万人のアクティブな顧客と買い物代行者を抱えています。同社は不正検知プラットフォームYodaの一部としてClickHouseを使用しています。上記で説明した一般的な不正の種類に加えて、顧客と買い物代行者間の共謀の検出も行っています。

<Image
  img={rta_2}
  size='md'
  border
  alt='不正検知のためのリアルタイム分析'
/>

同社は、リアルタイム不正検知を可能にするClickHouseの以下の特性を特定しました。

> ClickHouseはLSMツリーベースのMergeTreeファミリーエンジンをサポートしています。
> これらは書き込みに最適化されており、大量のデータをリアルタイムで取り込むのに適しています。

> ClickHouseは分析クエリ向けに明示的に設計・最適化されています。これは、不正を示す可能性のあるパターンを継続的に分析するアプリケーションのニーズに完全に適合します。

### 時間的制約のある意思決定 {#ftime-sensitive-decision-making}

時間的制約のある意思決定とは、ユーザーや組織が利用可能な最新情報に基づいて迅速に情報に基づいた選択を行う必要がある状況を指します。リアルタイム分析は、市場変動に反応するトレーダー、購買決定を行う消費者、リアルタイムの業務変化に適応する専門家など、動的な環境において情報に基づいた選択を行う力をユーザーに与えます。

Coinhallは、各取引期間の始値、高値、安値、終値を示すローソク足チャートを通じて、時間経過に伴う価格変動に関するリアルタイムの洞察をユーザーに提供しています。同社は、これらのタイプのクエリを多数の同時ユーザーで迅速に実行できる必要がありました。

<Image
  img={rta_3}
  size='md'
  border
  alt='時間的制約のある意思決定のためのリアルタイム分析'
/>

> パフォーマンスの面では、ClickHouseが明らかに優れており、ローソク足クエリを20ミリ秒で実行しました。これは他のデータベースの400ミリ秒以上と比較して優れています。最新価格クエリは8ミリ秒で実行され、次点のパフォーマンス(SingleStore)の45ミリ秒を上回りました。最後に、ASOF JOINクエリを50ミリ秒で処理しましたが、Snowflakeは20分かかり、Rocksetはタイムアウトしました。
