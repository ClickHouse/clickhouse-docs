---
slug: /cloud/get-started/cloud/use-cases/data_lake_and_warehouse
title: 'データレイクハウス'
description: 'ClickHouse Cloud で、データレイクの柔軟性とデータベースのパフォーマンスを兼ね備えた最新のデータウェアハウスアーキテクチャを構築する'
keywords: ['use cases', 'data lake and warehouse']
sidebar_label: 'データウェアハウス'
doc_type: 'guide'
---

import Image from '@theme/IdealImage';
import datalakehouse_01 from '@site/static/images/cloud/onboard/discover/use_cases/datalakehouse_01.png';

<iframe width="758" height="426" src="https://www.youtube.com/embed/mueG6z1mo8Y" title="Data lakehouses (in under 3 minutes)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen />

データレイクハウスは、データレイク基盤にデータベースの原則を適用しつつ、クラウドストレージシステムの柔軟性とスケーラビリティを維持する、統合型のアーキテクチャです。

レイクハウスは、単にデータベースを分解したものではなく、従来型の分析と最新の AI/ML ワークロードの両方を単一のプラットフォームでサポートすることに重点を置いた、根本的に異なる基盤（クラウドオブジェクトストレージ）の上に、データベースに類似した機能を構築するものです。


## データレイクハウスのコンポーネントとは？ {#components-of-the-data-lakehouse}

モダンなデータレイクハウスアーキテクチャは、データウェアハウスとデータレイクの技術の融合を表し、両アプローチの優れた側面を組み合わせたものです。このアーキテクチャは、柔軟で堅牢なデータストレージ、管理、分析プラットフォームを提供する、複数の異なるが相互接続されたレイヤーで構成されています。

これらのコンポーネントを理解することは、データレイクハウス戦略を実装または最適化しようとする組織にとって不可欠です。レイヤー化されたアプローチにより、コンポーネントの置き換えと各レイヤーの独立した進化が可能になり、アーキテクチャの柔軟性と将来性を確保できます。

典型的なデータレイクハウスアーキテクチャの中核となる構成要素と、それらがどのように相互作用して統合されたデータ管理プラットフォームを構築するかを見ていきましょう。

<Image
  img={datalakehouse_01}
  alt='データレイクハウスのコンポーネント'
  size='md'
/>

| コンポーネント               | 説明                                                                                                                                                                                                                                                                                                                                    |
| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **データソース**        | レイクハウスのデータソースには、運用データベース、ストリーミングプラットフォーム、IoTデバイス、アプリケーションログ、外部プロバイダーが含まれます。                                                                                                                                                                                                              |
| **クエリエンジン**        | オブジェクトストレージに保存されたデータに対する分析クエリを処理し、テーブルフォーマットレイヤーが提供するメタデータと最適化を活用します。SQLおよび他のクエリ言語をサポートし、大量のデータを効率的に分析します。                                                                                     |
| **メタデータカタログ**    | [データカタログ](https://clickhouse.com/engineering-resources/data-catalog)は、メタデータの中央リポジトリとして機能し、テーブル定義とスキーマ、パーティション情報、アクセス制御ポリシーを保存および管理します。レイクハウス全体でのデータ検出、系譜追跡、ガバナンスを実現します。                             |
| **テーブルフォーマットレイヤー**  | [テーブルフォーマットレイヤー](https://clickhouse.com/engineering-resources/open-table-formats)は、データファイルのテーブルへの論理的な編成を管理し、ACIDトランザクション、スキーマの強制と進化、タイムトラベル機能、データスキップやクラスタリングなどのパフォーマンス最適化といったデータベースのような機能を提供します。 |
| **オブジェクトストレージ**      | このレイヤーは、すべてのデータファイルとメタデータに対してスケーラブルで耐久性があり、コスト効率の高いストレージを提供します。オープンフォーマットでのデータの物理的な永続化を処理し、複数のツールやシステムからの直接アクセスを可能にします。                                                                                                                          |
| **クライアントアプリケーション** | レイクハウスに接続してデータをクエリし、インサイトを可視化し、データプロダクトを構築するさまざまなツールとアプリケーション。BIツール、データサイエンスノートブック、カスタムアプリケーション、ETL/ELTツールなどが含まれます。                                                                                                                            |


## データレイクハウスの利点とは？ {#benefits-of-the-data-lakehouse}

データレイクハウスアーキテクチャは、従来のデータウェアハウスとデータレイクの両方と比較して、いくつかの重要な利点を提供します：

### 従来のデータウェアハウスとの比較 {#compared-to-traditional-data-warehouses}

| #   | 利点                                          | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| --- | ------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | **コスト効率**                              | レイクハウスは独自のストレージ形式ではなく低コストのオブジェクトストレージを活用するため、統合ストレージに高額な料金を請求するデータウェアハウスと比較して、ストレージコストを大幅に削減できます。                                                                                                                                                                                                                          |
| 2   | **コンポーネントの柔軟性と交換可能性** | レイクハウスアーキテクチャにより、組織は異なるコンポーネントを置き換えることができます。従来のシステムでは要件の変更や技術の進歩に伴い全面的な置き換えが必要ですが、レイクハウスではクエリエンジンやテーブル形式などの個別コンポーネントを交換することで段階的な進化が可能です。この柔軟性により、ベンダーロックインが軽減され、組織は破壊的な移行なしに変化するニーズに適応できます。 |
| 3   | **オープン形式のサポート**                          | レイクハウスはParquetなどのオープンファイル形式でデータを保存するため、ベンダーロックインなしに様々なツールから直接アクセスできます。これは、独自のエコシステムへのアクセスを制限する独自のデータウェアハウス形式とは異なります。                                                                                                                                                                                                                              |
| 4   | **AI/ML統合**                            | レイクハウスは機械学習フレームワークやPython/Rライブラリに対してデータへの直接アクセスを提供します。一方、データウェアハウスでは通常、高度な分析に使用する前にデータを抽出する必要があります。                                                                                                                                                                                                                                         |
| 5   | **独立したスケーリング**                          | レイクハウスはストレージとコンピュートを分離し、実際のニーズに基づいてそれぞれを独立してスケールできます。これは、両者が一緒にスケールする多くのデータウェアハウスとは異なります。                                                                                                                                                                                                                                                                              |

### データレイクとの比較 {#compared-to-data-lakes}

| #   | 利点                     | 説明                                                                                                                                                                                         |
| --- | --------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **クエリパフォーマンス**       | レイクハウスはインデックス作成、統計、データレイアウトの最適化を実装し、SQLクエリをデータウェアハウスに匹敵する速度で実行できるようにすることで、生のデータレイクの低いパフォーマンスを克服します。 |
| 2   | **データ整合性**        | ACIDトランザクションのサポートにより、レイクハウスは同時実行操作中の整合性を保証し、ファイルの競合によってデータが破損する可能性がある従来のデータレイクの主要な制限を解決します。          |
| 3   | **スキーマ管理**       | レイクハウスはスキーマ検証を強制し、スキーマの進化を追跡することで、スキーマの不整合によりデータが使用不可能になるデータレイクで一般的な「データスワンプ」問題を防ぎます。                |
| 4   | **ガバナンス機能** | レイクハウスは行/列レベルできめ細かいアクセス制御と監査機能を提供し、基本的なデータレイクにおける限定的なセキュリティ制御に対処します。                                            |
| 5   | **BIツールサポート**         | レイクハウスはSQLインターフェースと最適化を提供し、標準的なBIツールとの互換性を実現します。これは、可視化の前に追加の処理レイヤーが必要な生のデータレイクとは異なります。           |


## データレイクハウスアーキテクチャにおけるClickHouseの位置付け {#where-does-clickhouse-fit-in-the-data-lakehouse-architecture}

ClickHouseは、現代のデータレイクハウスエコシステムにおける強力な分析クエリエンジンです。大規模データ分析において、組織に高性能な選択肢を提供します。ClickHouseは、卓越したクエリ速度と効率性により、魅力的な選択肢となっています。

レイクハウスアーキテクチャにおいて、ClickHouseは基盤データと柔軟に連携できる特化した処理レイヤーとして機能します。S3、Azure Blob Storage、Google Cloud Storageなどのクラウドオブジェクトストレージに保存されたParquetファイルを直接クエリでき、最適化されたカラム型処理機能を活用することで、大規模データセットに対しても高速な結果を提供します。この直接クエリ機能により、組織は複雑なデータ移動や変換プロセスを必要とせずに、レイクデータを分析できます。

より高度なデータ管理ニーズに対応するため、ClickHouseはApache Iceberg、Delta Lake、Apache Hudiなどのオープンテーブルフォーマットと統合します。この統合により、ClickHouseはこれらのフォーマットの高度な機能を活用しながら、その特長である卓越したクエリパフォーマンスを提供し続けます。組織は、これらのテーブルフォーマットを直接統合するか、AWS Glue、Unity、その他のカタログサービスなどのメタデータカタログ経由で接続できます。

レイクハウスアーキテクチャにクエリエンジンとしてClickHouseを組み込むことで、組織はレイクハウスアプローチの特徴である柔軟性とオープン性を維持しながら、データレイクに対して超高速な分析クエリを実行できます。この組み合わせにより、コンポーネントの相互運用性、オープンフォーマット、統合データ管理といったレイクハウスモデルの中核的な利点を犠牲にすることなく、特化した分析データベースのパフォーマンス特性を実現します。


## ハイブリッドアーキテクチャ:両方の長所を活かす {#hybrid-architecture-the-best-of-both-worlds}

ClickHouseはレイクハウスコンポーネントのクエリに優れていますが、高度に最適化されたストレージエンジンはさらなる利点を提供します。リアルタイムダッシュボード、オペレーショナル分析、インタラクティブなユーザー体験など、超低レイテンシのクエリを必要とするユースケースでは、組織はパフォーマンスが重要なデータをClickHouseのネイティブ形式で選択的に保存できます。このハイブリッドアプローチは両方の長所を実現します:時間的制約のある分析に対するClickHouseの特化したストレージの比類なきクエリ速度と、必要に応じてより広範なデータレイクハウスをクエリできる柔軟性です。

この二重の機能により、組織は階層化されたデータ戦略を実装できます。頻繁にアクセスされるホットデータはClickHouseの最適化されたストレージに配置してサブセカンドのクエリ応答を実現し、同時にレイクハウス内の完全なデータ履歴へのシームレスなアクセスを維持します。チームは技術的な制約ではなくパフォーマンス要件に基づいてアーキテクチャの決定を行うことができ、ClickHouseを重要なワークロードに対する超高速分析データベースとして、また、より広範なデータエコシステムに対する柔軟なクエリエンジンとして活用できます。
