---
slug: /cloud/get-started/cloud/use-cases/data_lake_and_warehouse
title: 'データレイクハウス'
description: 'ClickHouse Cloud を使用して、データレイクの柔軟性とデータベースのパフォーマンスを兼ね備えたモダンなデータウェアハウスアーキテクチャを構築する'
keywords: ['ユースケース', 'データレイクとデータウェアハウス']
sidebar_label: 'データウェアハウス'
doc_type: 'guide'
---

import Image from '@theme/IdealImage';
import datalakehouse_01 from '@site/static/images/cloud/onboard/discover/use_cases/datalakehouse_01.png';

<iframe width="758" height="426" src="https://www.youtube.com/embed/mueG6z1mo8Y" title="Data lakehouses (in under 3 minutes)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen />

データレイクハウスは、クラウドストレージシステムの柔軟性とスケールを維持しつつ、データレイク基盤にデータベースの原則を適用する収束型アーキテクチャです。

レイクハウスは、単にデータベースを分解したものではなく、クラウドオブジェクトストレージという本質的に異なる基盤の上に、データベースに類似した機能を構築したものです。これは、従来型のアナリティクスと最新の AI/ML ワークロードの両方を、単一の統合プラットフォーム上でサポートすることに重点を置いています。


## データレイクハウスを構成するコンポーネント {#components-of-the-data-lakehouse}

モダンなデータレイクハウスアーキテクチャは、データウェアハウスと
データレイク技術の融合を表しており、両アプローチの優れた側面を組み合わせたものです。
このアーキテクチャはいくつかの独立しつつも相互に接続されたレイヤーから構成され、
柔軟で堅牢なデータの保存・管理・分析プラットフォームを提供します。

これらのコンポーネントを理解することは、データレイクハウス戦略を
導入または最適化しようとしている組織にとって不可欠です。レイヤー化されたアプローチにより、
コンポーネントの入れ替えや各レイヤーの独立した進化が可能になり、
アーキテクチャ上の柔軟性と将来への備えを確保できます。

ここでは、一般的なデータレイクハウスアーキテクチャの中核となる構成要素と、
それらがどのように連携して一貫性のあるデータ管理プラットフォームを形成するかを見ていきます。

<Image img={datalakehouse_01} alt="データレイクハウスを構成するコンポーネント" size="md"/>

| コンポーネント          | 説明                                                                                                                                                                                                                                                                                                                                             |
|-------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Data sources**        | レイクハウスのデータソースには、運用データベース、ストリーミングプラットフォーム、IoT デバイス、アプリケーションログ、外部プロバイダーなどが含まれます。                                                                                                                                                                                       |
| **Query engine**        | オブジェクトストレージに保存されたデータに対して分析クエリを実行し、テーブルフォーマットレイヤーが提供するメタデータや最適化機能を活用します。大量データを効率的に分析するために、SQL および場合によってはその他のクエリ言語をサポートします。                                                                                                    |
| **Metadata catalog**    | [data catalog](https://clickhouse.com/engineering-resources/data-catalog) はメタデータの中央リポジトリとして機能し、テーブル定義とスキーマ、パーティショニング情報、アクセス制御ポリシーを保存・管理します。レイクハウス全体でのデータ探索、データリネージの追跡、ガバナンスを可能にします。                                        |
| **Table format layer**  | [table format layer](https://clickhouse.com/engineering-resources/open-table-formats) はデータファイルをテーブルとして論理的に編成し、ACID トランザクション、スキーマの強制および進化、タイムトラベル機能、データスキッピングやクラスタリングといったパフォーマンス最適化など、データベースに類似した機能を提供します。      |
| **Object storage**      | このレイヤーは、すべてのデータファイルおよびメタデータ向けにスケーラブルで耐久性が高く、コスト効率の良いストレージを提供します。データをオープンフォーマットで物理的に永続化し、複数のツールやシステムからの直接アクセスを可能にします。                                                                                                     |
| **Client applications** | レイクハウスに接続してデータをクエリし、インサイトを可視化したり、データプロダクトを構築したりする各種ツールやアプリケーションです。BI ツール、データサイエンス向けノートブック、カスタムアプリケーション、ETL/ELT ツールなどが含まれます。                                                                                                     |



## データレイクハウスの利点は何ですか？ {#benefits-of-the-data-lakehouse}

データレイクハウスアーキテクチャは、従来のデータウェアハウスおよびデータレイクと直接比較した場合に、いくつかの重要な利点を提供します。

### 従来のデータウェアハウスと比較した場合 {#compared-to-traditional-data-warehouses}

| # | Benefit                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **コスト効率**                                   | レイクハウスは、専用ストレージ形式ではなく安価なオブジェクトストレージを活用することで、統合ストレージに対してプレミアム価格を課すデータウェアハウスと比較して、ストレージコストを大幅に削減します。                                                                                                                                                                                                                                   |
| 2 | **コンポーネントの柔軟性と交換可能性**           | レイクハウスアーキテクチャでは、組織がさまざまなコンポーネントを入れ替えることができます。従来のシステムでは、要件の変更や技術の進歩に応じてシステム全体の入れ替えが必要になりますが、レイクハウスではクエリエンジンやテーブルフォーマットなど個々のコンポーネントを差し替えることで段階的な進化が可能です。この柔軟性によりベンダーロックインが軽減され、破壊的な移行なしに変化するニーズへ適応できます。 |
| 3 | **オープンフォーマットのサポート**              | レイクハウスは Parquet のようなオープンなファイルフォーマットでデータを保存するため、プロプライエタリなデータウェアハウスフォーマットのように特定のエコシステムへのアクセスを制限することなく、さまざまなツールから直接アクセスできます。                                                                                                                                                                        |
| 4 | **AI/ML との統合**                                | レイクハウスは、機械学習フレームワークや Python/R のライブラリに対してデータへの直接アクセスを提供します。一方でデータウェアハウスでは、高度な分析に利用する前にデータの抽出が必要となるのが一般的です。                                                                                                                                                                                                 |
| 5 | **独立したスケーリング**                         | レイクハウスはストレージとコンピュートを分離しており、多くのデータウェアハウスのように一体でスケールさせるのではなく、実際のニーズに応じてそれぞれを独立してスケールさせることができます。                                                                                                                                                                                                                       |

### データレイクと比較した場合 {#compared-to-data-lakes}

| # | Benefit                     | Description                                                                                                                                                                                         |
|---|-----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **クエリ性能**              | レイクハウスはインデックス、統計情報、データレイアウトの最適化を実装することで、SQL クエリをデータウェアハウスに匹敵する速度で実行でき、従来型のデータレイクにおける低いパフォーマンスの問題を解消します。 |
| 2 | **データの一貫性**          | ACID トランザクションのサポートにより、レイクハウスは同時実行処理時の一貫性を保証し、ファイル競合によってデータが破損しうる従来のデータレイクの大きな制約を解決します。                              |
| 3 | **スキーマ管理**           | レイクハウスはスキーマ検証を強制し、スキーマ変更の履歴を追跡することで、スキーマの不整合によりデータが利用不能になる、データレイクにありがちな「データスワンプ」問題を防ぎます。                       |
| 4 | **ガバナンス機能**         | レイクハウスは行・列レベルでのきめ細かなアクセス制御と監査機能を提供し、基本的なデータレイクにおける限定的なセキュリティ制御の課題に対応します。                                              |
| 5 | **BI ツールのサポート**    | レイクハウスは標準的な BI ツールと互換性を持たせるための SQL インターフェースと最適化を提供し、可視化前に追加の処理レイヤーを必要とする従来型のデータレイクとは異なります。                           |



## ClickHouse はデータレイクハウスアーキテクチャにおいてどこに位置付けられるのか？ {#where-does-clickhouse-fit-in-the-data-lakehouse-architecture}

ClickHouse は、モダンなデータレイクハウスエコシステムにおける強力な分析用
クエリエンジンです。大規模なデータを分析するための高性能な選択肢を
組織に提供します。ClickHouse は、その卓越したクエリ速度と効率性により、
非常に魅力的な選択肢となっています。

レイクハウスアーキテクチャにおいて、ClickHouse は基盤となるデータと柔軟に
連携できる、専用の処理レイヤーとして機能します。S3、Azure Blob Storage、
Google Cloud Storage といったクラウドオブジェクトストレージに保存された
Parquet ファイルを直接クエリでき、最適化されたカラム型処理機能を活用することで、
巨大なデータセットに対しても高速な結果を提供します。
この直接クエリ機能により、組織は複雑なデータ移動や変換処理を行うことなく、
レイク上のデータを分析できます。

ClickHouse は Apache Iceberg、Delta Lake、Apache Hudi などのオープンな
テーブルフォーマットと連携し、より高度なデータ管理ニーズにも対応します。
この連携により、ClickHouse はこれらのフォーマットが備える高度な機能を
活用しつつ、ClickHouse 本来の優れたクエリパフォーマンスを維持できます。
組織はこれらのテーブルフォーマットと直接統合することも、AWS Glue、Unity、
その他のカタログサービスといったメタデータカタログを介して接続することも
できます。

レイクハウスアーキテクチャに ClickHouse をクエリエンジンとして組み込むことで、
組織はレイク上のデータに対してきわめて高速な分析クエリを実行しつつ、
レイクハウスアプローチを特徴づける柔軟性とオープン性を維持できます。
この組み合わせにより、コンポーネントの交換可能性、オープンフォーマット、
統合的なデータ管理といったレイクハウスモデルの中核的な利点を損なうことなく、
特化型分析データベースに匹敵するパフォーマンス特性を実現できます。



## ハイブリッドアーキテクチャ: 両者の長所を兼ね備える {#hybrid-architecture-the-best-of-both-worlds}

ClickHouse はレイクハウスコンポーネントに対するクエリで優れた性能を発揮しますが、その高度に最適化された
ストレージエンジンには、さらに大きな利点があります。リアルタイムダッシュボード、運用分析、
インタラクティブなユーザー体験など、超低レイテンシのクエリが求められるユースケースでは、
パフォーマンスが重要なデータを選択的に ClickHouse ネイティブ形式で直接保存できます。このハイブリッドな
アプローチにより、時間に敏感な分析に対しては ClickHouse の専用ストレージによる比類のないクエリ速度を得つつ、
必要に応じてより広範なデータレイクハウスに対してクエリを実行できるという、両者の長所を享受できます。

この二つの特性により、組織は階層化されたデータ戦略を実装できます。すなわち、頻繁にアクセスされるホットデータは
サブセカンド応答のクエリ向けに ClickHouse の最適化ストレージに配置しつつ、完全なデータ履歴には
レイクハウス上からシームレスにアクセスできるようにする、という構成です。これによりチームは、
技術的な制約ではなくパフォーマンス要件に基づいてアーキテクチャ上の判断を行えます。重要なワークロードに対しては
超高速な分析データベースとして ClickHouse を活用しつつ、より広範なデータエコシステムに対しては
柔軟なクエリエンジンとして利用できます。
