---
slug: /changelogs/25.6
title: 'Cloud 向け v25.6 変更履歴'
description: 'Fast リリースチャネル向け v25.6 の変更履歴'
keywords: ['変更履歴', 'cloud']
sidebar_label: '25.6'
sidebar_position: 3
doc_type: 'changelog'
---

## 後方互換性のない変更 \\{#backward-incompatible-change\\}

* 関数 `geoToH3()` は、入力を (lat, lon,res) の順序（ジオメトリ関数における標準的な順序）で受け付けるようになりました。従来の入力順序 (lon, lat,res) に基づく結果を維持したいユーザーは、設定 `geotoh3_lon_lat_input_order = true` を有効にできます。[#78852](https://github.com/ClickHouse/ClickHouse/pull/78852) ([Pratima Patel](https://github.com/pratimapatel2008)).
* `full_text` 型のインデックスは `gin` にリネームされました。これは PostgreSQL やその他のデータベースでより一般的な用語に合わせたものです。既存の `full_text` 型インデックスは引き続きロード可能ですが、検索で使用しようとすると例外をスローします（代わりに `gin` インデックスを使用するよう提案されます）。[#79024](https://github.com/ClickHouse/ClickHouse/pull/79024) ([Robert Schulze](https://github.com/rschu1ze)).
* ファイルシステムキャッシュ設定 `allow_dynamic_cache_resize` を追加しました。デフォルトは `false` で、ファイルシステムキャッシュの動的リサイズを許可するかどうかを制御します。理由: 特定の環境（ClickHouse Cloud）では、すべてのスケーリングイベントはプロセスの再起動によって行われ、この機能を明示的に無効化しておくことで挙動をより厳密に制御し、安全性も高めたいからです。この PR は後方互換性のない変更としてマークされています。これは、古いバージョンでは特別な設定なしで動的キャッシュリサイズがデフォルトで有効だったためです。[#79148](https://github.com/ClickHouse/ClickHouse/pull/79148) ([Kseniia Sumarokova](https://github.com/kssenii)).
* レガシーインデックスタイプ `annoy` と `usearch` のサポートを削除しました。どちらも長い間スタブとなっており、レガシーインデックスを使用しようとする試みはすべてエラーを返していました。まだ `annoy` および `usearch` インデックスを保持している場合は、削除してください。[#79802](https://github.com/ClickHouse/ClickHouse/pull/79802) ([Robert Schulze](https://github.com/rschu1ze)).
#* サーバー設定 `format_alter_commands_with_parentheses` を削除しました。この設定は 24.2 で導入され、デフォルトでは無効化されていました。25.2 でデフォルト有効になりました。新しいフォーマットをサポートしない LTS バージョンは存在しないため、この設定を削除できます。[#79970](https://github.com/ClickHouse/ClickHouse/pull/79970) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
#* マイナー変更: サーバー設定 backup_threads および restore_threads をゼロ以外の値に強制します。[#80224](https://github.com/ClickHouse/ClickHouse/pull/80224) ([Raúl Marín](https://github.com/Algunenano)).
* String 型に対する bitNot() が、ゼロ終端文字列を返すように修正しました。[#80791](https://github.com/ClickHouse/ClickHouse/pull/80791) ([Azat Khuzhin](https://github.com/azat)).

## 新機能 \\{#new-feature\\}

* `CREATE` クエリで対象カラムに対して圧縮コーデックが明示的に定義されていない場合に使用されるデフォルトの圧縮コーデックを指定できるよう、MergeTree の `SETTINGS` に新しいオプションを追加しました。これにより [#42005](https://github.com/ClickHouse/ClickHouse/issues/42005) が解決されました。 [#66394](https://github.com/ClickHouse/ClickHouse/pull/66394) ([gvoelfin](https://github.com/gvoelfin))。
* [https://github.com/ClickHouse/ClickHouse/pull/71943](https://github.com/ClickHouse/ClickHouse/pull/71943) に対するフォローアップです。この PR では `Time` / `Time64` データ型を実装します。新しいデータ型として Time (HHH:MM:SS) と Time64 (HHH:MM:SS.`&lt;fractional&gt;`) を追加し、いくつかの基本的なキャスト関数および他のデータ型と相互運用するための関数を実装しました。また、キャスト関数で `toTime` 関数が必要になるため、既存の関数名 `toTime` を `toTimeWithFixedDate` に変更しました。[#75735](https://github.com/ClickHouse/ClickHouse/pull/75735)（[Yarik Briukhovetskyi](https://github.com/yariks5s)）。
* `WHERE` 句内の `EXISTS` 式の引数として相関サブクエリをサポートしました。[#72459](https://github.com/ClickHouse/ClickHouse/issues/72459) をクローズしました。[#76078](https://github.com/ClickHouse/ClickHouse/pull/76078)（[Dmitry Novik](https://github.com/novikd)）。
* Merge テーブルエンジンへの書き込みを許可しました。 [#77484](https://github.com/ClickHouse/ClickHouse/pull/77484) ([Anton Ivashkin](https://github.com/ianton-ru)).
* レプリケートされた MergeTree テーブル向けの分散 `INSERT SELECT` では、異なるノードで異なるデータを選択して独立に挿入することで、`INSERT` を並列化するために parallel replicas を効率的に利用するようになりました。 [#78041](https://github.com/ClickHouse/ClickHouse/pull/78041) ([Igor Nikonov](https://github.com/devcrafter))。
* `mapContainsValuesLike`/`mapContainsValues`/`mapExtractValuesLike` 関数を追加し、map の値を対象としたフィルタリングと、bloom filter ベースのインデックスでのサポートを可能にしました。 [#78171](https://github.com/ClickHouse/ClickHouse/pull/78171) ([UnamedRus](https://github.com/UnamedRus))。
* `system.iceberg_history` テーブルを追加しました。 [#78244](https://github.com/ClickHouse/ClickHouse/pull/78244) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* ワークロード用にクエリスロットのスケジューリング機能を追加しました。詳細は [https://clickhouse.com/docs/operations/workload-scheduling#query&#95;scheduling](https://clickhouse.com/docs/operations/workload-scheduling#query_scheduling) を参照してください。 [#78415](https://github.com/ClickHouse/ClickHouse/pull/78415) ([Sergei Trifonov](https://github.com/serxa)).
* `getServerSetting` 関数と `getMergeTreeSetting` 関数を追加し、[https://github.com/clickhouse/clickhouse/issues/78318](https://github.com/clickhouse/clickhouse/issues/78318) をクローズ。 [#78439](https://github.com/ClickHouse/ClickHouse/pull/78439)（[NamNguyenHoai](https://github.com/NamHoaiNguyen)）。
* 設定制約で許可されない値の指定をサポート。[#78499](https://github.com/ClickHouse/ClickHouse/pull/78499) ([Bharat Nallan](https://github.com/bharatnc))。
* `version-hint.text` ファイルを活用するための新しい設定 `iceberg_enable_version_hint` を追加しました。 [#78594](https://github.com/ClickHouse/ClickHouse/pull/78594) ([Arnaud Briche](https://github.com/arnaudbriche)).
* `LIKE` キーワードでフィルタリングしたデータベース内の特定のテーブルを TRUNCATE できるようになりました。 [#78597](https://github.com/ClickHouse/ClickHouse/pull/78597) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* `clickhouse-local`（およびその短縮エイリアスである `ch`）は、処理対象の入力データが存在する場合に暗黙的な `FROM table` を使用するようになりました。これにより、[#65023](https://github.com/ClickHouse/ClickHouse/issues/65023) が解決しました。また、通常のファイルを処理する際に `--input-format` が指定されていない場合、`clickhouse-local` でフォーマットの自動推論が有効になりました。[#79085](https://github.com/ClickHouse/ClickHouse/pull/79085)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* [`icebergHash`](https://iceberg.apache.org/spec/#appendix-b-32-bit-hash-requirements) と [`icebergBucketTransform`](https://iceberg.apache.org/spec/#bucket-transform-details) 関数を追加し、[`bucket transfom`](https://iceberg.apache.org/spec/#partitioning) でパーティション分割された `Iceberg` テーブルにおけるデータファイルのプルーニングをサポートします。[#79262](https://github.com/ClickHouse/ClickHouse/pull/79262) ([Daniil Ivanik](https://github.com/divanik))。
* CoalescingMergeTree のサポートを追加しました。これにより [#78869](https://github.com/ClickHouse/ClickHouse/issues/78869) がクローズされました。[#79344](https://github.com/ClickHouse/ClickHouse/pull/79344) ([Konstantin Vedernikov](https://github.com/scanhex12))。
* ランダムまたは暗号化されている可能性のあるデータを検索するための `stringBytesUniq` 関数および `stringBytesEntropy` 関数を追加しました。 [#79350](https://github.com/ClickHouse/ClickHouse/pull/79350) ([Sachin Kumar Singh](https://github.com/sachinkumarsingh092))。
* MergeTree ファミリーのテーブルで `_part_starting_offset` 仮想カラムをサポートしました。このカラムは、現在のパーツ一覧に基づいてクエリ時に計算される、すべての先行パーツの累積行数を表します。累積値はクエリ実行全体を通じて保持され、パーツのプルーニング後も有効なままです。この挙動をサポートするために、関連する内部ロジックがリファクタリングされました。 [#79417](https://github.com/ClickHouse/ClickHouse/pull/79417) ([Amos Bird](https://github.com/amosbird))。
* 単一のクエリ内に含まれるすべてのサブクエリで同じストレージスナップショットを共有できるようにする設定 `enable_shared_storage_snapshot_in_query` を追加しました。これにより、クエリ内で同じテーブルを複数回参照する場合でも、そのテーブルから一貫した読み取りが行えます。 [#79471](https://github.com/ClickHouse/ClickHouse/pull/79471) ([Amos Bird](https://github.com/amosbird))。
* CH JSON 列を Parquet 形式に書き出すことと、Parquet の JSON 列を CH JSON 列として直接読み込むことをサポートしました。 [#79649](https://github.com/ClickHouse/ClickHouse/pull/79649) ([Nihal Z. Miaji](https://github.com/nihalzp))。
* [`chdig`](https://github.com/azat/chdig/) を ClickHouse に同梱しました。ClickHouse の一部として動作する、`top` 風の TUI インターフェイスです。[#79666](https://github.com/ClickHouse/ClickHouse/pull/79666)（[Azat Khuzhin](https://github.com/azat)）。
* `pointInPolygon` で `MultiPolygon` をサポートするようにしました。 [#79773](https://github.com/ClickHouse/ClickHouse/pull/79773) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Geo Parquet をサポートしました。これにより [#75317](https://github.com/ClickHouse/ClickHouse/issues/75317) がクローズされます。 [#79777](https://github.com/ClickHouse/ClickHouse/pull/79777) ([Konstantin Vedernikov](https://github.com/scanhex12))。
* ローカルファイルシステムにマウントされた Delta テーブルを `deltaLakeLocal` テーブル関数でクエリできるようにサポートを追加しました。 [#79781](https://github.com/ClickHouse/ClickHouse/pull/79781) ([roykim98](https://github.com/roykim98)).
* Base32 のエンコード／デコード機能を追加しました。 [#79809](https://github.com/ClickHouse/ClickHouse/pull/79809) ([Joanna Hulboj](https://github.com/jh0x)).
* ClickHouse ベクトル検索は、事前フィルタリングと事後フィルタリングの両方をサポートするようになり、より細かな制御のための関連設定も提供されます。(issue [#78161](https://github.com/ClickHouse/ClickHouse/issues/78161))。[#79854](https://github.com/ClickHouse/ClickHouse/pull/79854)（[Shankar Iyer](https://github.com/shankar-iyer)）。
* WKB 形式の読み取りをサポートする関数を追加しました。これにより、[#43941](https://github.com/ClickHouse/ClickHouse/issues/43941) が一部解決されます。 [#80139](https://github.com/ClickHouse/ClickHouse/pull/80139) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* String 型から DateTime 型へのキャスト時に DateTime の解析モードを選択できる新しい設定 `cast_string_to_date_time_mode` を追加しました。 [#80210](https://github.com/ClickHouse/ClickHouse/pull/80210) ([Pavel Kruglov](https://github.com/Avogar)).
* `Bech32` と `Bech32m` のエンコードおよびデコード関数を追加しました (issue [#40381](https://github.com/ClickHouse/ClickHouse/issues/40381))。 [#80239](https://github.com/ClickHouse/ClickHouse/pull/80239) ([George Larionov](https://github.com/glarik))。
* Atomic および Ordinary データベースエンジンで `disk` 設定をサポートし、テーブルのメタデータファイルを保存するディスクを指定できるようにしました。 [#80546](https://github.com/ClickHouse/ClickHouse/pull/80546) ([Tuan Pham Anh](https://github.com/tuanpach))。
* MergeTree パーツを展開および比較するためのサポート関数を追加。 [#80573](https://github.com/ClickHouse/ClickHouse/pull/80573) ([Mikhail Artemenko](https://github.com/Michicosun)).
* `timeSeries*` ヘルパー関数は、時系列データを扱う際の一部の処理を高速化するためのものです。具体的には次の機能を提供します: - 指定した開始タイムスタンプ、終了タイムスタンプ、およびステップに従って、データを時間グリッドに再サンプリングする - PromQL 互換の `delta`、`rate`、`idelta`、`irate` を計算する。 [#80590](https://github.com/ClickHouse/ClickHouse/pull/80590) ([Alexander Gololobov](https://github.com/davenger)).
* クエリ対象として選択されたパーツを、配置されているディスク単位でフィルタリングできるようにしました。 [#80650](https://github.com/ClickHouse/ClickHouse/pull/80650) ([tanner-bruce](https://github.com/tanner-bruce)).
* 埋め込み Web ツールの一覧を表示するランディングページを追加。ブラウザライクなユーザーエージェントから要求されたときに開きます。 [#81129](https://github.com/ClickHouse/ClickHouse/pull/81129) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `arrayFirst`、`arrayFirstIndex`、`arrayLast`、`arrayLastIndex` で `NULL` 値をフィルタリング可能にしました。 [#81113](https://github.com/ClickHouse/ClickHouse/issues/81113) を修正。 [#81197](https://github.com/ClickHouse/ClickHouse/pull/81197)（[Lennard Eijsackers](https://github.com/Blokje5)）。

## 実験的な機能 \\{#experimental-feature\\}

* Iceberg データレイク向けの Hive metastore カタログ。[#77677](https://github.com/ClickHouse/ClickHouse/pull/77677) ([Konstantin Vedernikov](https://github.com/scanhex12))。
* 明示的なパラメータはキー・バリュー形式で指定できます。現在サポートされているパラメータは、必須の `tokenizer` と、任意の `max_rows_per_postings_list` および `ngram_size` です。[#80262](https://github.com/ClickHouse/ClickHouse/pull/80262) ([Elmi Ahmadov](https://github.com/ahmadov))。
* `gin` 型の実験的な索引は `text` に名称変更されました。既存の `gin` 型の索引は引き続きロード可能ですが、検索で使用しようとすると例外がスローされ（代わりに `text` 索引の使用を提案します）、利用できません。[#80855](https://github.com/ClickHouse/ClickHouse/pull/80855) ([Robert Schulze](https://github.com/rschu1ze))。

## パフォーマンスの向上 \\{#performance-improvement\\}

* 複数のグラニュールに対して一度に式を評価することで、セカンダリインデックスを高速化しました。 [#64109](https://github.com/ClickHouse/ClickHouse/pull/64109) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `parallel_hash_join_threshold` 設定で制御されるしきい値を導入し、右テーブルのサイズがこのしきい値未満の場合に `hash` アルゴリズムへフォールバックするようにしました。 [#76185](https://github.com/ClickHouse/ClickHouse/pull/76185) ([Nikita Taranov](https://github.com/nickitat))。
* 現在の `Pipe::resize` の実装では、パイプラインのトポロジーに単一の `Resize` または `StrictResize` ノードを挿入することで、それを作成し、このノードがすべての入力ストリーム（上流ノード）を統一された出力ストリーム集合（下流ノード）へと接続する中央ハブとして機能します。この設計により、特にコア数の多い環境では、パイプライングラフの実行中に `ExecutingGraph::Node::status_mutex` への競合が発生します。パイプラインが数十から数百のストリームにスケールすると、この競合により次のような結果が生じます。[#77562](https://github.com/ClickHouse/ClickHouse/pull/77562) ([Zhiguo Zhou](https://github.com/ZhiguoZh)).
* `S3Queue`/`AzureQueue` のパフォーマンスを、`INSERT` の実行を並列化できるようにすることで改善しました（`parallel_inserts=true` キュー設定で有効化可能）。これまでは `S3Queue`/`AzureQueue` はパイプラインの最初の部分（ダウンロードとパース）だけを並列化でき、`INSERT` は単一スレッドでした。そして `INSERT` がボトルネックになることがほとんどです。今回の変更により、`processing_threads_num` に対してほぼ線形にスケールするようになります。 [#77671](https://github.com/ClickHouse/ClickHouse/pull/77671) ([Azat Khuzhin](https://github.com/azat)).
* コンパクトパートの形式を変更し、各サブストリームのマークを保存して個々のサブカラムを読み取れるようにしました。従来のコンパクト形式は読み取りでは引き続きサポートされ、書き込みでは MergeTree 設定 `write_marks_for_substreams_in_compact_parts` を使用して有効化できます。コンパクトパートのストレージ形式が変わるため、より安全にアップグレードできるよう、デフォルトでは無効になっています。今後のいずれかのリリースでデフォルト有効化される予定です。 [#77940](https://github.com/ClickHouse/ClickHouse/pull/77940) ([Pavel Kruglov](https://github.com/Avogar))。
* 新しい設定 `use_skip_indexes_in_final_exact_mode` が導入されました。`ReplacingMergeTree` テーブルに対するクエリで `FINAL` 句が指定されている場合、スキップインデックスに基づいてテーブル範囲のみを読み取ると、誤った結果が返される可能性があります。この設定を使用すると、スキップインデックスによって返されたプライマリキー範囲と重複する、より新しいパーツをスキャンすることで、正しい結果が返されるようにできます。無効化するには 0、有効化するには 1 を設定します。[#78350](https://github.com/ClickHouse/ClickHouse/pull/78350)（[Shankar Iyer](https://github.com/shankar-iyer)）。
* これにより、並列レプリカを有効にした読み取り時のタスクサイズを、レプリカ数に基づいて決定するようになりました。これによって、読み取るデータ量がそれほど大きくない場合でも、レプリカ間の負荷分散が改善されます。 [#78695](https://github.com/ClickHouse/ClickHouse/pull/78695) ([Nikita Taranov](https://github.com/nickitat)).
* 分散集約の最終段階で `uniqExact` 状態を並列にマージできるようにしました。 [#78703](https://github.com/ClickHouse/ClickHouse/pull/78703) ([Nikita Taranov](https://github.com/nickitat))。
* キー付き集約における `uniqExact` 状態の並列マージで発生し得るパフォーマンス低下を修正。 [#78724](https://github.com/ClickHouse/ClickHouse/pull/78724) ([Nikita Taranov](https://github.com/nickitat)).
  #* `DELETE FROM ... WHERE 1` クエリを `TRUNCATE` に置き換え（後にリバート）。 [#78739](https://github.com/ClickHouse/ClickHouse/pull/78739) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Azure Storage に対する List Blobs API の呼び出し回数を削減。 [#78860](https://github.com/ClickHouse/ClickHouse/pull/78860) ([Julia Kartseva](https://github.com/jkartseva)).
* 可能な場合は、フィルタークエリプランステップから等価条件を `JOIN` 条件に統合し、ハッシュテーブルのキーとして利用できるようにしました。 [#78877](https://github.com/ClickHouse/ClickHouse/pull/78877) ([Dmitry Novik](https://github.com/novikd)).
* 正規表現の代わりに `extractKeyValuePairs` を使用することで、Hive パス解析の性能を改善しました。 [#79067](https://github.com/ClickHouse/ClickHouse/pull/79067) ([Arthur Passos](https://github.com/arthurpassos)).
* 並列レプリカ対応の分散 `INSERT SELECT` のパフォーマンスを改善しました。[#79441](https://github.com/ClickHouse/ClickHouse/pull/79441) ([Azat Khuzhin](https://github.com/azat))。
* サブカラムを含む条件式を `PREWHERE` に移動できるようにしました。 [#79489](https://github.com/ClickHouse/ClickHouse/pull/79489) ([Pavel Kruglov](https://github.com/Avogar)).
* すべての Bloom Filter 種別においてパフォーマンスを改善しました。 [#79800](https://github.com/ClickHouse/ClickHouse/pull/79800) ([Delyan Kratunov](https://github.com/dkratunov)).
* 高い並行性のシナリオにおいてロック競合とパフォーマンス低下を避けるために、`LogSeriesLimiter` がインスタンス生成のたびにクリーンアップを実行しないようにしました。 [#79864](https://github.com/ClickHouse/ClickHouse/pull/79864) ([filimonov](https://github.com/filimonov)).
* `compile_expressions`（通常の式の断片向けのJITコンパイラ）をデフォルトで有効化しました。これにより [#51264](https://github.com/ClickHouse/ClickHouse/issues/51264) と [#56386](https://github.com/ClickHouse/ClickHouse/issues/56386) および [#66486](https://github.com/ClickHouse/ClickHouse/issues/66486) が解決されました。[#79907](https://github.com/ClickHouse/ClickHouse/pull/79907)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* 単純な count の最適化によりクエリを高速化。 [#79945](https://github.com/ClickHouse/ClickHouse/pull/79945) ([Raúl Marín](https://github.com/Algunenano)).
* `UniqExactSet::merge` において、一方のセットが空の場合の高速な処理パスを導入しました。また、左辺のセットが2レベル構造で右辺が1レベル構造の場合でも、右辺を2レベル構造に変換しないようにしました。 [#79971](https://github.com/ClickHouse/ClickHouse/pull/79971) ([Nikita Taranov](https://github.com/nickitat)).
* `__attribute__((always_inline))` を `convertDecimalsImpl` に追加しました。 [#79999](https://github.com/ClickHouse/ClickHouse/pull/79999) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* `input_format_parquet_bloom_filter_push_down` をデフォルトで true に設定しました。また、設定変更履歴の誤りを修正しました。 [#80058](https://github.com/ClickHouse/ClickHouse/pull/80058) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
  #* ログ記録をデフォルトで非同期にしました。`<logger>` セクションで `<async>false</async>` を設定することで無効化できます。 [#80125](https://github.com/ClickHouse/ClickHouse/pull/80125) ([Raúl Marín](https://github.com/Algunenano)).
* 2 レベルのハッシュテーブル使用時におけるメモリ再利用効率を改善し、ページフォールトを削減しました。 [#80245](https://github.com/ClickHouse/ClickHouse/pull/80245) ([Jiebin Sun](https://github.com/jiebinn)).
* QueryConditionCache において不要な更新を避け、ロック競合を削減しました。 [#80247](https://github.com/ClickHouse/ClickHouse/pull/80247) ([Jiebin Sun](https://github.com/jiebinn)).
* 並列ハッシュ結合に役立つ可能性がある、`concatenateBlocks` の小規模な最適化。[#80328](https://github.com/ClickHouse/ClickHouse/pull/80328)（[李扬](https://github.com/taiyang-li)）。
* 主キー範囲からマーク範囲を選択する際、主キーが関数でラップされていると二分探索は使用できませんでした。この PR ではこの制限を緩和し、主キーが常に単調な関数チェーンでラップされている場合、または RPN に常に真となる要素が含まれている場合でも、二分探索を適用できるようにしました。この PR は [#45536](https://github.com/ClickHouse/ClickHouse/issues/45536) をクローズします。 [#80597](https://github.com/ClickHouse/ClickHouse/pull/80597) ([zoomxi](https://github.com/zoomxi))。
* Kafka エンジンのシャットダウン速度を改善しました（複数の Kafka テーブルがある場合に発生していた追加の 3 秒の遅延を削除）。 [#80796](https://github.com/ClickHouse/ClickHouse/pull/80796) ([Azat Khuzhin](https://github.com/azat)).
* 非同期挿入のメモリ使用量を削減し、INSERT クエリのパフォーマンスを向上します。 [#80972](https://github.com/ClickHouse/ClickHouse/pull/80972) ([Raúl Marín](https://github.com/Algunenano)).
* ログテーブルが無効化されている場合はプロセッサのプロファイリングを行わないようにしました。 [#81256](https://github.com/ClickHouse/ClickHouse/pull/81256) ([Raúl Marín](https://github.com/Algunenano)).
* ソースが要求どおりである場合の `toFixedString` を高速化。[#81257](https://github.com/ClickHouse/ClickHouse/pull/81257) ([Raúl Marín](https://github.com/Algunenano)).
* ユーザーにクォータ制限がない場合はクォータ値を処理しません。 [#81549](https://github.com/ClickHouse/ClickHouse/pull/81549) ([Raúl Marín](https://github.com/Algunenano)).
* ProcfsMetricsProvider を thread&#95;local にして、タスク間でファイルを開いたまま保持するようにしました。 [#81576](https://github.com/ClickHouse/ClickHouse/pull/81576) ([Raúl Marín](https://github.com/Algunenano)).
* メモリトラッキングで発生していたパフォーマンス低下を修正しました。 [#81694](https://github.com/ClickHouse/ClickHouse/pull/81694) ([Michael Kolupaev](https://github.com/al13n321)).

## 改良 \\{#improvement\\}

#* `clickhouse-local` は、`--path` コマンドライン引数を指定した場合、再起動してもデータベースを保持するようになりました。これにより、[#50647](https://github.com/ClickHouse/ClickHouse/issues/50647) および [#49947](https://github.com/ClickHouse/ClickHouse/issues/49947) が解決されました。[#71722](https://github.com/ClickHouse/ClickHouse/pull/71722)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。

* `EXPLAIN SYNTAX` は新しいアナライザを使用するようになりました。クエリツリーから構築された抽象構文木 (AST) を返します。クエリツリーを AST に変換する前に実行されるパス数を制御するためのオプション `query_tree_passes` を追加しました。 [#74536](https://github.com/ClickHouse/ClickHouse/pull/74536) ([Vladimir Cherkasov](https://github.com/vdimir)).
  #* デフォルトでファイルシステムキャッシュに SLRU キャッシュポリシーを使用するようにしました。 [#75072](https://github.com/ClickHouse/ClickHouse/pull/75072) ([Kseniia Sumarokova](https://github.com/kssenii)).
* VIEW へのデータプッシュロジックをリファクタリングしました。 [#77309](https://github.com/ClickHouse/ClickHouse/pull/77309) ([Sema Checherinda](https://github.com/CheSema)).
* オブジェクトストレージクラスターテーブル関数（例：`s3Cluster`）は、キャッシュの局所性を高めるため、一貫性ハッシュに基づいて読み取り対象のファイルを各レプリカに割り当てるようになりました。 [#77326](https://github.com/ClickHouse/ClickHouse/pull/77326)（[Andrej Hoos](https://github.com/adikus)）。
* エラー `AuthenticationRequired` が発生した後に S3 認証情報を更新するようにしました。 [#77353](https://github.com/ClickHouse/ClickHouse/pull/77353) ([Vitaly Baranov](https://github.com/vitlibar)).
* ビルダーを用いて、一部の HTTP バッファにプロキシ設定を埋め込めるようにしました。 [#77693](https://github.com/ClickHouse/ClickHouse/pull/77693) ([Arthur Passos](https://github.com/arthurpassos)).
* `system.asynchronous_metrics` に Dictionary メトリクスを追加しました。- `DictionaryMaxUpdateDelay` - Dictionary の更新における最大遅延時間（秒）。- `DictionaryTotalFailedUpdates` - 直近の正常な読み込み以降、すべての Dictionary で発生したエラーの合計数。[#78175](https://github.com/ClickHouse/ClickHouse/pull/78175) ([Vlad](https://github.com/codeworse))。
* 右側の引数がゼロの場合に NULL を返す `divideOrNull`、`moduloOrNull`、`intDivOrNull`、`positiveModuloOrNull` 関数を追加。 [#78276](https://github.com/ClickHouse/ClickHouse/pull/78276) ([kevinyhzou](https://github.com/KevinyhZou))。
* `isIPAddressInRange` 関数を String、IPv4、IPv6、Nullable(String)、Nullable(IPv4)、Nullable(IPv6) の各データ型にも対応させました。 [#78364](https://github.com/ClickHouse/ClickHouse/pull/78364) ([YjyJeff](https://github.com/YjyJeff))。
* PostgreSQL エンジンの接続プーラー設定を動的に変更可能にしました。 [#78414](https://github.com/ClickHouse/ClickHouse/pull/78414) ([Samay Sharma](https://github.com/samay-sharma)).
* 通常の PROJECTION で `_part_offset` を指定可能にしました。これは PROJECTION 索引を構築するための最初のステップとなります。 [#58224](https://github.com/ClickHouse/ClickHouse/issues/58224) と併用でき、[https://github.com/ClickHouse/ClickHouse/pull/63207](https://github.com/ClickHouse/ClickHouse/pull/63207) の改善に役立ちます。 [#78429](https://github.com/ClickHouse/ClickHouse/pull/78429) ([Amos Bird](https://github.com/amosbird))。
* 分散クエリに対するシャーディングキーの最適化を改善しました。 [#78452](https://github.com/ClickHouse/ClickHouse/pull/78452) ([fhw12345](https://github.com/fhw12345)).
* `system.named_collections` に `create_query` と `source` という新しいカラムを追加。 [#78179](https://github.com/ClickHouse/ClickHouse/issues/78179) をクローズ。 [#78582](https://github.com/ClickHouse/ClickHouse/pull/78582)（[MikhailBurdukov](https://github.com/MikhailBurdukov)）。
* システムテーブル `system.query_condition_cache` にフィールド `condition` を追加しました。これは、クエリ条件キャッシュのキーとして使用されるハッシュの元になるプレーンテキストの条件式を保存します。[#78671](https://github.com/ClickHouse/ClickHouse/pull/78671) ([Robert Schulze](https://github.com/rschu1ze)).
* ClickHouse Keeper を使用して StorageKafka2 向けに Kafka のリバランスと同様のロジックを実装しました。各レプリカについて、パーティションロックには恒久ロックと一時ロックの 2 種類をサポートします。レプリカは可能な限り長く恒久ロックを保持しようとし、任意の時点でそのレプリカ上に存在できる恒久ロックの数は `all_topic_partitions / active_replicas_count`（ここで `all_topic_partitions` はすべてのパーティション数、`active_replicas_count` はアクティブなレプリカの数）を超えません。これを超えた場合、そのレプリカはいくつかのパーティションを解放します。一部のパーティションはレプリカによって一時的に保持されます。レプリカ上の一時ロックの最大数は、他のレプリカが一部のパーティションを恒久ロックとして取得できるように、動的に変化します。一時ロックを更新する際、レプリカはいったんそれらをすべて解放し、再度別のパーティションを取得しようとします。[#78726](https://github.com/ClickHouse/ClickHouse/pull/78726)（[Daria Fomina](https://github.com/sinfillo)）。
* `Kafka` テーブルエンジンに SASL 構成および認証情報用のテーブル設定を追加しました。これにより、設定ファイルや名前付きコレクションを使用せずに、`CREATE TABLE` ステートメント内で Kafka および Kafka 互換システムへの SASL ベースの認証を直接構成できるようになります。 [#78810](https://github.com/ClickHouse/ClickHouse/pull/78810) ([Christoph Wurm](https://github.com/cwurm))。
* 破損したテーブルを保存するために作成された可能性のあるデータベースに関する警告を追加しました。 [#78841](https://github.com/ClickHouse/ClickHouse/pull/78841) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* `BFloat16` カラムに対してベクトル類似性索引を作成できるようになりました。 [#78850](https://github.com/ClickHouse/ClickHouse/pull/78850) ([Robert Schulze](https://github.com/rschu1ze)).
* ベストエフォートの DateTime64 解析で、小数部を含む Unix タイムスタンプをサポート。 [#78908](https://github.com/ClickHouse/ClickHouse/pull/78908) ([Pavel Kruglov](https://github.com/Avogar)).
* DeltaLake ストレージの delta-kernel 実装において columnMappingMode.name の不具合を修正し、スキーマ進化向けのテストを追加しました。 [#78921](https://github.com/ClickHouse/ClickHouse/pull/78921) ([Kseniia Sumarokova](https://github.com/kssenii)).
* 値の変換を改善することで、Values フォーマットから Variant カラムへの挿入処理を改良。 [#78923](https://github.com/ClickHouse/ClickHouse/pull/78923) ([Pavel Kruglov](https://github.com/Avogar)).
* `S3Queue` エンジンに `_time` 仮想カラムを追加しました。 [#78926](https://github.com/ClickHouse/ClickHouse/pull/78926) ([Anton Ivashkin](https://github.com/ianton-ru)).
* `tokens` 関数は拡張され、追加の「tokenizer」引数および tokenizer 固有の追加引数を受け取れるようになりました。 [#79001](https://github.com/ClickHouse/ClickHouse/pull/79001) ([Elmi Ahmadov](https://github.com/ahmadov))
* `SHOW CLUSTER` ステートメントは、引数内のマクロ（ある場合）を展開するようになりました。 [#79006](https://github.com/ClickHouse/ClickHouse/pull/79006) ([arf42](https://github.com/arf42))。
* ハッシュ関数で、配列、タプル、マップ内の `NULL` をサポートするようになりました（issues [#48365](https://github.com/ClickHouse/ClickHouse/issues/48365) および [#48623](https://github.com/ClickHouse/ClickHouse/issues/48623)）。[#79008](https://github.com/ClickHouse/ClickHouse/pull/79008)（[Michael Kolupaev](https://github.com/al13n321)）。
* 読み取り専用MergeTreeテーブルでのリフレッシュをサポート。 [#79033](https://github.com/ClickHouse/ClickHouse/pull/79033) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
  #* cctz を 2025a に更新。 [#79043](https://github.com/ClickHouse/ClickHouse/pull/79043) ([Raúl Marín](https://github.com/Algunenano)).
* CPU が過負荷のときに接続をドロップする設定をホットリロード可能にしました。 [#79052](https://github.com/ClickHouse/ClickHouse/pull/79052) ([Alexey Katsman](https://github.com/alexkats)).
* 使い勝手が向上します。 [#79066](https://github.com/ClickHouse/ClickHouse/pull/79066) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* デフォルトでクエリ条件キャッシュを有効化しました。 [#79080](https://github.com/ClickHouse/ClickHouse/pull/79080) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
  #* Web UI でタブを元に戻せるようにしました。これにより [#71284](https://github.com/ClickHouse/ClickHouse/issues/71284) がクローズされました。 [#79084](https://github.com/ClickHouse/ClickHouse/pull/79084) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
* `recoverLostReplica` 中の settings を、[https://github.com/ClickHouse/ClickHouse/pull/78637](https://github.com/ClickHouse/ClickHouse/pull/78637) と同様に削除しました。[#79113](https://github.com/ClickHouse/ClickHouse/pull/79113)（[Nikita Mikhaylov](https://github.com/nikitamikhaylov)）。
* Parquet の索引プルーニングをプロファイルするために、ProfileEvents ParquetReadRowGroups および ParquetPrunedRowGroups を追加しました。 [#79180](https://github.com/ClickHouse/ClickHouse/pull/79180) ([flynn](https://github.com/ucasfl)).
* Azure Blob Storage 上のプレーンディスクに対して `system.tables` で報告されるデータパスにコンテナのプレフィックスを追加し、S3 および GCP と一貫した報告になるようにしました。 [#79241](https://github.com/ClickHouse/ClickHouse/pull/79241) ([Julia Kartseva](https://github.com/jkartseva)).
* クラスタ上のデータベースに対する ALTER をサポート。 [#79242](https://github.com/ClickHouse/ClickHouse/pull/79242) ([Tuan Pham Anh](https://github.com/tuanpach)).
* QueryMetricLog の統計収集で取り逃した実行を明示的にスキップし、ログが現在時刻に追いつくまでに長時間かからないようにしました。 [#79257](https://github.com/ClickHouse/ClickHouse/pull/79257) ([Mikhail Artemenko](https://github.com/Michicosun)).
* `lightweight_deletes_sync = 0`、`apply_mutations_on_fly = 1` を設定することで、論理削除をオンザフライで適用できるようにしました。[#79281](https://github.com/ClickHouse/ClickHouse/pull/79281)（[Anton Popov](https://github.com/CurtizJ)）。
* すべての行を削除する必要があるパーツに対する `ALTER ... DELETE` の mutation を最適化しました。このような場合、mutation を実行して元のパーツを処理するのではなく、元のパーツの代わりに空のパーツが作成されるようになりました。 [#79307](https://github.com/ClickHouse/ClickHouse/pull/79307) ([Anton Popov](https://github.com/CurtizJ)).
* `CHColumnToArrowColumn` に対する細かな最適化をいくつか実施。 [#79308](https://github.com/ClickHouse/ClickHouse/pull/79308) ([Bharat Nallan](https://github.com/bharatnc)).
* `allow_archive_path_syntax` 設定は誤って experimental としてマークされていました。experimental な setting がデフォルトで有効にならないことを確認するテストを追加しました。 [#79320](https://github.com/ClickHouse/ClickHouse/pull/79320) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
* ページキャッシュ設定をクエリ単位で調整可能にしました。これは、高スループットかつ低レイテンシーなクエリに対して、迅速な検証や細かなチューニングを行えるようにするためです。 [#79337](https://github.com/ClickHouse/ClickHouse/pull/79337) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* ほとんどの 64 ビットハッシュのように見える数値については、Pretty 系フォーマットで数値のヒントを出力しないようにしました。これにより [#79334](https://github.com/ClickHouse/ClickHouse/issues/79334) がクローズされました。[#79338](https://github.com/ClickHouse/ClickHouse/pull/79338)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* ターミナルに Pretty 形式でデータが表示されていて、後続のブロックのカラム幅が同じ場合、カーソルを上に移動して前のブロックに連結し、表示を継続できます。これにより [#79333](https://github.com/ClickHouse/ClickHouse/issues/79333) が解決されました。この機能は新しい設定 `output_format_pretty_glue_chunks` によって制御されます。 [#79339](https://github.com/ClickHouse/ClickHouse/pull/79339)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* 高度なダッシュボード上のグラフの色は、対応するクエリのハッシュ値から決定されます。これにより、ダッシュボードをスクロールしているときにグラフを覚えやすく、見つけやすくなります。 [#79341](https://github.com/ClickHouse/ClickHouse/pull/79341) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `FilesystemCacheCapacity` という非同期メトリクスを追加しました。`cache` 仮想ファイルシステムの総容量を表し、グローバルなインフラストラクチャ監視に有用です。 [#79348](https://github.com/ClickHouse/ClickHouse/pull/79348) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
* system.parts へのアクセスを最適化し、要求された場合にのみカラム/索引のサイズを読み取るようにしました。 [#79352](https://github.com/ClickHouse/ClickHouse/pull/79352) ([Azat Khuzhin](https://github.com/azat)).
* クエリ `SHOW CLUSTER &lt;name&gt;` で、すべてのフィールドではなく重要なフィールドのみを選択するようにしました。 [#79368](https://github.com/ClickHouse/ClickHouse/pull/79368) ([Tuan Pham Anh](https://github.com/tuanpach)).
* `DatabaseCatalog` 用のストレージ設定を指定できるようになりました。 [#79407](https://github.com/ClickHouse/ClickHouse/pull/79407) ([Kseniia Sumarokova](https://github.com/kssenii)).
* デルタカーネルでローカルストレージをサポートしました。 [#79416](https://github.com/ClickHouse/ClickHouse/pull/79416) ([Kseniia Sumarokova](https://github.com/kssenii)).
* delta-kernel-rs を有効化するためのクエリレベルの設定 `allow_experimental_delta_kernel_rs` を追加しました。 [#79418](https://github.com/ClickHouse/ClickHouse/pull/79418) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Azure/S3 BLOB ストレージでの BLOB の一覧取得時に発生し得る無限ループを修正。 [#79425](https://github.com/ClickHouse/ClickHouse/pull/79425) ([Alexander Gololobov](https://github.com/davenger)).
* 現在、ClickHouse では `param_<name>`（アンダースコア）に加えて、`param-<name>`（ダッシュ）の形式でもクエリパラメータを受け付けるようになりました。これにより[#63093](https://github.com/ClickHouse/ClickHouse/issues/63093) がクローズされました。[#79429](https://github.com/ClickHouse/ClickHouse/pull/79429) ([Engel Danila](https://github.com/aaaengel))。
  #* ファイルシステムキャッシュ用の設定 `max_size_ratio_to_total_space` を追加しました。[#79460](https://github.com/ClickHouse/ClickHouse/pull/79460) ([Kseniia Sumarokova](https://github.com/kssenii))。
* ローカルからリモート S3 へ、チェックサムを有効にしてデータをコピーする際の帯域幅ディスカウントに関する詳細な警告メッセージ。 [#79464](https://github.com/ClickHouse/ClickHouse/pull/79464) ([VicoWu](https://github.com/VicoWu)).
* `clickhouse-benchmark` について、再接続時の挙動を制御できるように、`reconnect` オプションが 0、1、または N を値として受け取れるようにしました。[#79465](https://github.com/ClickHouse/ClickHouse/pull/79465) ([Sachin Kumar Singh](https://github.com/sachinkumarsingh092))。
* `input_format_max_block_size_bytes` という設定を追加し、入力フォーマットで作成されるブロックのサイズをバイト単位で制限できるようにしました。これにより、各行に大きな値が含まれている場合のデータインポート時に、過度なメモリ使用量を回避するのに役立ちます。 [#79495](https://github.com/ClickHouse/ClickHouse/pull/79495) ([Pavel Kruglov](https://github.com/Avogar))。
* sparseGrams の速度とメモリ使用効率を向上。 [#79517](https://github.com/ClickHouse/ClickHouse/pull/79517) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* 可能な場合には、Compact パーツへの挿入時にブロックの不要な追加コピーを避けるようにしました。 [#79536](https://github.com/ClickHouse/ClickHouse/pull/79536) ([Pavel Kruglov](https://github.com/Avogar)).
* `DeltaLake` ストレージの delta-kernel 実装をデフォルトで有効にしました。 [#79541](https://github.com/ClickHouse/ClickHouse/pull/79541) ([Kseniia Sumarokova](https://github.com/kssenii)).
* URL からの読み込み時に複数回のリダイレクトが発生する場合、`enable_url_encoding` はチェーン内のすべてのリダイレクトに正しく適用されます。 [#79563](https://github.com/ClickHouse/ClickHouse/pull/79563) ([Shankar Iyer](https://github.com/shankar-iyer)).
* 異なる plain&#95;rewritable ディスク上にあるテーブルに対しても `ALTER TABLE ... MOVE|REPLACE PARTITION` を使用できるようになりました。 [#79566](https://github.com/ClickHouse/ClickHouse/pull/79566) ([Julia Kartseva](https://github.com/jkartseva)).
* `WHERE` 句でのスカラー相関サブクエリをサポートしました。[#6697](https://github.com/ClickHouse/ClickHouse/issues/6697) をクローズします。[#79600](https://github.com/ClickHouse/ClickHouse/pull/79600) ([Dmitry Novik](https://github.com/novikd))。
* 以前は `input_format_parquet_max_block_size = 0` のときに ClickHouse がハングしていましたが、この問題は修正されました。これにより [#79394](https://github.com/ClickHouse/ClickHouse/issues/79394) がクローズされました。 [#79601](https://github.com/ClickHouse/ClickHouse/pull/79601) ([abashkeev](https://github.com/abashkeev))。
* `startup_scripts` に `throw_on_error` という設定を追加しました。`throw_on_error` が true の場合、すべてのクエリが正常に完了しない限りサーバーは起動しません。デフォルトでは `throw_on_error` は false であり、従来の動作が維持されます。 [#79732](https://github.com/ClickHouse/ClickHouse/pull/79732) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* 参照ベクトルが `Array(BFloat16)` 型である場合にも、ベクトル類似度インデックスが使用されるようになりました。 [#79745](https://github.com/ClickHouse/ClickHouse/pull/79745) ([Shankar Iyer](https://github.com/shankar-iyer)).
* `system.error_log` テーブルに `last_error_message`、`last_error_trace`、`query_id` を追加しました。関連チケット [#75816](https://github.com/ClickHouse/ClickHouse/issues/75816)。[#79836](https://github.com/ClickHouse/ClickHouse/pull/79836)（[Andrei Tinikov](https://github.com/Dolso)）。
* システムテーブル `system.functions` に、各関数が最初に導入された ClickHouse バージョンが表示されるようになりました。 [#79839](https://github.com/ClickHouse/ClickHouse/pull/79839) ([Robert Schulze](https://github.com/rschu1ze)).
* `access_control_improvements.enable_user_name_access_type` SETTING を追加しました。この SETTING により、[https://github.com/ClickHouse/ClickHouse/pull/72246](https://github.com/ClickHouse/ClickHouse/pull/72246) で導入されたユーザー／ロールに対するきめ細かな権限付与を有効化・無効化できます。レプリカが 25.1 より古いクラスタを使用している場合は、この SETTING を無効化することを検討してください。[#79842](https://github.com/ClickHouse/ClickHouse/pull/79842)（[pufit](https://github.com/pufit)）。
* `ASTSelectWithUnionQuery::clone()` メソッドの適切な実装において、`is_normalized` フィールドも考慮されるようになりました。これは [#77569](https://github.com/ClickHouse/ClickHouse/issues/77569) の改善に役立つ可能性があります。[#79909](https://github.com/ClickHouse/ClickHouse/pull/79909)（[Nikita Mikhaylov](https://github.com/nikitamikhaylov)）。
* 単純なケースで、projection リスト内の相関サブクエリをサポートしました。 [#79925](https://github.com/ClickHouse/ClickHouse/pull/79925) ([Dmitry Novik](https://github.com/novikd)).
* `EXCEPT` 演算子を使用する一部のクエリにおける一貫性のないフォーマットを修正しました。`EXCEPT` 演算子の左辺が `*` で終わる場合、フォーマット後のクエリでは括弧が失われ、その結果、`EXCEPT` 修飾子付きの `*` としてパースされてしまいます。これらのクエリは fuzzer によって検出されたものであり、実際に利用される可能性は低いと考えられます。この変更により [#79950](https://github.com/ClickHouse/ClickHouse/issues/79950) が解決されました。 [#79952](https://github.com/ClickHouse/ClickHouse/pull/79952) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
* あらゆる種類の `http_handlers` で `http_response_headers` を追加できるようにしました。 [#79975](https://github.com/ClickHouse/ClickHouse/pull/79975) ([Andrey Zvonov](https://github.com/zvonand)).
* variants のデシリアライズ順序をキャッシュすることで、JSON 型のパース処理をわずかに改善しました。 [#79984](https://github.com/ClickHouse/ClickHouse/pull/79984) ([Pavel Kruglov](https://github.com/Avogar)).
* 該当する場合、`GLOBAL [NOT] IN` 述語を `PREWHERE` 句に移動可能にしました。[#79996](https://github.com/ClickHouse/ClickHouse/pull/79996)（[Eduard Karacharov](https://github.com/korowa)）。
* `s3_slow_all_threads_after_network_error` 設定を追加しました。 [#80035](https://github.com/ClickHouse/ClickHouse/pull/80035) ([Vitaly Baranov](https://github.com/vitlibar)).
* マージ対象として選択されたパーツに関するログレベルが誤って Information レベルになっていました。[#80061](https://github.com/ClickHouse/ClickHouse/issues/80061) をクローズしました。[#80062](https://github.com/ClickHouse/ClickHouse/pull/80062)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* `reverse` 関数が `Tuple` データ型をサポートするようになりました。[#80053](https://github.com/ClickHouse/ClickHouse/issues/80053) をクローズ。[#80083](https://github.com/ClickHouse/ClickHouse/pull/80083) ([flynn](https://github.com/ucasfl))。
* `enble_url_encoding` のデフォルト値は `False` になりました。 [#80088](https://github.com/ClickHouse/ClickHouse/pull/80088) ([Shankar Iyer](https://github.com/shankar-iyer)).
* この小さなパッチにより、[#75817](https://github.com/ClickHouse/ClickHouse/issues/75817) が解決され、`system.zookeeper` テーブルから `auxiliary_zookeepers` のデータを取得できるようになります。[#80146](https://github.com/ClickHouse/ClickHouse/pull/80146)（[Nikolay Govorov](https://github.com/mrdimidium)）。
* ベクトル類似度インデックスを使用したベクトル検索は、これまでの実験的機能からベータ版になりました。 [#80164](https://github.com/ClickHouse/ClickHouse/pull/80164) ([Robert Schulze](https://github.com/rschu1ze))。
* サーバーの TCP ソケットに関する非同期メトリクスを追加しました。これにより、オブザーバビリティが向上します。[#80187](https://github.com/ClickHouse/ClickHouse/issues/80187) をクローズします。[#80188](https://github.com/ClickHouse/ClickHouse/pull/80188)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* 関数 `tokens` は、トークナイザーとして `string` をサポートするようになりました。[#80195](https://github.com/ClickHouse/ClickHouse/pull/80195) ([Robert Schulze](https://github.com/rschu1ze))。
* Parallel replicas: すべての読み取りタスクが他のレプリカに割り当てられている場合、未使用で低速なレプリカを待つことがないようになりました。 [#80199](https://github.com/ClickHouse/ClickHouse/pull/80199) ([Igor Nikonov](https://github.com/devcrafter)).
* `simpleAggregateFunction` で `anylast_respect_nulls` と `any_respect_nulls` をサポートするようになりました。 [#80219](https://github.com/ClickHouse/ClickHouse/pull/80219) ([Diskein](https://github.com/Diskein)).
* レプリケートされたデータベースに対して不要な `adjustCreateQueryForBackup()` の呼び出しを削除しました。 [#80282](https://github.com/ClickHouse/ClickHouse/pull/80282) ([Vitaly Baranov](https://github.com/vitlibar)).
  #* `clickhouse-local` で、`-- --config.value='abc'` のように `--` の後ろに続く追加オプションを、等号なしでも指定できるようにしました。 [#80292](https://github.com/ClickHouse/ClickHouse/issues/80292) をクローズ。 [#80293](https://github.com/ClickHouse/ClickHouse/pull/80293) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `SHOW ... LIKE` クエリでメタ文字を強調表示できるようにしました。これにより [#80275](https://github.com/ClickHouse/ClickHouse/issues/80275) が解決します。 [#80297](https://github.com/ClickHouse/ClickHouse/pull/80297) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
  #* `clickhouse-local` で SQL UDF を永続化できるようにしました。以前に作成された関数は起動時に読み込まれます。これにより [#80085](https://github.com/ClickHouse/ClickHouse/issues/80085) が解決します。 [#80300](https://github.com/ClickHouse/ClickHouse/pull/80300) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
* `Time` 型と `Time64` 型の比較をサポート。 [#80327](https://github.com/ClickHouse/ClickHouse/pull/80327) ([Yarik Briukhovetskyi](https://github.com/yariks5s))。
* 予備 DISTINCT ステップに対する EXPLAIN プランの説明を修正。 [#80330](https://github.com/ClickHouse/ClickHouse/pull/80330) ([UnamedRus](https://github.com/UnamedRus)).
* ODBC/JDBC で名前付きコレクションを使用できるようにしました。 [#80334](https://github.com/ClickHouse/ClickHouse/pull/80334) ([Andrey Zvonov](https://github.com/zvonand)).
* マルチ PROJECTION フィルタリングのサポートを有効化し、パートレベルのフィルタリングに複数の PROJECTION を使用できるようにしました。これにより [#55525](https://github.com/ClickHouse/ClickHouse/issues/55525) が解決されます。これは、[#78429](https://github.com/ClickHouse/ClickHouse/issues/78429) に続く、projection index を実装するための第 2 段階です。[#80343](https://github.com/ClickHouse/ClickHouse/pull/80343)（[Amos Bird](https://github.com/amosbird)）。
* 読み取り専用ディスクおよび故障ディスクの数に関するメトリクス。DiskLocalCheckThread が開始されたタイミングでログに出力される指標。[#80391](https://github.com/ClickHouse/ClickHouse/pull/80391) ([VicoWu](https://github.com/VicoWu))。
* `s3_plain_rewritable` ストレージでの PROJECTION サポートを実装しました。以前のバージョンでは、PROJECTION を参照する S3 上のメタデータオブジェクトが移動しても更新されませんでした。[#70258](https://github.com/ClickHouse/ClickHouse/issues/70258) をクローズ。[#80393](https://github.com/ClickHouse/ClickHouse/pull/80393)（[Sav](https://github.com/sberss)）。
* Parallel replicas では別個の接続タイムアウトが使用されるようになりました。`parallel_replicas_connect_timeout_ms` 設定を参照してください。以前は、parallel replicas のクエリに対する接続タイムアウト値として `connect_timeout_with_failover_ms` および `connect_timeout_with_failover_secure_ms` 設定が使用されており、デフォルトは 1 秒でした。[#80421](https://github.com/ClickHouse/ClickHouse/pull/80421)（[Igor Nikonov](https://github.com/devcrafter)）。
* `SYSTEM UNFREEZE` コマンドは、読み取り専用ディスクおよび書き込み一回限りのディスク上のパーツを検索しません。これにより [#80430](https://github.com/ClickHouse/ClickHouse/issues/80430) がクローズされました。[#80432](https://github.com/ClickHouse/ClickHouse/pull/80432)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* マージされたパーツに関するメッセージのログレベルを INFO から TRACE に変更しました。 [#80476](https://github.com/ClickHouse/ClickHouse/pull/80476) ([Hans Krutzer](https://github.com/hkrutzer))。
* Native フォーマットにおいて Dynamic と JSON 用のフラット化シリアル化を実装しました。これにより、Dynamic の shared variant や JSON の shared data といった特別な構造を使わずに Dynamic および JSON データをシリアル化／デシリアライズできます。このシリアル化は、`output_format_native_use_flattened_dynamic_and_json_serialization` を設定することで有効化できます。また、このシリアル化により、さまざまな言語で実装されたクライアントでの TCP プロトコル越しの Dynamic と JSON のサポートが容易になります。 [#80499](https://github.com/ClickHouse/ClickHouse/pull/80499) ([Pavel Kruglov](https://github.com/Avogar))。
* Iceberg テーブルのパーティションプルーニングのデフォルト動作を変更しました。 [#80583](https://github.com/ClickHouse/ClickHouse/pull/80583) ([Melvyn Peignon](https://github.com/melvynator)).
* 索引検索アルゴリズムのオブザーバビリティ向上のために、`IndexBinarySearchAlgorithm` と `IndexGenericExclusionSearchAlgorithm` という 2 つの新しい ProfileEvents を追加しました。 [#80679](https://github.com/ClickHouse/ClickHouse/pull/80679) ([Pablo Marcos](https://github.com/pamarcos)).
* 古いカーネルで `MADV_POPULATE_WRITE` がサポートされていない場合でも、その旨をログに出力しないようにしました（不要なログ出力による汚染を防ぐため）。 [#80704](https://github.com/ClickHouse/ClickHouse/pull/80704) ([Robert Schulze](https://github.com/rschu1ze)).
* 有効期限 (TTL) で Date32 および DateTime64 型をサポートしました。 [#80710](https://github.com/ClickHouse/ClickHouse/pull/80710) ([Andrey Zvonov](https://github.com/zvonand)).
* `max_merge_delayed_streams_for_parallel_write` の互換性用の設定値を調整しました。 [#80760](https://github.com/ClickHouse/ClickHouse/pull/80760) ([Azat Khuzhin](https://github.com/azat)).
* クラッシュの修正: デストラクタ内で、ディスクに一時データをスピルするための一時ファイルを削除しようとした際に例外がスローされると、プログラムが異常終了してしまう可能性があった問題を修正しました。 [#80776](https://github.com/ClickHouse/ClickHouse/pull/80776) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `SYSTEM SYNC REPLICA` に `IF EXISTS` 修飾子を追加。 [#80810](https://github.com/ClickHouse/ClickHouse/pull/80810) ([Raúl Marín](https://github.com/Algunenano)).
* &quot;Having zero bytes, but read range is not finished...&quot; という例外メッセージを拡張し、system.filesystem&#95;cache に finished&#95;download&#95;time カラムを追加。[#80849](https://github.com/ClickHouse/ClickHouse/pull/80849)（[Kseniia Sumarokova](https://github.com/kssenii)）。
* これまで、`packed` ストレージは全文索引には対応していませんでした。これは、セグメント ID がディスク上の (`.gin_sid`) ファイルを読み書きすることでオンザフライに更新されていたためです。`packed` ストレージでは、未コミットのファイルから値を読み取ることがサポートされておらず、これが問題の原因となっていました。 [#80852](https://github.com/ClickHouse/ClickHouse/pull/80852) ([Elmi Ahmadov](https://github.com/ahmadov)).
* `indexes = 1` を指定して `EXPLAIN` を使用した場合、その出力に検索アルゴリズムのセクションが含まれるようになりました。そこには「binary search」または「generic exclusion search」のいずれかが表示されます。 [#80881](https://github.com/ClickHouse/ClickHouse/pull/80881) ([Pablo Marcos](https://github.com/pamarcos))。
* 2024年初め、`prefer_column_name_to_alias` は新しいアナライザーがデフォルトで有効化されていなかったため、MySQL ハンドラー向けに True としてハードコードされていました。現在は、ハードコードされなくなりました。 [#80916](https://github.com/ClickHouse/ClickHouse/pull/80916) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* `system.iceberg_history` は、glue や iceberg rest のようなカタログデータベースの履歴も表示するようになりました。また、一貫性のため、`system.iceberg_history` 内の `table_name` および `database_name` カラムは、それぞれ `table` と `database` に名前が変更されました。[#80975](https://github.com/ClickHouse/ClickHouse/pull/80975) ([alesapin](https://github.com/alesapin))
* `merge` テーブル関数で read-only モードを許可し、これを使用する際に `CREATE TEMPORARY TABLE` 権限が不要になります。 [#80981](https://github.com/ClickHouse/ClickHouse/pull/80981) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* インメモリキャッシュの可観測性を向上しました（不完全な `system.asynchronouse_metrics` ではなく、`system.metrics` でキャッシュに関する情報を公開するように変更）。インメモリキャッシュのサイズ（バイト単位）を `dashboard.html` に追加しました。`VectorSimilarityIndexCacheSize`/`IcebergMetadataFilesCacheSize` は `VectorSimilarityIndexCacheBytes`/`IcebergMetadataFilesCacheBytes` にリネームされました。 [#81023](https://github.com/ClickHouse/ClickHouse/pull/81023) ([Azat Khuzhin](https://github.com/azat)).
* system.rocksdb から読み取る際、RocksDB テーブルを含められないエンジンを持つデータベースを無視します。 [#81083](https://github.com/ClickHouse/ClickHouse/pull/81083) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* `clickhouse-local` の設定ファイルで `filesystem_caches` と `named_collections` を許可できるようにしました。 [#81105](https://github.com/ClickHouse/ClickHouse/pull/81105) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `INSERT` クエリ内の `PARTITION BY` のハイライトを修正しました。以前のバージョンでは、`PARTITION BY` はキーワードとしてハイライトされていませんでした。 [#81106](https://github.com/ClickHouse/ClickHouse/pull/81106) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
  #* Web UI における小さな改善を 2 点行いました。`CREATE` や `INSERT` など出力のないクエリを正しく処理するようにしました（ごく最近まで、これらのクエリはスピナーが回り続ける状態になっていました）。また、テーブルをダブルクリックしたときに、先頭までスクロールするようにしました。 [#81131](https://github.com/ClickHouse/ClickHouse/pull/81131) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
  #* `c-ares` を `v1.34.5` に更新しました。 [#81159](https://github.com/ClickHouse/ClickHouse/pull/81159) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* CVE-2025-5025 および CVE-2025-4947 への対応として curl を 8.14 にアップグレードしました。 [#81171](https://github.com/ClickHouse/ClickHouse/pull/81171) ([larryluogit](https://github.com/larryluogit)).
  #* 次の脆弱性に対応するため、libarchive を 3.7.9 にアップグレードしました: CVE-2024-20696 CVE-2025-25724 CVE-2024-48958 CVE-2024-57970 CVE-2025-1632 CVE-2024-48957 CVE-2024-48615。 [#81174](https://github.com/ClickHouse/ClickHouse/pull/81174) ([larryluogit](https://github.com/larryluogit)).
  #* libxml2 を 2.14.3 にアップグレードしました。 [#81187](https://github.com/ClickHouse/ClickHouse/pull/81187) ([larryluogit](https://github.com/larryluogit)).
* `MemoryResidentWithoutPageCache` は、ユーザースペースのページキャッシュを除いたサーバープロセスの物理メモリ使用量（バイト単位）を示します。これにより、ユーザースペースのページキャッシュが利用されている場合でも、実際のメモリ使用量をより正確に把握できます。ユーザースペースのページキャッシュが無効化されている場合、この値は `MemoryResident` と等しくなります。 [#81233](https://github.com/ClickHouse/ClickHouse/pull/81233) ([Jayme Bird](https://github.com/jaymebrd)).
* クライアント、ローカルサーバー、Keeper クライアントおよび Disks アプリで手動で記録された例外を「ログ済み」としてマークし、二重にログが記録されないようにしました。 [#81271](https://github.com/ClickHouse/ClickHouse/pull/81271) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* `use_skip_indexes_if_final` と `use_skip_indexes_if_final_exact_mode` の設定は、デフォルト値が `True` になりました。`FINAL` 句を含むクエリは、（該当する場合）スキップインデックスを使用してグラニュールを絞り込み、さらに一致するプライマリキー範囲に対応する追加のグラニュールも読み取るようになりました。以前の近似的／非厳密な結果の動作が必要なユーザーは、慎重に評価したうえで `use_skip_indexes_if_final_exact_mode` を `FALSE` に設定できます。[#81331](https://github.com/ClickHouse/ClickHouse/pull/81331)（[Shankar Iyer](https://github.com/shankar-iyer)）。
* このPRは、変換関数の単調性チェックにおける `is_strict` の実装に関する問題に対処します。現在、一部の変換関数（例: toFloat64(UInt32) や toDate(UInt8)）は、本来は true を返すべきにもかかわらず、誤って is&#95;strict を false として返しています。[#81359](https://github.com/ClickHouse/ClickHouse/pull/81359) ([zoomxi](https://github.com/zoomxi))。
  #* ジャーナル付きファイルシステムでは、`mkdir` はディスクに永続化されるファイルシステムのジャーナルに書き込まれます。ディスクが遅い場合、これには時間がかかることがあります。したがって、reserve ロックのスコープ外に移動するのが妥当です。[#81371](https://github.com/ClickHouse/ClickHouse/pull/81371) ([Kseniia Sumarokova](https://github.com/kssenii))。
* `KeyCondition` が連続範囲にマッチするかどうかを確認する際、キーが非厳密な（non-strict）関数チェーンでラップされている場合は、`Constraint::POINT` を `Constraint::RANGE` に変換する必要になることがあります。たとえば、`toDate(event_time) = '2025-06-03'` は `event_time` に対して [&#39;2025-06-03 00:00:00&#39;, &#39;2025-06-04 00:00:00&#39;) という範囲を意味します。この PR はこの動作を修正します。[#81400](https://github.com/ClickHouse/ClickHouse/pull/81400) ([zoomxi](https://github.com/zoomxi)).
  #* `postgres` 16.9 を使用。[#81437](https://github.com/ClickHouse/ClickHouse/pull/81437) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* `openssl` 3.2.4 を使用。[#81438](https://github.com/ClickHouse/ClickHouse/pull/81438) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* `abseil-cpp` 2025-01-27 を使用。[#81440](https://github.com/ClickHouse/ClickHouse/pull/81440) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* `mongo-c-driver` 1.30.4 を使用。[#81449](https://github.com/ClickHouse/ClickHouse/pull/81449) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* `krb5` 1.21.3-final を使用。[#81453](https://github.com/ClickHouse/ClickHouse/pull/81453) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* `orc` 2.1.2 を使用。[#81455](https://github.com/ClickHouse/ClickHouse/pull/81455) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* `clickhouse-local` において `--database` 引数のサポートを追加しました。事前に作成済みのデータベースに切り替えることができます。これにより [#44115](https://github.com/ClickHouse/ClickHouse/issues/44115) がクローズされます。[#81465](https://github.com/ClickHouse/ClickHouse/pull/81465) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
  #* `clickhouse`/`ch` エイリアスは、`--host` または `--port` が指定されている場合、`clickhouse-local` ではなく `clickhouse-client` を起動します。[#79422](https://github.com/ClickHouse/ClickHouse/issues/79422) の継続です。[#65252](https://github.com/ClickHouse/ClickHouse/issues/65252) をクローズします。[#81509](https://github.com/ClickHouse/ClickHouse/pull/81509) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* keeper の応答時間分布データが取得できたので、ヒストグラムのバケットを調整できるようになりました。 [#81516](https://github.com/ClickHouse/ClickHouse/pull/81516) ([Miсhael Stetsyuk](https://github.com/mstetsyuk))。
* クエリが最初に読み取られるまで Iceberg マニフェストファイルの読み込みを延期します。 [#81619](https://github.com/ClickHouse/ClickHouse/pull/81619) ([Daniil Ivanik](https://github.com/divanik)).
  #* `grpc` 1.73.0 を使用します。 [#81629](https://github.com/ClickHouse/ClickHouse/pull/81629) ([Konstantin Bogdanov](https://github.com/thevar1able)).
  #* `delta-kernel-rs` v0.12.1 を使用します。 [#81707](https://github.com/ClickHouse/ClickHouse/pull/81707) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* プロファイルイベント `PageCacheReadBytes` を追加しました。 [#81742](https://github.com/ClickHouse/ClickHouse/pull/81742) ([Kseniia Sumarokova](https://github.com/kssenii))。

## バグ修正（公式安定版リリースでユーザーから観測できる誤動作） \\{#bug-fix-user-visible-misbehavior-in-an-official-stable-release\\}

* `SELECT EXCEPT` クエリを使用するパラメータ化ビューの問題を修正。 [#49447](https://github.com/ClickHouse/ClickHouse/issues/49447) をクローズ。 [#57380](https://github.com/ClickHouse/ClickHouse/pull/57380) ([Nikolay Degterinsky](https://github.com/evillique))。
* Analyzer: JOIN における列型昇格後の列プロジェクションの名前を修正。[#63345](https://github.com/ClickHouse/ClickHouse/issues/63345) をクローズ。[#63519](https://github.com/ClickHouse/ClickHouse/pull/63519)（[Dmitry Novik](https://github.com/novikd)）。
* マテリアライズドビューが、（例えば、それにストリーミングする Kafka テーブルの開始後など）遅れて開始されてしまうことがある。[#72123](https://github.com/ClickHouse/ClickHouse/pull/72123) ([Ilya Golshtein](https://github.com/ilejn)).
* analyzer&#95;compatibility&#95;join&#95;using&#95;top&#95;level&#95;identifier が有効な場合に、カラム名の衝突が発生する際に起きていた論理エラーを修正しました。 [#75676](https://github.com/ClickHouse/ClickHouse/pull/75676) ([Vladimir Cherkasov](https://github.com/vdimir)).
* `alter_sync = 0` を指定した複数の非同期 `RENAME COLUMN` および `ADD COLUMN` クエリの実行後に、`MergeTree` テーブルからの読み取り時にまれに発生していたクラッシュを修正しました。 [#76346](https://github.com/ClickHouse/ClickHouse/pull/76346) ([Anton Popov](https://github.com/CurtizJ)).
* `SELECT` クエリの書き換えが、analyzer 有効時の `VIEW` 作成時に正しく行われない問題を修正。closes [#75956](https://github.com/ClickHouse/ClickHouse/issues/75956). [#76356](https://github.com/ClickHouse/ClickHouse/pull/76356) ([Dmitry Novik](https://github.com/novikd)).
* `allow_push_predicate_ast_for_distributed_subqueries` が有効な場合の、プッシュダウンされた述語における CTE の扱いを修正。 [#75647](https://github.com/ClickHouse/ClickHouse/issues/75647)、[#79672](https://github.com/ClickHouse/ClickHouse/issues/79672) を修正。 [#77316](https://github.com/ClickHouse/ClickHouse/pull/77316)（[Dmitry Novik](https://github.com/novikd)）。
* サーバーからの `async_insert` の適用（`apply_settings_from_server` 経由）を修正しました（以前はクライアント側で `Unknown packet 11 from server` エラーの原因となっていました）。 [#77578](https://github.com/ClickHouse/ClickHouse/pull/77578) ([Azat Khuzhin](https://github.com/azat)).
* レプリケートされたデータベースにおいて、新しく追加されたレプリカで refresh 可能なマテリアライズドビューが動作しない問題を修正しました。 [#77774](https://github.com/ClickHouse/ClickHouse/pull/77774) ([Michael Kolupaev](https://github.com/al13n321)).
* バックアップを破損させていたリフレッシュ可能なマテリアライズドビューを修正しました。 [#77893](https://github.com/ClickHouse/ClickHouse/pull/77893) ([Michael Kolupaev](https://github.com/al13n321)).
* `transform` の古い発火ロジックにあった論理エラーを修正。 [#78247](https://github.com/ClickHouse/ClickHouse/pull/78247) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* `SYSTEM SYNC REPLICA LIGHTWEIGHT 'foo'` が、指定したレプリカが存在しない場合でも成功を報告していた問題を修正しました。コマンドは、同期を試行する前に Keeper 内にレプリカが存在するかを正しく検証するようになりました。 [#78405](https://github.com/ClickHouse/ClickHouse/pull/78405) ([Jayme Bird](https://github.com/jaymebrd)).
* analyzer によってセカンダリインデックスが適用されないケースがいくつか存在していた問題を修正しました。[#65607](https://github.com/ClickHouse/ClickHouse/issues/65607) と [#69373](https://github.com/ClickHouse/ClickHouse/issues/69373) を解決します。[#78485](https://github.com/ClickHouse/ClickHouse/pull/78485)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* HTTP プロトコルで圧縮が有効な場合に、プロファイルイベント（`NetworkSendElapsedMicroseconds` / `NetworkSendBytes`）のダンプが正しく行われるよう修正（誤差がバッファサイズ、通常は約 1MiB を超えないようにする）。[#78516](https://github.com/ClickHouse/ClickHouse/pull/78516) ([Azat Khuzhin](https://github.com/azat)).
  #* ```sql CREATE TABLE t0 ( key Int32, value Int32 ) ENGINE=MergeTree() PRIMARY KEY key PARTITION BY key % 2;. [#78593](https://github.com/ClickHouse/ClickHouse/pull/78593) ([Vlad](https://github.com/codeworse)).
* `ALIAS` 列を含む `JOIN ... USING` を使用した際に `LOGICAL_ERROR` を発生させてしまっていた analyzer を修正し、代わりに適切なエラーを返すようにしました。 [#78618](https://github.com/ClickHouse/ClickHouse/pull/78618) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* アナライザーを修正: SELECT 句に位置指定引数が含まれている場合に `CREATE VIEW ... ON CLUSTER` が失敗する問題を修正しました。 [#78663](https://github.com/ClickHouse/ClickHouse/pull/78663) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* `SELECT` にスカラーサブクエリが含まれている場合に、スキーマ推論を行うテーブル関数宛ての `INSERT SELECT` 実行時に発生する `Block structure mismatch` エラーを修正。 [#78677](https://github.com/ClickHouse/ClickHouse/pull/78677) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* アナライザーを修正: Distributed テーブルに対する SELECT クエリで `prefer_global_in_and_join=1` が設定されている場合、`in` 関数は `globalIn` に置き換えられるようにしました。 [#78749](https://github.com/ClickHouse/ClickHouse/pull/78749) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy))。
* `MongoDB` エンジンを使用するテーブル、または `mongodb` テーブル関数から読み取る `SELECT` クエリのいくつかのパターンを修正しました。修正対象には、`WHERE` 句内で定数値が暗黙的に型変換されるクエリ（例: `WHERE datetime = '2025-03-10 00:00:00'`）や、`LIMIT` と `GROUP BY` を含むクエリが含まれます。以前は、これらのクエリが誤った結果を返す可能性がありました。[#78777](https://github.com/ClickHouse/ClickHouse/pull/78777)（[Anton Popov](https://github.com/CurtizJ)）。
* 異なる JSON 型間の変換処理を修正しました。現在は、いったん String 型に変換してから元の型に戻す単純なキャストとして実行されます。効率は低下しますが、結果は 100% 正確です。 [#78807](https://github.com/ClickHouse/ClickHouse/pull/78807) ([Pavel Kruglov](https://github.com/Avogar))。
* Dynamic 型から Interval 型への変換時の論理エラーを修正。 [#78813](https://github.com/ClickHouse/ClickHouse/pull/78813) ([Pavel Kruglov](https://github.com/Avogar)).
* JSON パースエラー時のカラムロールバックの問題を修正。 [#78836](https://github.com/ClickHouse/ClickHouse/pull/78836) ([Pavel Kruglov](https://github.com/Avogar)).
* 定数のエイリアス列を使った `JOIN` で発生していた「bad cast」エラーを修正。 [#78848](https://github.com/ClickHouse/ClickHouse/pull/78848) ([Vladimir Cherkasov](https://github.com/vdimir))。
* マテリアライズドビューにおいて、ビューとターゲットテーブルで型が異なる列に対する `PREWHERE` を許可しないようにしました。 [#78889](https://github.com/ClickHouse/ClickHouse/pull/78889) ([Pavel Kruglov](https://github.com/Avogar)).
* Variant 列の不正なバイナリデータをパースする際に発生する論理エラーを修正。 [#78982](https://github.com/ClickHouse/ClickHouse/pull/78982) ([Pavel Kruglov](https://github.com/Avogar)).
* Parquet バッチサイズが 0 に設定されている場合に例外をスローするようにしました。以前は `output_format_parquet_batch_size = 0` の場合、ClickHouse がハングしていましたが、この動作は修正されました。 [#78991](https://github.com/ClickHouse/ClickHouse/pull/78991) ([daryawessely](https://github.com/daryawessely)).
* コンパクトパーツにおける basic フォーマットでの variant 判別子のデシリアライズを修正しました。この問題は [https://github.com/ClickHouse/ClickHouse/pull/55518](https://github.com/ClickHouse/ClickHouse/pull/55518) で導入されました。[#79000](https://github.com/ClickHouse/ClickHouse/pull/79000)（[Pavel Kruglov](https://github.com/Avogar)）。
* `complex_key_ssd_cache` 型の辞書は、`block_size` および `write_buffer_size` パラメータの値として 0 または負の値を受け付けなくなりました（issue [#78314](https://github.com/ClickHouse/ClickHouse/issues/78314)）。[#79028](https://github.com/ClickHouse/ClickHouse/pull/79028)（[Elmi Ahmadov](https://github.com/ahmadov)）。
* SummingMergeTree で非集約列に Field を使用することは避けてください。SummingMergeTree で使用される Dynamic/Variant 型で予期しないエラーを引き起こす可能性があります。 [#79051](https://github.com/ClickHouse/ClickHouse/pull/79051) ([Pavel Kruglov](https://github.com/Avogar)).
* analyzer において、ヘッダーが異なる Distributed 宛先テーブルを使用するマテリアライズドビューからの読み取りを修正しました。 [#79059](https://github.com/ClickHouse/ClickHouse/pull/79059) ([Pavel Kruglov](https://github.com/Avogar))。
* `ON CLUSTER` クエリの `CONSTRAINT` セクションで `currentDatabase` 関数が使用された、ごく限定的な状況で発生していたクラッシュを修正しました。Closes [#78100](https://github.com/ClickHouse/ClickHouse/issues/78100). [#79070](https://github.com/ClickHouse/ClickHouse/pull/79070) ([pufit](https://github.com/pufit)).
* バッチ挿入が行われたテーブルで `arrayUnion()` が余分な（誤った）値を返していた不具合を修正しました。[#75057](https://github.com/ClickHouse/ClickHouse/issues/75057)。[#79079](https://github.com/ClickHouse/ClickHouse/pull/79079)（[Peter Nguyen](https://github.com/petern48)）。
  #* `OpenSSLInitializer` におけるセグメンテーションフォルトの不具合を修正しました。[#79092](https://github.com/ClickHouse/ClickHouse/issues/79092) をクローズ。[#79097](https://github.com/ClickHouse/ClickHouse/pull/79097)（[Konstantin Bogdanov](https://github.com/thevar1able)）。
* サーバー間クエリにおける外部ロールの受け渡しを修正。 [#79099](https://github.com/ClickHouse/ClickHouse/pull/79099) ([Andrey Zvonov](https://github.com/zvonand)).
* S3 の ListObject に対して常に prefix を設定するようにしました。 [#79114](https://github.com/ClickHouse/ClickHouse/pull/79114) ([Azat Khuzhin](https://github.com/azat))。
* バッチ挿入を行うテーブルに対して、`arrayUnion()` が余分な（誤った）値を返していたバグを修正しました。 [#79157](https://github.com/ClickHouse/ClickHouse/issues/79157) を修正。 [#79158](https://github.com/ClickHouse/ClickHouse/pull/79158)（[Peter Nguyen](https://github.com/petern48)）。
* フィルターのプッシュダウン後に発生する論理エラーを修正。 [#79164](https://github.com/ClickHouse/ClickHouse/pull/79164) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* SingleValueDataGeneric では Field の代わりに IColumn を使用するようにしました。これにより、`Dynamic/Variant/JSON` 型に対する `argMax` などの一部の集約関数で発生していた誤った戻り値の問題を修正しました。 [#79166](https://github.com/ClickHouse/ClickHouse/pull/79166) ([Pavel Kruglov](https://github.com/Avogar)).
* http ベースのエンドポイントと組み合わせて使用した場合に `delta-kernel` 実装の DeltaLake table engine が正しく動作しない問題と、`NOSIGN` の問題を修正しました。[#78124](https://github.com/ClickHouse/ClickHouse/issues/78124) をクローズ。[#79203](https://github.com/ClickHouse/ClickHouse/pull/79203)（[Kseniia Sumarokova](https://github.com/kssenii)）。
* Keeper の修正: マルチリクエスト失敗時にウォッチがトリガーされないようにしました。 [#79247](https://github.com/ClickHouse/ClickHouse/pull/79247) ([Antonio Andelic](https://github.com/antonio2368)).
* `IN` で Dynamic 型および JSON 型の使用を禁止しました。現在の `IN` の実装では、これらを許可すると結果が不正確になる可能性があります。`IN` におけるこれらの型の適切なサポートは複雑であり、将来的に対応される可能性があります。[#79282](https://github.com/ClickHouse/ClickHouse/pull/79282)（[Pavel Kruglov](https://github.com/Avogar)）。
* JSON 型のパース時における重複パスの検査処理を修正。 [#79317](https://github.com/ClickHouse/ClickHouse/pull/79317) ([Pavel Kruglov](https://github.com/Avogar)).
* SecureStreamSocket の接続に関する問題を修正。 [#79383](https://github.com/ClickHouse/ClickHouse/pull/79383) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* データを含む plain&#95;rewritable ディスクのロード処理を修正。 [#79439](https://github.com/ClickHouse/ClickHouse/pull/79439) ([Julia Kartseva](https://github.com/jkartseva)).
* MergeTree の Wide パーツにおける動的サブカラム検出時のクラッシュを修正。 [#79466](https://github.com/ClickHouse/ClickHouse/pull/79466) ([Pavel Kruglov](https://github.com/Avogar)).
* テーブル名の長さは初回の作成クエリに対してのみ検証します。後方互換性の問題を避けるため、2回目以降の作成では検証を行わないでください。 [#79488](https://github.com/ClickHouse/ClickHouse/pull/79488) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* スパースカラムを使用するテーブルにおいて、いくつかのケースで発生していた `Block structure mismatch` エラーを修正しました。 [#79491](https://github.com/ClickHouse/ClickHouse/pull/79491) ([Anton Popov](https://github.com/CurtizJ)).
* `Logical Error: Can't set alias of * of Asterisk on alias` が発生する 2 つのケースを修正しました。 [#79505](https://github.com/ClickHouse/ClickHouse/pull/79505) ([Raúl Marín](https://github.com/Algunenano)).
* Azure Blob Storage 向けの `use_native_copy` および `allow_azure_native_copy` 設定の適用方法を修正し、資格情報が一致する場合にのみネイティブコピーを使用するよう更新して、[#78964](https://github.com/ClickHouse/ClickHouse/issues/78964) を解決しました。 [#79561](https://github.com/ClickHouse/ClickHouse/pull/79561) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* Atomic データベースのリネーム時に誤ったパスが使用される不具合を修正。 [#79569](https://github.com/ClickHouse/ClickHouse/pull/79569) ([Tuan Pham Anh](https://github.com/tuanpach))。
* JSON 列と他の列を併用した ORDER BY の動作を修正。 [#79591](https://github.com/ClickHouse/ClickHouse/pull/79591) ([Pavel Kruglov](https://github.com/Avogar)).
* `use_hedged_requests` と `allow_experimental_parallel_reading_from_replicas` の両方が無効化されている場合に、リモート読み取り時に結果が重複する問題を修正しました。 [#79599](https://github.com/ClickHouse/ClickHouse/pull/79599) ([Eduard Karacharov](https://github.com/korowa))。
* Unity Catalog 使用時における delta-kernel 実装のクラッシュを修正。 [#79677](https://github.com/ClickHouse/ClickHouse/pull/79677) ([Kseniia Sumarokova](https://github.com/kssenii)).
* autodiscovery クラスター向けのマクロを解決できるようにしました。 [#79696](https://github.com/ClickHouse/ClickHouse/pull/79696) ([Anton Ivashkin](https://github.com/ianton-ru)).
* このカラムが相関付けられているかを確認する際に、カラムの由来するスコープが不明な場合に発生していた論理エラーを修正しました。[#78183](https://github.com/ClickHouse/ClickHouse/issues/78183) を修正。[#79451](https://github.com/ClickHouse/ClickHouse/issues/79451) を修正。[#79727](https://github.com/ClickHouse/ClickHouse/pull/79727)（[Dmitry Novik](https://github.com/novikd)）。
* ColumnConst と Analyzer を含む grouping sets で誤った結果が返される問題を修正。 [#79743](https://github.com/ClickHouse/ClickHouse/pull/79743) ([Andrey Zvonov](https://github.com/zvonand)).
* ローカルレプリカが古くなっている場合にディストリビューテッドテーブルから読み取ると発生する、ローカルシャードの結果の重複を修正しました。 [#79761](https://github.com/ClickHouse/ClickHouse/pull/79761) ([Eduard Karacharov](https://github.com/korowa)).
* 不正に設定された `page_cache_limits` を適切に処理するようにしました。 [#79805](https://github.com/ClickHouse/ClickHouse/pull/79805) ([Bharat Nallan](https://github.com/bharatnc)).
* 可変長のフォーマッタ（例: `%W`、曜日の `Monday` や `Tuesday` など）の後に、複合フォーマッタ（複数の要素を一度に出力するフォーマッタ、例: `%D`、アメリカ式の日付 `05/04/25`）が続く場合の SQL 関数 `formatDateTime` の結果を修正しました。 [#79835](https://github.com/ClickHouse/ClickHouse/pull/79835) ([Robert Schulze](https://github.com/rschu1ze)).
* IcebergS3 は count() の最適化をサポートしますが、IcebergS3Cluster はサポートしません。その結果、クラスターモードで返される count() の結果がレプリカ数の倍数になることがあります。 [#79844](https://github.com/ClickHouse/ClickHouse/pull/79844) ([wxybear](https://github.com/wxybear)).
* 負の符号ビットを持つ NaN のソート順序を修正。 [#79847](https://github.com/ClickHouse/ClickHouse/pull/79847) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* `GROUP BY ALL` は `GROUPING` 部分を考慮しなくなりました。 [#79915](https://github.com/ClickHouse/ClickHouse/pull/79915) ([Yarik Briukhovetskyi](https://github.com/yariks5s))。
* 遅延マテリアライゼーションにおいて、プロジェクションまでクエリ実行に列が一切使用されない場合に発生する `AMBIGUOUS_COLUMN_NAME` エラーを修正しました。例: SELECT * FROM t ORDER BY rand() LIMIT 5。 [#79926](https://github.com/ClickHouse/ClickHouse/pull/79926) ([Igor Nikonov](https://github.com/devcrafter))。
* `TopK` / `TopKWeighted` 関数の誤った状態のマージにより、容量を使い切っていない場合でも誤差が過度に大きくなる問題を修正しました。 [#79939](https://github.com/ClickHouse/ClickHouse/pull/79939) ([Joel Höner](https://github.com/athre0z)).
* クエリ `CREATE DATABASE datalake ENGINE = DataLakeCatalog(\'http://catalog:8181\', \'admin\', \'password\')` に含まれるパスワードをマスクするようにしました。 [#79941](https://github.com/ClickHouse/ClickHouse/pull/79941) ([Han Fei](https://github.com/hanfei1991)).
* `JOIN USING` でエイリアスを指定できるようにしました。列名が変更されている場合（例：`ARRAY JOIN` による変更など）に、このエイリアスを指定します。[#73707](https://github.com/ClickHouse/ClickHouse/issues/73707) を修正しました。[#79942](https://github.com/ClickHouse/ClickHouse/pull/79942)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* `azure_blob_storage` オブジェクトストレージで `readonly` 設定が尊重されるようになりました。 [#79954](https://github.com/ClickHouse/ClickHouse/pull/79954) ([Julia Kartseva](https://github.com/jkartseva)).
* `match(column, '^…')` をバックスラッシュでエスケープされた文字と共に使用した際に発生していた、誤ったクエリ結果およびメモリ不足によるクラッシュを修正しました。 [#79969](https://github.com/ClickHouse/ClickHouse/pull/79969) ([filimonov](https://github.com/filimonov)).
* データレイクに対する Hive パーティショニングを無効化。この変更は次の Issue を部分的に解決します: [https://github.com/issues/assigned?issue=ClickHouse%7CClickHouse%7C79937](https://github.com/issues/assigned?issue=ClickHouse%7CClickHouse%7C79937)。[#80005](https://github.com/ClickHouse/ClickHouse/pull/80005)（[Daniil Ivanik](https://github.com/divanik)）。
* ラムダ式を含む Skip インデックスが適用されない問題を修正しました。インデックス定義内の高レベル関数がクエリ内のものと完全に一致する場合にも、Skip インデックスが正しく適用されるようにしました。 [#80025](https://github.com/ClickHouse/ClickHouse/pull/80025) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* UNION を含むマテリアライズドビューが新しいレプリカでも正しく動作するようにしました。 [#80037](https://github.com/ClickHouse/ClickHouse/pull/80037) ([Samay Sharma](https://github.com/samay-sharma)).
* レプリケーションログからの `ATTACH_PART` コマンドを実行するレプリカでパーツをアタッチする際のメタデータバージョンを修正しました。 [#80038](https://github.com/ClickHouse/ClickHouse/pull/80038) ([Aleksei Filatov](https://github.com/aalexfvk)).
* SQL 関数 `parseDateTime` のフォーマット指定子 `%e` は、これまではスペースでパディングされた値（例: ` 3`）のみを受け付けていましたが、現在は 1 桁の日（例: `3`）も認識するようになりました。これにより、MySQL と互換性のある動作になります。以前の動作を維持したい場合は、設定 `parsedatetime_e_requires_space_padding = 1` を指定してください。(issue [#78243](https://github.com/ClickHouse/ClickHouse/issues/78243))。[#80057](https://github.com/ClickHouse/ClickHouse/pull/80057)（[Robert Schulze](https://github.com/rschu1ze)）。
* Executable User Defined Functions (eUDF) の名前は、他の関数とは異なり、`system.query_log` テーブルの `used_functions` カラムには追加されません。このPRでは、リクエスト内で eUDF が使用された場合に、その eUDF の名前が追加されるようにしました。 [#80073](https://github.com/ClickHouse/ClickHouse/pull/80073) ([Kyamran](https://github.com/nibblerenush)).
  #* ClickHouse のログに出力される `Cannot find 'kernel' in '[...]/memory.stat'` という警告を修正しました (issue [#77410](https://github.com/ClickHouse/ClickHouse/issues/77410)). [#80129](https://github.com/ClickHouse/ClickHouse/pull/80129) ([Robert Schulze](https://github.com/rschu1ze)).
* Arrow 形式における LowCardinality(FixedString) の論理エラーを修正。 [#80156](https://github.com/ClickHouse/ClickHouse/pull/80156) ([Pavel Kruglov](https://github.com/Avogar)).
* Merge エンジンでのサブカラムの読み取りを修正。 [#80158](https://github.com/ClickHouse/ClickHouse/pull/80158) ([Pavel Kruglov](https://github.com/Avogar)).
* `KeyCondition` における数値型同士の比較に関するバグを修正しました。 [#80207](https://github.com/ClickHouse/ClickHouse/pull/80207) ([Yarik Briukhovetskyi](https://github.com/yariks5s))。
* プロジェクションを持つテーブルに lazy materialization が適用された際に発生するエラー `AMBIGUOUS_COLUMN_NAME` を修正。 [#80251](https://github.com/ClickHouse/ClickHouse/pull/80251) ([Igor Nikonov](https://github.com/devcrafter)).
* 暗黙のプロジェクションを使用している場合に、LIKE &#39;ab&#95;c%&#39; のような文字列プレフィックスフィルタに対する誤った COUNT の最適化を修正しました。これにより、[#80250](https://github.com/ClickHouse/ClickHouse/issues/80250) が修正されます。[#80261](https://github.com/ClickHouse/ClickHouse/pull/80261)（[Amos Bird](https://github.com/amosbird)）。
* MongoDB ドキュメント内で、ネストされた数値フィールドが文字列として不適切にシリアライズされる問題を修正しました。MongoDB ドキュメントに対する最大ネスト深度の制限を削除しました。 [#80289](https://github.com/ClickHouse/ClickHouse/pull/80289) ([Kirill Nikiforov](https://github.com/allmazz)).
* Replicated データベースでの RMT に対するメタデータチェックをより緩やかにしました。[#80296](https://github.com/ClickHouse/ClickHouse/issues/80296) をクローズします。[#80298](https://github.com/ClickHouse/ClickHouse/pull/80298)（[Nikolay Degterinsky](https://github.com/evillique)）。
* PostgreSQL ストレージ向けの DateTime および DateTime64 のテキスト表現を修正。 [#80301](https://github.com/ClickHouse/ClickHouse/pull/80301) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* `StripeLog` テーブルでタイムゾーン付きの `DateTime` 型を使用できるようにしました。これにより [#44120](https://github.com/ClickHouse/ClickHouse/issues/44120) が解決されました。[#80304](https://github.com/ClickHouse/ClickHouse/pull/80304)（[Alexey Milovidov](https://github.com/alexey-milovidov)）。
* クエリプランステップが行数を変更する場合、非決定的関数を含む述語に対するフィルタープッシュダウンを無効化しました。[#40273](https://github.com/ClickHouse/ClickHouse/issues/40273) を修正しました。[#80329](https://github.com/ClickHouse/ClickHouse/pull/80329)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* サブカラムを含むプロジェクションで発生する可能性のあった論理エラーやクラッシュを修正しました。 [#80333](https://github.com/ClickHouse/ClickHouse/pull/80333) ([Pavel Kruglov](https://github.com/Avogar)).
* `ON` 式が自明な等価条件でない場合に、logical JOIN ステップのフィルタープッシュダウン最適化によって発生する `NOT_FOUND_COLUMN_IN_BLOCK` エラーを修正。[#79647](https://github.com/ClickHouse/ClickHouse/issues/79647) および [#77848](https://github.com/ClickHouse/ClickHouse/issues/77848) を修正。[#80360](https://github.com/ClickHouse/ClickHouse/pull/80360)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* パーティション化されたテーブルでキーを逆順に読み取る際に誤った結果が返る問題を修正しました。これにより [#79987](https://github.com/ClickHouse/ClickHouse/issues/79987) が解決されました。 [#80448](https://github.com/ClickHouse/ClickHouse/pull/80448) ([Amos Bird](https://github.com/amosbird))。
* NULL を許容するキーを持ち、`optimize_read_in_order` が有効になっているテーブルで、誤ったソート順になる問題を修正しました。 [#80515](https://github.com/ClickHouse/ClickHouse/pull/80515) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* SYSTEM STOP REPLICATED VIEW によってビューを一時停止した場合に、Fixed Refreshable マテリアライズドビューの DROP がハングしてしまう問題を修正しました。 [#80543](https://github.com/ClickHouse/ClickHouse/pull/80543) ([Michael Kolupaev](https://github.com/al13n321)).
* 分散クエリで定数タプルを使用した場合に発生する &#39;Cannot find column&#39; エラーを修正しました。 [#80596](https://github.com/ClickHouse/ClickHouse/pull/80596) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Distributed テーブルにおける `join_use_nulls` 使用時の `shardNum` 関数の不具合を修正しました。 [#80612](https://github.com/ClickHouse/ClickHouse/pull/80612) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Merge エンジンにおいて、一部のテーブルにのみ存在するカラムの読み取り時に誤った結果が返される問題を修正しました。 [#80643](https://github.com/ClickHouse/ClickHouse/pull/80643) ([Pavel Kruglov](https://github.com/Avogar)).
* これで iceberg&#95;history テーブル内のタイムスタンプは正しくなっているはずです。 [#80711](https://github.com/ClickHouse/ClickHouse/pull/80711) ([Melvyn Peignon](https://github.com/melvynator)).
* オブジェクトストレージ用テーブル関数における、単一要素 enum のグロブ処理を修正。 [#80716](https://github.com/ClickHouse/ClickHouse/pull/80716) ([Konstantin Bogdanov](https://github.com/thevar1able))。
* Tuple(Dynamic) と String を用いる比較関数において誤った結果型が返され、論理エラーを引き起こしていた問題を修正しました。[#80728](https://github.com/ClickHouse/ClickHouse/pull/80728) ([Pavel Kruglov](https://github.com/Avogar)).
* Unity Catalog 向けに不足していたサポート対象データ型 `timestamp_ntz` を追加。[#79535](https://github.com/ClickHouse/ClickHouse/issues/79535) と [#79875](https://github.com/ClickHouse/ClickHouse/issues/79875) を修正。[#80740](https://github.com/ClickHouse/ClickHouse/pull/80740)（[alesapin](https://github.com/alesapin)）。
* `IN cte` を使用する分散クエリで発生する `THERE_IS_NO_COLUMN` エラーを修正。[#75032](https://github.com/ClickHouse/ClickHouse/issues/75032) を解決。[#80757](https://github.com/ClickHouse/ClickHouse/pull/80757)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* 外部 `ORDER BY` でファイル数が過剰になる問題（メモリ使用量の過大化につながる）を修正。 [#80777](https://github.com/ClickHouse/ClickHouse/pull/80777) ([Azat Khuzhin](https://github.com/azat)).
  #* この PR は [#80742](https://github.com/ClickHouse/ClickHouse/issues/80742) をクローズする可能性があります。 [#80783](https://github.com/ClickHouse/ClickHouse/pull/80783) ([zoomxi](https://github.com/zoomxi)).
  #* get&#95;member&#95;id() が NULL から std::string を生成していたことが原因で発生していた Kafka のクラッシュを修正（この問題は、ブローカーへの接続に失敗した場合にのみ発生していた可能性が高い）。 [#80793](https://github.com/ClickHouse/ClickHouse/pull/80793) ([Azat Khuzhin](https://github.com/azat)).
* Kafka エンジンをシャットダウンする前にコンシューマを正しく `await` するようにしました（シャットダウン後もアクティブなコンシューマが残存していると、さまざまなデバッグアサーションが発火したり、テーブルが drop / detach されたあとでもバックグラウンドでブローカーからデータを読み取ってしまう可能性があります）。 [#80795](https://github.com/ClickHouse/ClickHouse/pull/80795) ([Azat Khuzhin](https://github.com/azat)).
* `predicate-push-down` 最適化が原因で発生する `NOT_FOUND_COLUMN_IN_BLOCK` を修正し、[#80443](https://github.com/ClickHouse/ClickHouse/issues/80443) を解決。 [#80834](https://github.com/ClickHouse/ClickHouse/pull/80834)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* `USING` 付き `JOIN` で使用されるテーブル関数において、アスタリスク（*）マッチャーの解決処理に関する論理エラーを修正しました。 [#80894](https://github.com/ClickHouse/ClickHouse/pull/80894) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Iceberg メタデータファイルキャッシュのメモリ計上を修正。 [#80904](https://github.com/ClickHouse/ClickHouse/pull/80904) ([Azat Khuzhin](https://github.com/azat)).
* NULL を許容するパーティションキーで誤ったパーティション分割が行われる問題を修正しました。 [#80913](https://github.com/ClickHouse/ClickHouse/pull/80913) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* ソーステーブルがイニシエータ上に存在しない場合に、プッシュダウンされた述語（`allow_push_predicate_ast_for_distributed_subqueries=1`）を伴う分散クエリで発生する `Table does not exist` エラーを修正しました。[#77281](https://github.com/ClickHouse/ClickHouse/issues/77281) の問題を解決します。[#80915](https://github.com/ClickHouse/ClickHouse/pull/80915)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* 名前付きウィンドウを用いた入れ子になった関数の論理エラーを修正しました。 [#80926](https://github.com/ClickHouse/ClickHouse/pull/80926) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Nullable 列および浮動小数点列の極値の処理を修正。 [#80970](https://github.com/ClickHouse/ClickHouse/pull/80970) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* `system.tables` からのクエリ実行時に発生しうるクラッシュを修正しました（特にメモリプレッシャー下で発生しやすい問題）。[#80976](https://github.com/ClickHouse/ClickHouse/pull/80976) ([Azat Khuzhin](https://github.com/azat)).
* ファイル拡張子から圧縮方式を推論するファイルに対して、truncate を伴うアトミックな rename 操作を修正しました。 [#80979](https://github.com/ClickHouse/ClickHouse/pull/80979) ([Pablo Marcos](https://github.com/pamarcos)).
  #* ErrorCodes::getName を修正しました。 [#81032](https://github.com/ClickHouse/ClickHouse/pull/81032) ([RinChanNOW](https://github.com/RinChanNOWWW)).
* Unity Catalog で、すべてのテーブルに対する権限がないとユーザーがテーブルを一覧表示できないバグを修正しました。現在はすべてのテーブルが正しく一覧表示され、アクセス制限されたテーブルから読み取ろうとすると例外がスローされます。 [#81044](https://github.com/ClickHouse/ClickHouse/pull/81044) ([alesapin](https://github.com/alesapin))。
* これにより、ClickHouse は `SHOW TABLES` クエリにおいて、データレイクカタログからのエラーや予期しない応答を無視するようになりました。[#79725](https://github.com/ClickHouse/ClickHouse/issues/79725) を修正しました。 [#81046](https://github.com/ClickHouse/ClickHouse/pull/81046)（[alesapin](https://github.com/alesapin)）。
* `JSONExtract` および `JSON` 型のパース処理で、整数値からの `DateTime64` のパースを修正しました。 [#81050](https://github.com/ClickHouse/ClickHouse/pull/81050) ([Pavel Kruglov](https://github.com/Avogar)).
* `date_time_input_format` 設定がスキーマ推論キャッシュに反映されるようにしました。 [#81052](https://github.com/ClickHouse/ClickHouse/pull/81052) ([Pavel Kruglov](https://github.com/Avogar)).
* クエリ開始後からカラム送信前までの間にテーブルが DROP された場合に、`INSERT` クエリがクラッシュする問題を修正。 [#81053](https://github.com/ClickHouse/ClickHouse/pull/81053) ([Azat Khuzhin](https://github.com/azat)).
* quantileDeterministic における未初期化値の使用の問題を修正しました。 [#81062](https://github.com/ClickHouse/ClickHouse/pull/81062) ([Azat Khuzhin](https://github.com/azat)).
* MetadataStorageFromDisk ディスクのトランザクションにおけるハードリンク数の管理を修正し、テストを追加。 [#81066](https://github.com/ClickHouse/ClickHouse/pull/81066) ([Sema Checherinda](https://github.com/CheSema)).
* 他の関数と異なり、ユーザー定義関数 (UDF) の名前は `system.query_log` テーブルに追加されていませんでした。このPRでは、リクエスト内でUDFが使用された場合に、そのUDF名が2つのカラム `used_executable_user_defined_functions` または `used_sql_user_defined_functions` のいずれかに追加されるようにしました。[#81101](https://github.com/ClickHouse/ClickHouse/pull/81101) ([Kyamran](https://github.com/nibblerenush))。
* HTTP プロトコル経由でテキスト形式（`JSON`、`Values` など）を用いた挿入時に、`Enum` フィールドが省略されていた場合に発生する `Too large size ... passed to allocator` エラーや、クラッシュが起こり得る問題を修正しました。 [#81145](https://github.com/ClickHouse/ClickHouse/pull/81145) ([Anton Popov](https://github.com/CurtizJ)).
* Sparse カラムを含む INSERT ブロックが non-MT のマテリアライズドビューにプッシュされた場合に発生する LOGICAL&#95;ERROR を修正。 [#81161](https://github.com/ClickHouse/ClickHouse/pull/81161) ([Azat Khuzhin](https://github.com/azat)).
* クロスレプリケーション環境で `distributed_product_mode_local=local` を使用した際に発生する `Unknown table expression identifier` エラーを修正。 [#81162](https://github.com/ClickHouse/ClickHouse/pull/81162) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* フィルタリング後の Parquet ファイルの行数を誤ってキャッシュしていた問題を修正しました。 [#81184](https://github.com/ClickHouse/ClickHouse/pull/81184) ([Michael Kolupaev](https://github.com/al13n321))。
* 相対キャッシュパス使用時の fs キャッシュ `max_size_to_total_space` 設定を修正。[#81237](https://github.com/ClickHouse/ClickHouse/pull/81237) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Parquet フォーマットで const のタプルまたはマップを出力する際にクラッシュしていた clickhouse-local の問題を修正しました。 [#81249](https://github.com/ClickHouse/ClickHouse/pull/81249) ([Michael Kolupaev](https://github.com/al13n321)).
* ネットワーク経由で受信した配列オフセットを検証するようにしました。 [#81269](https://github.com/ClickHouse/ClickHouse/pull/81269) ([Azat Khuzhin](https://github.com/azat)).
* 空のテーブルを結合し、かつウィンドウ関数を使用するクエリにおけるコーナーケースを修正しました。このバグにより並列ストリーム数が際限なく増加し、その結果 OOM を引き起こしていました。 [#81299](https://github.com/ClickHouse/ClickHouse/pull/81299) ([Alexander Gololobov](https://github.com/davenger)).
* datalake の Cluster 関数（`deltaLakeCluster`、`icebergCluster` など）に対する修正: (1) 古い analyzer で `Cluster` 関数を使用した際に `DataLakeConfiguration` でセグメンテーションフォルトが発生する可能性を修正; (2) 重複していたデータレイクのメタデータ更新（余分なオブジェクトストレージへのリクエスト）を削除; (3) フォーマットが明示的に指定されていない場合のオブジェクトストレージでの冗長な一覧取得を修正（非 Cluster のデータレイクエンジンでは既に対応済み）。[#81300](https://github.com/ClickHouse/ClickHouse/pull/81300)（[Kseniia Sumarokova](https://github.com/kssenii)）。
* `force_restore_data` フラグで失われた Keeper メタデータを復元できるようにしました。 [#81324](https://github.com/ClickHouse/ClickHouse/pull/81324) ([Raúl Marín](https://github.com/Algunenano)).
* delta-kernel におけるリージョンエラーを修正。これにより [#79914](https://github.com/ClickHouse/ClickHouse/issues/79914) を解決。[#81353](https://github.com/ClickHouse/ClickHouse/pull/81353)（[Kseniia Sumarokova](https://github.com/kssenii)）。
* divideOrNull に対する誤った JIT 処理を無効化しました。 [#81370](https://github.com/ClickHouse/ClickHouse/pull/81370) ([Raúl Marín](https://github.com/Algunenano)).
* MergeTree テーブルのパーティション列名が長い場合に発生する INSERT エラーを修正。 [#81390](https://github.com/ClickHouse/ClickHouse/pull/81390) ([hy123q](https://github.com/haoyangqian)).
* 複数のマニフェストファイルの内容をメモリ上に保持しないようにしました。 [#81470](https://github.com/ClickHouse/ClickHouse/pull/81470) ([Daniil Ivanik](https://github.com/divanik)).
* バックグラウンドプールのシャットダウン中に発生する可能性のあったクラッシュを修正しました（`background_.*pool_size`）。[#81473](https://github.com/ClickHouse/ClickHouse/pull/81473)（[Azat Khuzhin](https://github.com/azat)）。
* `URL` エンジンでテーブルに書き込む際に発生していた `Npy` フォーマットにおける範囲外読み取りを修正しました。これにより [#81356](https://github.com/ClickHouse/ClickHouse/issues/81356) が解決されました。 [#81502](https://github.com/ClickHouse/ClickHouse/pull/81502) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
* Web UI に `NaN%` が表示される可能性があります（JavaScript によくある問題です）。 [#81507](https://github.com/ClickHouse/ClickHouse/pull/81507) ([Alexey Milovidov](https://github.com/alexey-milovidov))。
* `database_replicated_enforce_synchronous_settings=1` 設定有効時の `DatabaseReplicated` の不具合を修正。 [#81564](https://github.com/ClickHouse/ClickHouse/pull/81564) ([Azat Khuzhin](https://github.com/azat)).
* LowCardinality(Nullable(...)) 型のソート順を修正。 [#81583](https://github.com/ClickHouse/ClickHouse/pull/81583) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* サーバーは、ソケットからリクエストを完全に読み取っていない場合、HTTP 接続を維持しないようにする必要があります。 [#81595](https://github.com/ClickHouse/ClickHouse/pull/81595) ([Sema Checherinda](https://github.com/CheSema)).
* スカラー相関サブクエリが射影式の結果を `Nullable` 型で返すようにしました。相関サブクエリが空の結果セットを生成する場合の不具合を修正しました。 [#81632](https://github.com/ClickHouse/ClickHouse/pull/81632) ([Dmitry Novik](https://github.com/novikd))。
* `ReplicatedMergeTree` への `ATTACH` 中に発生するエラー `Unexpected relative path for a deduplicated part` を修正。 [#81647](https://github.com/ClickHouse/ClickHouse/pull/81647) ([Azat Khuzhin](https://github.com/azat)).
* クエリ設定 `use_iceberg_partition_pruning` は、クエリコンテキストではなくグローバルコンテキストを使用しているため、Iceberg ストレージでは有効になりません。デフォルト値が true であるため重大な問題にはなりませんが、この PR によって修正されます。 [#81673](https://github.com/ClickHouse/ClickHouse/pull/81673) ([Han Fei](https://github.com/hanfei1991)).
* マージツリー設定 `merge_max_block_size` が 0 でないことを保証するバリデーションを追加しました。 [#81693](https://github.com/ClickHouse/ClickHouse/pull/81693) ([Bharat Nallan](https://github.com/bharatnc)).
* `DROP VIEW` クエリがハングしてしまう `clickhouse-local` の問題を修正しました。 [#81705](https://github.com/ClickHouse/ClickHouse/pull/81705) ([Bharat Nallan](https://github.com/bharatnc))。
* 一部のケースでの StorageRedis の join を修正。 [#81736](https://github.com/ClickHouse/ClickHouse/pull/81736) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* 空の `USING ()` を使用し、旧アナライザーが有効な場合に発生する `ConcurrentHashJoin` のクラッシュを修正。 [#81754](https://github.com/ClickHouse/ClickHouse/pull/81754) ([Nikita Taranov](https://github.com/nickitat))。
* Keeper の修正: ログに無効なエントリが存在する場合は、新しいログのコミットをブロックするようにしました。以前は、リーダーが一部のログを誤って適用してしまっても、フォロワーがダイジェストの不一致を検出して処理を中断するにもかかわらず、新しいログのコミットを継続していました。 [#81780](https://github.com/ClickHouse/ClickHouse/pull/81780) ([Antonio Andelic](https://github.com/antonio2368)).