| 設定                                                           | 概要                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | デフォルト値    |
| ------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| `id`                                                         | バックアップまたはリストア操作の ID。指定されていない場合は、ランダムに生成された UUID が使用されます。&#39;同じ ID の操作がすでに実行中の場合は、例外がスローされます。                                                                                                                                                                                                                                                                                                                                                                                                                                 |           |
| `compression_method`                                         | バックアップの圧縮方式を指定します。セクション[「列圧縮コーデック」](/sql-reference/statements/create/table#column_compression_codec)                                                                                                                                                                                                                                                                                                                                                                                                                          |           |
| `compression_level`                                          | バックアップの圧縮レベルを指定します                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |           |
| `password`                                                   | ディスク上のファイルに対するパスワード。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |           |
| `base_backup`                                                | 増分バックアップで使用するベースバックアップの保存先。例：`Disk('backups', '1.zip')`                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |           |
| `use_same_password_for_base_backup`                          | ベースバックアップアーカイブがクエリのパスワードを引き継ぐかどうか。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |           |
| `structure_only`                                             | 有効にすると、実際のテーブルデータを含めずに `CREATE` ステートメントのみをバックアップまたはリストアします。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |           |
| `storage_policy`                                             | 復元対象テーブルのストレージポリシー。参照[複数ブロックデバイスへのデータ保存の利用](/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-multiple-volumes)。`RESTORE` コマンドにのみ適用されます`RESTORE`コマンドです。`MergeTree` ファミリーのエンジンを使用するテーブルにのみ適用されます。`MergeTree`ファミリ。                                                                                                                                                                                                                                                                                       |           |
| `allow_non_empty_tables`                                     | 許可します`RESTORE TABLE`空でないテーブルにデータを挿入できるようにします。これにより、テーブル内の既存データとバックアップから復元されたデータが混在します。そのため、この設定を有効にするとテーブル内でデータが重複する可能性があるため、慎重に使用してください。                                                                                                                                                                                                                                                                                                                                                                                     | `0`       |
| `backup_restore_keeper_max_retries`                          | BACKUP または RESTORE の実行中に行われる [Zoo]Keeper 操作の最大リトライ回数。処理全体が失敗しないように、一時的な [Zoo]Keeper 障害に耐えられる十分大きな値にする必要があります&#39;一時的な [Zoo]Keeper の障害が原因で失敗しないように、十分大きな値にする必要があります。                                                                                                                                                                                                                                                                                                                                                           | `1000`    |
| `backup_restore_keeper_retry_initial_backoff_ms`             | バックアップまたはリストア中の [Zoo]Keeper 操作に対する初期バックオフタイムアウト                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `100`     |
| `backup_restore_keeper_retry_max_backoff_ms`                 | バックアップまたはリストア時の [Zoo]Keeper 操作における最大バックオフタイムアウト                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `5000`    |
| `backup_restore_failure_after_host_disconnected_for_seconds` | `BACKUP ON CLUSTER` または `RESTORE ON CLUSTER` の実行中にホストが`BACKUP ON CLUSTER``BACKUP ON CLUSTER` または `RESTORE ON CLUSTER` の実行中に、あるホストが ZooKeeper 上の一時的な「alive」ノードをこの時間内に再作成できない場合、バックアップまたはリストア全体が失敗したものと見なされます。この値は、障害発生後にホストが ZooKeeper に再接続するのにかかる合理的な最大時間よりも大きく設定する必要があります。0 を指定すると無制限を意味します。`RESTORE ON CLUSTER`operation doesn&#39;一時的な状態を再現できない&#39;alive&#39;この時間内にホストが ZooKeeper 内の一時的な「alive」ノードを再作成しなかった場合、バックアップまたはリストア全体が失敗したものと見なされます。この値は、障害発生後にホストが ZooKeeper に再接続するために必要となる妥当な最長時間よりも長く設定する必要があります。ゼロは無制限を意味します。 | `3600`    |
| `backup_restore_keeper_max_retries_while_initializing`       | `BACKUP ON CLUSTER` または `RESTORE ON CLUSTER` 操作の初期化中に実行される [Zoo]Keeper 操作の最大リトライ回数。`BACKUP ON CLUSTER`または`RESTORE ON CLUSTER`操作                                                                                                                                                                                                                                                                                                                                                                                               | `20`      |
| `backup_restore_keeper_max_retries_while_handling_error`     | `BACKUP ON CLUSTER` または `RESTORE ON CLUSTER` のエラー処理中に実行される [Zoo]Keeper 操作の最大リトライ回数。`BACKUP ON CLUSTER`または`RESTORE ON CLUSTER`操作。                                                                                                                                                                                                                                                                                                                                                                                              | `20`      |
| `backup_restore_finish_timeout_after_error_sec`              | イニシエーターが、他のホストが「error」ノードに反応して現在の `BACKUP ON CLUSTER` または `RESTORE ON CLUSTER` 操作での処理を停止するまで待機する時間&#39;エラー&#39;ノードからの指示で現在の処理を停止する`BACKUP ON CLUSTER`または`RESTORE ON CLUSTER`オペレーション。                                                                                                                                                                                                                                                                                                                                          | `180`     |
| `backup_restore_keeper_value_max_size`                       | [Zoo]Keeper のデータの最大サイズ&#39;バックアップ中のノードのデータの最大サイズ                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `1048576` |
| `backup_restore_batch_size_for_keeper_multi`                 | バックアップまたはリストア時に行われる [Zoo]Keeper への multi リクエストのバッチ最大サイズ                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `1000`    |
| `backup_restore_batch_size_for_keeper_multiread`             | バックアップまたはリストア中に [Zoo]Keeper への multiread リクエストで使用されるバッチの最大バイト数                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `10000`   |
| `backup_restore_keeper_fault_injection_probability`          | バックアップまたはリストア中の keeper リクエストが失敗するおおよその確率。有効な値の範囲は`[0.0f, 1.0f]`                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `0`       |
| `backup_restore_keeper_fault_injection_seed`                 | `0` は乱数シードを意味し、それ以外の値の場合はこの設定値が使用されますランダムシードの場合は `0`、それ以外の場合はこの設定の値                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `0`       |
| `backup_restore_s3_retry_attempts`                           | Aws::Client::RetryStrategy の設定です。Aws::Client は自動的にリトライを行い、0 を指定するとリトライなしを意味します。バックアップ／リストア時にのみ使用されます。                                                                                                                                                                                                                                                                                                                                                                                                                         | `1000`    |
| `max_backup_bandwidth`                                       | サーバー上の特定のバックアップに対する最大読み取り速度（バイト/秒）。0 は無制限を意味します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `0`       |
| `max_backups_io_thread_pool_size`                            | ClickHouse は、S3 バックアップの I/O 処理を実行するために、Backups IO Thread プールのスレッドを使用します。ClickHouse は S3 バックアップの I/O 処理を行うために、バックアップ用 I/O スレッドプール内のスレッドを使用します。`max_backups_io_thread_pool_size` は、このプール内で使用できるスレッド数の上限を制御します。プール内のスレッド数の最大値を制限します。                                                                                                                                                                                                                                                                                             | `1000`    |
| `max_backups_io_thread_pool_free_size`                       | Backups IO Threadプール内の**アイドル**スレッドの数が**アイドル状態**Backups IO スレッドプール内のスレッド数が～を超える場合`max_backup_io_thread_pool_free_size`、Backups IO Thread プール内の**アイドル**状態のスレッド数が `max_backup_io_thread_pool_free_size` を超えると、ClickHouse はアイドルスレッドが使用しているリソースを解放し、プールサイズを縮小します。必要に応じてスレッドは再作成されます。                                                                                                                                                                                                                                               | `0`       |
| `backups_io_thread_pool_queue_size`                          | Backups IO Thread プールでスケジュールできるジョブの最大数。現在の S3 バックアップロジックの都合上、このキューは無制限にしておくことを推奨します。注意: 値が`0``default` は無制限を意味します。                                                                                                                                                                                                                                                                                                                                                                                                            | `0`       |
| `backup_threads`                                             | 実行に使用するスレッドの最大数`BACKUP``BACKUP` リクエストを処理するスレッドの最大数。                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |           |
| `max_backup_bandwidth_for_server`                            | サーバー上のすべてのバックアップに対する最大読み取り速度（1秒あたりのバイト数）。0 の場合は無制限を意味します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `0`       |
| `shutdown_wait_backups_and_restores`                         | true に設定すると、ClickHouse はシャットダウン前に実行中のバックアップおよびリストアの完了を待ちます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `1`       |