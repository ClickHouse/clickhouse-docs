---
title: "Postgres生成カラム: 注意点とベストプラクティス"
slug: /integrations/clickpipes/postgres/generated_columns
---

PostgreSQLの生成カラムをレプリケートされているテーブルで使用する場合、いくつかの重要な考慮事項があります。これらの注意点は、レプリケーションプロセスや、デスティネーションシステムにおけるデータの整合性に影響を与える可能性があります。

## 生成カラムの問題 {#the-problem-with-generated-columns}

1. **`pgoutput`を通じて公開されない:** 生成カラムは`pgoutput`の論理レプリケーションプラグインを通じて公開されません。これは、PostgreSQLから別のシステムにデータをレプリケートする際に、生成カラムの値はレプリケーションストリームに含まれないことを意味します。

2. **主キーの問題:** 生成カラムが主キーの一部である場合、デスティネーションで重複除去の問題を引き起こす可能性があります。生成カラムの値がレプリケートされないため、デスティネーションシステムは行を適切に識別して重複を除去するために必要な情報を持たないことになります。

## ベストプラクティス {#best-practices}

これらの制限を回避するために、以下のベストプラクティスを検討してください。

1. **デスティネーションで生成カラムを再作成する:** レプリケーションプロセスに生成カラムの処理を依存するのではなく、dbt（data build tool）やその他のデータ変換メカニズムを使用して、デスティネーションでこれらのカラムを再作成することをお勧めします。

2. **主キーに生成カラムを使用しない:** レプリケートされるテーブルを設計する際は、生成カラムを主キーの一部として含めないようにするのが最善です。

## 今後のUI改善 {#upcoming-improvements-to-ui}

今後のバージョンでは、以下のサポートを提供するためにUIを追加する計画をしています。

1. **生成カラムを持つテーブルの特定:** UIには、生成カラムを含むテーブルを特定する機能が追加されます。これにより、ユーザーはどのテーブルがこの問題に影響を受けているかを理解できるようになります。

2. **ドキュメントとベストプラクティス:** UIには、レプリケートされたテーブルで生成カラムを使用するためのベストプラクティスが含まれ、一般的な落とし穴を避けるためのガイダンスが提供されます。
