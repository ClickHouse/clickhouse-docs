---
slug: /clickhouse-operator/install/olm
title: 'Operator Lifecycle Manager (OLM) を使用して ClickHouse Operator をインストールする'
keywords: ['kubernetes']
description: 'このガイドでは、kubectl とマニフェストファイルを使用して ClickHouse Operator をインストールする方法を説明します。'
doc_type: 'guide'
sidebar_label: 'OLM'
---

このガイドでは、Operator Lifecycle Manager (OLM) を使用して ClickHouse Operator をインストールする方法を説明します。

## 前提条件 \{#prerequisites\}

- Kubernetes クラスターのバージョン 1.33.0 以降
- クラスターへアクセスできるように構成された kubectl
- クラスター管理者権限
- OLM (Operator Lifecycle Manager) がインストールされていること

## OLM をインストールする \{#install-olm\}

クラスターに OLM がまだインストールされていない場合は、インストールしてください。

```bash
# Check if OLM is installed
kubectl get ns olm

# If not installed, install OLM
curl -sL https://github.com/operator-framework/operator-lifecycle-manager/releases/download/v0.28.0/install.sh | bash -s v0.28.0
```


## オペレーターをインストールする \{#install-the-operator\}

### GitHub カタログからインストール \{#install-from-github-catalog\}

```bash
# Create the operator namespace
kubectl create namespace clickhouse-operator-system

# Create a CatalogSource
kubectl apply -f - <<EOF
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: clickhouse-operator-catalog
  namespace: clickhouse-operator-system
spec:
  sourceType: grpc
  image: ghcr.io/clickhouse/clickhouse-operator-catalog:latest
  displayName: ClickHouse Operator
  publisher: ClickHouse
  updateStrategy:
    registryPoll:
      interval: 30m
EOF

# Create the OperatorGroup
kubectl apply -f - <<EOF
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: clickhouse-operator-group
  namespace: clickhouse-operator-system
EOF

# Create the Subscription
kubectl apply -f - <<EOF
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: clickhouse-operator
  namespace: clickhouse-operator-system
spec:
  channel: stable-v0
  name: clickhouse-operator
  source: clickhouse-operator-catalog
  sourceNamespace: clickhouse-operator-system
  installPlanApproval: Automatic
EOF
```


## アンインストール \{#uninstall\}

```bash
# Delete the subscription
kubectl delete subscription clickhouse-operator -n clickhouse-operator-system
# Find all associated resources
kubectl get operator clickhouse-operator.clickhouse-operator-system -o=jsonpath="{.status.components.refs}" | jq 'map({kind, name})'
# Delete associated resources (CRDs, Deployments, etc.)
kubectl delete <resource> <name> [-n <namespace>]  # Repeat for each resource found

# Delete the OperatorGroup (optional):
kubectl delete operatorgroup clickhouse-operator-group -n clickhouse-operator-system
# Delete the Operator view
kubectl delete operator clickhouse-operator.clickhouse-operator-system
```

アンインストールの詳細については、[OLM ドキュメント](https://olm.operatorframework.io/docs/tasks/uninstall-operator/)を参照してください。


## 参考資料 \{#additional-resources\}

- [Operator Lifecycle Manager のドキュメント](https://olm.operatorframework.io/docs)