---
slug: /guides/sre/scaling-clusters
sidebar_label: シャードの再バランス
sidebar_position: 20
description: ClickHouseは自動シャード再バランスをサポートしていないため、シャードを再バランスする方法に関するベストプラクティスを提供します。
---


# データの再バランス

ClickHouseは自動シャード再バランスをサポートしていません。しかし、シャードを再バランスするための方法がいくつかあります。推奨される順序は以下の通りです。

1. [分散テーブル](/engines/table-engines/special/distributed.md)のシャードを調整し、新しいシャードに書き込みが偏るようにします。これにより、クラスタに負荷の不均一やホットスポットが発生する可能性がありますが、書き込みスループットが極端に高くない場合は大抵のシナリオで実行可能です。ユーザーは書き込みターゲットを変更する必要がなく、分散テーブルのままで実行できます。これは既存のデータの再バランスには役立ちません。

2. （1）の代替として、既存のクラスタを変更し、新しいシャードに専念して書き込むことで、クラスタが均等になるまで手動で書き込みの重み付けを行います。これは（1）と同様の制限があります。

3. 既存のデータを再バランスする必要があり、データをパーティション化している場合は、パーティションをデタッチし、別のノードに手動で移動させた後、新しいシャードに再接続することを検討してください。これはその後の技術よりも手動作業が多いですが、より迅速でリソース消費が少ない場合があります。これは手動操作であるため、データの再バランスを考慮する必要があります。

4. ソースクラスタから新しいクラスタにデータを[INSERT FROM SELECT](/sql-reference/statements/insert-into.md/#inserting-the-results-of-select)を介してエクスポートします。これには非常に大きなデータセットの場合、パフォーマンスが低下し、ソースクラスタに対して significant IOが発生し、 considerableなネットワークリソースを使用する可能性があります。これは最終手段を表します。
