---
'slug': '/guides/sre/scaling-clusters'
'sidebar_label': 'シャードの再バランス'
'sidebar_position': 20
'description': 'ClickHouseは自動シャード再バランスをサポートしていないため、シャードを再バランスするためのいくつかのベストプラクティスを提供します。'
'title': 'データの再バランス'
'doc_type': 'guide'
---


# データの再バランス

ClickHouseは自動シャード再バランスをサポートしていません。しかし、以下の優先順位でシャードを再バランスする方法があります。

1. [分散テーブル](/engines/table-engines/special/distributed.md) のシャードを調整し、新しいシャードへの書き込みを偏らせることができます。これによりクラスタ上の負荷の不均衡やホットスポットが発生する可能性があるものの、書き込みスループットが極端に高くないほとんどのシナリオにおいては実行可能です。ユーザーは書き込み先を変更する必要がなく、分散テーブルのままで利用できます。これにより、既存のデータの再バランスには対応できません。

2. （1）の代替として、既存のクラスターを変更し、新しいシャードにのみ書き込むことでクラスターがバランスされるまで手動で書き込みをウェイト調整することができます。これには（1）と同様の制限があります。

3. 既存のデータを再バランスする必要があり、データをパーティション化している場合は、パーティションを切り離し、手動で別のノードに移動してから新しいシャードに再接続することを検討してください。これは次の手法よりも手動ですが、より迅速でリソースをあまり消費しない可能性があります。これは手動操作であり、データの再バランスを考慮する必要があります。

4. [INSERT FROM SELECT](/sql-reference/statements/insert-into.md/#inserting-the-results-of-select) を通じて、ソースクラスターから新しいクラスターにデータをエクスポートします。これは非常に大きなデータセットでは性能が出ず、ソースクラスターに対して重大なIOを引き起こし、かなりのネットワークリソースを使用する可能性があります。これは最後の手段を表します。
