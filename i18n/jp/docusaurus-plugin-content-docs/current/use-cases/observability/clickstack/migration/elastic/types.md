---
slug: /use-cases/observability/clickstack/migration/elastic/types
title: 'マッピングされる型'
pagination_prev: null
pagination_next: null
sidebar_label: '型'
sidebar_position: 2
description: 'ClickHouse と Elasticsearch における型のマッピング'
show_related_blogs: true
keywords: ['JSON', 'Codecs']
doc_type: 'reference'
---

Elasticsearch と ClickHouse は多様なデータ型をサポートしていますが、その基盤となるストレージモデルおよびクエリモデルは本質的に異なります。このセクションでは、一般的に使用される Elasticsearch のフィールド型を、可能な場合には対応する ClickHouse の型にマッピングし、あわせて移行時の判断に役立つ背景情報を提供します。等価な型が存在しない場合は、代替案や注意事項をコメントとして示します。



| **Elasticsearch タイプ**                                             | **ClickHouse における同等機能**                                                                                                                                                                                                                                                                  | **コメント**                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ----------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `boolean`                                                         | [`UInt8`](/sql-reference/data-types/int-uint)または[`Bool`](/sql-reference/data-types/boolean)                                                                                                                                                                                              | ClickHouse は、～をサポートします`Boolean`…のエイリアスとして`UInt8`新しいバージョンでは。                                                                                                                                                                                                                                                                                                                                                                                            |
| `keyword`                                                         | [`String`](/sql-reference/data-types/string)                                                                                                                                                                                                                                             | 完全一致によるフィルタリング、グループ化、およびソートに使用されます。                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `text`                                                            | [`String`](/sql-reference/data-types/string)                                                                                                                                                                                                                                             | ClickHouse におけるフルテキスト検索には制限があり、トークナイズには次のような関数を用いたカスタムロジックが必要です`tokens`配列関数と組み合わせて使用します。                                                                                                                                                                                                                                                                                                                                                               |
| `long`                                                            | [`Int64`](/sql-reference/data-types/int-uint)                                                                                                                                                                                                                                            | 64 ビット符号付き整数。                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `integer`                                                         | [`Int32`](/sql-reference/data-types/int-uint)                                                                                                                                                                                                                                            | 32 ビット符号付き整数。                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `short`                                                           | [`Int16`](/sql-reference/data-types/int-uint)                                                                                                                                                                                                                                            | 16ビット符号付き整数。                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `byte`                                                            | [`Int8`](/sql-reference/data-types/int-uint)                                                                                                                                                                                                                                             | 8ビット符号付き整数。                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `unsigned_long`                                                   | [`UInt64`](/sql-reference/data-types/int-uint)                                                                                                                                                                                                                                           | 符号なし 64 ビット整数。                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `double`                                                          | [`Float64`](/sql-reference/data-types/float)                                                                                                                                                                                                                                             | 64ビット浮動小数点数。                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `float`                                                           | [`Float32`](/sql-reference/data-types/float)                                                                                                                                                                                                                                             | 32ビット浮動小数点数。                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `half_float`                                                      | [`Float32`](/sql-reference/data-types/float)または[`BFloat16`](/sql-reference/data-types/float)                                                                                                                                                                                             | 最も近い同等の型。ClickHouse には 16 ビット浮動小数点型はありません。ClickHouse には`BFloat16`- これは Half-float IEEE 754 とは異なります。half-float は範囲が狭い代わりにより高い精度を提供しますが、bfloat16 は精度を犠牲にしてより広い範囲を扱えるようにしており、機械学習ワークロードにより適しています。                                                                                                                                                                                                                                                         |
| `scaled_float`                                                    | [`Decimal(x, y)`](/sql-reference/data-types/decimal)                                                                                                                                                                                                                                     | 固定小数点数を格納します。                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `date`                                                            | [`DateTime`](/sql-reference/data-types/datetime)                                                                                                                                                                                                                                         | 秒精度を持つ同等の日時型。                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `date_nanos`                                                      | [`DateTime64`](/sql-reference/data-types/datetime64)                                                                                                                                                                                                                                     | ClickHouse は `DateTime64(9)` によりナノ秒精度をサポートします。`DateTime64(9)`ClickHouse は `DateTime64(9)` 型でナノ秒精度をサポートします。                                                                                                                                                                                                                                                                                                                                             |
| `binary`                                                          | [`String`](/sql-reference/data-types/string),[`FixedString(N)`](/sql-reference/data-types/fixedstring)                                                                                                                                                                                   | バイナリフィールドには base64 でのデコードが必要です。                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `ip`                                                              | [`IPv4`](/sql-reference/data-types/ipv4)`IPv4`、`IPv6`[`IPv6`](/sql-reference/data-types/ipv6)                                                                                                                                                                                            | ネイティブ`IPv4`および`IPv6`ネイティブな `IPv4` および `IPv6` 型が利用可能です。                                                                                                                                                                                                                                                                                                                                                                                                 |
| `object`                                                          | [`Nested`](/sql-reference/data-types/nested-data-structures/nested)、[`Map`](/sql-reference/data-types/map)、[`Tuple`](/sql-reference/data-types/tuple),[`JSON`](/sql-reference/data-types/newjson)                                                                                        | ClickHouse は JSON ライクなオブジェクトを、`Nested` または `JSON` を使って表現できます[`Nested`](/sql-reference/data-types/nested-data-structures/nested)または[`JSON`](/sql-reference/data-types/newjson).                                                                                                                                                                                                                                                                         |
| `flattened`                                                       | [`String`](/sql-reference/data-types/string)                                                                                                                                                                                                                                             | Elasticsearch の flattened 型は、JSON オブジェクト全体を単一のフィールドとして保存し、完全なマッピングを定義しなくてもネストされたキーに柔軟かつスキーマレスにアクセスできるようにします。ClickHouse では、同様の機能を String 型で実現できますが、その場合はマテリアライズドビューで処理を行う必要があります。                                                                                                                                                                                                                                                                       |
| `nested`                                                          | [`Nested`](/sql-reference/data-types/nested-data-structures/nested)                                                                                                                                                                                                                      | ClickHouse`Nested`カラムは、ユーザーが `flatten_nested=0` を使用していることを前提とすると、グループ化されたサブフィールドに対して同様のセマンティクスを提供します`flatten_nested=0`.                                                                                                                                                                                                                                                                                                                                |
| `JOIN`                                                            | 該当なし                                                                                                                                                                                                                                                                                     | 親子関係という直接的な概念はありません。ClickHouse ではテーブル間の結合（JOIN）がサポートされているため、これを必要としません。                                                                                                                                                                                                                                                                                                                                                                                |
| `alias`                                                           | [`Alias`](/sql-reference/statements/create/table#alias)カラムモディファイア                                                                                                                                                                                                                        | エイリアス[がサポートされています](/sql-reference/statements/create/table#alias)フィールド修飾子を使用します。これらのエイリアスには関数を適用できます。例：`size String ALIAS formatReadableSize(size_bytes)`                                                                                                                                                                                                                                                                                               |
| `range``range` 型 (`*_range`)                                      | [`Tuple(start, end)`](/sql-reference/data-types/tuple)または[`Array(T)`](/sql-reference/data-types/array)                                                                                                                                                                                   | ClickHouse にはネイティブな範囲型はありませんが、数値範囲および日付範囲は次の方法で表現できます[`Tuple(start, end)`](/sql-reference/data-types/tuple)または[`Array`](/sql-reference/data-types/array)structures. IP 範囲（`ip_range`）の場合は、CIDR 値を `String` 型として保存し、`isIPAddressInRange()` などの関数で評価します。別の方法として、効率的なフィルタリングのために `ip_trie` ベースのルックアップ辞書を利用することも検討してください。`ip_range`)、CIDR 値を保存し`String`および次のような関数を使って評価し`isIPAddressInRange()`。あるいは次の方法も検討してください。`ip_trie`ベースのルックアップ辞書を使用して効率的にフィルタリングします。 |
| `aggregate_metric_double`                                         | [`AggregateFunction(...)`](/sql-reference/data-types/aggregatefunction)および[`SimpleAggregateFunction(...)`](/sql-reference/data-types/simpleaggregatefunction)                                                                                                                            | 集約関数のステートとマテリアライズドビューを使用して、事前集計済みのメトリクスをモデリングします。すべての集約関数は集約ステートをサポートします。                                                                                                                                                                                                                                                                                                                                                                              |
| `ヒストグラム`                                                          | [`Tuple(Array(Float64), Array(UInt64))`](/sql-reference/data-types/tuple)                                                                                                                                                                                                                | 配列またはカスタムスキーマを使用して、バケットとカウントを手動で表現します。                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `annotated-text`                                                  | [`String`](/sql-reference/data-types/string)                                                                                                                                                                                                                                             | エンティティ認識検索やアノテーションに対する組み込みサポートはありません。                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `completion``completion`、`search_as_you_type``search_as_you_type` | 該当なし                                                                                                                                                                                                                                                                                     | ネイティブのオートコンプリートやサジェスト機能はありません。次の方法で再現できます`String`ネイティブのオートコンプリートやサジェスト機能はありません。`String`型と検索関数を使用して実装できます。[文字列検索関数](/sql-reference/functions/string-search-functions)ネイティブなオートコンプリートやサジェスト機能はありません。`String`型と検索関数を使用して実装できます。                                                                                                                                                                                                                           |
| `semantic_text`                                                   | NA                                                                                                                                                                                                                                                                                       | ネイティブのセマンティック検索機能は提供されていません - エンベディングを生成し、ベクトル検索を使用してください。                                                                                                                                                                                                                                                                                                                                                                                             |
| `token_count`                                                     | [`Int32`](/sql-reference/data-types/int-uint)                                                                                                                                                                                                                                            | 取り込み時に手動でトークン数を計算する際に使用します。例:`length(tokens())`例えば、Materialized列を使用した関数                                                                                                                                                                                                                                                                                                                                                                                |
| `dense_vector`                                                    | [`Array(Float32)`](/sql-reference/data-types/array)                                                                                                                                                                                                                                      | 埋め込みベクトルの保存には配列を使用                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `sparse_vector`                                                   | [`Map(UInt32, Float32)`](/sql-reference/data-types/map)                                                                                                                                                                                                                                  | マップを使用してスパースベクトルをシミュレートします。ネイティブのスパースベクトルサポートはありません。                                                                                                                                                                                                                                                                                                                                                                                                   |
| `rank_feature`/`rank_features`                                    | [`Float32`](/sql-reference/data-types/float),[`Array(Float32)`](/sql-reference/data-types/array)                                                                                                                                                                                         | ネイティブなクエリ時のブースト機能はありませんが、スコアリングロジック内で手動で実装できます。                                                                                                                                                                                                                                                                                                                                                                                                        |
| `geo_point`                                                       | [`Tuple(Float64, Float64)`](/sql-reference/data-types/tuple)または[`Point`](/sql-reference/data-types/geo#point)                                                                                                                                                                            | (緯度, 経度) のタプルを使用してください。[`Point`](/sql-reference/data-types/geo#point)はClickHouseの型として利用できます。                                                                                                                                                                                                                                                                                                                                                           |
| `geo_shape`,`shape`                                               | [`Ring`](/sql-reference/data-types/geo#ring)、[`LineString`](/sql-reference/data-types/geo#linestring)、[`MultiLineString`](/sql-reference/data-types/geo#multilinestring)、[`Polygon`](/sql-reference/data-types/geo#polygon)、[`MultiPolygon`](/sql-reference/data-types/geo#multipolygon) | 地理形状と空間インデックスのネイティブサポート。                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `percolator`                                                      | 該当なし                                                                                                                                                                                                                                                                                     | クエリのインデックス化という概念はありません。代わりに標準SQLとインクリメンタルマテリアライズドビューを使用してください。                                                                                                                                                                                                                                                                                                                                                                                         |
| `version`                                                         | [`String`](/sql-reference/data-types/string)                                                                                                                                                                                                                                             | ClickHouseにはネイティブのバージョン型がありません。バージョンは文字列として保存し、必要に応じてカスタムUDF関数を使用してセマンティック比較を行ってください。範囲クエリが必要な場合は、数値形式への正規化を検討してください。                                                                                                                                                                                                                                                                                                                                  |

### 注意事項 {#notes}

- **配列**: Elasticsearchでは、すべてのフィールドがネイティブに配列をサポートしています。ClickHouseでは、配列を明示的に定義する必要があります(例:`Array(String)`)が、特定の位置にアクセスしてクエリを実行できるという利点があります(例:`an_array[1]`)。
- **マルチフィールド**: Elasticsearchでは、[同じフィールドを複数の方法でインデックス化](https://www.elastic.co/docs/reference/elasticsearch/mapping-reference/multi-fields#_multi_fields_with_multiple_analyzers)できます(例:`text`と`keyword`の両方)。ClickHouseでは、このパターンは別々のカラムまたはビューを使用してモデル化する必要があります。
- **Map型とJSON型** - ClickHouseでは、[`Map`](/sql-reference/data-types/map)型は`resourceAttributes`や`logAttributes`などの動的なキーバリュー構造をモデル化するために一般的に使用されます。この型は、実行時に任意のキーを追加できるようにすることで、柔軟なスキーマレス取り込みを可能にします。これはElasticsearchのJSONオブジェクトと本質的に類似しています。ただし、考慮すべき重要な制限があります:
  - **統一された値の型**: ClickHouseの[`Map`](/sql-reference/data-types/map)カラムは、一貫した値の型を持つ必要があります(例:`Map(String, String)`)。型強制なしでは混合型の値はサポートされません。
  - **パフォーマンスコスト**: [`Map`](/sql-reference/data-types/map)内の任意のキーにアクセスするには、マップ全体をメモリにロードする必要があり、パフォーマンス上最適ではない場合があります。
  - **サブカラムなし**: JSONとは異なり、[`Map`](/sql-reference/data-types/map)内のキーは真のサブカラムとして表現されないため、ClickHouseのインデックス化、圧縮、効率的なクエリ実行の能力が制限されます。

  これらの制限のため、ClickStackは[`Map`](/sql-reference/data-types/map)から、ClickHouseの強化された[`JSON`](/sql-reference/data-types/newjson)型への移行を進めています。[`JSON`](/sql-reference/data-types/newjson)型は`Map`の多くの欠点に対処します:
  - **真のカラムナーストレージ**: 各JSONパスはサブカラムとして保存され、効率的な圧縮、フィルタリング、ベクトル化されたクエリ実行が可能になります。
  - **混合型のサポート**: 異なるデータ型(例:整数、文字列、配列)が、型強制や型統一なしに同じパスの下で共存できます。
  - **ファイルシステムのスケーラビリティ**: 動的キー(`max_dynamic_paths`)と型(`max_dynamic_types`)に対する内部制限により、高カーディナリティのキーセットでも、ディスク上のカラムファイルの爆発的増加を防ぎます。
  - **高密度ストレージ**: nullや欠損値はスパースに保存され、不要なオーバーヘッドを回避します。

    [`JSON`](/sql-reference/data-types/newjson)型は、特にオブザーバビリティワークロードに適しており、スキーマレス取り込みの柔軟性とネイティブClickHouse型のパフォーマンスおよびスケーラビリティを提供します。これにより、動的属性フィールドにおける[`Map`](/sql-reference/data-types/map)の理想的な代替となります。

    JSON型の詳細については、[JSONガイド](https://clickhouse.com/docs/integrations/data-formats/json/overview)および["How we built a new powerful JSON data type for ClickHouse"](https://clickhouse.com/blog/a-new-powerful-json-data-type-for-clickhouse)を参照することをお勧めします。
