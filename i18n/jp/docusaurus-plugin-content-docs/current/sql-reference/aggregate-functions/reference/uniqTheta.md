---
description: 'Theta Sketch Framework を使用して、異なる引数の値のおおよその個数を計算します。'
slug: /sql-reference/aggregate-functions/reference/uniqthetasketch
title: 'uniqTheta'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## uniqTheta \{#uniqTheta\}

導入バージョン: v21.6

[Theta Sketch Framework](https://datasketches.apache.org/docs/Theta/ThetaSketches.html#theta-sketch-framework) を使用して、引数の異なる値の概算個数を計算します。

<details>
  <summary>実装の詳細</summary>

  この関数は、集約対象となるすべてのパラメータに対してハッシュ値を計算し、その結果を用いて処理を行います。
  [KMV](https://datasketches.apache.org/docs/Theta/InverseEstimate.html) アルゴリズムを使用して、引数の異なる値の個数を近似します。

  4096 (2^12) 個の 64 ビットスケッチが使用されます。
  状態のサイズは約 41 KB です。

  相対誤差は 3.125%（95% 信頼水準）です。詳細は [相対誤差表](https://datasketches.apache.org/docs/Theta/ThetaErrorTable.html) を参照してください。
</details>

**構文**

```sql
uniqTheta(x[, ...])
```

**引数**

* `x` — この関数は可変個のパラメータを取ります。[`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array) または [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`String`](/sql-reference/data-types/string) または [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

引数に現れる異なる値のおおよその個数を表す `UInt64` 型の数値を返します。[`UInt64`](/sql-reference/data-types/int-uint)

**例**

**基本的な使い方**

```sql title=Query
CREATE TABLE example_theta
(
    id UInt32,
    category String
)
ENGINE = Memory;

INSERT INTO example_theta VALUES
(1, 'A'), (2, 'B'), (3, 'A'), (4, 'C'), (5, 'B'), (6, 'A');

SELECT uniqTheta(category) as theta_unique_categories
FROM example_theta;
```

```response title=Response
┌─theta_unique_categories─┐
│                       3 │
└─────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**関連項目**

* [uniq](/sql-reference/aggregate-functions/reference/uniq)
* [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
* [uniqCombined64](/sql-reference/aggregate-functions/reference/uniqcombined64)
* [uniqHLL12](/sql-reference/aggregate-functions/reference/uniqhll12)
* [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
