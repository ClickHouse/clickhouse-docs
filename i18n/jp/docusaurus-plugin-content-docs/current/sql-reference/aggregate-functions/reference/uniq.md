---
description: '引数の異なる値の個数を近似的に算出します。'
slug: /sql-reference/aggregate-functions/reference/uniq
title: 'uniq'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## uniq \{#uniq\}

導入バージョン: v1.1

引数の異なる値の個数を近似的に計算します。

この関数はアダプティブサンプリングアルゴリズムを使用します。計算状態として、最大 65536 個までの要素ハッシュ値のサンプルを保持します。このアルゴリズムは非常に高精度であり、CPU 上で非常に高効率です。クエリにこれらの関数が複数含まれている場合でも、`uniq` を使うのは他の集約関数を使うのとほぼ同じ速度です。

<details>
  <summary>実装の詳細</summary>

  この関数は集約内のすべてのパラメータに対してハッシュ値を計算し、それを用いて計算を行います。
  この計算にはアダプティブサンプリングアルゴリズムを使用します。
  計算状態として、最大 65536 個までの要素ハッシュ値のサンプルを保持します。
  このアルゴリズムは非常に高精度であり、CPU 上で非常に高効率です。
  クエリにこれらの関数が複数含まれている場合でも、`uniq` を使うのは他の集約関数を使うのとほぼ同じ速度です。
</details>

:::tip
ほとんどあらゆるシナリオで、この関数を他のバリエーションより優先して使用することを推奨します。
:::

**構文**

```sql
uniq(x[, ...])
```

**引数**

* `x` — 関数は可変個のパラメータを受け取ります。[`Tuple(T)`](/sql-reference/data-types/tuple)、[`Array(T)`](/sql-reference/data-types/array)、[`Date`](/sql-reference/data-types/date)、[`DateTime`](/sql-reference/data-types/datetime)、[`String`](/sql-reference/data-types/string)、[`(U)Int*`](/sql-reference/data-types/int-uint)、[`Float*`](/sql-reference/data-types/float)、[`Decimal`](/sql-reference/data-types/decimal) のいずれか。

**戻り値**

異なる値のおおよその個数を表す `UInt64` 型の数値を返します。[`UInt64`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
CREATE TABLE example_table (
    id UInt32,
    category String,
    value Float64
) ENGINE = Memory;

INSERT INTO example_table VALUES
(1, 'A', 10.5),
(2, 'B', 20.3),
(3, 'A', 15.7),
(4, 'C', 8.9),
(5, 'B', 12.1),
(6, 'A', 18.4);

SELECT uniq(category) as unique_categories
FROM example_table;
```

```response title=Response
┌─unique_categories─┐
│                 3 │
└───────────────────┘
```

**複数引数**

```sql title=Query
SELECT uniq(category, value) as unique_combinations
FROM example_table;
```

```response title=Response
┌─unique_combinations─┐
│                   6 │
└─────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**関連項目**

* [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
* [uniqCombined64](/sql-reference/aggregate-functions/reference/uniqcombined64)
* [uniqHLL12](/sql-reference/aggregate-functions/reference/uniqhll12)
* [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
* [uniqTheta](/sql-reference/aggregate-functions/reference/uniqthetasketch)
