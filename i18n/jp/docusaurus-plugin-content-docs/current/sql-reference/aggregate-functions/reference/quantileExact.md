---
description: 'quantileExact, quantileExactLow, quantileExactHigh, quantileExactExclusive,
  quantileExactInclusive 関数'
slug: /sql-reference/aggregate-functions/reference/quantileexact
title: 'quantileExact 関数群'
doc_type: 'reference'
---

# quantileExact \{#quantileexact\}

数値データ列の[分位数](https://en.wikipedia.org/wiki/Quantile)を厳密に計算します。

正確な値を得るために、渡されたすべての値が配列にまとめられ、その配列が部分的にソートされます。したがって、この関数は `O(n)` のメモリを消費し、ここで `n` は渡された値の数です。ただし、値の数が少ない場合、この関数は非常に効率的です。

クエリ内で複数の `quantile*` 関数を異なるレベルで使用する場合、内部状態は結合されません（つまり、そのクエリは本来達成できる効率よりも低くなります）。この場合は、[quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md) 関数を使用してください。

**構文**

```sql
quantileExact(level)(expr)
```

別名: `medianExact`。

**引数**

* `level` — 分位数のレベル。省略可能なパラメータ。0 から 1 の範囲の定数浮動小数点数です。`level` の値としては `[0.01, 0.99]` の範囲を使用することを推奨します。デフォルト値は 0.5 です。`level=0.5` の場合、この関数は[中央値](https://en.wikipedia.org/wiki/Median)を計算します。
* `expr` — 数値型の[データ型](/sql-reference/data-types)、[Date](../../../sql-reference/data-types/date.md)、または [DateTime](../../../sql-reference/data-types/datetime.md) となるカラム値に対する式。

**返される値**

* 指定されたレベルの分位数。

型:

* 数値データ型の場合、出力形式は入力形式と同じになります。例えば:

```sql

SELECT
    toTypeName(quantileExact(number)) AS `quantile`,
    toTypeName(quantileExact(number::Int32)) AS `quantile_int32`,
    toTypeName(quantileExact(number::Float32)) AS `quantile_float32`,
    toTypeName(quantileExact(number::Float64)) AS `quantile_float64`,
    toTypeName(quantileExact(number::Int64)) AS `quantile_int64`
FROM numbers(1)
   ┌─quantile─┬─quantile_int32─┬─quantile_float32─┬─quantile_float64─┬─quantile_int64─┐
1. │ UInt64   │ Int32          │ Float32          │ Float64          │ Int64          │
   └──────────┴────────────────┴──────────────────┴──────────────────┴────────────────┘

1 row in set. Elapsed: 0.002 sec.
```

* 入力値が `Date` 型の場合は [Date](../../../sql-reference/data-types/date.md)。
* 入力値が `DateTime` 型の場合は [DateTime](../../../sql-reference/data-types/datetime.md)。

**例**

クエリ:

```sql
SELECT quantileExact(number) FROM numbers(10)
```

結果:

```text
┌─quantileExact(number)─┐
│                     5 │
└───────────────────────┘
```

**関連項目**

* [median](/sql-reference/aggregate-functions/reference/median)
* [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md)

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
