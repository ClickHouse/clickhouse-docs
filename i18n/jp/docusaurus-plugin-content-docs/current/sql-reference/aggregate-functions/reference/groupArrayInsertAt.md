---
description: '配列の指定位置に値を挿入します。'
slug: /sql-reference/aggregate-functions/reference/grouparrayinsertat
title: 'groupArrayInsertAt'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## groupArrayInsertAt \{#groupArrayInsertAt\}

導入バージョン: v1.1

指定された位置に値を配列に挿入します。

1つのクエリ内で同じ位置に複数の値が挿入される場合、この関数は次のように動作します。

* クエリが単一スレッドで実行される場合、挿入された値のうち最初のものが使用されます。
* クエリがマルチスレッドで実行される場合、結果の値は挿入された値のうちどれになるか不定です。

**構文**

```sql
groupArrayInsertAt(default_x, size)([x, pos])
```

**パラメータ**

* `default_x` — 省略可。空の位置を埋めるためのデフォルト値。[`Any`](/sql-reference/data-types)
* `size` — 省略可。結果となる配列の長さ。このパラメータを使用する場合は、デフォルト値 `default_x` を指定する必要があります。[`UInt32`](/sql-reference/data-types/int-uint)

**引数**

* `x` — 挿入する値。[`Any`](/sql-reference/data-types)
* `pos` — 要素 `x` を挿入する位置。配列内のインデックス番号は 0 から始まります。[`UInt32`](/sql-reference/data-types/int-uint)

**戻り値**

挿入された値を含む配列を返します。[`Array`](/sql-reference/data-types/array)

**例**

**パラメータなしの基本的な使用例**

```sql title=Query
SELECT groupArrayInsertAt(toString(number), number * 2) FROM numbers(5);
```

```response title=Response
┌─groupArrayInsertAt(toString(number), multiply(number, 2))─┐
│ ['0','','1','','2','','3','','4']                         │
└───────────────────────────────────────────────────────────┘
```

**デフォルト値パラメータ使用時の利用方法**

```sql title=Query
SELECT groupArrayInsertAt('-')(toString(number), number * 2) FROM numbers(5);
```

```response title=Response
┌─groupArrayInsertAt('-')(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2','-','3','-','4']                          │
└────────────────────────────────────────────────────────────────┘
```

**デフォルト値およびサイズパラメータを用いた使用方法**

```sql title=Query
SELECT groupArrayInsertAt('-', 5)(toString(number), number * 2) FROM numbers(5);
```

```response title=Response
┌─groupArrayInsertAt('-', 5)(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2']                                             │
└───────────────────────────────────────────────────────────────────┘
```

**同一位置へのマルチスレッド同時挿入**

```sql title=Query
SELECT groupArrayInsertAt(number, 0) FROM numbers_mt(10) SETTINGS max_block_size = 1;
```

```response title=Response
┌─groupArrayInsertAt(number, 0)─┐
│ [7]                           │
└───────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
