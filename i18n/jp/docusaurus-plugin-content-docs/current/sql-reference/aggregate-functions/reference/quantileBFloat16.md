---
description: 'bfloat16 数値で構成されるサンプルから近似分位数を計算します。'
slug: /sql-reference/aggregate-functions/reference/quantilebfloat16
title: 'quantileBFloat16'
doc_type: 'reference'
---

# quantileBFloat16Weighted {#quantilebfloat16weighted}

`quantileBFloat16` と同様ですが、シーケンスの各要素の重みを考慮します。

[bfloat16](https://en.wikipedia.org/wiki/Bfloat16_floating-point_format) 数値からなる標本の近似的な[分位数](https://en.wikipedia.org/wiki/Quantile)を計算します。`bfloat16` は、1 ビットの符号ビット、8 ビットの指数部、7 ビットの仮数部を持つ浮動小数点データ型です。
この関数は入力値を 32 ビット float に変換し、上位 16 ビットを取得します。その後、`bfloat16` の分位数を計算し、結果にゼロビットを付加して 64 ビット float に変換します。
この関数は、相対誤差が最大でも 0.390625% に収まる高速な分位数推定器です。

**構文**

```sql
quantileBFloat16[(level)](expr)
```

Alias: `medianBFloat16`

**引数**

* `expr` — 数値データを含むカラム。 [Integer](../../../sql-reference/data-types/int-uint.md)、[Float](../../../sql-reference/data-types/float.md)。

**パラメータ**

* `level` — 分位数レベル。省略可能。指定可能な値の範囲は 0 から 1 です。デフォルト値: 0.5。 [Float](../../../sql-reference/data-types/float.md)。

**戻り値**

* 指定したレベルの近似分位数。

型: [Float64](/sql-reference/data-types/float)。

**例**

入力テーブルには整数カラムと浮動小数点カラムがあります：

```text
┌─a─┬─────b─┐
│ 1 │ 1.001 │
│ 2 │ 1.002 │
│ 3 │ 1.003 │
│ 4 │ 1.004 │
└───┴───────┘
```

0.75-分位数（第3四分位数）を計算するクエリ:

```sql
SELECT quantileBFloat16(0.75)(a), quantileBFloat16(0.75)(b) FROM example_table;
```

結果：

```text
┌─quantileBFloat16(0.75)(a)─┬─quantileBFloat16(0.75)(b)─┐
│                         3 │                         1 │
└───────────────────────────┴───────────────────────────┘
```

この例のすべての浮動小数点値は、`bfloat16` に変換すると 1.0 に切り捨てられることに注意してください。

**関連項目**

* [median](/sql-reference/aggregate-functions/reference/median)
* [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md)

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
