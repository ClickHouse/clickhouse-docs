---
description: 'HyperLogLog アルゴリズムを使用して、ユニークな引数値の概算個数を計算します。'
slug: /sql-reference/aggregate-functions/reference/uniqhll12
title: 'uniqHLL12'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## uniqHLL12 \{#uniqHLL12\}

導入バージョン: v1.1

[HyperLogLog](https://en.wikipedia.org/wiki/HyperLogLog) アルゴリズムを使用して、異なる引数値のおおよその個数を計算します。

:::warning
この関数の使用は推奨しません。ほとんどの場合、[uniq](https://clickhouse.com/docs/sql-reference/aggregate-functions/reference/uniq) または [uniqCombined](https://clickhouse.com/docs/sql-reference/aggregate-functions/reference/uniqcombined) 関数を使用してください。
:::

<details>
  <summary>実装の詳細</summary>
  この関数は集約内のすべてのパラメータに対してハッシュ値を計算し、そのハッシュ値を使って計算を行います。
  異なる引数値の個数を近似するために HyperLogLog アルゴリズムを使用します。

  2^12 個の 5-bit セルを使用します。
  集約状態のサイズは 2.5 KB を少し上回ります。
  小さいデータセット（&lt;10K 要素）では結果の精度があまり高くなく、誤差は最大で約 10% になります。
  一方、高カーディナリティのデータセット（10K〜100M）では比較的高い精度で、最大誤差は約 1.6% です。
  100M を超えると推定誤差が大きくなり、超高カーディナリティ（1B+ 要素）のデータセットに対しては非常に不正確な結果を返すようになります。

  決定論的な結果を返します（クエリ処理順序に依存しません）。
</details>

**構文**

```sql
uniqHLL12(x[, ...])
```

**引数**

* `x` — この関数は可変個の引数を取ります。型は [`Tuple(T)`](/sql-reference/data-types/tuple)、[`Array(T)`](/sql-reference/data-types/array)、[`Date`](/sql-reference/data-types/date)、[`DateTime`](/sql-reference/data-types/datetime)、[`String`](/sql-reference/data-types/string)、[`(U)Int*`](/sql-reference/data-types/int-uint)、[`Float*`](/sql-reference/data-types/float)、[`Decimal`](/sql-reference/data-types/decimal) のいずれかです。

**戻り値**

異なる引数値の概算個数を表す `UInt64` 型の値を返します。[`UInt64`](/sql-reference/data-types/int-uint)

**例**

**基本的な使用方法**

```sql title=Query
CREATE TABLE example_hll
(
    id UInt32,
    category String
)
ENGINE = Memory;

INSERT INTO example_hll VALUES
(1, 'A'), (2, 'B'), (3, 'A'), (4, 'C'), (5, 'B'), (6, 'A');

SELECT uniqHLL12(category) AS hll_unique_categories
FROM example_hll;
```

```response title=Response
┌─hll_unique_categories─┐
│                     3 │
└───────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**関連項目**

* [uniq](/sql-reference/aggregate-functions/reference/uniq)
* [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
* [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
* [uniqTheta](/sql-reference/aggregate-functions/reference/uniqthetasketch)
