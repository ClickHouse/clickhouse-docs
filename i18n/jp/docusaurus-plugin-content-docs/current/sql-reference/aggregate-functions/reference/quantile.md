---
description: '数値データ列の近似的な分位数を計算します。'
slug: /sql-reference/aggregate-functions/reference/quantile
title: 'quantile'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantile \{#quantile\}

導入バージョン: v1.1

数値データ列の近似的な [`quantile`](https://en.wikipedia.org/wiki/Quantile) を計算します。

この関数は、最大 8192 のリザーバサイズとサンプリング用の乱数生成器を用いた [リザーバサンプリング](https://en.wikipedia.org/wiki/Reservoir_sampling) を適用します。
結果は非決定的です。
厳密な quantile を取得するには、[`quantileExact`](/sql-reference/aggregate-functions/reference/quantileexact#quantileexact) 関数を使用してください。

クエリ内で異なるレベルを持つ複数の `quantile*` 関数を使用する場合、内部状態は結合されません（つまり、そのクエリは本来より非効率に動作します）。
このような場合は、[`quantiles`](/sql-reference/aggregate-functions/reference/quantiles#quantiles) 関数を使用してください。

空の数値シーケンスに対しては、`quantile` は NaN を返しますが、`quantile*` の各バリアントは、バリアントに応じて NaN かそのシーケンスタイプのデフォルト値のいずれかを返すことに注意してください。

**構文**

```sql
quantile(level)(expr)
```

**別名**: `median`

**パラメータ**

* `level` — 省略可能。分位数のレベル。0 から 1 の範囲の定数の浮動小数点数値。`level` の値として `[0.01, 0.99]` の範囲を使用することを推奨します。デフォルト値: 0.5。`level=0.5` の場合、この関数は中央値を計算します。[`Float`](/sql-reference/data-types/float)

**引数**

* `expr` — カラム値に対する式で、数値データ型、Date、または DateTime を返します。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal*`](/sql-reference/data-types/decimal) または [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)

**戻り値**

指定したレベルの近似分位数。[`Float64`](/sql-reference/data-types/float) または [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)

**例**

**quantile の計算**

```sql title=Query
CREATE TABLE t (val UInt32) ENGINE = Memory;
INSERT INTO t VALUES (1), (1), (2), (3);

SELECT quantile(val) FROM t;
```

```response title=Response
┌─quantile(val)─┐
│           1.5 │
└───────────────┘
```

{/*AUTOGENERATED_END*/ }

**関連項目**

* [median](./median.md)
* [quantiles](./quantiles.md)
