---
description: '数値データ列の近似的な分位数を計算します。'
slug: /sql-reference/aggregate-functions/reference/quantile
title: 'quantile'
doc_type: 'reference'
---

# quantile \{#quantile\}

数値データシーケンスの近似的な[分位点](https://en.wikipedia.org/wiki/Quantile)を計算します。

この関数は、最大サイズ 8192 の[リザーバサンプリング](https://en.wikipedia.org/wiki/Reservoir_sampling)と乱数生成器を用いてサンプリングを行います。結果は非決定的です。厳密な分位点を取得するには、[quantileExact](/sql-reference/aggregate-functions/reference/quantileExact.md) 関数を使用してください。

1 つのクエリ内で、異なるレベルを持つ複数の `quantile*` 関数を使用する場合、内部状態は結合されません（つまり、クエリは本来より非効率に動作します）。このような場合は、[quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md) 関数を使用してください。

数値シーケンスが空の場合、`quantile` は NaN を返しますが、`quantile*` の各バリアントは、そのバリアントに応じて NaN またはシーケンス型のデフォルト値のいずれかを返すことに注意してください。

**構文**

```sql
quantile(level)(expr)
```

別名: `median`。

**引数**

* `level` — 分位点のレベル。省略可能なパラメーター。0 から 1 の間の定数浮動小数点数。`level` の値は `[0.01, 0.99]` の範囲で使用することを推奨します。デフォルト値: 0.5。`level=0.5` の場合、この関数は[中央値](https://en.wikipedia.org/wiki/Median)を計算します。
* `expr` — 数値[データ型](/sql-reference/data-types)、[Date](/sql-reference/data-types/date) または [DateTime](/sql-reference/data-types/datetime) を結果とする、列値に対する式。

**戻り値**

* 指定されたレベルの近似的な分位点。

型:

* 数値データ型入力に対しては [Float64](/sql-reference/data-types/float)。
* 入力値が `Date` 型の場合は [Date](/sql-reference/data-types/date)。
* 入力値が `DateTime` 型の場合は [DateTime](/sql-reference/data-types/datetime)。

**例**

入力テーブル:

```text
┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
```

クエリ：

```sql
SELECT quantile(val) FROM t
```

結果:

```text
┌─quantile(val)─┐
│           1.5 │
└───────────────┘
```

**関連項目**

* [median](./median.md)
* [quantiles](./quantiles.md)

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
