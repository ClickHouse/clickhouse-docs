---
description: '相対誤差保証付きでサンプルの分位数の近似値を計算します。'
slug: /sql-reference/aggregate-functions/reference/quantileddsketch
title: 'quantileDD'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantileDD \{#quantileDD\}

導入バージョン: v24.1

相対誤差が保証された、標本の近似的な[分位点](https://en.wikipedia.org/wiki/Quantile)を計算します。
これは [DD](https://www.vldb.org/pvldb/vol12/p2195-masson.pdf) を構築することで実現します。

**構文**

```sql
quantileDD(relative_accuracy, [level])(expr)
```

**エイリアス**: `medianDD`

**パラメータ**

* `relative_accuracy` — 分位数の相対精度。取り得る値は 0 から 1 の範囲です。スケッチのサイズはデータの範囲と相対精度に依存します。範囲が大きく、相対精度が小さいほどスケッチは大きくなります。スケッチのメモリ使用量のおおよそのサイズは `log(max_value/min_value)/relative_accuracy` です。推奨値は 0.001 以上です。[`Float*`](/sql-reference/data-types/float)
* `level` — オプション。分位数のレベル。取り得る値は 0 から 1 の範囲です。デフォルト値: 0.5。[`Float*`](/sql-reference/data-types/float)

**引数**

* `expr` — 数値データを含むカラム。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

指定したレベルの近似分位数。[`Float64`](/sql-reference/data-types/float)

**例**

**DD スケッチによる分位数の計算**

```sql title=Query
CREATE TABLE example_table (a UInt32, b Float32) ENGINE = Memory;
INSERT INTO example_table VALUES (1, 1.001), (2, 1.002), (3, 1.003), (4, 1.004);

SELECT quantileDD(0.01, 0.75)(a), quantileDD(0.01, 0.75)(b) FROM example_table;
```

```response title=Response
┌─quantileDD(0.01, 0.75)(a)─┬─quantileDD(0.01, 0.75)(b)─┐
│        2.974233423476717  │                      1.01 │
└───────────────────────────┴───────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**関連項目**

* [median](/sql-reference/aggregate-functions/reference/median)
* [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md)
