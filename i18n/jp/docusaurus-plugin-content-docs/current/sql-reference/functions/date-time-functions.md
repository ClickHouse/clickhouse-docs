---
description: '日付および時刻を扱う関数のドキュメント'
sidebar_label: '日付と時刻'
slug: /sql-reference/functions/date-time-functions
title: '日付および時刻を扱う関数'
doc_type: 'reference'
---

# 日付と時刻を扱う関数 \{#functions-for-working-with-dates-and-times\}

このセクションのほとんどの関数は、`Europe/Amsterdam` のようなタイムゾーンをオプションの引数として受け取ります。この場合、ローカル（デフォルト）のタイムゾーンではなく、指定したタイムゾーンが使用されます。

**例**

```sql
SELECT
    toDateTime('2016-06-15 23:00:00') AS time,
    toDate(time) AS date_local,
    toDate(time, 'Asia/Yekaterinburg') AS date_yekat,
    toString(time, 'US/Samoa') AS time_samoa
```

```text
┌────────────────time─┬─date_local─┬─date_yekat─┬─time_samoa──────────┐
│ 2016-06-15 23:00:00 │ 2016-06-15 │ 2016-06-16 │ 2016-06-15 09:00:00 │
└─────────────────────┴────────────┴────────────┴─────────────────────┘
```

{/* 
  以下のタグ内の内容は、ドキュメントフレームワークのビルド時に
  system.functions から自動生成されたドキュメントに置き換えられます。タグの変更や削除は行わないでください。
  参照: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## UTCTimestamp \{#UTCTimestamp\}

導入バージョン: v22.11

クエリの解析時点における現在の日付と時刻を返します。この関数は定数式です。

この関数は `now('UTC')` と同じ結果を返します。MySQL 互換性のためだけに追加されました。推奨されるのは [`now`](#now) の使用です。

**構文**

```sql
UTCTimestamp()
```

**別名**: `UTC_timestamp`

**引数**

* なし。

**戻り値**

クエリの解析時点における現在の日時を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**現在の UTC タイムスタンプを取得**

```sql title=Query
SELECT UTCTimestamp()
```

```response title=Response
┌──────UTCTimestamp()─┐
│ 2024-05-28 08:32:09 │
└─────────────────────┘
```

## YYYYMMDDToDate \{#YYYYMMDDToDate\}

導入バージョン: v23.9

年・月・日を表す数値を `Date` に変換します。
この関数は、関数 [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD) の逆の動作をします。
入力が有効な `Date` 値を表していない場合、結果は未定義です。

**構文**

```sql
YYYYMMDDToDate(YYYYMMDD)
```

**引数**

* `YYYYMMDD` — 年・月・日を表す数値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

指定された引数から `Date` 型の値を返します。[`Date`](/sql-reference/data-types/date)

**使用例**

**例**

```sql title=Query
SELECT YYYYMMDDToDate(20230911);
```

```response title=Response
┌─toYYYYMMDD(20230911)─┐
│           2023-09-11 │
└──────────────────────┘
```

## YYYYMMDDToDate32 \{#YYYYMMDDToDate32\}

導入バージョン: v23.9

年・月・日を表す数値を `Date32` に変換します。
この関数は、関数 [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD) の逆の変換を行います。
入力が有効な `Date32` の値を表していない場合、結果は未定義です。

**構文**

```sql
YYYYMMDDToDate32(YYYYMMDD)
```

**引数**

* `YYYYMMDD` — 年・月・日を表す数値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**返される値**

指定された引数から `Date32` 型の値を返します。[`Date32`](/sql-reference/data-types/date32)

**使用例**

**例**

```sql title=Query
SELECT YYYYMMDDToDate32(20000507);
```

```response title=Response
┌─YYYYMMDDToDate32(20000507)─┐
│                 2000-05-07 │
└────────────────────────────┘
```

## YYYYMMDDhhmmssToDateTime \{#YYYYMMDDhhmmssToDateTime\}

導入バージョン: v23.9

年・月・日・時・分・秒を表す数値を `DateTime` に変換します。
この関数は、関数 [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss) の逆の動作をします。
入力が有効な `DateTime` 値を表していない場合、出力は未定義となります。

**構文**

```sql
YYYYMMDDhhmmssToDateTime(YYYYMMDDhhmmss[, timezone])
```

**引数**

* `YYYYMMDDhhmmss` — 年、月、日、時、分、秒を含む数値。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `timezone` — タイムゾーン名。 [`String`](/sql-reference/data-types/string)

**戻り値**

指定された引数に基づいて `DateTime` 値を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**例**

```sql title=Query
SELECT YYYYMMDDToDateTime(20230911131415);
```

```response title=Response
┌──────YYYYMMDDhhmmssToDateTime(20230911131415)─┐
│                           2023-09-11 13:14:15 │
└───────────────────────────────────────────────┘
```

## YYYYMMDDhhmmssToDateTime64 \{#YYYYMMDDhhmmssToDateTime64\}

導入バージョン: v23.9

年・月・日・時・分・秒を含む数値を `DateTime64` に変換します。
この関数は、関数 [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss) の逆です。
入力が有効な `DateTime64` 値をエンコードしていない場合、出力は未定義です。

**構文**

```sql
YYYYMMDDhhmmssToDateTime64(YYYYMMDDhhmmss[, precision[, timezone]])
```

**引数**

* `YYYYMMDDhhmmss` — 年、月、日、時、分、秒を含む数値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `precision` — 小数部の桁精度 (0-9)。[`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — タイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

指定された引数から `DateTime64` 型の値を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**例**

```sql title=Query
SELECT YYYYMMDDhhmmssToDateTime64(20230911131415, 3, 'Asia/Istanbul');
```

```response title=Response
┌─YYYYMMDDhhmm⋯/Istanbul')─┐
│  2023-09-11 13:14:15.000 │
└──────────────────────────┘
```

## addDate \{#addDate\}

導入バージョン: v23.9

指定された `Date`、日時、または文字列としてエンコードされた日付／日時に時間間隔を加算します。
加算の結果がデータ型の範囲外の値になる場合、結果は未定義です。

**構文**

```sql
addDate(datetime, interval)
```

**引数**

* `datetime` — `interval` を加える対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `interval` — 加算するインターバル。[`Interval`](/sql-reference/data-types/int-uint)

**戻り値**

`datetime` に `interval` を加算して得られた日付または日時を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**日付にインターバルを加算する**

```sql title=Query
SELECT addDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─addDate(toDa⋯valYear(3))─┐
│               2021-01-01 │
└──────────────────────────┘
```

## addDays \{#addDays\}

導入バージョン: v1.1

日付、日時、またはそれらの文字列表現に、指定した日数を加算します。

**構文**

```sql
addDays(datetime, num)
```

**引数**

* `datetime` — 指定した日数を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する日数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` に `num` 日を加算した値を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**さまざまな日付型に日数を加算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addDays(date, 5) AS add_days_with_date,
    addDays(date_time, 5) AS add_days_with_date_time,
    addDays(date_time_string, 5) AS add_days_with_date_time_string
```

```response title=Response
┌─add_days_with_date─┬─add_days_with_date_time─┬─add_days_with_date_time_string─┐
│         2024-01-06 │     2024-01-06 00:00:00 │        2024-01-06 00:00:00.000 │
└────────────────────┴─────────────────────────┴────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─plus(CAST('1⋯valDay(10))─┐
│               1998-06-26 │
└──────────────────────────┘
```

## addHours \{#addHours\}

導入バージョン: v1.1

日付、日時、または文字列表現の日付もしくは日時に、指定した時間を加算します。

**構文**

```sql
addHours(datetime, num)
```

**引数**

* `datetime` — 指定した時間数を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する時間数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` に `num` 時間を加算した値を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**例**

**異なる日付／日時型への時間の加算**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addHours(date, 12) AS add_hours_with_date,
    addHours(date_time, 12) AS add_hours_with_date_time,
    addHours(date_time_string, 12) AS add_hours_with_date_time_string
```

```response title=Response
┌─add_hours_with_date─┬─add_hours_with_date_time─┬─add_hours_with_date_time_string─┐
│ 2024-01-01 12:00:00 │      2024-01-01 12:00:00 │         2024-01-01 12:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**別の INTERVAL 構文を使う**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─plus(CAST('1⋯alHour(10))─┐
│      1998-06-16 10:00:00 │
└──────────────────────────┘
```

## addInterval \{#addInterval\}

導入バージョン: v22.11

あるインターバルに、別のインターバルまたはインターバルのタプルを加算します。

:::note
同じ型のインターバル同士は 1 つのインターバルにまとめられます。たとえば `toIntervalDay(1)` と `toIntervalDay(2)` を渡した場合、結果は `(1,1)` ではなく `(3)` になります。
:::

**構文**

```sql
addInterval(interval_1, interval_2)
```

**引数**

* `interval_1` — 最初のインターバル、またはインターバルのタプル。[`Interval`](/sql-reference/data-types/int-uint) または [`Tuple(Interval)`](/sql-reference/data-types/tuple)
* `interval_2` — 加算する 2 番目のインターバル。[`Interval`](/sql-reference/data-types/int-uint)

**返される値**

インターバルのタプルを返します。[`Tuple(Interval)`](/sql-reference/data-types/tuple)

**例**

**インターバルを加算する**

```sql title=Query
SELECT addInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT addInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT addInterval(INTERVAL 2 DAY, INTERVAL 1 DAY)
```

```response title=Response
┌─addInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,1)                                             │
└───────────────────────────────────────────────────┘
┌─addInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,1)                                                                │
└────────────────────────────────────────────────────────────────────────┘
┌─addInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (3)                                             │
└─────────────────────────────────────────────────┘
```

## addMicroseconds \{#addMicroseconds\}

導入バージョン: v22.6

日付時刻型、または文字列で表現された日付時刻に対して、指定したマイクロ秒数を加算します。

**構文**

```sql
addMicroseconds(datetime, num)
```

**引数**

* `datetime` — 指定したマイクロ秒数を加算する日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算するマイクロ秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`date_time` に `num` マイクロ秒を加算した値を返します。戻り値の型は [`DateTime64`](/sql-reference/data-types/datetime64) です。

**例**

**異なる日付時刻型にマイクロ秒を加算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMicroseconds(date_time, 1000000) AS add_microseconds_with_date_time,
    addMicroseconds(date_time_string, 1000000) AS add_microseconds_with_date_time_string
```

```response title=Response
┌─add_microseconds_with_date_time─┬─add_microseconds_with_date_time_string─┐
│      2024-01-01 00:00:01.000000 │             2024-01-01 00:00:01.000000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**別の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─plus(CAST('19⋯osecond(10))─┐
│ 1998-06-16 00:00:00.000010 │
└────────────────────────────┘
```

## addMilliseconds \{#addMilliseconds\}

導入: v22.6

日付時刻型、または文字列表現の日付時刻に対して、指定したミリ秒数を加算します。

**構文**

```sql
addMilliseconds(datetime, num)
```

**引数**

* `datetime` — 指定されたミリ秒数を加算する対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算するミリ秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返される値**

`datetime` に `num` ミリ秒を加算した値を返します。型は [`DateTime64`](/sql-reference/data-types/datetime64) です。

**例**

**異なる日時型にミリ秒を加算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMilliseconds(date_time, 1000) AS add_milliseconds_with_date_time,
    addMilliseconds(date_time_string, 1000) AS add_milliseconds_with_date_time_string
```

```response title=Response
┌─add_milliseconds_with_date_time─┬─add_milliseconds_with_date_time_string─┐
│         2024-01-01 00:00:01.000 │                2024-01-01 00:00:01.000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**INTERVAL 構文の別形式を使用する**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─plus(CAST('1⋯second(10))─┐
│  1998-06-16 00:00:00.010 │
└──────────────────────────┘
```

## addMinutes \{#addMinutes\}

導入バージョン: v1.1

日付、日時、または文字列表現の日付もしくは日時に、指定した分を加算します。

**構文**

```sql
addMinutes(datetime, num)
```

**引数**

* `datetime` — 指定した分を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する分の量。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` に `num` 分を加算した値を返す。型は [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)。

**例**

**異なる日付型に分を加算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMinutes(date, 20) AS add_minutes_with_date,
    addMinutes(date_time, 20) AS add_minutes_with_date_time,
    addMinutes(date_time_string, 20) AS add_minutes_with_date_time_string
```

```response title=Response
┌─add_minutes_with_date─┬─add_minutes_with_date_time─┬─add_minutes_with_date_time_string─┐
│   2024-01-01 00:20:00 │        2024-01-01 00:20:00 │           2024-01-01 00:20:00.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─plus(CAST('1⋯Minute(10))─┐
│      1998-06-16 00:10:00 │
└──────────────────────────┘
```

## addMonths \{#addMonths\}

導入バージョン: v1.1

日付、日時、または文字列表現の日付／日時に、指定した数の月を追加します。

**構文**

```sql
addMonths(datetime, num)
```

**引数**

* `datetime` — 指定した月数を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する月数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返り値**

`datetime` に `num` か月を加算した値を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**さまざまな日付・日時型に月を加算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMonths(date, 6) AS add_months_with_date,
    addMonths(date_time, 6) AS add_months_with_date_time,
    addMonths(date_time_string, 6) AS add_months_with_date_time_string
```

```response title=Response
┌─add_months_with_date─┬─add_months_with_date_time─┬─add_months_with_date_time_string─┐
│           2024-07-01 │       2024-07-01 00:00:00 │          2024-07-01 00:00:00.000 │
└──────────────────────┴───────────────────────────┴──────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─plus(CAST('1⋯lMonth(10))─┐
│               1999-04-16 │
└──────────────────────────┘
```

## addNanoseconds \{#addNanoseconds\}

導入バージョン: v22.6

日時型、または文字列表現の日時に、指定したナノ秒数を加算します。

**構文**

```sql
addNanoseconds(datetime, num)
```

**引数**

* `datetime` — 指定したナノ秒数を加算する日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算するナノ秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` に `num` ナノ秒を加算した値を返す。戻り値の型は [`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**異なる日付・時刻型にナノ秒を加算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addNanoseconds(date_time, 1000) AS add_nanoseconds_with_date_time,
    addNanoseconds(date_time_string, 1000) AS add_nanoseconds_with_date_time_string
```

```response title=Response
┌─add_nanoseconds_with_date_time─┬─add_nanoseconds_with_date_time_string─┐
│  2024-01-01 00:00:00.000001000 │         2024-01-01 00:00:00.000001000 │
└────────────────────────────────┴───────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 1000 nanosecond)
```

```response title=Response
┌─plus(CAST('199⋯osecond(1000))─┐
│ 1998-06-16 00:00:00.000001000 │
└───────────────────────────────┘
```

## addQuarters \{#addQuarters\}

導入バージョン: v20.1

`Date`、時刻付きの `DateTime`、またはそれらの日付／日時を文字列としてエンコードした値に対して、指定した数の四半期を加算します。

**構文**

```sql
addQuarters(datetime, num)
```

**引数**

* `datetime` — 指定された四半期数を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する四半期数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` に `num` 四半期を加算した値を返します。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**異なる日付型に四半期を加算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addQuarters(date, 1) AS add_quarters_with_date,
    addQuarters(date_time, 1) AS add_quarters_with_date_time,
    addQuarters(date_time_string, 1) AS add_quarters_with_date_time_string
```

```response title=Response
┌─add_quarters_with_date─┬─add_quarters_with_date_time─┬─add_quarters_with_date_time_string─┐
│             2024-04-01 │         2024-04-01 00:00:00 │            2024-04-01 00:00:00.000 │
└────────────────────────┴─────────────────────────────┴────────────────────────────────────┘
```

**別の INTERVAL 構文の利用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─plus(CAST('1⋯uarter(10))─┐
│               2000-12-16 │
└──────────────────────────┘
```

## addSeconds \{#addSeconds\}

導入バージョン: v1.1

日付（`Date`）、日時（`DateTime`）、またはそれらを文字列で表現した値に、指定した秒数を加算します。

**構文**

```sql
addSeconds(datetime, num)
```

**引数**

* `datetime` — 指定した秒数を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` に `num` 秒を加算した値を返す。戻り値の型は [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**例**

**異なる日付型に秒数を加算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addSeconds(date, 30) AS add_seconds_with_date,
    addSeconds(date_time, 30) AS add_seconds_with_date_time,
    addSeconds(date_time_string, 30) AS add_seconds_with_date_time_string
```

```response title=Response
┌─add_seconds_with_date─┬─add_seconds_with_date_time─┬─add_seconds_with_date_time_string─┐
│   2024-01-01 00:00:30 │        2024-01-01 00:00:30 │           2024-01-01 00:00:30.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**代替の INTERVAL 構文の利用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─dateAdd('1998-06-16'::Date, INTERVAL 10 second)─┐
│                             1998-06-16 00:00:10 │
└─────────────────────────────────────────────────┘
```

## addTupleOfIntervals \{#addTupleOfIntervals\}

導入バージョン: v22.11

日付または日時に対して、タプルで指定された複数のインターバルを順に加算します。

**構文**

```sql
addTupleOfIntervals(datetime, intervals)
```

**引数**

* `datetime` — インターバルを加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `intervals` — `datetime` に加算するインターバルのタプル。[`Tuple(Interval)`](/sql-reference/data-types/tuple)

**戻り値**

`intervals` を加算した `date` を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**インターバルのタプルを日付に加算する**

```sql title=Query
WITH toDate('2018-01-01') AS date
SELECT addTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 MONTH, INTERVAL 1 YEAR))
```

```response title=Response
┌─addTupleOfIntervals(date, (toIntervalDay(1), toIntervalMonth(1), toIntervalYear(1)))─┐
│                                                                           2019-02-02 │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## addWeeks \{#addWeeks\}

導入バージョン: v1.1

指定した週数を、日付、日時、または文字列表現の日時／日付に加算します。

**構文**

```sql
addWeeks(datetime, num)
```

**引数**

* `datetime` — 指定した週数を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する週数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` に `num` 週を加算した値を返します。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) です。

**使用例**

**異なる日付型に対して週を加算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addWeeks(date, 5) AS add_weeks_with_date,
    addWeeks(date_time, 5) AS add_weeks_with_date_time,
    addWeeks(date_time_string, 5) AS add_weeks_with_date_time_string
```

```response title=Response
┌─add_weeks_with_date─┬─add_weeks_with_date_time─┬─add_weeks_with_date_time_string─┐
│          2024-02-05 │      2024-02-05 00:00:00 │         2024-02-05 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─plus(CAST('1⋯alWeek(10))─┐
│               1998-08-25 │
└──────────────────────────┘
```

## addYears \{#addYears\}

導入バージョン: v1.1

日付、日時、または文字列表現の日付／日時に、指定した年数を加算します。

**構文**

```sql
addYears(datetime, num)
```

**引数**

* `datetime` — 指定した年数を加算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 加算する年数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返り値**

`datetime` に `num` 年を加算した結果を返す。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付型に年数を加算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addYears(date, 1) AS add_years_with_date,
    addYears(date_time, 1) AS add_years_with_date_time,
    addYears(date_time_string, 1) AS add_years_with_date_time_string
```

```response title=Response
┌─add_years_with_date─┬─add_years_with_date_time─┬─add_years_with_date_time_string─┐
│          2025-01-01 │      2025-01-01 00:00:00 │         2025-01-01 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**別の INTERVAL 構文の利用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─plus(CAST('1⋯alYear(10))─┐
│               2008-06-16 │
└──────────────────────────┘
```

## age \{#age\}

導入バージョン: v23.1

`startdate` と `enddate` の差の、指定した単位での値を返します。
差は 1 ナノ秒の精度で計算されます。

たとえば、2021-12-29 と 2022-01-01 の差は、日単位では 3 日、
月単位では 0か月、年単位では 0年になります。

`age` の代わりの関数としては、[`dateDiff`](#dateDiff) を参照してください。

**構文**

```sql
age('unit', startdate, enddate[, timezone])
```

**引数**

* `unit` — 結果を表す時間単位の種類。

| Unit        | 使用可能な値                                   |
| ----------- | ---------------------------------------- |
| nanosecond  | `nanosecond`, `nanoseconds`, `ns`        |
| microsecond | `microsecond`, `microseconds`, `us`, `u` |
| millisecond | `millisecond`, `milliseconds`, `ms`      |
| second      | `second`, `seconds`, `ss`, `s`           |
| minute      | `minute`, `minutes`, `mi`, `n`           |
| hour        | `hour`, `hours`, `hh`, `h`               |
| day         | `day`, `days`, `dd`, `d`                 |
| week        | `week`, `weeks`, `wk`, `ww`              |
| month       | `month`, `months`, `mm`, `m`             |
| quarter     | `quarter`, `quarters`, `qq`, `q`         |
| year        | `year`, `years`, `yyyy`, `yy`            |

* `startdate` — 減算される最初の時間値（減数）。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `enddate` — 減算を行う 2 つ目の時間値（被減数）。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — オプション。タイムゾーン名。指定された場合は `startdate` と `enddate` の両方に適用されます。指定されていない場合は、`startdate` と `enddate` に設定されているタイムゾーンが使用されます。それらが同一でない場合、結果は未定義です。[`String`](/sql-reference/data-types/string)

**戻り値**

`enddate` と `startdate` の差を `unit` で表して返します。[`Int32`](/sql-reference/data-types/int-uint)

**例**

**年齢を時間単位で計算する**

```sql title=Query
SELECT age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))
```

```response title=Response
┌─age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))─┐
│                                                                                24 │
└───────────────────────────────────────────────────────────────────────────────────┘
```

**年齢を複数の単位で計算する**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    age('day', s, e) AS day_age,
    age('month', s, e) AS month_age,
    age('year', s, e) AS year_age
```

```response title=Response
┌──────────e─┬──────────s─┬─day_age─┬─month_age─┬─year_age─┐
│ 2022-01-01 │ 2021-12-29 │       3 │         0 │        0 │
└────────────┴────────────┴─────────┴───────────┴──────────┘
```

## changeDay \{#changeDay\}

導入バージョン: v24.7

日付または日時の「日」の部分を変更します。

**構文**

```sql
changeDay(date_or_datetime, value)
```

**引数**

* `date_or_datetime` — 変更対象の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — 新しい値。[`(U)Int*`](/sql-reference/data-types/int-uint)

**返される値**

`date_or_datetime` と同じ型で、日が変更された値を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeDay('2024-01-31'::DateTime, 15)
```

```response title=Response
2024-01-15 00:00:00
```

## changeHour \{#changeHour\}

導入バージョン: v24.7

日付または日時の時コンポーネントを変更します。

**構文**

```sql
changeHour(date_or_datetime, value)
```

**引数**

* `date_or_datetime` — 変更対象の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — 新しく設定する値。[`(U)Int*`](/sql-reference/data-types/int-uint)

**戻り値**

`date_or_datetime` と同じ型で、分のコンポーネントが変更された値を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeHour('2024-01-01 12:00:00'::DateTime, 5)
```

```response title=Response
2024-01-01 05:00:00
```

## changeMinute \{#changeMinute\}

導入バージョン: v24.7

`Date` または `DateTime` の分の値を変更します。

**構文**

```sql
changeMinute(date_or_datetime, value)
```

**引数**

* `date_or_datetime` — 変更対象の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — 新しい値。[`(U)Int*`](/sql-reference/data-types/int-uint)

**返される値**

`date_or_datetime` と同じ型で、分の値が変更された値を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeMinute('2024-01-01 12:30:00'::DateTime, 45)
```

```response title=Response
2024-01-01 12:45:00
```

## changeMonth \{#changeMonth\}

導入バージョン: v24.7

日付または日時の月の部分を変更します。

**構文**

```sql
changeMonth(date_or_datetime, value)
```

**引数**

* `date_or_datetime` — 変更する値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — 新しい値。[`(U)Int*`](/sql-reference/data-types/int-uint)

**戻り値**

`date_or_datetime` と同じ型で、月の成分が変更された値を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeMonth('2024-01-01'::DateTime, 12)
```

```response title=Response
2024-12-01 00:00:00
```

## changeSecond \{#changeSecond\}

導入バージョン: v24.7

日付または日時の秒の部分を変更します。

**構文**

```sql
changeSecond(date_or_datetime, value)
```

**引数**

* `date_or_datetime` — 変更する対象の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — 設定する新しい値。[`(U)Int*`](/sql-reference/data-types/int-uint)

**返される値**

`date_or_datetime` と同じ型で、秒の部分が変更された値を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeSecond('2024-01-01 12:30:45'::DateTime, 15)
```

```response title=Response
2024-01-01 12:30:15
```

## changeYear \{#changeYear\}

導入バージョン: v24.7

日付または日時の年の部分を変更します。

**構文**

```sql
changeYear(date_or_datetime, value)
```

**引数**

* `date_or_datetime` — 変更する対象の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — 新しい値。[`(U)Int*`](/sql-reference/data-types/int-uint)

**戻り値**

`date_or_datetime` と同じ型で、年の部分が変更された値を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeYear('2024-01-01'::DateTime, 2023)
```

```response title=Response
2023-01-01 00:00:00
```

## dateDiff \{#dateDiff\}

導入バージョン: v23.4

指定した `unit` の境界が `startdate` と `enddate` の間でいくつ跨いだかを返します。
差分は相対単位を用いて計算されます。例えば、2021-12-29 と 2022-01-01 の差分は、単位 day の場合は 3 日
（[`toRelativeDayNum`](#toRelativeDayNum) を参照）、単位 month の場合は 1 か月（[`toRelativeMonthNum`](#toRelativeMonthNum) を参照）、単位 year の場合は 1 年（[`toRelativeYearNum`](#toRelativeYearNum) を参照）です。

単位 `week` が指定された場合、`dateDiff` は週の開始日を月曜日とみなします。
この挙動は、デフォルトで週の開始日が日曜日である `toWeek()` 関数とは異なる点に注意してください。

`dateDiff` の代替としては、[`age`](#age) 関数を参照してください。

**構文**

```sql
dateDiff(unit, startdate, enddate[, timezone])
```

**別名**: `timestampDiff`, `TIMESTAMP_DIFF`, `DATE_DIFF`, `date_diff`, `timestamp_diff`

**引数**

* `unit` — 結果を表す時間間隔の種類。

| Unit        | 指定可能な値                                   |
| ----------- | ---------------------------------------- |
| nanosecond  | `nanosecond`, `nanoseconds`, `ns`        |
| microsecond | `microsecond`, `microseconds`, `us`, `u` |
| millisecond | `millisecond`, `milliseconds`, `ms`      |
| second      | `second`, `seconds`, `ss`, `s`           |
| minute      | `minute`, `minutes`, `mi`, `n`           |
| hour        | `hour`, `hours`, `hh`, `h`               |
| day         | `day`, `days`, `dd`, `d`                 |
| week        | `week`, `weeks`, `wk`, `ww`              |
| month       | `month`, `months`, `mm`, `m`             |
| quarter     | `quarter`, `quarters`, `qq`, `q`         |
| year        | `year`, `years`, `yyyy`, `yy`            |

* `startdate` — 減算される最初の時刻値（被減数）。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `enddate` — 減算の基準となる 2 つ目の時刻値（減数）。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 任意。タイムゾーン名。指定された場合、`startdate` と `enddate` の両方に適用されます。指定されない場合は、`startdate` と `enddate` のタイムゾーンが使用されます。それらが同じでない場合、結果は未定義です。[`String`](/sql-reference/data-types/string)

**戻り値**

`enddate` と `startdate` の差を `unit` 単位で返します。[`Int64`](/sql-reference/data-types/int-uint)

**例**

**日時の差を時間単位で計算する**

```sql title=Query
SELECT dateDiff('hour', toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) AS res
```

```response title=Response
┌─res─┐
│  25 │
└─────┘
```

**日付の差をさまざまな単位で計算する**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    dateDiff('day', s, e) AS day_diff,
    dateDiff('month', s, e) AS month_diff,
    dateDiff('year', s, e) AS year_diff
```

```response title=Response
┌──────────e─┬──────────s─┬─day_diff─┬─month_diff─┬─year_diff─┐
│ 2022-01-01 │ 2021-12-29 │        3 │          1 │         1 │
└────────────┴────────────┴──────────┴────────────┴───────────┘
```

## dateName \{#dateName\}

導入バージョン: v21.7

日付の指定された要素を返します。

指定可能な値は次のとおりです:

* &#39;year&#39;
* &#39;quarter&#39;
* &#39;month&#39;
* &#39;week&#39;
* &#39;dayofyear&#39;
* &#39;day&#39;
* &#39;weekday&#39;
* &#39;hour&#39;
* &#39;minute&#39;
* &#39;second&#39;

**構文**

```sql
dateName(date_part, date[, timezone])
```

**引数**

* `date_part` — 抽出する日付のパーツ。[`String`](/sql-reference/data-types/string)
* `datetime` — 日付または日付と時刻の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可。タイムゾーン。[`String`](/sql-reference/data-types/string)

**戻り値**

指定された日付のパーツを返します。[`String`](/sql-reference/data-types/string)

**例**

**さまざまな日付パーツの抽出**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT
    dateName('year', date_value),
    dateName('month', date_value),
    dateName('day', date_value)
```

```response title=Response
┌─dateName('year', date_value)─┬─dateName('month', date_value)─┬─dateName('day', date_value)─┐
│ 2021                         │ April                         │ 14                          │
└──────────────────────────────┴───────────────────────────────┴─────────────────────────────┘
```

## dateTrunc \{#dateTrunc\}

導入バージョン: v20.8

日付と時刻の値を、指定した日付/時刻要素まで切り捨てます。

**構文**

```sql
dateTrunc(unit, datetime[, timezone])
```

**別名**: `DATE_TRUNC`

**引数**

* `unit` —
  結果をどの単位で切り捨てるかを指定します。指定可能な値: `nanosecond` (DateTime64 のみ), `microsecond` (DateTime64 のみ), `millisecond` (DateTime64 のみ), `second`, `minute`, `hour`, `day`, `week`, `month`, `quarter`, `year`。
  [`String`](/sql-reference/data-types/string)
* `datetime` — 日付と時刻。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。戻り値の日時に対するタイムゾーン名。指定されていない場合、関数は `datetime` 引数のタイムゾーンを使用します。[`String`](/sql-reference/data-types/string)

**戻り値**

切り捨てられた日付時刻の値を返します。

| Unit 引数                    | `datetime` 引数                                    | 戻り値の型                                                                                   |
| -------------------------- | ------------------------------------------------ | --------------------------------------------------------------------------------------- |
| Year, Quarter, Month, Week | `Date32` or `DateTime64` or `Date` or `DateTime` | [`Date32`](../data-types/date32.md) または [`Date`](../data-types/date.md)                 |
| Day, Hour, Minute, Second  | `Date32`, `DateTime64`, `Date`, or `DateTime`    | [`DateTime64`](../data-types/datetime64.md) または [`DateTime`](../data-types/datetime.md) |
| Millisecond, Microsecond,  | Any                                              | [`DateTime64`](../data-types/datetime64.md)                                             |
| Nanosecond                 |                                                  | スケール 3、6、または 9                                                                          |

**使用例**

**タイムゾーンを指定せずに切り捨て**

```sql title=Query
SELECT now(), dateTrunc('hour', now());
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now())──┐
│ 2020-09-28 10:40:45 │       2020-09-28 10:00:00 │
└─────────────────────┴───────────────────────────┘
```

**指定したタイムゾーンでの切り捨て**

```sql title=Query
SELECT now(), dateTrunc('hour', now(), 'Asia/Istanbul');
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now(), 'Asia/Istanbul')──┐
│ 2020-09-28 10:46:26 │                        2020-09-28 13:00:00 │
└─────────────────────┴────────────────────────────────────────────┘
```

## formatDateTime \{#formatDateTime\}

導入バージョン: v1.1

指定されたフォーマット文字列に従って、日付または日時をフォーマットします。`format` は定数式であるため、1 つの結果カラムに対して複数のフォーマットを使用することはできません。

`formatDateTime` は MySQL の datetime フォーマットスタイルを使用します。詳細は [MySQL ドキュメント](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format) を参照してください。

この関数と逆の操作を行う関数は [`parseDateTime`](/sql-reference/functions/type-conversion-functions#parseDateTime) です。

置換フィールドを使用して、結果文字列のパターンを定義できます。
下表のサンプルカラムは、`2018-01-02 22:33:44` をフォーマットした結果を示しています。

**置換フィールド:**

| プレースホルダー | 説明                                    | 例          |
| -------- | ------------------------------------- | ---------- |
| %a       | 曜日の省略名 (Mon-Sun)                      | Mon        |
| %b       | 月の省略名 (Jan-Dec)                       | Jan        |
| %c       | 月を整数値で表現 (01-12)                      | 01         |
| %C       | 年を 100 で割り、整数に切り捨てた値 (00-99)          | 20         |
| %d       | 月の日、ゼロ埋め (01-31)                      | 02         |
| %D       | 短い MM/DD/YY 形式の日付、%m/%d/%y と同等        | 01/02/18   |
| %e       | 月の日、スペース埋め (1-31)                     | 2          |
| %f       | 秒の小数部                                 | 123456     |
| %F       | 短い YYYY-MM-DD 形式の日付、%Y-%m-%d と同等      | 2018-01-02 |
| %g       | ISO 8601 に揃えた 2 桁の年の形式                | 18         |
| %G       | ISO 週番号用の 4 桁の年の形式                    | 2018       |
| %h       | 12 時間制の時 (01-12)                      | 09         |
| %H       | 24 時間制の時 (00-23)                      | 22         |
| %i       | 分 (00-59)                             | 33         |
| %I       | 12 時間制の時 (01-12)                      | 10         |
| %j       | 通算日 (001-366)                         | 002        |
| %k       | 24 時間制の時 (00-23)                      | 14         |
| %l       | 12 時間制の時 (01-12)                      | 09         |
| %m       | 月を整数値で表現 (01-12)                      | 01         |
| %M       | 月の完全名 (January-December)              | January    |
| %n       | 改行文字                                  |            |
| %p       | AM/PM 表記                              | PM         |
| %Q       | 四半期 (1-4)                             | 1          |
| %r       | 12 時間制 HH:MM AM/PM 時刻、%h:%i %p と同等    | 10:30 PM   |
| %R       | 24 時間制 HH:MM 時刻、%H:%i と同等             | 22:33      |
| %s       | 秒 (00-59)                             | 44         |
| %S       | 秒 (00-59)                             | 44         |
| %t       | 水平タブ文字                                |            |
| %T       | ISO 8601 時刻形式 (HH:MM:SS)、%H:%i:%S と同等 | 22:33:44   |
| %u       | 月曜を 1 とする ISO 8601 の曜日番号 (1-7)        | 2          |
| %V       | ISO 8601 週番号 (01-53)                  | 01         |
| %w       | 日曜を 0 とする曜日番号 (0-6)                   | 2          |
| %W       | 曜日の完全名 (Monday-Sunday)                | Monday     |
| %y       | 年の下 2 桁 (00-99)                       | 18         |
| %Y       | 年                                     | 2018       |
| %z       | UTC からの時差 (+HHMM または -HHMM)           | -0500      |
| %%       | パーセント記号 %                             | %          |

* ClickHouse v23.4 より前のバージョンでは、フォーマット対象が Date、Date32、DateTime (いずれも秒の小数部を持たない) または精度 0 の DateTime64 の場合、`%f` は単一のゼロ (0) を出力します。
* ClickHouse v25.1 より前のバージョンでは、`%f` は固定 6 桁ではなく、DateTime64 の scale で指定された桁数だけ数字を出力します。
* ClickHouse v23.4 より前のバージョンでは、`%M` は月の完全名 (January-December) ではなく、分 (00-59) を出力します。

**構文**

```sql
formatDateTime(datetime, format[, timezone])
```

**エイリアス**: `DATE_FORMAT`

**引数**

* `datetime` — フォーマット対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — 置換フィールドを含むフォーマット文字列。[`String`](/sql-reference/data-types/string)
* `timezone` — 任意。フォーマット結果の時刻に適用するタイムゾーン名。[`String`](/sql-reference/data-types/string)

**返される値**

指定されたフォーマットに従って日付と時刻の値を返します。[`String`](/sql-reference/data-types/string)

**例**

**年のプレースホルダーを使って日付をフォーマットする**

```sql title=Query
SELECT formatDateTime(toDate('2010-01-04'), '%g')
```

```response title=Response
┌─formatDateTime(toDate('2010-01-04'), '%g')─┐
│ 10                                         │
└────────────────────────────────────────────┘
```

**DateTime64 を小数秒付きでフォーマットする**

```sql title=Query
SELECT formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')
```

```response title=Response
┌─formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')─┐
│ 1234560                                                             │
└─────────────────────────────────────────────────────────────────────┘
```

**タイムゾーンを含めてフォーマット**

```sql title=Query
SELECT
    now() AS ts,
    time_zone,
    formatDateTime(ts, '%T', time_zone) AS str_tz_time
FROM system.time_zones
WHERE time_zone LIKE 'Europe%'
LIMIT 10
```

```response title=Response
┌──────────────────ts─┬─time_zone─────────┬─str_tz_time─┐
│ 2023-09-08 19:13:40 │ Europe/Amsterdam  │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Andorra    │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Astrakhan  │ 23:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Athens     │ 22:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belfast    │ 20:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belgrade   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Berlin     │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bratislava │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Brussels   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bucharest  │ 22:13:40    │
└─────────────────────┴───────────────────┴─────────────┘
```

## formatDateTimeInJodaSyntax \{#formatDateTimeInJodaSyntax\}

導入バージョン: v20.1

`formatDateTime` と似ていますが、MySQL スタイルではなく Joda スタイルで日時をフォーマットします。[Joda Time のドキュメント](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)を参照してください。

この関数と反対の処理を行う関数は[`parseDateTimeInJodaSyntax`](/sql-reference/functions/type-conversion-functions#parseDateTimeInJodaSyntax)です。

置換フィールドを使用することで、結果の文字列のパターンを定義できます。

**置換フィールド:**

| プレースホルダー   | 説明                 | 表現形式 | 例                          |
| ---------- | ------------------ | ---- | -------------------------- |
| G          | 紀元                 | テキスト | AD                         |
| C          | 世紀（紀元内） (&gt;=0)   | 数値   | 20                         |
| Y          | 年（紀元内） (&gt;=0)    | 年    | 1996                       |
| x          | 週付き年（未対応）          | 年    | 1996                       |
| w          | 週付き年の週（未対応）        | 数値   | 27                         |
| e          | 曜日                 | 数値   | 2                          |
| E          | 曜日                 | テキスト | Tuesday; Tue               |
| y          | 年                  | 年    | 1996                       |
| D          | 年内通算日              | 数値   | 189                        |
| M          | 月                  | 月    | July; Jul; 07              |
| d          | 日（その月の）            | 数値   | 10                         |
| a          | 午前/午後              | テキスト | PM                         |
| K          | 午前/午後の時間 (0~11)    | 数値   | 0                          |
| h          | 午前/午後の時計時刻 (1~12)  | 数値   | 12                         |
| H          | 時（1 日のうちの 0~23）    | 数値   | 0                          |
| k          | 時計時刻（1 日のうちの 1~24） | 数値   | 24                         |
| m          | 分（その時間の）           | 数値   | 30                         |
| s          | 秒（その分の）            | 数値   | 55                         |
| S          | 秒の小数部分             | 数値   | 978                        |
| z          | タイムゾーン             | テキスト | Eastern Standard Time; EST |
| Z          | タイムゾーンオフセット        | ゾーン  | -0800; -0812               |
| &#39;      | テキスト用エスケープ         | デリミタ |                            |
| &#39;&#39; | シングルクオート           | リテラル | &#39;                      |

**構文**

```sql
formatDateTimeInJodaSyntax(datetime, format[, timezone])
```

**引数**

* `datetime` — フォーマットする日付または日時。[`DateTime`](/sql-reference/data-types/datetime) または [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — Joda 形式の置換フィールドを使用するフォーマット文字列。[`String`](/sql-reference/data-types/string)
* `timezone` — オプション。フォーマットに用いるタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

指定されたフォーマットに従って日時の値を返します。[`String`](/sql-reference/data-types/string)

**使用例**

**Joda 構文を使用して日時をフォーマットする**

```sql title=Query
SELECT formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')
```

```response title=Response
┌─formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')─┐
│ 2010-01-04 12:34:56                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## fromDaysSinceYearZero \{#fromDaysSinceYearZero\}

導入バージョン: v23.11

[紀元0年1月1日](https://en.wikipedia.org/wiki/Year_zero) からの経過日数が与えられると、[ISO 8601 で定義される先発グレゴリオ暦](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar)における対応する日付を返します。

計算方法は MySQL の `FROM_DAYS()` 関数と同じです。結果が [Date](../data-types/date.md) 型の表現範囲に収まらない場合、結果は未定義です。

**構文**

```sql
fromDaysSinceYearZero(days)
```

**エイリアス**: `FROM_DAYS`

**引数**

* `days` — 西暦0年から経過した日数。[`UInt32`](/sql-reference/data-types/int-uint)

**戻り値**

西暦0年からの経過日数に対応する日付を返します。[`Date`](/sql-reference/data-types/date)

**例**

**西暦0年からの経過日数を日付に変換する**

```sql title=Query
SELECT
fromDaysSinceYearZero(739136) AS date1,
fromDaysSinceYearZero(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```

## fromDaysSinceYearZero32 \{#fromDaysSinceYearZero32\}

導入バージョン: v23.11

[西暦 0000 年 1 月 1 日](https://en.wikipedia.org/wiki/Year_zero) から経過した日数を指定すると、[ISO 8601 で定義されるプロレプティック・グレゴリオ暦](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar)における対応する日付を返します。
計算は MySQL の `FROM_DAYS()` 関数と同じです。結果が [`Date32`](../data-types/date32.md) 型の範囲内で表現できない場合、結果は未定義です。

**構文**

```sql
fromDaysSinceYearZero32(days)
```

**引数**

* `days` — 紀元0年から経過した日数。[`UInt32`](/sql-reference/data-types/int-uint)

**戻り値**

紀元0年から経過した日数に対応する日付を返します。[`Date32`](/sql-reference/data-types/date32)

**例**

**紀元0年からの経過日数を日付に変換する**

```sql title=Query
SELECT
fromDaysSinceYearZero32(739136) AS date1,
fromDaysSinceYearZero32(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```

## fromModifiedJulianDay \{#fromModifiedJulianDay\}

導入: v21.1

[修正ユリウス日](https://en.wikipedia.org/wiki/Julian_day#Variants)番号を、テキスト形式 `YYYY-MM-DD` による[先発グレゴリオ暦](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar)の日付に変換します。この関数は、`-678941` から `2973483` までの日番号をサポートします（それぞれ 0000-01-01 および 9999-12-31 を表します）。サポート対象範囲外の日番号が指定された場合は、例外をスローします。

**構文**

```sql
fromModifiedJulianDay(day)
```

**引数**

* `day` — 修正ユリウス日 (Modified Julian Day) 番号。[`(U)Int*`](/sql-reference/data-types/int-uint)

**戻り値**

日付の文字列表現を返します。[`String`](/sql-reference/data-types/string)

**例**

**修正ユリウス日を日付に変換する**

```sql title=Query
SELECT fromModifiedJulianDay(58849)
```

```response title=Response
┌─fromModifiedJulianDay(58849)─┐
│ 2020-01-01                   │
└──────────────────────────────┘
```

## fromModifiedJulianDayOrNull \{#fromModifiedJulianDayOrNull\}

導入バージョン: v21.1

[`fromModifiedJulianDay()`](#fromModifiedJulianDay) と似ていますが、例外をスローする代わりに `NULL` を返します。

**構文**

```sql
fromModifiedJulianDayOrNull(day)
```

**引数**

* `day` — 修正ユリウス日 (Modified Julian Day) 番号。[`(U)Int*`](/sql-reference/data-types/int-uint)

**戻り値**

有効な `day` 引数の場合は日付をテキスト形式で返し、それ以外の場合は `null` を返します。[`Nullable(String)`](/sql-reference/data-types/nullable)

**例**

**修正ユリウス日を null を考慮して日付に変換する**

```sql title=Query
SELECT fromModifiedJulianDayOrNull(58849);
SELECT fromModifiedJulianDayOrNull(60000000); -- invalid argument, returns NULL
```

```response title=Response
┌─fromModified⋯Null(58849)─┐
│ 2020-01-01               │
└──────────────────────────┘
┌─fromModified⋯l(60000000)─┐
│ ᴺᵁᴸᴸ                     │
└──────────────────────────┘
```

## fromUTCTimestamp \{#fromUTCTimestamp\}

導入: v22.1

UTC タイムゾーンの日時または日付の値を、指定したタイムゾーンの日時または日付の値に変換します。この関数は主に Apache Spark などのフレームワークとの互換性のために用意されています。

**構文**

```sql
fromUTCTimestamp(datetime, time_zone)
```

**別名**: `from_utc_timestamp`

**引数**

* `datetime` — 日付または日時の定数値、もしくはそのような式。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — タイムゾーンを表す String 型の定数値または式。[`String`](/sql-reference/data-types/string)

**返される値**

指定したタイムゾーンの DateTime/DateTime64 を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**UTC タイムゾーンを指定したタイムゾーンに変換する**

```sql title=Query
SELECT fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00', 3), 'Asia/Shanghai')
```

```response title=Response
┌─fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00',3), 'Asia/Shanghai')─┐
│                                                 2023-03-16 18:00:00.000 │
└─────────────────────────────────────────────────────────────────────────┘
```

## fromUnixTimestamp \{#fromUnixTimestamp\}

導入バージョン: v20.8

この関数は Unix タイムスタンプをカレンダー日付と一日の時刻に変換します。

2 つの方法で呼び出すことができます:

* [`Integer`](../data-types/int-uint.md) 型の引数を 1 つだけ与えた場合、[`DateTime`](../data-types/datetime.md) 型の値を返します。つまり、[`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#toDateTime) と同様に動作します。
* 1 番目の引数が [`Integer`](../data-types/int-uint.md)、[`Date`](../data-types/date.md)、[`Date32`](../data-types/date32.md)、[`DateTime`](../data-types/datetime.md)、または [`DateTime64`](../data-types/datetime64.md) 型の値であり、2 番目の引数が定数フォーマット文字列、3 番目の引数が省略可能な定数タイムゾーン文字列である 2 つまたは 3 つの引数を与えた場合、この関数は [`String`](../data-types/string.md) 型の値を返します。つまり、[`formatDateTime`](#formatDateTime) と同様に動作します。
  この場合、[MySQL の datetime フォーマット形式](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format)が使用されます。

**構文**

```sql
fromUnixTimestamp(timestamp)
fromUnixTimestamp(timestamp[, format[, timezone]])
```

**別名**: `FROM_UNIXTIME`

**引数**

* `timestamp` — Unix タイムスタンプ、または日付/日時の値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — オプション。出力形式を指定するための定数フォーマット文字列。[`String`](/sql-reference/data-types/string)
* `timezone` — オプション。タイムゾーンを表す定数文字列。[`String`](/sql-reference/data-types/string)

**戻り値**

1 つの引数で呼び出した場合は `DateTime` を返し、2 つまたは 3 つの引数で呼び出した場合は `String` を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`String`](/sql-reference/data-types/string)

**例**

**Unix タイムスタンプを DateTime に変換**

```sql title=Query
SELECT fromUnixTimestamp(423543535)
```

```response title=Response
┌─fromUnixTimestamp(423543535)─┐
│          1983-06-04 10:58:55 │
└──────────────────────────────┘
```

**Unix タイムスタンプを指定フォーマットで変換**

```sql title=Query
SELECT fromUnixTimestamp(1234334543, '%Y-%m-%d %R:%S') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 14:42:23 │
└─────────────────────┘
```

## fromUnixTimestampInJodaSyntax \{#fromUnixTimestampInJodaSyntax\}

導入バージョン: v23.1

この関数は Unix タイムスタンプを日付および一日の時刻に変換します。

この関数には 2 通りの呼び出し方があります。

1 つの引数として型 [`Integer`](../data-types/int-uint.md) を受け取った場合、型 [`DateTime`](../data-types/datetime.md) の値を返します。つまり、[`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#toDateTime) と同様に動作します。

1 番目の引数が型 [`Integer`](../data-types/int-uint.md)、[`Date`](../data-types/date.md)、[`Date32`](../data-types/date32.md)、[`DateTime`](../data-types/datetime.md)、または [`DateTime64`](../data-types/datetime64.md) の値であり、2 番目の引数が定数のフォーマット文字列、3 番目の引数が省略可能な定数のタイムゾーン文字列である 2 個または 3 個の引数を受け取った場合、この関数は型 [`String`](../data-types/string.md) の値を返します。つまり、[`formatDateTimeInJodaSyntax`](#formatDateTimeInJodaSyntax) と同様に動作します。この場合、[Joda datetime format style](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html) が使用されます。

**構文**

```sql
fromUnixTimestampInJodaSyntax(timestamp)
fromUnixTimestampInJodaSyntax(timestamp, format[, timezone])
```

**引数**

* `timestamp` — Unix タイムスタンプまたは日付/時刻の値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — 省略可。出力フォーマット用の Joda 構文に従った定数フォーマット文字列。[`String`](/sql-reference/data-types/string)
* `timezone` — 省略可。タイムゾーンを表す定数文字列。[`String`](/sql-reference/data-types/string)

**返り値**

1 つの引数で呼び出された場合は時刻付きの日付を返し、2 つまたは 3 つの引数で呼び出された場合は文字列を返します。&#125; [`DateTime`](/sql-reference/data-types/datetime) または [`String`](/sql-reference/data-types/string)

**使用例**

**Unix タイムスタンプを Joda フォーマットで整形する**

```sql title=Query
SELECT fromUnixTimestampInJodaSyntax(1234334543, 'yyyy-MM-dd HH:mm:ss', 'UTC') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 06:42:23 │
└─────────────────────┘
```

## makeDate \{#makeDate\}

導入バージョン: v22.6

次のいずれかから `Date` を生成します:

* 年・月・日
* 年・年内通し日（年内の日数）

**構文**

```sql
makeDate(year, month, day)
makeDate(year, day_of_year)
```

**引数**

* `year` — 年（西暦）。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `month` — 月番号 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `day` — 月内の日 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `day_of_year` — 年内通算日 (1-365)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

指定された引数から構築された [`Date`](/sql-reference/data-types/date) 型の値を返します。

**例**

**年・月・日から `Date` を生成**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**年と年内通算日から日付を生成**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```

## makeDate32 \{#makeDate32\}

導入バージョン: v22.6

次のいずれかの指定から `Date32` を作成します:

* 年・月・日
* 年・年内通算日

**構文**

```sql
makeDate32(year, month, day)
makeDate32(year, day_of_year)
```

**引数**

* `year` — 年を表す数値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `month` — 月を表す数値 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `day` — 月の日 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `day_of_year` — その年の通算日 (1-365)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

指定された引数から構築された `Date32` 型の値を返します。[`Date32`](/sql-reference/data-types/date32)

**例**

**year, month, day から Date32 を作成**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**年と通し日から Date32 を生成**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```

## makeDateTime \{#makeDateTime\}

導入: v22.6

年、月、日、時、分、秒から、オプションのタイムゾーンを指定して `DateTime` を生成します。

**構文**

```sql
makeDateTime(year, month, day, hour, minute, second[, timezone])
```

**引数**

* `year` — 年。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `month` — 月 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `day` — 日 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `hour` — 時 (0-23)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `minute` — 分 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `second` — 秒 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `timezone` — タイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

指定された引数から `DateTime` 値を構築して返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**year, month, day, hour, minute, second から DateTime を構築**

```sql title=Query
SELECT makeDateTime(2023, 2, 28, 17, 12, 33) AS DateTime;
```

```response title=Response
┌────────────DateTime─┐
│ 2023-02-28 17:12:33 │
└─────────────────────┘
```

## makeDateTime64 \{#makeDateTime64\}

導入バージョン: v22.6

year、month、day、hour、minute、second から、オプションの fraction、precision、timezone を指定して `DateTime64` を生成します。

**構文**

```sql
makeDateTime64(year, month, day, hour, minute, second[, fraction[, precision[, timezone]]])
```

**引数**

* `year` — 年を表す数値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `month` — 月を表す数値 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `day` — 日を表す数値 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `hour` — 時を表す数値 (0-23)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `minute` — 分を表す数値 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `second` — 秒を表す数値 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `fraction` — 秒の小数部分。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
* `precision` — 小数部分の桁数 (0-9)。[`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — タイムゾーン名。[`String`](/sql-reference/data-types/string)

**返される値**

指定された引数から構築された `DateTime64` 値を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**year, month, day, hour, minute, second から DateTime64 を構築**

```sql title=Query
SELECT makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5);
```

```response title=Response
┌─makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5)─┐
│                       2023-05-15 10:30:45.00779 │
└─────────────────────────────────────────────────┘
```

## monthName \{#monthName\}

導入バージョン: v22.1

日付または日時の値から、月の名前を文字列として返します。

**構文**

```sql
monthName(datetime)
```

**引数**

* `datetime` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

月名を返します。[`String`](/sql-reference/data-types/string)

**例**

**日付から月名を取得する**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT monthName(date_value)
```

```response title=Response
┌─monthName(date_value)─┐
│ April                 │
└───────────────────────┘
```

## now \{#now\}

導入: v1.1

クエリ解析時点の現在の日時を返します。この関数は定数式です。

**構文**

```sql
now([timezone])
```

**別名**: `current_timestamp`

**引数**

* `timezone` — 省略可能。返される値に対するタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

現在の日付と時刻を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**タイムゾーンを指定しないクエリ**

```sql title=Query
SELECT now()
```

```response title=Response
┌───────────────now()─┐
│ 2020-10-17 07:42:09 │
└─────────────────────┘
```

**タイムゾーン指定付きのクエリ**

```sql title=Query
SELECT now('Asia/Istanbul')
```

```response title=Response
┌─now('Asia/Istanbul')─┐
│  2020-10-17 10:42:23 │
└──────────────────────┘
```

## now64 \{#now64\}

導入バージョン: v20.1

クエリ解析時の現在の日時をサブ秒精度で返します。この関数は定数式です。

**構文**

```sql
now64([scale[, timezone]])
```

**引数**

* `scale` — 省略可能。ティックサイズ（精度）。10^-precision 秒単位。有効範囲: [0 : 9]。一般的な値は 3（デフォルト、ミリ秒）、6（マイクロ秒）、9（ナノ秒）です。[`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — 省略可能。返される値のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**返される値**

サブ秒精度付きの現在の日時を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**デフォルト精度とカスタム精度でのクエリ**

```sql title=Query
SELECT now64(), now64(9, 'Asia/Istanbul')
```

```response title=Response
┌─────────────────now64()─┬─────now64(9, 'Asia/Istanbul')─┐
│ 2022-08-21 19:34:26.196 │ 2022-08-21 22:34:26.196542766 │
└─────────────────────────┴───────────────────────────────┘
```

## nowInBlock \{#nowInBlock\}

導入バージョン: v22.8

各データブロックを処理する瞬間の現在日時を返します。関数 [`now`](#now) と異なり、この関数は定数式ではないため、長時間実行されるクエリではブロックごとに異なる値が返されます。

長時間実行される `INSERT SELECT` クエリで現在時刻を生成する用途に、この関数を使用するのが有用です。

**構文**

```sql
nowInBlock([timezone])
```

**引数**

* `timezone` — 省略可能。返される値のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

各データブロックの処理時点の現在日時を返します。[`DateTime`](/sql-reference/data-types/datetime)

**使用例**

**now() 関数との違い**

```sql title=Query
SELECT
    now(),
    nowInBlock(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌───────────────now()─┬────────nowInBlock()─┬─sleep(1)─┐
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:19 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:20 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:21 │        0 │
└─────────────────────┴─────────────────────┴──────────┘
```

## nowInBlock64 \{#nowInBlock64\}

導入バージョン: v25.8

各データブロックの処理時点における現在日時をミリ秒単位で返します。関数 [now64](#now64) と異なり、これは定数式ではなく、長時間実行されるクエリではブロックごとに異なる値が返されます。

この関数は、長時間実行される INSERT SELECT クエリで現在時刻を生成する用途に用いるのが適しています。

**構文**

```sql
nowInBlock([scale[, timezone]])
```

**引数**

* `scale` — 省略可能。ティックサイズ（精度）、すなわち 10^-precision 秒。指定可能な範囲は [0 : 9]。通常は 3（デフォルト、ミリ秒）、6（マイクロ秒）、9（ナノ秒）が使用されます。[`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — 省略可能。返される値のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**返される値**

各データブロックの処理時点における現在の日時を、サブ秒精度で返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**now64() 関数との違い**

```sql title=Query
SELECT
    now64(),
    nowInBlock64(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌─────────────────now64()─┬──────────nowInBlock64()─┬─sleep(1)─┐
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:29.534 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:30.535 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:31.535 │        0 │
└─────────────────────────┴─────────────────────────┴──────────┘
```

## serverTimezone \{#serverTimezone\}

導入バージョン: v23.6

サーバーのタイムゾーン、つまり [`timezone`](/operations/server-configuration-parameters/settings#timezone) 設定の値を返します。
関数が分散テーブルのコンテキストで実行される場合は、各分片に対応した値を持つ通常のカラムを生成します。それ以外の場合は、定数値を返します。

**構文**

```sql
serverTimeZone()
```

**別名**: `serverTimeZone`

**引数**

* なし。

**戻り値**

サーバーのタイムゾーンを [`String`](/sql-reference/data-types/string) として返します。

**例**

**使用例**

```sql title=Query
SELECT serverTimeZone()
```

```response title=Response
┌─serverTimeZone()─┐
│ UTC              │
└──────────────────┘
```

## subDate \{#subDate\}

導入バージョン: v23.9

指定された `Date`、日時、または日付／日時を表す文字列から、時間間隔を減算します。
減算結果がデータ型の範囲外になる場合、結果は未定義です。

**構文**

```sql
subDate(datetime, interval)
```

**引数**

* `datetime` — `interval` を減算する基準となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `interval` — 減算する期間。[`Interval`](/sql-reference/data-types/int-uint)

**戻り値**

`datetime` から `interval` を減算して得られる日付または日時を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**日付から interval を減算する**

```sql title=Query
SELECT subDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─subDate(toDate('2018-01-01'), toIntervalYear(3))─┐
│                                       2015-01-01 │
└──────────────────────────────────────────────────┘
```

## subtractDays \{#subtractDays\}

導入バージョン: v1.1

`Date`、日時を含む `DateTime`、またはそれらを文字列で表現した値から、指定した日数を減算します。

**構文**

```sql
subtractDays(datetime, num)
```

**引数**

* `datetime` — 指定した日数を引く対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する日数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返される値**

`datetime` から `num` 日を減算した値を返します。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) です。

**例**

**異なる日付型から日数を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractDays(date, 31) AS subtract_days_with_date,
    subtractDays(date_time, 31) AS subtract_days_with_date_time,
    subtractDays(date_time_string, 31) AS subtract_days_with_date_time_string
```

```response title=Response
┌─subtract_days_with_date─┬─subtract_days_with_date_time─┬─subtract_days_with_date_time_string─┐
│              2023-12-01 │          2023-12-01 00:00:00 │             2023-12-01 00:00:00.000 │
└─────────────────────────┴──────────────────────────────┴─────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─minus(CAST('⋯valDay(10))─┐
│               1998-06-06 │
└──────────────────────────┘
```

## subtractHours \{#subtractHours\}

導入バージョン: v1.1

日付、日時、または日付/日時の文字列表現から、指定した時間数を減算します。

**構文**

```sql
subtractHours(datetime, num)
```

**引数**

* `datetime` — 指定した時間数を減算する対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する時間数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` から `num` 時間を減算した値を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**例**

**異なる日付/日時型から時間を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractHours(date, 12) AS subtract_hours_with_date,
    subtractHours(date_time, 12) AS subtract_hours_with_date_time,
    subtractHours(date_time_string, 12) AS subtract_hours_with_date_time_string
```

```response title=Response
┌─subtract_hours_with_date─┬─subtract_hours_with_date_time─┬─subtract_hours_with_date_time_string─┐
│      2023-12-31 12:00:00 │           2023-12-31 12:00:00 │              2023-12-31 12:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**代替の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─minus(CAST('⋯alHour(10))─┐
│      1998-06-15 14:00:00 │
└──────────────────────────┘
```

## subtractInterval \{#subtractInterval\}

導入: v22.11

負の Interval を、別の Interval または Interval のタプルに加算します。

注意: 同じ型の Interval は 1 つの Interval にまとめられます。たとえば `toIntervalDay(2)` と `toIntervalDay(1)` が
渡された場合、結果は `(2,1)` ではなく `(1)` になります。

**構文**

```sql
subtractInterval(interval_1, interval_2)
```

**引数**

* `interval_1` — 1 つ目のインターバル、またはインターバルのタプル。[`Interval`](/sql-reference/data-types/int-uint) または [`Tuple(Interval)`](/sql-reference/data-types/tuple)
* `interval_2` — 符号を反転する 2 つ目のインターバル。[`Interval`](/sql-reference/data-types/int-uint)

**戻り値**

インターバルのタプル [`Tuple(T)`](/sql-reference/data-types/tuple) を返します。

**例**

**インターバルを減算する**

```sql title=Query
SELECT subtractInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT subtractInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT subtractInterval(INTERVAL 2 DAY, INTERVAL 1 DAY);
```

```response title=Response
┌─subtractInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,-1)                                                 │
└────────────────────────────────────────────────────────┘
┌─subtractInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,-1)                                                                    │
└─────────────────────────────────────────────────────────────────────────────┘
┌─subtractInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (1)                                                  │
└──────────────────────────────────────────────────────┘
```

## subtractMicroseconds \{#subtractMicroseconds\}

導入: v22.6

日時型、または文字列表現の日時から、指定したマイクロ秒数を減算します。

**構文**

```sql
subtractMicroseconds(datetime, num)
```

**引数**

* `datetime` — 指定されたマイクロ秒数を減算する対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算するマイクロ秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返される値**

`datetime` から `num` マイクロ秒を減算した [`DateTime64`](/sql-reference/data-types/datetime64) 型の値を返します。

**使用例**

**異なる日時型からマイクロ秒を減算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMicroseconds(date_time, 1000000) AS subtract_microseconds_with_date_time,
    subtractMicroseconds(date_time_string, 1000000) AS subtract_microseconds_with_date_time_string
```

```response title=Response
┌─subtract_microseconds_with_date_time─┬─subtract_microseconds_with_date_time_string─┐
│           2023-12-31 23:59:59.000000 │                  2023-12-31 23:59:59.000000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─minus(CAST('1⋯osecond(10))─┐
│ 1998-06-15 23:59:59.999990 │
└────────────────────────────┘
```

## subtractMilliseconds \{#subtractMilliseconds\}

導入バージョン: v22.6

日時型、または文字列で表現された日時から、指定したミリ秒数を減算します。

**構文**

```sql
subtractMilliseconds(datetime, num)
```

**引数**

* `datetime` — 指定したミリ秒数を減算する対象となる日時値。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算するミリ秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返される値**

`datetime` から `num` ミリ秒を引いた値を返します。型は [`DateTime64`](/sql-reference/data-types/datetime64) です。

**例**

**異なる日時型の値からミリ秒を減算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMilliseconds(date_time, 1000) AS subtract_milliseconds_with_date_time,
    subtractMilliseconds(date_time_string, 1000) AS subtract_milliseconds_with_date_time_string
```

```response title=Response
┌─subtract_milliseconds_with_date_time─┬─subtract_milliseconds_with_date_time_string─┐
│              2023-12-31 23:59:59.000 │                     2023-12-31 23:59:59.000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─minus(CAST('⋯second(10))─┐
│  1998-06-15 23:59:59.990 │
└──────────────────────────┘
```

## subtractMinutes \{#subtractMinutes\}

導入バージョン: v1.1

日付、日時、または文字列表現の日付／日時から、指定した分を減算します。

**構文**

```sql
subtractMinutes(datetime, num)
```

**引数**

* `datetime` — 指定した分数を減算する対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する分数（分単位）。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返される値**

`datetime` から `num` 分を引いた値を返します。戻り値の型は [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64) です。

**例**

**さまざまな日付型から分を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMinutes(date, 30) AS subtract_minutes_with_date,
    subtractMinutes(date_time, 30) AS subtract_minutes_with_date_time,
    subtractMinutes(date_time_string, 30) AS subtract_minutes_with_date_time_string
```

```response title=Response
┌─subtract_minutes_with_date─┬─subtract_minutes_with_date_time─┬─subtract_minutes_with_date_time_string─┐
│        2023-12-31 23:30:00 │             2023-12-31 23:30:00 │                2023-12-31 23:30:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─minus(CAST('⋯Minute(10))─┐
│      1998-06-15 23:50:00 │
└──────────────────────────┘
```

## subtractMonths \{#subtractMonths\}

導入バージョン: v1.1

日付、日時、または文字列として表現された日付／日時から、指定した月数を減算します。

**構文**

```sql
subtractMonths(datetime, num)
```

**引数**

* `datetime` — 指定した月数を減算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する月数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` から `num` か月を引いた値を返します。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付型から月数を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMonths(date, 1) AS subtract_months_with_date,
    subtractMonths(date_time, 1) AS subtract_months_with_date_time,
    subtractMonths(date_time_string, 1) AS subtract_months_with_date_time_string
```

```response title=Response
┌─subtract_months_with_date─┬─subtract_months_with_date_time─┬─subtract_months_with_date_time_string─┐
│                2023-12-01 │            2023-12-01 00:00:00 │               2023-12-01 00:00:00.000 │
└───────────────────────────┴────────────────────────────────┴───────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─minus(CAST('⋯lMonth(10))─┐
│               1997-08-16 │
└──────────────────────────┘
```

## subtractNanoseconds \{#subtractNanoseconds\}

導入: v20.1

日時型、または文字列表現の日時から、指定した数のナノ秒を減算します。

**構文**

```sql
subtractNanoseconds(datetime, num)
```

**引数**

* `datetime` — 指定したナノ秒数を差し引く対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算するナノ秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` から `num` ナノ秒を減算した値を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**異なる日時型からナノ秒を減算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractNanoseconds(date_time, 1000) AS subtract_nanoseconds_with_date_time,
    subtractNanoseconds(date_time_string, 1000) AS subtract_nanoseconds_with_date_time_string
```

```response title=Response
┌─subtract_nanoseconds_with_date_time─┬─subtract_nanoseconds_with_date_time_string─┐
│       2023-12-31 23:59:59.999999000 │              2023-12-31 23:59:59.999999000 │
└─────────────────────────────────────┴────────────────────────────────────────────┘
```

**代替の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 nanosecond)
```

```response title=Response
┌─minus(CAST('19⋯anosecond(10))─┐
│ 1998-06-15 23:59:59.999999990 │
└───────────────────────────────┘
```

## subtractQuarters \{#subtractQuarters\}

導入バージョン: v20.1

日付、日時、または文字列形式の日付／日時から、指定した数の四半期分を減算します。

**構文**

```sql
subtractQuarters(datetime, num)
```

**引数**

* `datetime` — 指定した数の四半期を減算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する四半期数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` から `num` 四半期を引いた結果を返す。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)。

**使用例**

**異なる日付型から四半期を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractQuarters(date, 1) AS subtract_quarters_with_date,
    subtractQuarters(date_time, 1) AS subtract_quarters_with_date_time,
    subtractQuarters(date_time_string, 1) AS subtract_quarters_with_date_time_string
```

```response title=Response
┌─subtract_quarters_with_date─┬─subtract_quarters_with_date_time─┬─subtract_quarters_with_date_time_string─┐
│                  2023-10-01 │              2023-10-01 00:00:00 │                 2023-10-01 00:00:00.000 │
└─────────────────────────────┴──────────────────────────────────┴─────────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─minus(CAST('1⋯Quarter(10))─┐
│                1996-09-16 │
└───────────────────────────┘
```

## subtractSeconds \{#subtractSeconds\}

導入バージョン: v1.1

日付、日時、または文字列表現の日付/日時から指定した秒数を減算します。

**構文**

```sql
subtractSeconds(datetime, num)
```

**引数**

* `datetime` — 指定した秒数を差し引く対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` から `num` 秒を引いた値を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**使用例**

**異なる日付／日時型から秒数を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractSeconds(date, 60) AS subtract_seconds_with_date,
    subtractSeconds(date_time, 60) AS subtract_seconds_with_date_time,
    subtractSeconds(date_time_string, 60) AS subtract_seconds_with_date_time_string
```

```response title=Response
┌─subtract_seconds_with_date─┬─subtract_seconds_with_date_time─┬─subtract_seconds_with_date_time_string─┐
│        2023-12-31 23:59:00 │             2023-12-31 23:59:00 │                2023-12-31 23:59:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─minus(CAST('⋯Second(10))─┐
│      1998-06-15 23:59:50 │
└──────────────────────────┘
```

## subtractTupleOfIntervals \{#subtractTupleOfIntervals\}

導入バージョン: v22.11

日付または日時から、タプルで指定された複数のインターバルを順に減算します。

**構文**

```sql
subtractTupleOfIntervals(datetime, intervals)
```

**引数**

* `datetime` — インターバルを減算する対象の日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `intervals` — `datetime` から減算するインターバルのタプル。[`Tuple(Interval)`](/sql-reference/data-types/tuple)

**返される値**

`intervals` を減算した結果の `date` を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**日付からインターバルのタプルを減算**

```sql title=Query
WITH toDate('2018-01-01') AS date SELECT subtractTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 YEAR))
```

```response title=Response
┌─subtractTupl⋯alYear(1)))─┐
│               2016-12-31 │
└──────────────────────────┘
```

## subtractWeeks \{#subtractWeeks\}

導入バージョン: v1.1

指定した週数を、`Date`、日時を表す `DateTime`、または `Date`／日時の文字列表現から減算します。

**構文**

```sql
subtractWeeks(datetime, num)
```

**引数**

* `datetime` — 指定した週数を減算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する週数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime` から `num` 週を減算した値を返す。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**異なる日付型から週を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractWeeks(date, 1) AS subtract_weeks_with_date,
    subtractWeeks(date_time, 1) AS subtract_weeks_with_date_time,
    subtractWeeks(date_time_string, 1) AS subtract_weeks_with_date_time_string
```

```response title=Response
┌─subtract_weeks_with_date─┬─subtract_weeks_with_date_time─┬─subtract_weeks_with_date_time_string─┐
│               2023-12-25 │           2023-12-25 00:00:00 │              2023-12-25 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─minus(CAST('⋯alWeek(10))─┐
│               1998-04-07 │
└──────────────────────────┘
```

## subtractYears \{#subtractYears\}

導入バージョン: v1.1

日付、日時、または文字列表現の日付／日時から、指定した年数を減算します。

**構文**

```sql
subtractYears(datetime, num)
```

**引数**

* `datetime` — 指定した年数を減算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
* `num` — 減算する年数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**返される値**

`datetime` から `num` 年を引いた値を返します。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) です。

**使用例**

**異なる日付型から年数を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractYears(date, 1) AS subtract_years_with_date,
    subtractYears(date_time, 1) AS subtract_years_with_date_time,
    subtractYears(date_time_string, 1) AS subtract_years_with_date_time_string
```

```response title=Response
┌─subtract_years_with_date─┬─subtract_years_with_date_time─┬─subtract_years_with_date_time_string─┐
│               2023-01-01 │           2023-01-01 00:00:00 │              2023-01-01 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**別の INTERVAL 構文の使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─minus(CAST('⋯alYear(10))─┐
│               1988-06-16 │
└──────────────────────────┘
```

## timeDiff \{#timeDiff\}

導入バージョン: v23.4

2つの日付または日時値の差を秒単位で返します。
差は `enddate` - `startdate` として計算されます。

この関数は `dateDiff('second', startdate, enddate)` と同等です。

他の単位（時間、日、月など）で時間差を計算するには、代わりに [`dateDiff`](#dateDiff) 関数を使用してください。

**構文**

```sql
timeDiff(startdate, enddate)
```

**引数**

* `startdate` — 減算する最初の時刻値（減数）。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `enddate` — そこから減算を行う 2 番目の時刻値（被減数）。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

`enddate` と `startdate` の差を秒単位で返します。[`Int64`](/sql-reference/data-types/int-uint)

**例**

**時間差を秒単位で計算する**

```sql title=Query
SELECT timeDiff(toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) AS res
```

```response title=Response
┌───res─┐
│ 90000 │
└───────┘
```

**時間差を計算し、時間単位に変換する**

```sql title=Query
SELECT timeDiff(toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) / 3600 AS hours
```

```response title=Response
┌─hours─┐
│    25 │
└───────┘
```

**dateDiff を秒単位で使用した場合と同等**

```sql title=Query
SELECT
    timeDiff(toDateTime('2021-12-29'), toDateTime('2022-01-01')) AS time_diff_result,
    dateDiff('second', toDateTime('2021-12-29'), toDateTime('2022-01-01')) AS date_diff_result
```

```response title=Response
┌─time_diff_result─┬─date_diff_result─┐
│           259200 │           259200 │
└──────────────────┴──────────────────┘
```

## timeSlot \{#timeSlot\}

導入バージョン: v1.1

時刻を30分間隔の区間の開始時刻に丸めます。

:::note
この関数は拡張型である `Date32` および `DateTime64` の値を引数として受け取ることができますが、
通常の範囲（`Date` の場合は1970年から2149年、`DateTime` の場合は1970年から2106年）外の時刻を渡すと、誤った結果を返します。
:::

**構文**

```sql
timeSlot(time[, time_zone])
```

**引数**

* `time` — 30 分幅の区間の開始時刻に丸める対象の時刻。[`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — 省略可能。タイムゾーンを表す `String` 型の定数値または式。[`String`](/sql-reference/data-types/string)

**戻り値**

30 分幅の区間の開始時刻に丸められた時刻を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**時刻を 30 分単位の区間に丸める**

```sql title=Query
SELECT timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))
```

```response title=Response
┌─timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))─┐
│                                2000-01-02 03:00:00 │
└────────────────────────────────────────────────────┘
```

## timeSlots \{#timeSlots\}

導入バージョン: v1.1

`StartTime` から開始して `Duration` 秒間継続する時間間隔について、その間に含まれる時点を、`Size` 秒単位で切り捨てた時刻の配列として返します。`Size` はオプションのパラメータで、デフォルトは 1800（30 分）です。

これは、たとえば対応するセッション内のページビューを検索する場合などに必要となります。

`DateTime64` の場合、戻り値のスケールは `StartTime` のスケールと異なることがあります。指定されたすべての引数のうち、最も大きいスケールが採用されます。

**構文**

```sql
timeSlots(StartTime, Duration[, Size])
```

**引数**

* `StartTime` — 区間の開始時刻。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `Duration` — 区間の継続時間（秒単位）。[`UInt32`](/sql-reference/data-types/int-uint) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `Size` — 省略可能。タイムスロットのサイズ（秒単位）。既定値は 1800（30 分）。[`UInt32`](/sql-reference/data-types/int-uint) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返される値**

DateTime/DateTime64 の配列を返します（戻り値の型は `StartTime` の型と一致します）。DateTime64 の場合、戻り値のスケールは `StartTime` のスケールと異なることがあり、渡されたすべての引数の中で最大のスケールが採用されます。[`Array(DateTime)`](/sql-reference/data-types/array) または [`Array(DateTime64)`](/sql-reference/data-types/array)

**例**

**区間に対してタイムスロットを生成する**

```sql title=Query
SELECT timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600));
SELECT timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299);
SELECT timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))
```

```response title=Response
┌─timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600))─┐
│ ['2012-01-01 12:00:00','2012-01-01 12:30:00']               │
└─────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299)─┐
│ ['1980-12-12 20:56:13','1980-12-12 21:01:12','1980-12-12 21:06:11']     │
└─────────────────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))─┐
│ ['1980-12-12 20:56:13.0000','1980-12-12 21:01:12.0000','1980-12-12 21:06:11.0000']                        │
└───────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## timestamp \{#timestamp\}

導入バージョン: v23.9

最初の引数 `expr` を型 [`DateTime64(6)`](/sql-reference/data-types/datetime64) に変換します。
2 番目の引数 `expr_time` が指定されている場合、変換後の値に指定された時間を加算します。

**構文**

```sql
timestamp(expr[, expr_time])
```

**引数**

* `expr` — 日付、または時刻付きの日付。[`String`](/sql-reference/data-types/string)
* `expr_time` — 省略可。変換した値に加算する時刻。[`String`](/sql-reference/data-types/string)

**戻り値**

`expr` を変換した値、または `expr` に時刻を加算した値を返します。[`DateTime64(6)`](/sql-reference/data-types/datetime64)

**例**

**日付文字列を DateTime64(6) に変換する**

```sql title=Query
SELECT timestamp('2023-12-31') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2023-12-31 00:00:00.000000 │
└────────────────────────────┘
```

**日付文字列に時刻を追加する**

```sql title=Query
SELECT timestamp('2023-12-31 12:00:00', '12:00:00.11') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2024-01-01 00:00:00.110000 │
└────────────────────────────┘
```

## timezone \{#timezone\}

導入バージョン: v21.4

現在のセッションのタイムゾーン名を返すか、タイムゾーンのオフセットまたは名前を正規のタイムゾーン名に変換します。

**構文**

```sql
timezone()
```

**別名**: `timeZone`

**引数**

* なし。

**戻り値**

正準タイムゾーン名を [`String`](/sql-reference/data-types/string) として返します。

**例**

**使用例**

```sql title=Query
SELECT timezone()
```

```response title=Response
┌─timezone()───────┐
│ Europe/Amsterdam │
└──────────────────┘
```

## timezoneOf \{#timezoneOf\}

導入バージョン: v21.4

[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) 型の値のタイムゾーン名を返します。

**構文**

```sql
timeZoneOf(datetime)
```

**エイリアス**: `timeZoneOf`

**引数**

* `datetime` — 型 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) の値。
* `timezone` — 省略可能。`datetime` のタイムゾーンを変換する際の変換先タイムゾーン名。型 [`String`](/sql-reference/data-types/string)

**返される値**

`datetime` のタイムゾーン名を返します。型 [`String`](/sql-reference/data-types/string)

**例**

**使用例**

```sql title=Query
SELECT timezoneOf(now());
```

```response title=Response
┌─timezoneOf(now())─┐
│ Europe/Amsterdam  │
└───────────────────┘
```

## timezoneOffset \{#timezoneOffset\}

導入バージョン: v21.6

[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) からのタイムゾーンオフセットを秒単位で返します。
この関数は、指定された日時における夏時間および過去のタイムゾーン変更を考慮します。

**構文**

```sql
timeZoneOffset(datetime)
```

**別名**: `timeZoneOffset`

**引数**

* `datetime` — タイムゾーンオフセットを取得する対象の `DateTime` 値。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

UTC からのオフセットを秒単位の [`Int32`](/sql-reference/data-types/int-uint) で返します

**例**

**使用例**

```sql title=Query
SELECT toDateTime('2021-04-21 10:20:30', 'America/New_York') AS Time,
toTypeName(Time) AS Type,
timeZoneOffset(Time) AS Offset_in_seconds,
(Offset_in_seconds / 3600) AS Offset_in_hours;
```

```response title=Response
┌────────────────Time─┬─Type─────────────────────────┬─Offset_in_seconds─┬─Offset_in_hours─┐
│ 2021-04-21 10:20:30 │ DateTime('America/New_York') │            -14400 │              -4 │
└─────────────────────┴──────────────────────────────┴───────────────────┴─────────────────┘
```

## toDayOfMonth \{#toDayOfMonth\}

導入バージョン: v1.1

`Date` または `DateTime` から、その月における日（1〜31）を返します。

**構文**

```sql
toDayOfMonth(datetime)
```

**エイリアス**: `DAY`, `DAYOFMONTH`

**引数**

* `datetime` — 日（その月の何日目か）を取得する対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返される値**

指定した日付/時刻の「日（day of month）」を返します。型は [`UInt8`](/sql-reference/data-types/int-uint) です。

**例**

**使用例**

```sql title=Query
SELECT toDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                              21 │
└─────────────────────────────────────────────────┘
```

## toDayOfWeek \{#toDayOfWeek\}

導入バージョン: v1.1

`Date` または `DateTime` の値に対して、その週の曜日番号を返します。

`toDayOfWeek()` の 2 引数形式では、週の開始曜日を Monday か Sunday のどちらにするか、
および戻り値の範囲を 0〜6 にするか 1〜7 にするかを指定できます。

| Mode | First day of week | Range                                          |
| ---- | ----------------- | ---------------------------------------------- |
| 0    | Monday            | 1-7: Monday = 1, Tuesday = 2, ..., Sunday = 7  |
| 1    | Monday            | 0-6: Monday = 0, Tuesday = 1, ..., Sunday = 6  |
| 2    | Sunday            | 0-6: Sunday = 0, Monday = 1, ..., Saturday = 6 |
| 3    | Sunday            | 1-7: Sunday = 1, Monday = 2, ..., Saturday = 7 |

**構文**

```sql
toDayOfWeek(datetime[, mode[, timezone]])
```

**別名**: `DAYOFWEEK`

**引数**

* `datetime` — 曜日を取得する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `mode` — 任意。週のモードを指定する整数 (0-3)。省略時のデフォルトは 0。[`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — 任意。変換に使用するタイムゾーン。[`String`](/sql-reference/data-types/string)

**戻り値**

指定された `Date` または `DateTime` の曜日を返す。型は [`UInt8`](/sql-reference/data-types/int-uint) です。

**例**

**使用例**

```sql title=Query
-- The following date is April 21, 2023, which was a Friday:
SELECT
    toDayOfWeek(toDateTime('2023-04-21')),
    toDayOfWeek(toDateTime('2023-04-21'), 1)
```

```response title=Response
┌─toDayOfWeek(toDateTime('2023-04-21'))─┬─toDayOfWeek(toDateTime('2023-04-21'), 1)─┐
│                                     5 │                                        4 │
└───────────────────────────────────────┴──────────────────────────────────────────┘
```

## toDayOfYear \{#toDayOfYear\}

導入バージョン: v18.4

`Date` または `DateTime` 型の値に対して、その年の中での通算日 (1〜366) を返します。

**構文**

```sql
toDayOfYear(datetime)
```

**別名**: `DAYOFYEAR`

**引数**

* `datetime` — 年内通算日を取得する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

指定された Date または DateTime の年内通算日を返します。戻り値の型は [`UInt16`](/sql-reference/data-types/int-uint) です。

**例**

**使用例**

```sql title=Query
SELECT toDayOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                            111 │
└────────────────────────────────────────────────┘
```

## toDaysSinceYearZero \{#toDaysSinceYearZero\}

導入バージョン: v23.9

指定した日付について、[ISO 8601 で定義されるプロレプティック・グレゴリオ暦](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar)における
[西暦 0000 年 1 月 1 日](https://en.wikipedia.org/wiki/Year_zero) から経過した日数を返します。

計算方法は MySQL の [`TO_DAYS`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_to-days) 関数と同じです。

**構文**

```sql
toDaysSinceYearZero(date[, time_zone])
```

**別名**: `TO_DAYS`

**引数**

* `date` — 日付 `0000-01-01` からの経過日数を計算する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — タイムゾーン。[`String`](/sql-reference/data-types/string)

**戻り値**

日付 `0000-01-01` から経過した日数を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**使用例**

**年ゼロからの経過日数を計算する**

```sql title=Query
SELECT toDaysSinceYearZero(toDate('2023-09-08'))
```

```response title=Response
┌─toDaysSinceYearZero(toDate('2023-09-08')))─┐
│                                     713569 │
└────────────────────────────────────────────┘
```

## toHour \{#toHour\}

導入バージョン: v1.1

`DateTime` または `DateTime64` 値の時（0-23）を返します。

**構文**

```sql
toHour(datetime)
```

**別名**: `HOUR`

**引数**

* `datetime` — 時を取得する対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

`datetime` の時 (0-23) を返します。[`UInt8`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
SELECT toHour(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toHour(toDateTime('2023-04-21 10:20:30'))─┐
│                                        10 │
└───────────────────────────────────────────┘
```

## toISOWeek \{#toISOWeek\}

導入バージョン: v20.1

日付、または時刻を含む日付の ISO 週番号を返します。

これは互換性維持のための関数で、`toWeek(date, 3)` と等価です。
ISO 週では週の始まりは月曜日であり、その年の最初の週には 1 月 4 日が含まれます。
ISO 8601 によると、週番号は 1 から 53 の範囲に収まります。

年の始めや終わり付近の日付では、前の年または次の年の週番号が返される場合があることに注意してください。例えば、
2025 年 12 月 29 日は、2026 年 1 月 4 日を含む最初の週に属するため、週番号 1 を返します。

**構文**

```sql
toISOWeek(datetime[, timezone])
```

**引数**

* `datetime` — ISO 週番号を取得する基準となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。タイムゾーン。[`String`](/sql-reference/data-types/string)

**返される値**

ISO 8601 規格に準拠した ISO 週番号を返します。1 から 53 までの数値を返します。戻り値の型は [`UInt8`](/sql-reference/data-types/int-uint) です。

**例**

**ISO 週番号を取得する**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toISOWeek(date) AS isoWeek
```

```response title=Response
┌───────date─┬─isoWeek─┐
│ 2016-12-27 │      52 │
└────────────┴─────────┘
```

**ISO 週番号が異なる年に属する場合がある**

```sql title=Query
SELECT toDate('2025-12-29') AS date, toISOWeek(date) AS isoWeek, toYear(date) AS year
```

```response title=Response
┌───────date─┬─isoWeek─┬─year─┐
│ 2025-12-29 │       1 │ 2025 │
└────────────┴─────────┴──────┘
```

## toISOYear \{#toISOYear\}

導入バージョン: v18.4

日付または日時を ISO 年番号に変換します。

**構文**

```sql
toISOYear(datetime)
```

**引数**

* `datetime` — 日付または日時の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

入力値を ISO 年の番号に変換して返します。[`UInt16`](/sql-reference/data-types/int-uint)

**例**

**日付値から ISO 年を取得する**

```sql title=Query
SELECT
toISOYear(toDate('2024/10/02')) as year1,
toISOYear(toDateTime('2024-10-02 01:30:00')) as year2
```

```response title=Response
┌─week1─┬─week2─┐
│    40 │    40 │
└───────┴───────┘
```

## toLastDayOfMonth \{#toLastDayOfMonth\}

導入バージョン: v1.1

日付または日時を、その月の最終日に切り上げます。

:::note
戻り値の型は [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) の設定により変更できます。
:::

**構文**

```sql
toLastDayOfMonth(value)
```

**別名**: `LAST_DAY`

**引数**

* `value` — 月の最終日に切り上げる対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返される値**

指定された日付または日時に対応する月の最終日の日付を返します。[`Date`](/sql-reference/data-types/date)

**例**

**月の最終日への切り上げ**

```sql title=Query
SELECT toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-30 │
└─────────────────────────────────────────────────────┘
```

## toLastDayOfWeek \{#toLastDayOfWeek\}

導入バージョン: v23.5

日付または日時を、次の土曜日または日曜日に切り上げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toLastDayOfWeek(datetime[, mode[, timezone]])
```

**引数**

* `datetime` — 変換対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `mode` — `toWeek()` 関数で説明されているように、週の最初の曜日を決定します。デフォルトは `0`。[`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — 省略可能。変換に使用するタイムゾーン。指定されていない場合はサーバーのタイムゾーンが使用されます。[`String`](/sql-reference/data-types/string)

**戻り値**

指定されたモードに応じて、指定された日付以降で最も近い土曜日または日曜日の日付を返します。型は [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) のいずれかです。

**例**

**最も近い土曜日または日曜日への切り上げ**

```sql title=Query
SELECT
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')), /* a Friday */
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* a Friday */
    toLastDayOfWeek(toDate('2023-04-23')), /* a Sunday */
    toLastDayOfWeek(toDate('2023-04-23'), 1) /* a Sunday */
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-23
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-22
toLastDayOfWeek(toDate('2023-04-23')):                   2023-04-23
toLastDayOfWeek(toDate('2023-04-23'), 1):                2023-04-23
```

## toMillisecond \{#toMillisecond\}

導入: v24.2

`DateTime` または `DateTime64` 値のミリ秒部分 (0～999) を返します。

**構文**

```sql
toMillisecond(datetime)
```

**別名**: `MILLISECOND`

**引数**

* `datetime` — ミリ秒を取得する対象の日時値。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返される値**

`datetime` の分内のミリ秒数 (0 - 59) を返します。[`UInt16`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
SELECT toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3));
```

```response title=Response
┌──toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3))─┐
│                                                        456 │
└────────────────────────────────────────────────────────────┘
```

## toMinute \{#toMinute\}

導入バージョン: v1.1

`Date` または `DateTime` 型の値から、分（0〜59）を返します。

**構文**

```sql
toMinute(datetime)
```

**別名**: `MINUTE`

**引数**

* `datetime` — 分を取得する対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

`datetime` の時刻の分 (0 - 59) を返します。[`UInt8`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
SELECT toMinute(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMinute(toDateTime('2023-04-21 10:20:30'))─┐
│                                          20 │
└─────────────────────────────────────────────┘
```

## toModifiedJulianDay \{#toModifiedJulianDay\}

導入バージョン: v21.1

テキスト形式 `YYYY-MM-DD` で表された[プロレプティック・グレゴリオ暦](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar)の日付を、`Int32` 型の[修正ユリウス日](https://en.wikipedia.org/wiki/Julian_day#Variants)に変換します。この関数は `0000-01-01` から `9999-12-31` までの日付をサポートします。引数が日付としてパースできない場合、または日付が不正な場合は例外をスローします。

**構文**

```sql
toModifiedJulianDay(date)
```

**引数**

* `date` — 文字列形式の日付を表す値。[`String`](/sql-reference/data-types/string) または [`FixedString`](/sql-reference/data-types/fixedstring)

**戻り値**

修正ユリウス日番号を返します。[`Int32`](/sql-reference/data-types/int-uint)

**例**

**日付を修正ユリウス日番号に変換する**

```sql title=Query
SELECT toModifiedJulianDay('2020-01-01')
```

```response title=Response
┌─toModifiedJulianDay('2020-01-01')─┐
│                             58849 │
└───────────────────────────────────┘
```

## toModifiedJulianDayOrNull \{#toModifiedJulianDayOrNull\}

導入: v21.1

[`toModifiedJulianDay()`](#toModifiedJulianDay) と同様ですが、例外をスローする代わりに `NULL` を返します。

**構文**

```sql
toModifiedJulianDayOrNull(date)
```

**引数**

* `date` — 文字列表現の日付。[`String`](/sql-reference/data-types/string) または [`FixedString`](/sql-reference/data-types/fixedstring)

**戻り値**

有効な `date` の場合は修正ユリウス日番号を、それ以外の場合は `null` を返します。[`Nullable(Int32)`](/sql-reference/data-types/nullable)

**例**

**null を考慮して日付を修正ユリウス日番号に変換する**

```sql title=Query
SELECT toModifiedJulianDayOrNull('2020-01-01');
SELECT toModifiedJulianDayOrNull('0000-00-00'); -- invalid date, returns NULL
```

```response title=Response
┌─toModifiedJu⋯020-01-01')─┐
│                    58849 │
└──────────────────────────┘
┌─toModifiedJu⋯000-00-00')─┐
│                     ᴺᵁᴸᴸ │
└──────────────────────────┘
```

## toMonday \{#toMonday\}

導入バージョン: v1.1

日付または日時を、同じ週の月曜日に切り捨てます。日付を返します。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toMonday(value)
```

**引数**

* `value` — 週の月曜日に切り下げる対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

指定された日付または日時が属する週の月曜日の日付を返します。[`Date`](/sql-reference/data-types/date)

**例**

**週の月曜日に切り下げる**

```sql title=Query
SELECT
toMonday(toDateTime('2023-04-21 10:20:30')), -- A Friday
toMonday(toDate('2023-04-24'));              -- Already a Monday
```

```response title=Response
┌─toMonday(toDateTime('2023-04-21 10:20:30'))─┬─toMonday(toDate('2023-04-24'))─┐
│                                  2023-04-17 │                     2023-04-24 │
└─────────────────────────────────────────────┴────────────────────────────────┘
```

## toMonth \{#toMonth\}

導入バージョン: v1.1

`Date` または `DateTime` 型の値から、月 (1〜12) の値を返します。

**構文**

```sql
toMonth(datetime)
```

**エイリアス**: `MONTH`

**引数**

* `datetime` — 月を取得する対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

指定された日付/時刻の「月」を返します。型は [`UInt8`](/sql-reference/data-types/int-uint) です。

**例**

**使用例**

```sql title=Query
SELECT toMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          4 │
└────────────────────────────────────────────┘
```

## toMonthNumSinceEpoch \{#toMonthNumSinceEpoch\}

導入バージョン: v25.3

1970年からの経過月数を返します。

**構文**

```sql
toMonthNumSinceEpoch(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date)、[`DateTime`](/sql-reference/data-types/datetime)、または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

正の整数値

**例**

**例**

```sql title=Query
SELECT toMonthNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
657
```

## toQuarter \{#toQuarter\}

導入バージョン: v1.1

指定した `Date` または `DateTime` 値について、その年の四半期 (1～4) を返します。

**構文**

```sql
toQuarter(datetime)
```

**エイリアス**: `QUARTER`

**引数**

* `datetime` — 年の四半期を取得する対象となる日付または日時。[`Date`](/sql-reference/data-types/date)、[`Date32`](/sql-reference/data-types/date32)、[`DateTime`](/sql-reference/data-types/datetime)、[`DateTime64`](/sql-reference/data-types/datetime64) のいずれか。

**返り値**

指定された日付／日時が属する年の四半期を返します。型は [`UInt8`](/sql-reference/data-types/int-uint) です。

**例**

**使用例**

```sql title=Query
SELECT toQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                            2 │
└──────────────────────────────────────────────┘
```

## toRelativeDayNum \{#toRelativeDayNum\}

導入バージョン: v1.1

日付または日時を、過去のある固定時点からの経過日数に変換します。
その正確な時点は実装依存であり、この関数を単体で使用することは想定されていません。
この関数の主な用途は、2 つの日付または日時間の日数差を計算することであり、たとえば `toRelativeDayNum(dt1) - toRelativeDayNum(dt2)` のように使用します。

**構文**

```sql
toRelativeDayNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

過去の固定基準時点からの経過日数を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**使用例**

**相対日数を取得する**

```sql title=Query
SELECT toRelativeDayNum(toDate('2023-04-01')) - toRelativeDayNum(toDate('2023-01-01'))
```

```response title=Response
┌─minus(toRela⋯3-01-01')))─┐
│                       90 │
└──────────────────────────┘
```

## toRelativeHourNum \{#toRelativeHourNum\}

導入バージョン: v1.1

日付または日時を、過去のある固定時点からの経過時間（時間数）に変換します。
その基準となる時刻は実装依存の詳細であり、この関数を単体で使用することは意図されていません。
この関数の主な用途は、2 つの日付または日時の間の時間数の差を計算することです。例: `toRelativeHourNum(dt1) - toRelativeHourNum(dt2)`。

**構文**

```sql
toRelativeHourNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

過去のある固定の基準時点からの経過時間（時間数）を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**相対的な時刻番号を取得する**

```sql title=Query
SELECT toRelativeHourNum(toDateTime('2023-01-01 12:00:00')) - toRelativeHourNum(toDateTime('2023-01-01 00:00:00')) AS hours_difference
```

```response title=Response
┌─hours_difference─┐
│               12 │
└──────────────────┘
```

## toRelativeMinuteNum \{#toRelativeMinuteNum\}

導入バージョン: v1.1

日付または日時を、過去のある固定時点からの経過分数に変換します。
その時点がいつであるかは実装の詳細であり、この関数を単体で使用することは想定されていません。
この関数の主な目的は、2 つの日付または日時の差を分単位で計算することであり、例えば `toRelativeMinuteNum(dt1) - toRelativeMinuteNum(dt2)` のように使用します。

**構文**

```sql
toRelativeMinuteNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

過去の固定された基準点からの経過分数を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**相対的な分番号を取得する**

```sql title=Query
SELECT toRelativeMinuteNum(toDateTime('2023-01-01 00:30:00')) - toRelativeMinuteNum(toDateTime('2023-01-01 00:00:00')) AS minutes_difference
```

```response title=Response
┌─minutes_difference─┐
│                 30 │
└────────────────────┘
```

## toRelativeMonthNum \{#toRelativeMonthNum\}

導入: v1.1

日付または日時を、過去のある固定時点から経過した月数に変換します。
その正確な基準時点は実装依存であり、この関数を単体で使用することは意図されていません。
この関数の主な用途は、2つの日付または日時の間の月数の差を計算することです。例: `toRelativeMonthNum(dt1) - toRelativeMonthNum(dt2)`。

**構文**

```sql
toRelativeMonthNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

過去の固定基準時点からの月数を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**使用例**

**相対月番号を取得する**

```sql title=Query
SELECT toRelativeMonthNum(toDate('2023-04-01')) - toRelativeMonthNum(toDate('2023-01-01')) AS months_difference
```

```response title=Response
┌─months_difference─┐
│                 3 │
└───────────────────┘
```

## toRelativeQuarterNum \{#toRelativeQuarterNum\}

導入バージョン: v1.1

日付、または日付と時刻を、過去のある固定時点から経過した四半期の数に変換します。
その正確な時点は実装上の詳細であり、この関数を単独で使用することは想定されていません。
この関数の主な用途は、2 つの日付または日時の間の四半期差を計算することです。例えば、`toRelativeQuarterNum(dt1) - toRelativeQuarterNum(dt2)` のように使用します。

**構文**

```sql
toRelativeQuarterNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

過去の固定基準時点からの四半期数を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**相対的な四半期番号を取得する**

```sql title=Query
SELECT toRelativeQuarterNum(toDate('2023-04-01')) - toRelativeQuarterNum(toDate('2023-01-01')) AS quarters_difference
```

```response title=Response
┌─quarters_difference─┐
│                   1 │
└─────────────────────┘
```

## toRelativeSecondNum \{#toRelativeSecondNum\}

導入バージョン: v1.1

日付、または日付と時刻を、過去のある固定時点からの経過秒数に変換します。
その正確な時点は実装の詳細に属するため、この関数を単体で使用することは想定されていません。
この関数の主な用途は、`toRelativeSecondNum(dt1) - toRelativeSecondNum(dt2)` のように、2 つの日付または日付と時刻同士の秒数差を計算することです。

**構文**

```sql
toRelativeSecondNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

過去の固定の基準時点からの秒数を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**相対秒数を取得する**

```sql title=Query
SELECT toRelativeSecondNum(toDateTime('2023-01-01 00:01:00')) - toRelativeSecondNum(toDateTime('2023-01-01 00:00:00')) AS seconds_difference
```

```response title=Response
┌─seconds_difference─┐
│                 60 │
└────────────────────┘
```

## toRelativeWeekNum \{#toRelativeWeekNum\}

導入バージョン: v1.1

日付または日時を、過去のある固定基準時点からの経過週数に変換します。
その基準時点の正確な値は実装依存であり、この関数を単体で使用することは想定されていません。
この関数の主な目的は、2 つの日付または日時の間の週数の差を計算することです。例: `toRelativeWeekNum(dt1) - toRelativeWeekNum(dt2)`。

**構文**

```sql
toRelativeWeekNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

過去の固定基準点からの週数を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**相対週番号を取得する**

```sql title=Query
SELECT toRelativeWeekNum(toDate('2023-01-08')) - toRelativeWeekNum(toDate('2023-01-01')) AS weeks_difference
```

```response title=Response
┌─weeks_difference─┐
│                1 │
└──────────────────┘
```

## toRelativeYearNum \{#toRelativeYearNum\}

導入バージョン: v1.1

日付または日時を、過去のある固定時点からの経過年数に変換します。
その正確な基準時刻は実装依存の詳細であり、この関数を単体で使用することは想定されていません。
この関数の主な用途は、2つの日付または日時の差を年数として計算することです。例: `toRelativeYearNum(dt1) - toRelativeYearNum(dt2)`。

**構文**

```sql
toRelativeYearNum(date)
```

**引数**

* `date` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

過去の固定基準点からの年数を返します。[`UInt16`](/sql-reference/data-types/int-uint)

**例**

**相対的な年数を取得する**

```sql title=Query
SELECT toRelativeYearNum('2010-10-01'::DateTime) - toRelativeYearNum('2000-01-01'::DateTime)
```

```response title=Response
┌─minus(toRela⋯ateTime')))─┐
│                       10 │
└──────────────────────────┘
```

## toSecond \{#toSecond\}

導入バージョン: v1.1

`DateTime` または `DateTime64` の値から秒の値（0〜59）を返します。

**構文**

```sql
toSecond(datetime)
```

**エイリアス**: `SECOND`

**引数**

* `datetime` — 秒を取得する対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

`datetime` の分内の秒 (0 - 59) を返します。[`UInt8`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
SELECT toSecond(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toSecond(toDateTime('2023-04-21 10:20:30'))─┐
│                                          30 │
└─────────────────────────────────────────────┘
```

## toStartOfDay \{#toStartOfDay\}

導入バージョン: v1.1

日付時刻を、その日の開始時刻まで切り捨てます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) によって設定できます。
:::

**構文**

```sql
toStartOfDay(datetime)
```

**引数**

* `datetime` — 丸める対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)

**戻り値**

日付と時刻をその日の開始時刻に切り捨てた値を返します。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**一日の開始時刻への切り捨て**

```sql title=Query
SELECT toStartOfDay(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfDay(toDateTime('2023-04-21 10:20:30'))─┐
│                             2023-04-21 00:00:00 │
└─────────────────────────────────────────────────┘
```

## toStartOfFifteenMinutes \{#toStartOfFifteenMinutes\}

導入バージョン: v1.1

日時を直前の15分間隔の開始時刻に切り捨てます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfFifteenMinutes(datetime)
```

**引数**

* `datetime` — 丸め対象の日付または日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

最も近い15分単位の開始時刻に丸められた日時を返します。値の型は [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)。

**使用例**

**例**

```sql title=Query
SELECT
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:15:00
```

## toStartOfFiveMinutes \{#toStartOfFiveMinutes\}

導入バージョン: v22.6

日時を直前の 5 分単位区間の開始時刻に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfFiveMinutes(datetime)
```

**エイリアス**: `toStartOfFiveMinute`

**引数**

* `datetime` — 丸め対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

最も近い5分単位の開始時刻に丸めた日時を返します。型は [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) です。

**使用例**

**例**

```sql title=Query
SELECT
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```

## toStartOfHour \{#toStartOfHour\}

導入バージョン: v1.1

日時を、その時間の先頭（ちょうどの時刻）に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfHour(datetime)
```

**引数**

* `datetime` — 丸め対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

時刻を直前の時間の開始時刻に切り下げた日時を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**時間の開始時刻への切り下げ**

```sql title=Query
SELECT
    toStartOfHour(toDateTime('2023-04-21 10:20:30'));
```

```response title=Response
┌─────────────────res─┬─toTypeName(res)─┐
│ 2023-04-21 10:00:00 │ DateTime        │
└─────────────────────┴─────────────────┘
```

## toStartOfISOYear \{#toStartOfISOYear\}

導入バージョン: v1.1

日付または日時を、その ISO 年の最初の日まで切り捨てます。ISO 年は通常の暦年と異なる場合があります。詳細は [ISO week date](https://en.wikipedia.org/wiki/ISO_week_date) を参照してください。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) によって設定できます。
:::

**構文**

```sql
toStartOfISOYear(value)
```

**引数**

* `value` — ISO 年の初日に切り捨てる対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返される値**

指定した日付または日時に対応する ISO 年の初日を返します。[`Date`](/sql-reference/data-types/date)

**例**

**ISO 年の初日への切り捨て**

```sql title=Query
SELECT toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-01-02 │
└─────────────────────────────────────────────────────┘
```

## toStartOfInterval \{#toStartOfInterval\}

導入バージョン: v20.1

この関数は、`toStartOfInterval(date_or_date_with_time, INTERVAL x unit [, time_zone])` という構文により、他の `toStartOf*()` 関数を一般化したものです。

たとえば、

* `toStartOfInterval(t, INTERVAL 1 YEAR)` は `toStartOfYear(t)` と同じ結果を返します。
* `toStartOfInterval(t, INTERVAL 1 MONTH)` は `toStartOfMonth(t)` と同じ結果を返します。
* `toStartOfInterval(t, INTERVAL 1 DAY)` は `toStartOfDay(t)` と同じ結果を返します。
* `toStartOfInterval(t, INTERVAL 15 MINUTE)` は `toStartOfFifteenMinutes(t)` と同じ結果を返します。

計算は特定の時点を基準として実行されます:

| Interval                                                                                                                     | 開始点                    |
| ---------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| YEAR                                                                                                                         | year 0                 |
| QUARTER                                                                                                                      | 1900 Q1                |
| MONTH                                                                                                                        | 1900 January           |
| WEEK                                                                                                                         | 1970, 1st week (01-05) |
| DAY                                                                                                                          | 1970-01-01             |
| HOUR                                                                                                                         | (*)                    |
| MINUTE                                                                                                                       | 1970-01-01 00:00:00    |
| SECOND                                                                                                                       | 1970-01-01 00:00:00    |
| MILLISECOND                                                                                                                  | 1970-01-01 00:00:00    |
| MICROSECOND                                                                                                                  | 1970-01-01 00:00:00    |
| NANOSECOND                                                                                                                   | 1970-01-01 00:00:00    |
| (*) hour intervals are special: the calculation is always performed relative to 00:00:00 (midnight) of the current day. つまり、 |                        |
| 有用なのは 1〜23 時の値のみです。                                                                                                          |                        |

単位として `WEEK` が指定された場合、`toStartOfInterval` は週の開始日を月曜日とみなします。これは、デフォルトでは週の開始日が日曜日である `toStartOfWeek` 関数とは動作が異なる点に注意してください。

2 つ目のオーバーロードは、TimescaleDB の `time_bucket()` 関数および PostgreSQL の `date_bin()` 関数をエミュレートします。

**構文**

```sql
toStartOfInterval(value, INTERVAL x unit[, time_zone])
toStartOfInterval(value, INTERVAL x unit[, origin[, time_zone]])
```

**別名**: `time_bucket`, `date_bin`

**引数**

* `value` — 切り下げ対象の日付または日時の値。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `x` — インターバルの長さを表す数値。 - `unit` — インターバルの単位: YEAR, QUARTER, MONTH, WEEK, DAY, HOUR, MINUTE, SECOND, MILLISECOND, MICROSECOND, NANOSECOND。 - `time_zone` — 省略可。タイムゾーン名を表す文字列。 - `origin` — 省略可。計算の起点（第 2 オーバーロードでのみ有効）。

**返される値**

入力値を含むインターバルの開始時点を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**基本的なインターバルへの丸め**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-15 14:30:00'), INTERVAL 1 MONTH)
```

```response title=Response
┌─toStartOfInt⋯alMonth(1))─┐
│               2023-01-01 │
└──────────────────────────┘
```

**起点の利用**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-01 14:45:00'), INTERVAL 1 MINUTE, toDateTime('2023-01-01 14:35:30'))
```

```response title=Response
┌─toStartOfInt⋯14:35:30'))─┐
│      2023-01-01 14:44:30 │
└──────────────────────────┘
```

## toStartOfMicrosecond \{#toStartOfMicrosecond\}

導入バージョン: v22.6

日時をマイクロ秒境界まで切り捨てます。

**構文**

```sql
toStartOfMicrosecond(datetime[, timezone])
```

**引数**

* `datetime` — 日付と時刻。[`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — オプション。返される値のタイムゾーン。指定しない場合、関数は `value` パラメータのタイムゾーンを使用します。[`String`](/sql-reference/data-types/string)

**戻り値**

サブマイクロ秒精度を持つ入力値 [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**タイムゾーンを指定しないクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64);
```

```response title=Response
┌────toStartOfMicrosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999000 │
└───────────────────────────────┘
```

**タイムゾーンを指定したクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMicrosecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999999000 │
└─────────────────────────────────────────────┘
```

## toStartOfMillisecond \{#toStartOfMillisecond\}

導入バージョン: v22.6

日時をミリ秒単位に切り捨てます。

**構文**

```sql
toStartOfMillisecond(datetime[, timezone])
```

**引数**

* `datetime` — 日付と時刻。[`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。返される値のタイムゾーン。指定されていない場合、関数は `value` パラメータのタイムゾーンを使用します。[`String`](/sql-reference/data-types/string)

**返される値**

サブミリ秒精度を含む入力値。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**タイムゾーンを指定しないクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64);
```

```response title=Response
┌────toStartOfMillisecond(dt64)─┐
│ 2020-01-01 10:20:30.999000000 │
└───────────────────────────────┘
```

**タイムゾーン付きのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMillisecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999000000 │
└─────────────────────────────────────────────┘
```

## toStartOfMinute \{#toStartOfMinute\}

導入バージョン: v1.1

日時を、その分の開始時点に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfMinute(datetime)
```

**引数**

* `datetime` — 切り捨て対象の日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

指定した日時を、その分の開始時刻に切り捨てて返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**分の開始時刻への切り捨て**

```sql title=Query
SELECT
    toStartOfMinute(toDateTime('2023-04-21 10:20:30')),
    toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfMinute(toDateTime('2023-04-21 10:20:30')):           2023-04-21 10:20:00
toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8)): 2023-04-21 10:20:00
```

## toStartOfMonth \{#toStartOfMonth\}

導入バージョン: v1.1

日付または日時を、その月の1日に切り捨てます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) の設定によって変更できます。
:::

**構文**

```sql
toStartOfMonth(value)
```

**引数**

* `value` — 月の初日に切り捨てる対象となる日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

指定された日付または日時が属する月の1日を返します。[`Date`](/sql-reference/data-types/date)

**例**

**月の初日への切り捨て**

```sql title=Query
SELECT toStartOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                        2023-04-01 │
└───────────────────────────────────────────────────┘
```

## toStartOfNanosecond \{#toStartOfNanosecond\}

導入バージョン: v22.6

日時をナノ秒単位に切り捨てます。

**構文**

```sql
toStartOfNanosecond(datetime[, timezone])
```

**引数**

* `datetime` — 日付と時刻。[`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。返される値のタイムゾーンを指定します。指定しない場合、関数は `value` パラメータのタイムゾーンを使用します。[`String`](/sql-reference/data-types/string)

**返される値**

ナノ秒を含む入力値。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**タイムゾーン指定なしのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64);
```

```response title=Response
┌─────toStartOfNanosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999999 │
└───────────────────────────────┘
```

**タイムゾーン付きクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfNanosecond(dt64, 'Asia/Istanbul')─┐
│              2020-01-01 12:20:30.999999999 │
└────────────────────────────────────────────┘
```

## toStartOfQuarter \{#toStartOfQuarter\}

導入バージョン: v1.1

日付または日時を、その四半期の初日に切り捨てます。四半期の初日は、1月1日、4月1日、7月1日、または10月1日のいずれかです。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfQuarter(value)
```

**引数**

* `value` — 四半期の初日に切り捨てる対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

指定した日付または日時に対する四半期の初日となる日付を返します。[`Date`](/sql-reference/data-types/date)

**例**

**四半期の初日への切り捨て**

```sql title=Query
SELECT toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-01 │
└─────────────────────────────────────────────────────┘
```

## toStartOfSecond \{#toStartOfSecond\}

導入バージョン: v20.5

日時を秒単位に切り捨てます。

**構文**

```sql
toStartOfSecond(datetime[, timezone])
```

**引数**

* `datetime` — サブ秒を切り捨てる対象の日時。[`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。返される値に適用するタイムゾーン。指定されていない場合、関数は `value` パラメータのタイムゾーンを使用します。[`String`](/sql-reference/data-types/string)

**戻り値**

サブ秒を切り捨てた入力値を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**タイムゾーンを指定しないクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64);
```

```response title=Response
┌───toStartOfSecond(dt64)─┐
│ 2020-01-01 10:20:30.000 │
└─────────────────────────┘
```

**タイムゾーン指定のクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfSecond(dt64, 'Asia/Istanbul')─┐
│                2020-01-01 13:20:30.000 │
└────────────────────────────────────────┘
```

## toStartOfTenMinutes \{#toStartOfTenMinutes\}

導入バージョン: v20.1

日時を、その時刻を含む10分単位の区切りの開始時刻に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfTenMinutes(datetime)
```

**引数**

* `datetime` — 時刻付きの日付。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

最も近い 10 分単位の区切りの開始時刻に丸めた時刻付き日付を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**例**

```sql title=Query
SELECT
    toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:10:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```

## toStartOfWeek \{#toStartOfWeek\}

導入バージョン: v20.1

日付、または日時を直前（同日を含む）の日曜日または月曜日に切り捨てます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfWeek(datetime[, mode[, timezone]])
```

**引数**

* `datetime` — 変換対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `mode` — `toWeek()` 関数で説明されているとおり、週の開始曜日を決定します。デフォルトは `0`。[`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — 変換に使用するタイムゾーン。指定しない場合、サーバーのタイムゾーンが使用されます。[`String`](/sql-reference/data-types/string)

**戻り値**

指定されたモードに応じて、指定した日付と同日またはそれ以前で最も近い日曜日または月曜日の日付を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**直近の日曜日または月曜日への切り捨て**

```sql title=Query
SELECT
        toStartOfWeek(toDateTime('2023-04-21 10:20:30')), /* a Friday */
        toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* a Friday */
        toStartOfWeek(toDate('2023-04-24')), /* a Monday */
        toStartOfWeek(toDate('2023-04-24'), 1) /* a Monday */
    FORMAT Vertical
```

```response title=Response
Row 1:
    ──────
    toStartOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-17
    toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-17
    toStartOfWeek(toDate('2023-04-24')):                   2023-04-24
    toStartOfWeek(toDate('2023-04-24'), 1):                2023-04-24
```

## toStartOfYear \{#toStartOfYear\}

導入バージョン: v1.1

日付または日時を、その年の最初の日に切り捨てます。結果を `Date` オブジェクトとして返します。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions) を設定することで変更できます。
:::

**構文**

```sql
toStartOfYear(value)
```

**引数**

* `value` — 切り捨て対象の日付または日付と時刻。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

指定された日付/日時に対応する年の最初の日を返します。戻り値の型は [`Date`](/sql-reference/data-types/date) です。

**例**

**年の最初の日に切り捨て**

```sql title=Query
SELECT toStartOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                       2023-01-01 │
└──────────────────────────────────────────────────┘
```

## toTimeWithFixedDate \{#toTimeWithFixedDate\}

導入バージョン: v1.1

日付または日時から時刻部分を抽出します。
返される結果は固定された基準時刻（現在は `1970-01-02`）からのオフセットですが、
この基準時刻の正確な値は実装上の詳細であり、将来変更される可能性があります。

したがって、`toTime` を単体で使用すべきではありません。
この関数の主な目的は、2 つの日付または日時同士の時刻の差分を計算することです。例えば、`toTime(dt1) - toTime(dt2)` のように使用します。

**構文**

```sql
toTime(date[, timezone])
```

**引数**

* `date` — 時刻に変換する日付。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。返される値のタイムゾーン。[`String`](/sql-reference/data-types/string)

**返り値**

日付または日時から、固定された基準時点（現在は 1970-01-02）へのオフセットとしての時間成分を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**2 つの日付の時間差を計算する**

```sql title=Query
SELECT toTime('2025-06-15 12:00:00'::DateTime) - toTime('2024-05-10 11:00:00'::DateTime) AS result, toTypeName(result)
```

```response title=Response
┌─result─┬─toTypeName(result)─┐
│   3600 │ Int32              │
└────────┴────────────────────┘
```

## toTimezone \{#toTimezone\}

導入バージョン: v1.1

`DateTime` または `DateTime64` を指定したタイムゾーンに変換します。
データの内部値（UNIX 秒）は変更されません。
変更されるのは値のタイムゾーン属性と値の文字列表現のみです。

**構文**

```sql
toTimeZone(datetime, timezone)
```

**別名**: `toTimeZone`

**引数**

* `date` — 変換する値。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 変換先のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

入力と同じタイムスタンプを、指定したタイムゾーンを付加して返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT toDateTime('2019-01-01 00:00:00', 'UTC') AS time_utc,
toTypeName(time_utc) AS type_utc,
toInt32(time_utc) AS int32utc,
toTimeZone(time_utc, 'Asia/Yekaterinburg') AS time_yekat,
toTypeName(time_yekat) AS type_yekat,
toInt32(time_yekat) AS int32yekat,
toTimeZone(time_utc, 'US/Samoa') AS time_samoa,
toTypeName(time_samoa) AS type_samoa,
toInt32(time_samoa) AS int32samoa
FORMAT Vertical;
```

```response title=Response
Row 1:
──────
time_utc:   2019-01-01 00:00:00
type_utc:   DateTime('UTC')
int32utc:   1546300800
time_yekat: 2019-01-01 05:00:00
type_yekat: DateTime('Asia/Yekaterinburg')
int32yekat: 1546300800
time_samoa: 2018-12-31 13:00:00
type_samoa: DateTime('US/Samoa')
int32samoa: 1546300800
```

## toUTCTimestamp \{#toUTCTimestamp\}

導入バージョン: v23.8

特定のタイムゾーンに属する日付（`Date`）または日時（時刻付き `DateTime`）を、UTC タイムゾーンのタイムスタンプに変換します。この関数は主に Apache Spark や類似のフレームワークとの互換性のために提供されています。

**構文**

```sql
toUTCTimestamp(datetime, time_zone)
```

**別名**: `to_utc_timestamp`

**引数**

* `datetime` — 日付または日時型の定数値、もしくはそのような値を返す式。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — タイムゾーンを表す String型の定数値、もしくはそのような値を返す式。[`String`](/sql-reference/data-types/string)

**返される値**

UTC タイムゾーンでの日付または日時を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**使用例**

**タイムゾーンを UTC に変換する**

```sql title=Query
SELECT toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')
```

```response title=Response
┌─toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')─┐
│                                     2023-03-15 16:00:00 │
└─────────────────────────────────────────────────────────┘
```

## toUnixTimestamp \{#toUnixTimestamp\}

導入バージョン: v1.1

`String`、`Date`、`DateTime` を Unix タイムスタンプ（`1970-01-01 00:00:00 UTC` からの経過秒数）を表す `UInt32` に変換します。

**構文**

```sql
toUnixTimestamp(date[, timezone])
```

**引数**

* `date` — 変換する値。[`Date`](/sql-reference/data-types/date)、[`Date32`](/sql-reference/data-types/date32)、[`DateTime`](/sql-reference/data-types/datetime)、[`DateTime64`](/sql-reference/data-types/datetime64)、[`String`](/sql-reference/data-types/string) のいずれか。
* `timezone` — オプション。変換に使用するタイムゾーンです。指定しない場合はサーバーのタイムゾーンが使用されます。[`String`](/sql-reference/data-types/string)

**返される値**

Unix タイムスタンプを返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
SELECT
'2017-11-05 08:07:47' AS dt_str,
toUnixTimestamp(dt_str) AS from_str,
toUnixTimestamp(dt_str, 'Asia/Tokyo') AS from_str_tokyo,
toUnixTimestamp(toDateTime(dt_str)) AS from_datetime,
toUnixTimestamp(toDateTime64(dt_str, 0)) AS from_datetime64,
toUnixTimestamp(toDate(dt_str)) AS from_date,
toUnixTimestamp(toDate32(dt_str)) AS from_date32
FORMAT Vertical;
```

```response title=Response
Row 1:
──────
dt_str:          2017-11-05 08:07:47
from_str:        1509869267
from_str_tokyo:  1509836867
from_datetime:   1509869267
from_datetime64: 1509869267
from_date:       1509840000
from_date32:     1509840000
```

## toWeek \{#toWeek\}

導入バージョン: v20.1

この関数は、`date` または `datetime` に対する週番号を返します。`toWeek()` の 2 引数形式では、週の開始曜日を日曜日または月曜日のどちらにするか、および戻り値の範囲を `0`～`53` にするか `1`～`53` にするかを指定できます。

[`toISOWeek()`](#toWeek) は互換性のための関数であり、`toWeek(date,3)` と等価です。

次の表は、`mode` 引数がどのように動作するかを示します。

| Mode | First day of week | Range | Week 1 is the first week ... |
| ---- | ----------------- | ----- | ---------------------------- |
| 0    | Sunday            | 0-53  | この年に日曜日を含む週                  |
| 1    | Monday            | 0-53  | この年に 4 日以上を含む週               |
| 2    | Sunday            | 1-53  | この年に日曜日を含む週                  |
| 3    | Monday            | 1-53  | この年に 4 日以上を含む週               |
| 4    | Sunday            | 0-53  | この年に 4 日以上を含む週               |
| 5    | Monday            | 0-53  | この年に月曜日を含む週                  |
| 6    | Sunday            | 1-53  | この年に 4 日以上を含む週               |
| 7    | Monday            | 1-53  | この年に月曜日を含む週                  |
| 8    | Sunday            | 1-53  | 1 月 1 日を含む週                  |
| 9    | Monday            | 1-53  | 1 月 1 日を含む週                  |

意味が「この年に 4 日以上を含む週」である `mode` 値では、週番号は ISO 8601:1988 に従って付番されます:

* 1 月 1 日を含む週が、新しい年側の日付を 4 日以上含んでいる場合、その週が第 1 週です。
* それ以外の場合、その週は前年の最終週となり、その次の週が第 1 週です。

意味が「1 月 1 日を含む週」である `mode` 値では、1 月 1 日を含む週が第 1 週になります。
その週が新しい年側の日付を何日含んでいるかは問いません。1 日だけであってもかまいません。
つまり、12 月の最終週が翌年の 1 月 1 日を含んでいる場合、その週は翌年の第 1 週となります。

最初の引数は、[`parseDateTime64BestEffort()`](type-conversion-functions.md#parseDateTime64BestEffort) がサポートする形式の [`String`](../data-types/string.md) で指定することもできます。文字列引数のサポートは、特定のサードパーティ製ツールが期待する MySQL との互換性のためにのみ存在します。将来的に、文字列引数のサポートは新しい MySQL 互換性設定に依存するようになる可能性があり、また文字列のパースは一般的に遅いため、使用しないことを推奨します。

**構文**

```sql
toWeek(datetime[, mode[, time_zone]])
```

**エイリアス**: `week`

**引数**

* `datetime` — 週番号を取得する対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)
* `mode` — 任意。`0` から `9` のモード値で、週の開始曜日と週番号の範囲を決定します。デフォルトは `0`。
* `time_zone` — 任意。タイムゾーン。[`String`](/sql-reference/data-types/string)

**戻り値**

指定したモードに従った週番号を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**異なるモードで週番号を取得する**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toWeek(date) AS week0, toWeek(date,1) AS week1, toWeek(date,9) AS week9
```

```response title=Response
┌───────date─┬─week0─┬─week1─┬─week9─┐
│ 2016-12-27 │    52 │    52 │     1 │
└────────────┴───────┴───────┴───────┘
```

## toYYYYMM \{#toYYYYMM\}

導入バージョン: v1.1

日付または日時を、年と月の番号 (YYYY * 100 + MM) を表す `UInt32` 型の数値に変換します。
2 つ目の省略可能なタイムゾーン引数を指定できます。指定する場合、タイムゾーンは文字列定数でなければなりません。

この関数は `YYYYMMDDToDate()` 関数の逆関数です。

**構文**

```sql
toYYYYMM(datetime[, timezone])
```

**引数**

* `datetime` — 変換対象の日付または日時の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。変換に使用するタイムゾーン。指定する場合、タイムゾーンは文字列リテラルでなければなりません。[`String`](/sql-reference/data-types/string)

**戻り値**

年と月 (YYYY * 100 + MM) を表す UInt32 型の数値を返します。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**現在の日付を YYYYMM 形式に変換**

```sql title=Query
SELECT toYYYYMM(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMM(now(), 'US/Eastern')─┐
│                        202303 │
└───────────────────────────────┘
```

## toYYYYMMDD \{#toYYYYMMDD\}

導入バージョン: v1.1

日付、または時刻付きの日付を、年・月・日を含む `UInt32` 型の数値（YYYY * 10000 + MM * 100 + DD）に変換します。第2引数としてタイムゾーンをオプションで受け取ります。指定する場合、タイムゾーンは文字列定数である必要があります。

**構文**

```sql
toYYYYMMDD(datetime[, timezone])
```

**引数**

* `datetime` — 変換対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。変換に使用するタイムゾーン。指定する場合は、文字列定数である必要があります。[`String`](/sql-reference/data-types/string)

**戻り値**

年・月・日を含む `UInt32` 型の値を返します (YYYY * 10000 + MM * 100 + DD)。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**現在の日付を YYYYMMDD 形式に変換する**

```sql title=Query
SELECT toYYYYMMDD(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDD(now(), 'US/Eastern')─┐
│                        20230302 │
└─────────────────────────────────┘
```

## toYYYYMMDDhhmmss \{#toYYYYMMDDhhmmss\}

導入バージョン: v1.1

日付または日時を、年・月・日・時・分・秒を含む `UInt64` 型の数値（YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss）に変換します。
第 2 引数としてオプションのタイムゾーン引数を受け取れます。指定する場合、タイムゾーンは文字列定数である必要があります。

**構文**

```sql
toYYYYMMDDhhmmss(datetime[, timezone])
```

**引数**

* `datetime` — 変換対象の日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — 省略可能。変換に使用するタイムゾーン。指定する場合、タイムゾーンは文字列リテラルでなければなりません。[`String`](/sql-reference/data-types/string)

**戻り値**

年、月、日、時、分、秒を含む `UInt64` 型の数値を返します (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss)。[`UInt64`](/sql-reference/data-types/int-uint)

**使用例**

**現在の日付と時刻を YYYYMMDDhhmmss 形式に変換する**

```sql title=Query
SELECT toYYYYMMDDhhmmss(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDDhhmmss(now(), 'US/Eastern')─┐
│                        20230302112209 │
└───────────────────────────────────────┘
```

## toYear \{#toYear\}

導入バージョン: v1.1

`Date` または `DateTime` 型の値から西暦の年を返します。

**構文**

```sql
toYear(datetime)
```

**エイリアス**: `YEAR`

**引数**

* `datetime` — 年を取得する対象の日付または日時の値。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

指定された Date または DateTime の年を返します。型は [`UInt16`](/sql-reference/data-types/int-uint) です。

**例**

**使用例**

```sql title=Query
SELECT toYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                     2023  │
└───────────────────────────────────────────┘
```

## toYearNumSinceEpoch \{#toYearNumSinceEpoch\}

導入バージョン: v25.3

1970 年からの経過年数を返します。

**構文**

```sql
toYearNumSinceEpoch(date)
```

**引数**

* `date` — 変換する日付または日時の値。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返り値**

正の整数値

**使用例**

**例**

```sql title=Query
SELECT toYearNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
54
```

## toYearWeek \{#toYearWeek\}

導入バージョン: v20.1

日付に対する年と週番号を返します。年の最初および最後の週については、結果に含まれる年が、引数として渡された日付の年と異なる場合があります。

`mode` 引数は、[`toWeek()`](/sql-reference/functions/date-time-functions#toWeek) の `mode` 引数と同様に動作します。

警告: `toYearWeek()` が返す週番号は、`toWeek()` が返す値と異なる場合があります。`toWeek()` は常に与えられた年のコンテキストで週番号を返し、`toWeek()` が `0` を返す場合、`toYearWeek()` は前の年の最終週に対応する値を返します。下記の例にある `prev_yearWeek` を参照してください。

最初の引数は、[`parseDateTime64BestEffort()`](type-conversion-functions.md#parseDateTime64BestEffort) でサポートされている形式の [`String`](../data-types/string.md) として指定することもできます。文字列引数のサポートは、一部のサードパーティーツールが想定している MySQL との互換性のためだけに存在します。将来的には、新しい MySQL 互換性の `SETTING` に依存するように変更される可能性があること、また一般に文字列のパースは遅いことから、使用しないことを推奨します。

**構文**

```sql
toYearWeek(datetime[, mode[, timezone]])
```

**エイリアス**: `yearweek`

**引数**

* `datetime` — 年と週番号を取得する対象の日付、または日時。[`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)
* `mode` — 省略可能。`0` から `9` のモード値で、週の開始曜日と週番号の範囲を決定する。デフォルトは `0`。
* `timezone` — 省略可能。タイムゾーン。[`String`](/sql-reference/data-types/string)

**戻り値**

年と週番号を結合した整数値を返す。[`UInt32`](/sql-reference/data-types/int-uint)

**例**

**異なる mode での year-week の組み合わせを取得する**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toYearWeek(date) AS yearWeek0, toYearWeek(date,1) AS yearWeek1, toYearWeek(date,9) AS yearWeek9, toYearWeek(toDate('2022-01-01')) AS prev_yearWeek
```

```response title=Response
┌───────date─┬─yearWeek0─┬─yearWeek1─┬─yearWeek9─┬─prev_yearWeek─┐
│ 2016-12-27 │    201652 │    201652 │    201701 │        202152 │
└────────────┴───────────┴───────────┴───────────┴───────────────┘
```

## today \{#today\}

導入バージョン: v1.1

クエリ解析時点での現在の日付を返します。`toDate(now())` と同じです。

**構文**

```sql
today()
```

**別名**: `curdate`, `current_date`

**引数**

* なし

**戻り値**

現在の日付 [`Date`](/sql-reference/data-types/date) を返します。

**例**

**使用例**

```sql title=Query
SELECT today() AS today, curdate() AS curdate, current_date() AS current_date FORMAT Pretty
```

```response title=Response
┏━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━┓
┃      today ┃    curdate ┃ current_date ┃
┡━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━┩
│ 2025-03-03 │ 2025-03-03 │   2025-03-03 │
└────────────┴────────────┴──────────────┘
```

## yesterday \{#yesterday\}

導入バージョン: v1.1

引数を取らず、クエリ解析処理のいずれかの時点における昨日の日付を返します。

**構文**

```sql
yesterday()
```

**引数**

* なし。

**戻り値**

昨日の日付を返します。[`Date`](/sql-reference/data-types/date)

**例**

**昨日の日付を取得する**

```sql title=Query
SELECT yesterday();
SELECT today() - 1;
```

```response title=Response
┌─yesterday()─┐
│  2025-06-09 │
└─────────────┘
┌─minus(today(), 1)─┐
│        2025-06-09 │
└───────────────────┘
```

{/*AUTOGENERATED_END*/ }
