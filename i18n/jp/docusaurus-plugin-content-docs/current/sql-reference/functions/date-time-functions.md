---
'description': '日付と時間を扱うための関数のDocumentation'
'sidebar_label': '日付と時間'
'slug': '/sql-reference/functions/date-time-functions'
'title': '日付と時間を扱うための関数'
'doc_type': 'reference'
---


# 日付と時刻の操作に関する関数

このセクションのほとんどの関数は、`Europe/Amsterdam` のようなオプションのタイムゾーン引数を受け入れます。この場合、タイムゾーンはローカル（デフォルト）のものではなく、指定されたものになります。

**例**

```sql
SELECT
    toDateTime('2016-06-15 23:00:00') AS time,
    toDate(time) AS date_local,
    toDate(time, 'Asia/Yekaterinburg') AS date_yekat,
    toString(time, 'US/Samoa') AS time_samoa
```

```text
┌────────────────time─┬─date_local─┬─date_yekat─┬─time_samoa──────────┐
│ 2016-06-15 23:00:00 │ 2016-06-15 │ 2016-06-16 │ 2016-06-15 09:00:00 │
└─────────────────────┴────────────┴────────────┴─────────────────────┘
```

<!-- 
以下のタグの内側の内容は、docフレームワークのビルド時に
system.functionsから生成されたドキュメントに置き換えられます。タグを変更したり削除したりしないでください。
参照: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->

<!--AUTOGENERATED_START-->
## UTCTimestamp {#UTCTimestamp}

導入バージョン: v22.11


クエリ分析の瞬間における現在の日付と時刻を返します。この関数は定数式です。

この関数は、`now('UTC')` と同じ結果を返します。MySQLのサポートのためにのみ追加されました。[`now`](#now) が推奨される使用法です。
    

**構文**

```sql
UTCTimestamp()
```

**引数**

- なし。
**返される値**

クエリ分析の瞬間における現在の日付と時刻を返します。 [`DateTime`](/sql-reference/data-types/datetime)

**例**

**現在のUTCタイムスタンプを取得**

```sql title=Query
SELECT UTCTimestamp()
```

```response title=Response
┌──────UTCTimestamp()─┐
│ 2024-05-28 08:32:09 │
└─────────────────────┘
```
## YYYYMMDDToDate {#YYYYMMDDToDate}

導入バージョン: v23.9


年、月、日を含む数字を `Date` に変換します。この関数は、関数 [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD) の逆です。
入力が有効な日付値をエンコードしていない場合、出力は未定義です。
    

**構文**

```sql
YYYYMMDDToDate(YYYYMMDD)
```

**引数**

- `YYYYMMDD` — 年、月、日を含む数字。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)


**返される値**

提供された引数から `Date` 値を返します。 [`Date`](/sql-reference/data-types/date)

**例**

**例**

```sql title=Query
SELECT YYYYMMDDToDate(20230911);
```

```response title=Response
┌─toYYYYMMDD(20230911)─┐
│           2023-09-11 │
└──────────────────────┘
```
## YYYYMMDDToDate32 {#YYYYMMDDToDate32}

導入バージョン: v23.9


年、月、日を含む数字を `Date32` に変換します。この関数は、関数 [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD) の逆です。
入力が有効な `Date32` 値をエンコードしていない場合、出力は未定義です。
    

**構文**

```sql
YYYYMMDDToDate32(YYYYMMDD)
```

**引数**

- `YYYYMMDD` — 年、月、日を含む数字。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)


**返される値**

提供された引数から `Date32` 値を返します。 [`Date32`](/sql-reference/data-types/date32)

**例**

**例**

```sql title=Query
SELECT YYYYMMDDToDate32(20000507);
```

```response title=Response
┌─YYYYMMDDToDate32(20000507)─┐
│                 2000-05-07 │
└────────────────────────────┘
```
## YYYYMMDDhhmmssToDateTime {#YYYYMMDDhhmmssToDateTime}

導入バージョン: v23.9


年、月、日、時、分、秒を含む数字を `DateTime` に変換します。この関数は、関数 [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss) の逆です。
入力が有効な `DateTime` 値をエンコードしていない場合、出力は未定義です。
    

**構文**

```sql
YYYYMMDDhhmmssToDateTime(YYYYMMDDhhmmss[, timezone])
```

**引数**

- `YYYYMMDDhhmmss` — 年、月、日、時、分、秒を含む数字。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `timezone` — タイムゾーン名。 [`String`](/sql-reference/data-types/string)


**返される値**

提供された引数から `DateTime` 値を返します。 [`DateTime`](/sql-reference/data-types/datetime)

**例**

**例**

```sql title=Query
SELECT YYYYMMDDToDateTime(20230911131415);
```

```response title=Response
┌──────YYYYMMDDhhmmssToDateTime(20230911131415)─┐
│                           2023-09-11 13:14:15 │
└───────────────────────────────────────────────┘
```
## YYYYMMDDhhmmssToDateTime64 {#YYYYMMDDhhmmssToDateTime64}

導入バージョン: v23.9


年、月、日、時、分、秒を含む数字を `DateTime64` に変換します。この関数は、関数 [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss) の逆です。
入力が有効な `DateTime64` 値をエンコードしていない場合、出力は未定義です。
    

**構文**

```sql
YYYYMMDDhhmmssToDateTime64(YYYYMMDDhhmmss[, precision[, timezone]])
```

**引数**

- `YYYYMMDDhhmmss` — 年、月、日、時、分、秒を含む数字。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `precision` — 小数部分の精度 (0-9)。 [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — タイムゾーン名。 [`String`](/sql-reference/data-types/string)


**返される値**

提供された引数から `DateTime64` 値を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**例**

```sql title=Query
SELECT YYYYMMDDhhmmssToDateTime64(20230911131415, 3, 'Asia/Istanbul');
```

```response title=Response
┌─YYYYMMDDhhmm⋯/Istanbul')─┐
│  2023-09-11 13:14:15.000 │
└──────────────────────────┘
```
## addDate {#addDate}

導入バージョン: v23.9


提供された日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に時間間隔を加えます。
加算の結果がデータ型の境界の外にある値になると、結果は未定義です。
    

**構文**

```sql
addDate(datetime, interval)
```

**引数**

- `datetime` — `interval` を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `interval` — 加算する間隔。 [`Interval`](/sql-reference/data-types/int-uint)


**返される値**

`interval` を `datetime` に加算した結果の日付または時間付きの日付を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**日付に間隔を追加**

```sql title=Query
SELECT addDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─addDate(toDa⋯valYear(3))─┐
│               2021-01-01 │
└──────────────────────────┘
```
## addDays {#addDays}

導入バージョン: v1.1


日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に指定された日数を加えます。
    

**構文**

```sql
addDays(datetime, num)
```

**引数**

- `datetime` — 指定された日数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する日数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 日を加算した結果を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに日数を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addDays(date, 5) AS add_days_with_date,
    addDays(date_time, 5) AS add_days_with_date_time,
    addDays(date_time_string, 5) AS add_days_with_date_time_string
```

```response title=Response
┌─add_days_with_date─┬─add_days_with_date_time─┬─add_days_with_date_time_string─┐
│         2024-01-06 │     2024-01-06 00:00:00 │        2024-01-06 00:00:00.000 │
└────────────────────┴─────────────────────────┴────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─plus(CAST('1⋯valDay(10))─┐
│               1998-06-26 │
└──────────────────────────┘
```
## addHours {#addHours}

導入バージョン: v1.1


日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に指定された時間数を加えます。
    

**構文**

```sql
addHours(datetime, num)
```

**引数**

- `datetime` — 指定された時間数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する時間数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 時間を加算した結果を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに時間を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addHours(date, 12) AS add_hours_with_date,
    addHours(date_time, 12) AS add_hours_with_date_time,
    addHours(date_time_string, 12) AS add_hours_with_date_time_string
```

```response title=Response
┌─add_hours_with_date─┬─add_hours_with_date_time─┬─add_hours_with_date_time_string─┐
│ 2024-01-01 12:00:00 │      2024-01-01 12:00:00 │         2024-01-01 12:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─plus(CAST('1⋯alHour(10))─┐
│      1998-06-16 10:00:00 │
└──────────────────────────┘
```
## addInterval {#addInterval}

導入バージョン: v22.11


別の間隔または間隔のタプルに間隔を加算します。

:::note
同じ型の間隔は単一の間隔に結合されます。たとえば、`toIntervalDay(1)` と `toIntervalDay(2)` が渡された場合、結果は `(3)` になります。
:::
    

**構文**

```sql
addInterval(interval_1, interval_2)
```

**引数**

- `interval_1` — 第一の間隔または間隔のタプル。 [`Interval`](/sql-reference/data-types/int-uint) または [`Tuple(Interval)`](/sql-reference/data-types/tuple)
- `interval_2` — 加算する第二の間隔。 [`Interval`](/sql-reference/data-types/int-uint)


**返される値**

間隔のタプルを返します。 [`Tuple(Interval)`](/sql-reference/data-types/tuple)

**例**

**間隔を追加**

```sql title=Query
SELECT addInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT addInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT addInterval(INTERVAL 2 DAY, INTERVAL 1 DAY)
```

```response title=Response
┌─addInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,1)                                             │
└───────────────────────────────────────────────────┘
┌─addInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,1)                                                                │
└────────────────────────────────────────────────────────────────────────┘
┌─addInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (3)                                             │
└─────────────────────────────────────────────────┘
```
## addMicroseconds {#addMicroseconds}

導入バージョン: v22.6


指定されたマイクロ秒数を時間付きの日付または文字列でエンコードされた時間付きの日付に加えます。
    

**構文**

```sql
addMicroseconds(datetime, num)
```

**引数**

- `datetime` — 指定されたマイクロ秒数を加算する時間付きの日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算するマイクロ秒数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`date_time` に `num` マイクロ秒を加算した結果を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日時タイプにマイクロ秒を追加**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMicroseconds(date_time, 1000000) AS add_microseconds_with_date_time,
    addMicroseconds(date_time_string, 1000000) AS add_microseconds_with_date_time_string
```

```response title=Response
┌─add_microseconds_with_date_time─┬─add_microseconds_with_date_time_string─┐
│      2024-01-01 00:00:01.000000 │             2024-01-01 00:00:01.000000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─plus(CAST('19⋯osecond(10))─┐
│ 1998-06-16 00:00:00.000010 │
└────────────────────────────┘
```
## addMilliseconds {#addMilliseconds}

導入バージョン: v22.6


指定されたミリ秒数を時間付きの日付または文字列でエンコードされた時間付きの日付に加えます。
    

**構文**

```sql
addMilliseconds(datetime, num)
```

**引数**

- `datetime` — 指定されたミリ秒数を加算する時間付きの日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算するミリ秒数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` ミリ秒を加算した結果を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日時タイプにミリ秒を追加**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMilliseconds(date_time, 1000) AS add_milliseconds_with_date_time,
    addMilliseconds(date_time_string, 1000) AS add_milliseconds_with_date_time_string
```

```response title=Response
┌─add_milliseconds_with_date_time─┬─add_milliseconds_with_date_time_string─┐
│         2024-01-01 00:00:01.000 │                2024-01-01 00:00:01.000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─plus(CAST('1⋯second(10))─┐
│  1998-06-16 00:00:00.010 │
└──────────────────────────┘
```
## addMinutes {#addMinutes}

導入バージョン: v1.1


指定された分数を日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に加えます。
    

**構文**

```sql
addMinutes(datetime, num)
```

**引数**

- `datetime` — 指定された分数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する分数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 分を加算した結果を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに分を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMinutes(date, 20) AS add_minutes_with_date,
    addMinutes(date_time, 20) AS add_minutes_with_date_time,
    addMinutes(date_time_string, 20) AS add_minutes_with_date_time_string
```

```response title=Response
┌─add_minutes_with_date─┬─add_minutes_with_date_time─┬─add_minutes_with_date_time_string─┐
│   2024-01-01 00:20:00 │        2024-01-01 00:20:00 │           2024-01-01 00:20:00.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─plus(CAST('1⋯Minute(10))─┐
│      1998-06-16 00:10:00 │
└──────────────────────────┘
```
## addMonths {#addMonths}

導入バージョン: v1.1


指定された月数を日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に加えます。
    

**構文**

```sql
addMonths(datetime, num)
```

**引数**

- `datetime` — 指定された月数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する月数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 月を加算した結果を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに月を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMonths(date, 6) AS add_months_with_date,
    addMonths(date_time, 6) AS add_months_with_date_time,
    addMonths(date_time_string, 6) AS add_months_with_date_time_string
```

```response title=Response
┌─add_months_with_date─┬─add_months_with_date_time─┬─add_months_with_date_time_string─┐
│           2024-07-01 │       2024-07-01 00:00:00 │          2024-07-01 00:00:00.000 │
└──────────────────────┴───────────────────────────┴──────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─plus(CAST('1⋯lMonth(10))─┐
│               1999-04-16 │
└──────────────────────────┘
```
## addNanoseconds {#addNanoseconds}

導入バージョン: v22.6


指定されたナノ秒数を時間付きの日付または文字列でエンコードされた時間付きの日付に加えます。
    

**構文**

```sql
addNanoseconds(datetime, num)
```

**引数**

- `datetime` — 指定されたナノ秒数を加算する時間付きの日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算するナノ秒数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` ナノ秒を加算した結果を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日時タイプにナノ秒を追加**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addNanoseconds(date_time, 1000) AS add_nanoseconds_with_date_time,
    addNanoseconds(date_time_string, 1000) AS add_nanoseconds_with_date_time_string
```

```response title=Response
┌─add_nanoseconds_with_date_time─┬─add_nanoseconds_with_date_time_string─┐
│  2024-01-01 00:00:00.000001000 │         2024-01-01 00:00:00.000001000 │
└────────────────────────────────┴───────────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 1000 nanosecond)
```

```response title=Response
┌─plus(CAST('199⋯osecond(1000))─┐
│ 1998-06-16 00:00:00.000001000 │
└───────────────────────────────┘
```
## addQuarters {#addQuarters}

導入バージョン: v20.1


指定された四半期数を日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に加えます。
    

**構文**

```sql
addQuarters(datetime, num)
```

**引数**

- `datetime` — 指定された四半期数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する四半期数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 四半期を加算した結果を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに四半期を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addQuarters(date, 1) AS add_quarters_with_date,
    addQuarters(date_time, 1) AS add_quarters_with_date_time,
    addQuarters(date_time_string, 1) AS add_quarters_with_date_time_string
```

```response title=Response
┌─add_quarters_with_date─┬─add_quarters_with_date_time─┬─add_quarters_with_date_time_string─┐
│             2024-04-01 │         2024-04-01 00:00:00 │            2024-04-01 00:00:00.000 │
└────────────────────────┴─────────────────────────────┴────────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─plus(CAST('1⋯uarter(10))─┐
│               2000-12-16 │
└──────────────────────────┘
```
## addSeconds {#addSeconds}

導入バージョン: v1.1


指定された秒数を日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に加えます。
    

**構文**

```sql
addSeconds(datetime, num)
```

**引数**

- `datetime` — 指定された秒数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する秒数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 秒を加算した結果を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに秒を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addSeconds(date, 30) AS add_seconds_with_date,
    addSeconds(date_time, 30) AS add_seconds_with_date_time,
    addSeconds(date_time_string, 30) AS add_seconds_with_date_time_string
```

```response title=Response
┌─add_seconds_with_date─┬─add_seconds_with_date_time─┬─add_seconds_with_date_time_string─┐
│   2024-01-01 00:00:30 │        2024-01-01 00:00:30 │           2024-01-01 00:00:30.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─dateAdd('1998-06-16'::Date, INTERVAL 10 second)─┐
│                             1998-06-16 00:00:10 │
└─────────────────────────────────────────────────┘
```
## addTupleOfIntervals {#addTupleOfIntervals}

導入バージョン: v22.11


間隔のタプルを日付または時間付きの日付に順次加算します。
    

**構文**

```sql
addTupleOfIntervals(datetime, intervals)
```

**引数**

- `datetime` — 加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `intervals` — `datetime` に加算する間隔のタプル。 [`Tuple(Interval)`](/sql-reference/data-types/tuple)


**返される値**

加算された `intervals` を含む `date` を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**日付に間隔のタプルを追加**

```sql title=Query
WITH toDate('2018-01-01') AS date
SELECT addTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 MONTH, INTERVAL 1 YEAR))
```

```response title=Response
┌─addTupleOfIntervals(date, (toIntervalDay(1), toIntervalMonth(1), toIntervalYear(1)))─┐
│                                                                           2019-02-02 │
└──────────────────────────────────────────────────────────────────────────────────────┘
```
## addWeeks {#addWeeks}

導入バージョン: v1.1


指定された週数を日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に加えます。
    

**構文**

```sql
addWeeks(datetime, num)
```

**引数**

- `datetime` — 指定された週数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する週数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 週間を加算した結果を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに週間を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addWeeks(date, 5) AS add_weeks_with_date,
    addWeeks(date_time, 5) AS add_weeks_with_date_time,
    addWeeks(date_time_string, 5) AS add_weeks_with_date_time_string
```

```response title=Response
┌─add_weeks_with_date─┬─add_weeks_with_date_time─┬─add_weeks_with_date_time_string─┐
│          2024-02-05 │      2024-02-05 00:00:00 │         2024-02-05 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─plus(CAST('1⋯alWeek(10))─┐
│               1998-08-25 │
└──────────────────────────┘
```
## addYears {#addYears}

導入バージョン: v1.1


指定された年数を日付、時間付きの日付、または文字列でエンコードされた日付または時間付きの日付に加えます。
    

**構文**

```sql
addYears(datetime, num)
```

**引数**

- `datetime` — 指定された年数を加算する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 加算する年数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

`datetime` に `num` 年を加算した結果を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプに年を追加**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addYears(date, 1) AS add_years_with_date,
    addYears(date_time, 1) AS add_years_with_date_time,
    addYears(date_time_string, 1) AS add_years_with_date_time_string
```

```response title=Response
┌─add_years_with_date─┬─add_years_with_date_time─┬─add_years_with_date_time_string─┐
│          2025-01-01 │      2025-01-01 00:00:00 │         2025-01-01 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─plus(CAST('1⋯alYear(10))─┐
│               2008-06-16 │
└──────────────────────────┘
```
## age {#age}

導入バージョン: v23.1


`startdate` と `enddate` の差の単位成分を返します。
差は1ナノ秒の精度で計算されます。

たとえば、2021-12-29 と 2022-01-01 の差は、日単位で3日、月単位で0ヶ月、年単位で0年です。

 age の代替として、関数 [`timeDiff`](#timeDiff) を参照してください。
    

**構文**

```sql
age('unit', startdate, enddate, [timezone])
```

**引数**

- `unit` — 結果の間隔のタイプ。

| 単位         | 可能な値                              |
|--------------|-------------------------------------|
| nanosecond   | `nanosecond`, `nanoseconds`, `ns`        |
| microsecond  | `microsecond`, `microseconds`, `us`, `u` |
| millisecond  | `millisecond`, `milliseconds`, `ms`      |
| second       | `second`, `seconds`, `ss`, `s`           |
| minute       | `minute`, `minutes`, `mi`, `n`           |
| hour         | `hour`, `hours`, `hh`, `h`               |
| day          | `day`, `days`, `dd`, `d`                 |
| week         | `week`, `weeks`, `wk`, `ww`              |
| month        | `month`, `months`, `mm`, `m`             |
| quarter      | `quarter`, `quarters`, `qq`, `q`         |
| year         | `year`, `years`, `yyyy`, `yy`            |
 - `startdate` — 引いてくる最初の時刻の値（被減算数）。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `enddate` — 引かれる第二の時刻の値（減算数）。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。タイムゾーン名。指定すると、`startdate` と `enddate` の両方に適用されます。指定しない場合は、`startdate` と `enddate` のタイムゾーンが使用されます。異なる場合、結果は不明確です。 [`String`](/sql-reference/data-types/string)


**返される値**

`enddate` と `startdate` の差を単位で表した値を返します。 [`Int32`](/sql-reference/data-types/int-uint)

**例**

**時間の単位で年齢を計算**

```sql title=Query
SELECT age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))
```

```response title=Response
┌─age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))─┐
│                                                                                24 │
└───────────────────────────────────────────────────────────────────────────────────┘
```

**異なる単位で歳を計算**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    age('day', s, e) AS day_age,
    age('month', s, e) AS month_age,
    age('year', s, e) AS year_age
```

```response title=Response
┌──────────e─┬──────────s─┬─day_age─┬─month_age─┬─year_age─┐
│ 2022-01-01 │ 2021-12-29 │       3 │         0 │        0 │
└────────────┴────────────┴─────────┴───────────┴──────────┘
```
## changeDay {#changeDay}

導入バージョン: v24.7

日付または日時の「日」の成分を変更します。

**構文**

```sql
changeDay(date_or_datetime, value)
```

**引数**

- `date_or_datetime` — 変更する値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — 新しい値。 [`(U)Int*`](/sql-reference/data-types/int-uint)


**返される値**

日付や日時の成分が変更されたのと同じ型の値を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeDay('2024-01-31'::DateTime, 15)
```

```response title=Response
2024-01-15 00:00:00
```
## changeHour {#changeHour}

導入バージョン: v24.7

日付または日時の「時」の成分を変更します。

**構文**

```sql
changeHour(date_or_datetime, value)
```

**引数**

- `date_or_datetime` — 変更する値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — 新しい値。 [`(U)Int*`](/sql-reference/data-types/int-uint)


**返される値**

日付や日時の成分が変更されたのと同じ型の値を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeHour('2024-01-01 12:00:00'::DateTime, 5)
```

```response title=Response
2024-01-01 05:00:00
```
## changeMinute {#changeMinute}

導入バージョン: v24.7

日付または日時の「分」の成分を変更します。

**構文**

```sql
changeMinute(date_or_datetime, value)
```

**引数**

- `date_or_datetime` — 変更する値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — 新しい値。 [`(U)Int*`](/sql-reference/data-types/int-uint)


**返される値**

日付や日時の成分が変更されたのと同じ型の値を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeMinute('2024-01-01 12:30:00'::DateTime, 45)
```

```response title=Response
2024-01-01 12:45:00
```
## changeMonth {#changeMonth}

導入バージョン: v24.7

日付または日時の「月」の成分を変更します。

**構文**

```sql
changeMonth(date_or_datetime, value)
```

**引数**

- `date_or_datetime` — 変更する値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — 新しい値。 [`(U)Int*`](/sql-reference/data-types/int-uint)


**返される値**

日付や日時の成分が変更されたのと同じ型の値を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeMonth('2024-01-01'::DateTime, 12)
```

```response title=Response
2024-12-01 00:00:00
```
## changeSecond {#changeSecond}

導入バージョン: v24.7

日付または日時の「秒」の成分を変更します。

**構文**

```sql
changeSecond(date_or_datetime, value)
```

**引数**

- `date_or_datetime` — 変更する値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — 新しい値。 [`(U)Int*`](/sql-reference/data-types/int-uint)


**返される値**

日付や日時の成分が変更されたのと同じ型の値を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeSecond('2024-01-01 12:30:45'::DateTime, 15)
```

```response title=Response
2024-01-01 12:30:15
```
## changeYear {#changeYear}

導入バージョン: v24.7

日付または日時の「年」の成分を変更します。

**構文**

```sql
changeYear(date_or_datetime, value)
```

**引数**

- `date_or_datetime` — 変更する値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — 新しい値。 [`(U)Int*`](/sql-reference/data-types/int-uint)


**返される値**

日付や日時の成分が変更されたのと同じ型の値を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**使用例**

```sql title=Query
SELECT changeYear('2024-01-01'::DateTime, 2023)
```

```response title=Response
2023-01-01 00:00:00
```
## dateName {#dateName}

導入バージョン: v21.7


指定された日付の特定の部分を返します。

可能な値:
- 'year'
- 'quarter'
- 'month'
- 'week'
- 'dayofyear'
- 'day'
- 'weekday'
- 'hour'
- 'minute'
- 'second'
    

**構文**

```sql
dateName(date_part, date[, timezone])
```

**引数**

- `date_part` — 抽出したい日付の部分。 [`String`](/sql-reference/data-types/string)
- `datetime` — 日付または時間付き日付の値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。タイムゾーン。 [`String`](/sql-reference/data-types/string)


**返される値**

指定された日付の部分を返します。 [`String`](/sql-reference/data-types/string)

**例**

**異なる日付の部分を抽出**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT
    dateName('year', date_value),
    dateName('month', date_value),
    dateName('day', date_value)
```

```response title=Response
┌─dateName('year', date_value)─┬─dateName('month', date_value)─┬─dateName('day', date_value)─┐
│ 2021                         │ April                         │ 14                          │
└──────────────────────────────┴───────────────────────────────┴─────────────────────────────┘
```
## dateTrunc {#dateTrunc}

導入バージョン: v20.8


日付と時刻の値を指定された日付の部分まで切り詰めます。
    

**構文**

```sql
dateTrunc(unit, datetime[, timezone])
```

**引数**

- `unit` — 
結果を切り詰める間隔のタイプ。`unit` 引数は大文字と小文字を区別しません。
| 単位         | 互換性                      |
|--------------|----------------------------|
| `nanosecond` | DateTime64とのみ互換性があります |
| `microsecond`| DateTime64とのみ互換性があります |
| `millisecond`| DateTime64とのみ互換性があります |
| `second`     |                            |
| `minute`     |                            |
| `hour`       |                            |
| `day`        |                            |
| `week`       |                            |
| `month`      |                            |
| `quarter`    |                            |
| `year`       |                            |
 [`String`](/sql-reference/data-types/string)
- `datetime` — 日付と時刻。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。返される日時のタイムゾーン名。指定しない場合、関数は `datetime` 引数のタイムゾーンを使用します。 [`String`](/sql-reference/data-types/string)


**返される値**

切り詰められた日付と時刻の値を返します。

| 単位引数               | `datetime` 引数                     | 返される値の型                                                                      |
|------------------------|-------------------------------------|-------------------------------------------------------------------------------------|
| 年、四半期、月、週    | `Date32` または `DateTime64` または `Date` または `DateTime` | [`Date32`](../data-types/date32.md) または [`Date`](../data-types/date.md)            |
| 日、時、分、秒        | `Date32`, `DateTime64`, `Date`, または `DateTime` | [`DateTime64`](../data-types/datetime64.md) または [`DateTime`](../data-types/datetime.md) |
| ミリ秒、マイクロ秒、   | すべて                               | [`DateTime64`](../data-types/datetime64.md)                                          |
| ナノ秒                 |                                     | スケールは3、6、または9                                                               |

**例**

**タイムゾーンなしで切り詰める**

```sql title=Query
SELECT now(), dateTrunc('hour', now());
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now())──┐
│ 2020-09-28 10:40:45 │       2020-09-28 10:00:00 │
└─────────────────────┴───────────────────────────┘
```

**指定されたタイムゾーンで切り詰める**

```sql title=Query
SELECT now(), dateTrunc('hour', now(), 'Asia/Istanbul');
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now(), 'Asia/Istanbul')──┐
│ 2020-09-28 10:46:26 │                        2020-09-28 13:00:00 │
└─────────────────────┴────────────────────────────────────────────┘
```
## formatDateTime {#formatDateTime}

Introduced in: v1.1


指定されたフォーマット文字列に従って、日付または日時をフォーマットします。`format`は定数式であるため、単一の結果カラムに対して複数のフォーマットを使用することはできません。

`formatDateTime`はMySQLのdatetimeフォーマットスタイルを使用しています。詳細は[mysql docs](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format)を参照してください。

この関数の逆の操作は[`parseDateTime`](/sql-reference/functions/type-conversion-functions#parsedatetime)です。

置換フィールドを使用することで、結果の文字列のパターンを定義できます。
下の表の例カラムは、`2018-01-02 22:33:44`のフォーマット結果を示しています。

**置換フィールド:**

| プレースホルダー | 説明 | 例 |
|-----------------|------|----|
| %a | 省略形の曜日名 (月〜日) | Mon |
| %b | 省略形の月名 (1月〜12月) | Jan |
| %c | 月を整数値で表したもの (01-12) | 01 |
| %C | 100で割った年を整数に切り捨てたもの (00-99) | 20 |
| %d | ゼロパディングされた日 (01-31) | 02 |
| %D | 短いMM/DD/YY形式の日付、%m/%d/%yと同等 | 01/02/18 |
| %e | スペースパディングされた日 (1-31) | 2 |
| %f | 小数秒 | 123456 |
| %F | 短いYYYY-MM-DD形式の日付、%Y-%m-%dと同等 | 2018-01-02 |
| %g | 2桁の年形式、ISO 8601に準拠 | 18 |
| %G | ISO週間番号のための4桁の年形式 | 2018 |
| %h | 12時間形式の時 (01-12) | 09 |
| %H | 24時間形式の時 (00-23) | 22 |
| %i | 分 (00-59) | 33 |
| %I | 12時間形式の時 (01-12) | 10 |
| %j | 年の通し日 (001-366) | 002 |
| %k | 24時間形式の時 (00-23) | 14 |
| %l | 12時間形式の時 (01-12) | 09 |
| %m | 月を整数値で表したもの (01-12) | 01 |
| %M | 完全な月名 (1月〜12月) | January |
| %n | 改行文字 | |
| %p | AMまたはPMの指定 | PM |
| %Q | 四半期 (1-4) | 1 |
| %r | 12時間形式のHH:MM AM/PM時間、%h:%i %pと同等 | 10:30 PM |
| %R | 24時間形式のHH:MM時間、%H:%iと同等 | 22:33 |
| %s | 秒 (00-59) | 44 |
| %S | 秒 (00-59) | 44 |
| %t | 水平タブ文字 | |
| %T | ISO 8601時間形式 (HH:MM:SS)、%H:%i:%Sと同等 | 22:33:44 |
| %u | ISO 8601曜日を1から7までの数値で表したもの | 2 |
| %V | ISO 8601週間番号 (01-53) | 01 |
| %w | 日曜日を0とする整数値の曜日 | 2 |
| %W | 完全な曜日名 (月曜日〜日曜日) | 月曜日 |
| %y | 年の最後の2桁 (00-99) | 18 |
| %Y | 年 | 2018 |
| %z | UTCからの時間オフセット (HHMM形式) | -0500 |
| %% | %記号 | % |

- ClickHouseのバージョンがv23.4より前では、`%f`はDate、Date32、またはDateTime（小数秒を持たない）または、精度が0のDateTime64の場合に単一のゼロ (0) を出力します。
- ClickHouseのバージョンがv25.1より前では、`%f`はDateTime64のスケールによって指定された桁数を出力し、固定の6桁ではありません。
- ClickHouseのバージョンがv23.4より前では、`%M`は完全な月名 (1月〜12月) の代わりに分 (00-59) を出力します。

**構文**

```sql
formatDateTime(datetime, format[, timezone])
```

**引数**

- `datetime` — フォーマットする日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — 置換フィールドを含むフォーマット文字列。[`String`](/sql-reference/data-types/string)
- `timezone` — オプション。フォーマットされた時間のためのタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

指定されたフォーマットに従った時間と日付の値を返します。[`String`](/sql-reference/data-types/string)

**例**

**年プレースホルダーで日付をフォーマット**

```sql title=Query
SELECT formatDateTime(toDate('2010-01-04'), '%g')
```

```response title=Response
┌─formatDateTime(toDate('2010-01-04'), '%g')─┐
│ 10                                         │
└────────────────────────────────────────────┘
```

**小数秒のあるDateTime64をフォーマット**

```sql title=Query
SELECT formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')
```

```response title=Response
┌─formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')─┐
│ 1234560                                                             │
└─────────────────────────────────────────────────────────────────────┘
```

**タイムゾーン指定でフォーマット**

```sql title=Query
SELECT
    now() AS ts,
    time_zone,
    formatDateTime(ts, '%T', time_zone) AS str_tz_time
FROM system.time_zones
WHERE time_zone LIKE 'Europe%'
LIMIT 10
```

```response title=Response
┌──────────────────ts─┬─time_zone─────────┬─str_tz_time─┐
│ 2023-09-08 19:13:40 │ Europe/Amsterdam  │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Andorra    │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Astrakhan  │ 23:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Athens     │ 22:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belfast    │ 20:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belgrade   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Berlin     │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bratislava │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Brussels   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bucharest  │ 22:13:40    │
└─────────────────────┴───────────────────┴─────────────┘
```
## formatDateTimeInJodaSyntax {#formatDateTimeInJodaSyntax}

Introduced in: v20.1


`formatDateTime`に似ていますが、Jodaスタイルでdatetimeをフォーマットします。詳細は[Joda Time documentation](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)を参照してください。

この関数の逆の操作は[`parseDateTimeInJodaSyntax`](/sql-reference/functions/type-conversion-functions#parsedatetimeinjodasyntax)です。

置換フィールドを使用することで、結果の文字列のパターンを定義できます。

**置換フィールド:**

| プレースホルダー | 説明 | 表現 | 例 |
|-----------------|------|------|----|
| G | 紀元 | テキスト | AD |
| C | 紀元の世紀 (>=0) | 数値 | 20 |
| Y | 紀元の年 (>=0) | 年 | 1996 |
| x | 週年 (未サポート) | 年 | 1996 |
| w | 週年の週 (未サポート) | 数値 | 27 |
| e | 曜日 | 数値 | 2 |
| E | 曜日 | テキスト | 火曜日; 火 |
| y | 年 | 年 | 1996 |
| D | 年の日 | 数値 | 189 |
| M | 年の月 | 月 | 7月; 7月; 07 |
| d | 月の日 | 数値 | 10 |
| a | 半日 | テキスト | PM |
| K | 半日の時 (0~11) | 数値 | 0 |
| h | 半日の時 (1~12) | 数値 | 12 |
| H | 日の時 (0~23) | 数値 | 0 |
| k | 日の時 (1~24) | 数値 | 24 |
| m | 時の分 | 数値 | 30 |
| s | 分の秒 | 数値 | 55 |
| S | 小数秒 | 数値 | 978 |
| z | タイムゾーン | テキスト | 東部標準時; EST |
| Z | タイムゾーンオフセット | ゾーン | -0800; -0812 |
| ' | テキストのエスケープ | デリミタ | |
| '' | シングルクォート | リテラル | ' |

**構文**

```sql
formatDateTimeInJodaSyntax(datetime, format[, timezone])
```

**引数**

- `datetime` — フォーマットする日付または日時。[`DateTime`](/sql-reference/data-types/datetime) または [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — Jodaスタイルの置換フィールドを持つフォーマット文字列。[`String`](/sql-reference/data-types/string)
- `timezone` — オプション。フォーマットされた時間のためのタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

指定されたフォーマットに従った時間と日付の値を返します。[`String`](/sql-reference/data-types/string)

**例**

**Joda構文を使用したdatetimeのフォーマット**

```sql title=Query
SELECT formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')
```

```response title=Response
┌─formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')─┐
│ 2010-01-04 12:34:56                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```
## fromDaysSinceYearZero {#fromDaysSinceYearZero}

Introduced in: v23.11


[1 January 0000](https://en.wikipedia.org/wiki/Year_zero)から経過した日数に基づいて、ISO 8601で定義された[プロレプティックグレゴリオ暦](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar)における対応する日付を返します。

計算はMySQLの`FROM_DAYS()`関数と同じです。[Date](../data-types/date.md)型の範囲内で表現できない場合、結果は未定義です。

**構文**

```sql
fromDaysSinceYearZero(days)
```

**引数**

- `days` — 年0から経過した日数。[`UInt32`](/sql-reference/data-types/int-uint)

**戻り値**

年0から経過した日数に対応する日付を返します。[`Date`](/sql-reference/data-types/date)

**例**

**年0からの経過日数を日付に変換**

```sql title=Query
SELECT
fromDaysSinceYearZero(739136) AS date1,
fromDaysSinceYearZero(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```
## fromDaysSinceYearZero32 {#fromDaysSinceYearZero32}

Introduced in: v23.11


[1 January 0000](https://en.wikipedia.org/wiki/Year_zero)から経過した日数に基づいて、ISO 8601で定義された[プロレプティックグレゴリオ暦](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar)における対応する日付を返します。
計算はMySQLの`FROM_DAYS()`関数と同じです。[`Date32`](../data-types/date32.md)型の範囲内で表現できない場合、結果は未定義です。

**構文**

```sql
fromDaysSinceYearZero32(days)
```

**引数**

- `days` — 年0から経過した日数。[`UInt32`](/sql-reference/data-types/int-uint)

**戻り値**

年0から経過した日数に対応する日付を返します。[`Date32`](/sql-reference/data-types/date32)

**例**

**年0からの経過日数を日付に変換**

```sql title=Query
SELECT
fromDaysSinceYearZero32(739136) AS date1,
fromDaysSinceYearZero32(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```
## fromModifiedJulianDay {#fromModifiedJulianDay}

Introduced in: v21.1


[修正ユリウス日](https://en.wikipedia.org/wiki/Julian_day#Variants)番号をテキスト形式の[プロレプティックグレゴリオ暦](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar)日付に変換します。この関数は、`-678941`から`2973483`までの日数をサポートします（0000-01-01および9999-12-31を表す）。日数がサポート範囲外の場合、例外をスローします。

**構文**

```sql
fromModifiedJulianDay(day)
```

**引数**

- `day` — 修正ユリウス日番号。[`(U)Int*`](/sql-reference/data-types/int-uint)

**戻り値**

テキスト形式の日付を返します。[`String`](/sql-reference/data-types/string)

**例**

**修正ユリウス日を日付に変換**

```sql title=Query
SELECT fromModifiedJulianDay(58849)
```

```response title=Response
┌─fromModifiedJulianDay(58849)─┐
│ 2020-01-01                   │
└──────────────────────────────┘
```
## fromModifiedJulianDayOrNull {#fromModifiedJulianDayOrNull}

Introduced in: v21.1


[`fromModifiedJulianDay()`](#fromModifiedJulianDay)と似ていますが、例外をスローするのではなく、`NULL`を返します。

**構文**

```sql
fromModifiedJulianDayOrNull(day)
```

**引数**

- `day` — 修正ユリウス日番号。[`(U)Int*`](/sql-reference/data-types/int-uint)

**戻り値**

有効な`day`引数に対してテキスト形式の日付を返しますが、そうでない場合は`null`を返します。[`Nullable(String)`](/sql-reference/data-types/nullable)

**例**

**Null処理付きで修正ユリウス日を日付に変換**

```sql title=Query
SELECT fromModifiedJulianDayOrNull(58849);
SELECT fromModifiedJulianDayOrNull(60000000); -- invalid argument, returns NULL
```

```response title=Response
┌─fromModified⋯Null(58849)─┐
│ 2020-01-01               │
└──────────────────────────┘
┌─fromModified⋯l(60000000)─┐
│ ᴺᵁᴸᴸ                     │
└──────────────────────────┘
```
## fromUTCTimestamp {#fromUTCTimestamp}

Introduced in: v22.1


UTCタイムゾーンから指定されたタイムゾーンの日時または日時値に変換します。この関数は主にApache Sparkや類似のフレームワークとの互換性のために含まれています。

**構文**

```sql
fromUTCTimestamp(datetime, time_zone)
```

**引数**

- `datetime` — 定数の日時または日時値または式。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — タイムゾーンを表す定数の文字列型値または式。[`String`](/sql-reference/data-types/string)

**戻り値**

指定されたタイムゾーンのDateTime/DateTime64を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**UTCタイムゾーンを指定されたタイムゾーンに変換**

```sql title=Query
SELECT fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00', 3), 'Asia/Shanghai')
```

```response title=Response
┌─fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00',3), 'Asia/Shanghai')─┐
│                                                 2023-03-16 18:00:00.000 │
└─────────────────────────────────────────────────────────────────────────┘
```
## fromUnixTimestamp {#fromUnixTimestamp}

Introduced in: v20.8


この関数はUnixタイムスタンプをカレンダー日付および日の時間に変換します。

以下の2つの方法で呼び出すことができます：

- 単一の[`Integer`](../data-types/int-uint.md)引数を指定された場合、[`DateTime`](../data-types/datetime.md)型の値を返します。すなわち、[`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#todatetime)のように動作します。
- 2つまたは3つの引数を指定し、最初の引数が[`Integer`](../data-types/int-uint.md)、[`Date`](../data-types/date.md)、[`Date32`](../data-types/date32.md)、[`DateTime`](../data-types/datetime.md)または[`DateTime64`](../data-types/datetime64.md)型で、2番目の引数が定数のフォーマット文字列、3番目の引数がオプションの定数タイムゾーン文字列の場合、[`String`](../data-types/string.md)型の値を返します。すなわち、[`formatDateTime`](#formatDateTime)のように動作します。この場合、[MySQLのdatetimeフォーマットスタイル](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format)が使用されます。

**構文**

```sql
fromUnixTimestamp(timestamp)
fromUnixTimestamp(timestamp[, format[, timezone]])
```

**引数**

- `timestamp` — Unixタイムスタンプまたは日時/日時値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — オプション。出力フォーマット用の定数フォーマット文字列。[`String`](/sql-reference/data-types/string)
- `timezone` — オプション。定数タイムゾーン文字列。[`String`](/sql-reference/data-types/string)

**戻り値**

1つの引数で呼び出された場合は`DateTime`を、2つまたは3つの引数で呼び出された場合は`String`を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`String`](/sql-reference/data-types/string)

**例**

**UnixタイムスタンプをDateTimeに変換**

```sql title=Query
SELECT fromUnixTimestamp(423543535)
```

```response title=Response
┌─fromUnixTimestamp(423543535)─┐
│          1983-06-04 10:58:55 │
└──────────────────────────────┘
```

**フォーマット付きのUnixタイムスタンプを変換**

```sql title=Query
SELECT fromUnixTimestamp(1234334543, '%Y-%m-%d %R:%S') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 14:42:23 │
└─────────────────────┘
```
## fromUnixTimestampInJodaSyntax {#fromUnixTimestampInJodaSyntax}

Introduced in: v23.1


この関数はUnixタイムスタンプをカレンダー日付および日の時間に変換します。

以下の2つの方法で呼び出すことができます：

単一の引数の型が[`Integer`](../data-types/int-uint.md)の場合、[`DateTime`](../data-types/datetime.md)型の値を返します。すなわち、[`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#todatetime)のように動作します。

最初の引数が[`Integer`](../data-types/int-uint.md)、[`Date`](../data-types/date.md)、[`Date32`](../data-types/date32.md)、[`DateTime`](../data-types/datetime.md)または[`DateTime64`](../data-types/datetime64.md)型で、2番目の引数が定数のフォーマット文字列、3番目の引数がオプションの定数タイムゾーン文字列の場合、[`String`](../data-types/string.md)型の値を返します。すなわち、[`formatDateTimeInJodaSyntax`](#formatDateTimeInJodaSyntax)のように動作します。この場合、[Joda datetimeフォーマットスタイル](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)が使用されます。

**構文**

```sql
fromUnixTimestampInJodaSyntax(timestamp)
fromUnixTimestampInJodaSyntax(timestamp, format[, timezone])
```

**引数**

- `timestamp` — Unixタイムスタンプまたは日時値。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — オプション。出力フォーマット用のJoda構文を使用した定数フォーマット文字列。[`String`](/sql-reference/data-types/string)
- `timezone` — オプション。定数タイムゾーン文字列。[`String`](/sql-reference/data-types/string)

**戻り値**

1つの引数で呼び出された場合は日時を、2つまたは3つの引数で呼び出された場合は文字列を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`String`](/sql-reference/data-types/string)

**例**

**JodaフォーマットのUnixタイムスタンプを変換**

```sql title=Query
SELECT fromUnixTimestampInJodaSyntax(1234334543, 'yyyy-MM-dd HH:mm:ss', 'UTC') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 06:42:23 │
└─────────────────────┘
```
## makeDate {#makeDate}

Introduced in: v22.6


次のいずれかから`Date`を作成します：
- 年、月、日
- 年と年の日

**構文**

```sql
makeDate(year, month, day)
makeDate(year, day_of_year)
```

**引数**

- `year` — 年数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `month` — 月数 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `day` — 月の日 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `day_of_year` — 年の日 (1-365)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

提供された引数から構築された`Date`値を返します。[`Date`](/sql-reference/data-types/date)

**例**

**年、月、日からの日付**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**年と年の日からの日付**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```
## makeDate32 {#makeDate32}

Introduced in: v22.6


次のいずれかから`Date32`を作成します：
- 年、月、日
- 年と年の日

**構文**

```sql
makeDate32(year, month, day)
makeDate32(year, day_of_year)
```

**引数**

- `year` — 年数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `month` — 月数 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `day` — 月の日 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `day_of_year` — 年の日 (1-365)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

提供された引数から構築された`Date32`値を返します。[`Date32`](/sql-reference/data-types/date32)

**例**

**年、月、日からの日付32**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**年と年の日からの日付32**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```
## makeDateTime {#makeDateTime}

Introduced in: v22.6


年、月、日、時、分、秒から`DateTime`を作成し、オプションでタイムゾーンを指定します。

**構文**

```sql
makeDateTime(year, month, day, hour, minute, second[, timezone])
```

**引数**

- `year` — 年数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `month` — 月数 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `day` — 月の日 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `hour` — 時間 (0-23)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `minute` — 分 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `second` — 秒 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `timezone` — タイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

提供された引数から構築された`DateTime`値を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**年、月、日、時、分、秒からの日付時刻**

```sql title=Query
SELECT makeDateTime(2023, 2, 28, 17, 12, 33) AS DateTime;
```

```response title=Response
┌────────────DateTime─┐
│ 2023-02-28 17:12:33 │
└─────────────────────┘
```
## makeDateTime64 {#makeDateTime64}

Introduced in: v22.6


年、月、日、時、分、秒から、オプションで小数、精度、タイムゾーンを指定して`DateTime64`を作成します。

**構文**

```sql
makeDateTime64(year, month, day, hour, minute, second[, fraction[, precision[, timezone]]])
```

**引数**

- `year` — 年数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `month` — 月数 (1-12)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `day` — 月の日 (1-31)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `hour` — 時間 (0-23)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `minute` — 分 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `second` — 秒 (0-59)。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `fraction` — 秒の小数部。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)
- `precision` — 小数部の精度 (0-9)。[`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — タイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

提供された引数から構築された`DateTime64`値を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**年、月、日、時、分、秒からの日付時刻64**

```sql title=Query
SELECT makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5);
```

```response title=Response
┌─makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5)─┐
│                       2023-05-15 10:30:45.00779 │
└─────────────────────────────────────────────────┘
```
## monthName {#monthName}

Introduced in: v22.1


日付または日時値から月の名前を文字列として返します。

**構文**

```sql
monthName(datetime)
```

**引数**

- `datetime` — 日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**戻り値**

月の名前を返します。[`String`](/sql-reference/data-types/string)

**例**

**日付から月の名前を取得**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT monthName(date_value)
```

```response title=Response
┌─monthName(date_value)─┐
│ April                 │
└───────────────────────┘
```
## now {#now}

Introduced in: v1.1


クエリ解析の瞬間に現在の日付と時間を返します。この関数は定数式です。

**構文**

```sql
now([timezone])
```

**引数**

- `timezone` — オプション。返される値のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

現在の日付と時間を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**タイムゾーンなしのクエリ**

```sql title=Query
SELECT now()
```

```response title=Response
┌───────────────now()─┐
│ 2020-10-17 07:42:09 │
└─────────────────────┘
```

**指定タイムゾーンのクエリ**

```sql title=Query
SELECT now('Asia/Istanbul')
```

```response title=Response
┌─now('Asia/Istanbul')─┐
│  2020-10-17 10:42:23 │
└──────────────────────┘
```
## now64 {#now64}

Introduced in: v20.1


クエリ解析の瞬間にミリ秒精度の現在の日付と時間を返します。この関数は定数式です。

**構文**

```sql
now64([scale], [timezone])
```

**引数**

- `scale` — オプション。ティックサイズ (精度): 10^-precision秒。妥当な範囲: [0 : 9]。通常は - 3 (デフォルト) (ミリ秒)、6 (マイクロ秒)、9 (ナノ秒) を使用します。[`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — オプション。返される値のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

ミリ秒精度の現在の日付と時間を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**デフォルトおよびカスタム精度とのクエリ**

```sql title=Query
SELECT now64(), now64(9, 'Asia/Istanbul')
```

```response title=Response
┌─────────────────now64()─┬─────now64(9, 'Asia/Istanbul')─┐
│ 2022-08-21 19:34:26.196 │ 2022-08-21 22:34:26.196542766 │
└─────────────────────────┴───────────────────────────────┘
```
## nowInBlock {#nowInBlock}

Introduced in: v22.8


各データブロックの処理の瞬間に現在の日付と時間を返します。関数[`now`](#now)とは異なり、定数式ではなく、長時間実行されるクエリの場合、それぞれのブロックで返される値が異なります。

長時間実行される`INSERT SELECT`クエリで現在の時間を生成するためにこの関数を使用する意味があります。

**構文**

```sql
nowInBlock([timezone])
```

**引数**

- `timezone` — オプション。返される値のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

各データブロックの処理の瞬間に現在の日付と時間を返します。[`DateTime`](/sql-reference/data-types/datetime)

**例**

**now()関数との違い**

```sql title=Query
SELECT
    now(),
    nowInBlock(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌───────────────now()─┬────────nowInBlock()─┬─sleep(1)─┐
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:19 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:20 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:21 │        0 │
└─────────────────────┴─────────────────────┴──────────┘
```
## nowInBlock64 {#nowInBlock64}

Introduced in: v25.8


各データブロックの処理の瞬間にミリ秒精度の現在の日付と時間を返します。関数[now64](#now64)とは異なり、定数式ではなく、長時間実行されるクエリの場合、それぞれのブロックで返される値が異なります。

長時間実行されるINSERT SELECTクエリで現在の時間を生成するためにこの関数を使用する意味があります。

**構文**

```sql
nowInBlock([scale[, timezone]])
```

**引数**

- `scale` — オプション。ティックサイズ (精度): 10^-precision秒。妥当な範囲: [0 : 9]。通常は - 3 (デフォルト) (ミリ秒)、6 (マイクロ秒)、9 (ナノ秒) を使用します。[`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — オプション。返される値のタイムゾーン名。[`String`](/sql-reference/data-types/string)

**戻り値**

ミリ秒精度の現在の日付と時間を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**now64()関数との違い**

```sql title=Query
SELECT
    now64(),
    nowInBlock64(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌─────────────────now64()─┬──────────nowInBlock64()─┬─sleep(1)─┐
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:29.534 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:30.535 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:31.535 │        0 │
└─────────────────────────┴─────────────────────────┴──────────┘
```
## serverTimezone {#serverTimezone}

Introduced in: v23.6


サーバーのタイムゾーンを返します。すなわち、[`timezone`](/operations/server-configuration-parameters/settings#timezone)設定の値です。
関数が分散テーブルのコンテキストで実行されると、各シャードに関連する値を持つ通常のカラムを生成します。それ以外の場合、定数値を生成します。

**構文**

```sql
serverTimeZone()
```

**引数**

- なし。

**戻り値**

サーバーのタイムゾーンを[`String`](/sql-reference/data-types/string)として返します。

**例**

**使用例**

```sql title=Query
SELECT serverTimeZone()
```

```response title=Response
┌─serverTimeZone()─┐
│ UTC              │
└──────────────────┘
```
## subDate {#subDate}

Introduced in: v23.9


提供された日付、日時、または文字列エンコードされた日付または日時から指定された時間間隔を減算します。
減算の結果がデータ型の範囲外になる場合、結果は未定義です。

**構文**

```sql
subDate(datetime, interval)
```

**引数**

- `datetime` — `interval`が減算される日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `interval` — 減算する間隔。[`Interval`](/sql-reference/data-types/int-uint)

**戻り値**

`datetime`から`interval`を減算して得られた日付または日時を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**日付から間隔を減算**

```sql title=Query
SELECT subDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─subDate(toDate('2018-01-01'), toIntervalYear(3))─┐
│                                       2015-01-01 │
└──────────────────────────────────────────────────┘
```
## subtractDays {#subtractDays}

Introduced in: v1.1


指定した日数を日付、日時、または文字列エンコードされた日付または日時から減算します。

**構文**

```sql
subtractDays(datetime, num)
```

**引数**

- `datetime` — 指定した日数を減算する日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する日数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime`から`num`日を減算した値を返します。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプから日数を減算**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractDays(date, 31) AS subtract_days_with_date,
    subtractDays(date_time, 31) AS subtract_days_with_date_time,
    subtractDays(date_time_string, 31) AS subtract_days_with_date_time_string
```

```response title=Response
┌─subtract_days_with_date─┬─subtract_days_with_date_time─┬─subtract_days_with_date_time_string─┐
│              2023-12-01 │          2023-12-01 00:00:00 │             2023-12-01 00:00:00.000 │
└─────────────────────────┴──────────────────────────────┴─────────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─minus(CAST('⋯valDay(10))─┐
│               1998-06-06 │
└──────────────────────────┘
```
## subtractHours {#subtractHours}

Introduced in: v1.1


指定した時間数を日付、日時、または文字列エンコードされた日付または日時から減算します。

**構文**

```sql
subtractHours(datetime, num)
```

**引数**

- `datetime` — 指定した時間を減算する日付または日時。[`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する時間。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime`から`num`時間を減算した値を返します。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**例**

**異なる日付タイプから時間を減算**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractHours(date, 12) AS subtract_hours_with_date,
    subtractHours(date_time, 12) AS subtract_hours_with_date_time,
    subtractHours(date_time_string, 12) AS subtract_hours_with_date_time_string
```

```response title=Response
┌─subtract_hours_with_date─┬─subtract_hours_with_date_time─┬─subtract_hours_with_date_time_string─┐
│      2023-12-31 12:00:00 │           2023-12-31 12:00:00 │              2023-12-31 12:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─minus(CAST('⋯alHour(10))─┐
│      1998-06-15 14:00:00 │
└──────────────────────────┘
```
## subtractInterval {#subtractInterval}

Introduced in: v22.11


別の間隔または間隔のタプルに否定された間隔を加算します。

注意: 同じ型の間隔は単一の間隔に結合されます。例えば、`toIntervalDay(2)`と`toIntervalDay(1)`が渡されると、結果は`(1)`となり、`(2,1)`ではありません。

**構文**

```sql
subtractInterval(interval_1, interval_2)
```

**引数**

- `interval_1` — 最初の間隔またはタプルの間隔。[`Interval`](/sql-reference/data-types/int-uint) または [`Tuple(Interval)`](/sql-reference/data-types/tuple)
- `interval_2` — 否定される2番目の間隔。[`Interval`](/sql-reference/data-types/int-uint)

**戻り値**

間隔のタプルを返します。[`Tuple(T)`](/sql-reference/data-types/tuple)

**例**

**間隔を減算**

```sql title=Query
SELECT subtractInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT subtractInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT subtractInterval(INTERVAL 2 DAY, INTERVAL 1 DAY);
```

```response title=Response
┌─subtractInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,-1)                                                 │
└────────────────────────────────────────────────────────┘
┌─subtractInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,-1)                                                                    │
└─────────────────────────────────────────────────────────────────────────────┘
┌─subtractInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (1)                                                  │
└──────────────────────────────────────────────────────┘
```
## subtractMicroseconds {#subtractMicroseconds}

Introduced in: v22.6


指定した微秒数を日時または文字列エンコードされた日時から減算します。

**構文**

```sql
subtractMicroseconds(datetime, num)
```

**引数**

- `datetime` — 指定した微秒数を減算する日時。[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する微秒数。[`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**戻り値**

`datetime`から`num`微秒を減算した値を返します。[`DateTime64`](/sql-reference/data-types/datetime64)

**例**

**異なる日時型から微秒を減算**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMicroseconds(date_time, 1000000) AS subtract_microseconds_with_date_time,
    subtractMicroseconds(date_time_string, 1000000) AS subtract_microseconds_with_date_time_string
```

```response title=Response
┌─subtract_microseconds_with_date_time─┬─subtract_microseconds_with_date_time_string─┐
│           2023-12-31 23:59:59.000000 │                  2023-12-31 23:59:59.000000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**代替のINTERVAL構文を使用**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─minus(CAST('1⋯osecond(10))─┐
│ 1998-06-15 23:59:59.999990 │
└────────────────────────────┘
```
## subtractMilliseconds {#subtractMilliseconds}

Introduced in: v22.6

指定されたミリ秒数を時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractMilliseconds(datetime, num)
```

**Arguments**

- `datetime` — 指定されたミリ秒数を減算する対象の日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算するミリ秒数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`ミリ秒を減算した値を返します [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付時間型からミリ秒を減算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMilliseconds(date_time, 1000) AS subtract_milliseconds_with_date_time,
    subtractMilliseconds(date_time_string, 1000) AS subtract_milliseconds_with_date_time_string
```

```response title=Response
┌─subtract_milliseconds_with_date_time─┬─subtract_milliseconds_with_date_time_string─┐
│              2023-12-31 23:59:59.000 │                     2023-12-31 23:59:59.000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─minus(CAST('⋯second(10))─┐
│  1998-06-15 23:59:59.990 │
└──────────────────────────┘
```

## subtractMinutes {#subtractMinutes}

Introduced in: v1.1

指定された分数を日付、時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractMinutes(datetime, num)
```

**Arguments**

- `datetime` — 指定された分数を減算する対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する分数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`分を減算した値を返します [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付型から分を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMinutes(date, 30) AS subtract_minutes_with_date,
    subtractMinutes(date_time, 30) AS subtract_minutes_with_date_time,
    subtractMinutes(date_time_string, 30) AS subtract_minutes_with_date_time_string
```

```response title=Response
┌─subtract_minutes_with_date─┬─subtract_minutes_with_date_time─┬─subtract_minutes_with_date_time_string─┐
│        2023-12-31 23:30:00 │             2023-12-31 23:30:00 │                2023-12-31 23:30:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─minus(CAST('⋯Minute(10))─┐
│      1998-06-15 23:50:00 │
└──────────────────────────┘
```

## subtractMonths {#subtractMonths}

Introduced in: v1.1

指定された月数を日付、時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractMonths(datetime, num)
```

**Arguments**

- `datetime` — 指定された月数を減算する対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する月数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`月を減算した値を返します [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付型から月を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMonths(date, 1) AS subtract_months_with_date,
    subtractMonths(date_time, 1) AS subtract_months_with_date_time,
    subtractMonths(date_time_string, 1) AS subtract_months_with_date_time_string
```

```response title=Response
┌─subtract_months_with_date─┬─subtract_months_with_date_time─┬─subtract_months_with_date_time_string─┐
│                2023-12-01 │            2023-12-01 00:00:00 │               2023-12-01 00:00:00.000 │
└───────────────────────────┴────────────────────────────────┴───────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─minus(CAST('⋯lMonth(10))─┐
│               1997-08-16 │
└──────────────────────────┘
```

## subtractNanoseconds {#subtractNanoseconds}

Introduced in: v20.1

指定されたナノ秒数を時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractNanoseconds(datetime, num)
```

**Arguments**

- `datetime` — 指定されたナノ秒数を減算する対象の日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算するナノ秒数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`ナノ秒を減算した値を返します [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付時間型からナノ秒を減算する**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractNanoseconds(date_time, 1000) AS subtract_nanoseconds_with_date_time,
    subtractNanoseconds(date_time_string, 1000) AS subtract_nanoseconds_with_date_time_string
```

```response title=Response
┌─subtract_nanoseconds_with_date_time─┬─subtract_nanoseconds_with_date_time_string─┐
│       2023-12-31 23:59:59.999999000 │              2023-12-31 23:59:59.999999000 │
└─────────────────────────────────────┴────────────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 nanosecond)
```

```response title=Response
┌─minus(CAST('19⋯anosecond(10))─┐
│ 1998-06-15 23:59:59.999999990 │
└───────────────────────────────┘
```

## subtractQuarters {#subtractQuarters}

Introduced in: v20.1

指定された四半期数を日付、時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractQuarters(datetime, num)
```

**Arguments**

- `datetime` — 指定された四半期数を減算する対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する四半期数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`四半期を減算した値を返します [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付型から四半期を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractQuarters(date, 1) AS subtract_quarters_with_date,
    subtractQuarters(date_time, 1) AS subtract_quarters_with_date_time,
    subtractQuarters(date_time_string, 1) AS subtract_quarters_with_date_time_string
```

```response title=Response
┌─subtract_quarters_with_date─┬─subtract_quarters_with_date_time─┬─subtract_quarters_with_date_time_string─┐
│                  2023-10-01 │              2023-10-01 00:00:00 │                 2023-10-01 00:00:00.000 │
└─────────────────────────────┴──────────────────────────────────┴─────────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─minus(CAST('1⋯Quarter(10))─┐
│                1996-09-16 │
└───────────────────────────┘
```

## subtractSeconds {#subtractSeconds}

Introduced in: v1.1

指定された秒数を日付、時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractSeconds(datetime, num)
```

**Arguments**

- `datetime` — 指定された秒数を減算する対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する秒数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`秒を減算した値を返します [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付型から秒を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractSeconds(date, 60) AS subtract_seconds_with_date,
    subtractSeconds(date_time, 60) AS subtract_seconds_with_date_time,
    subtractSeconds(date_time_string, 60) AS subtract_seconds_with_date_time_string
```

```response title=Response
┌─subtract_seconds_with_date─┬─subtract_seconds_with_date_time─┬─subtract_seconds_with_date_time_string─┐
│        2023-12-31 23:59:00 │             2023-12-31 23:59:00 │                2023-12-31 23:59:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─minus(CAST('⋯Second(10))─┐
│      1998-06-15 23:59:50 │
└──────────────────────────┘
```

## subtractTupleOfIntervals {#subtractTupleOfIntervals}

Introduced in: v22.11

日付または時間付きの日付からインターバルのタプルを連続的に減算します。
    

**Syntax**

```sql
subtractTupleOfIntervals(datetime, intervals)
```

**Arguments**

- `datetime` — インターバルを減算する対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `intervals` — `datetime` から減算するインターバルのタプル。 [`Tuple(Interval)`](/sql-reference/data-types/tuple)


**Returned value**

減算された `intervals` を含む日付を返します [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**日付からインターバルのタプルを減算する**

```sql title=Query
WITH toDate('2018-01-01') AS date SELECT subtractTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 YEAR))
```

```response title=Response
┌─subtractTupl⋯alYear(1)))─┐
│               2016-12-31 │
└──────────────────────────┘
```

## subtractWeeks {#subtractWeeks}

Introduced in: v1.1

指定された週数を日付、時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractWeeks(datetime, num)
```

**Arguments**

- `datetime` — 指定された週数を減算する対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する週数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`週を減算した値を返します [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付型から週を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractWeeks(date, 1) AS subtract_weeks_with_date,
    subtractWeeks(date_time, 1) AS subtract_weeks_with_date_time,
    subtractWeeks(date_time_string, 1) AS subtract_weeks_with_date_time_string
```

```response title=Response
┌─subtract_weeks_with_date─┬─subtract_weeks_with_date_time─┬─subtract_weeks_with_date_time_string─┐
│               2023-12-25 │           2023-12-25 00:00:00 │              2023-12-25 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─minus(CAST('⋯alWeek(10))─┐
│               1998-04-07 │
└──────────────────────────┘
```

## subtractYears {#subtractYears}

Introduced in: v1.1

指定された年数を日付、時間付きの日付または文字列エンコードされた日付から減算します。
    

**Syntax**

```sql
subtractYears(datetime, num)
```

**Arguments**

- `datetime` — 指定された年数を減算する対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `num` — 減算する年数。 [`(U)Int*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**Returned value**

`datetime` から `num`年を減算した値を返します [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**異なる日付型から年を減算する**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractYears(date, 1) AS subtract_years_with_date,
    subtractYears(date_time, 1) AS subtract_years_with_date_time,
    subtractYears(date_time_string, 1) AS subtract_years_with_date_time_string
```

```response title=Response
┌─subtract_years_with_date─┬─subtract_years_with_date_time─┬─subtract_years_with_date_time_string─┐
│               2023-01-01 │           2023-01-01 00:00:00 │              2023-01-01 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**代替の INTERVAL 構文を使用する**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─minus(CAST('⋯alYear(10))─┐
│               1988-06-16 │
└──────────────────────────┘
```

## timeDiff {#timeDiff}

Introduced in: v23.4

指定された `unit` 境界を越えた回数を `startdate` と `enddate` の間で返します。
差分は相対単位を使用して計算されます。たとえば、2021-12-29 と 2022-01-01 の間の違いは、単位が日であれば 3 日（ [`toRelativeDayNum`](#toRelativeDayNum）を参照）、単位が月であれば 1 ヶ月（ [`toRelativeMonthNum`](#toRelativeMonthNum）を参照）、単位が年であれば 1 年（ [`toRelativeYearNum`](#toRelativeYearNum）を参照）となります。

単位が `week` の場合、`timeDiff` は週が月曜日から始まると仮定します。
この動作は、週がデフォルトで日曜日から始まる `toWeek()` 関数とは異なることに注意してください。

代替としては、 [`timeDiff`](#timeDiff）に対して、[`age`](#age）関数があります。
    

**Syntax**

```sql
date_diff(unit, startdate, enddate, [timezone])
```

**Arguments**

- `unit` — 結果のインターバルの種類。

| Unit        | Possible values                           |
|-------------|-------------------------------------------|
| nanosecond  | `nanosecond`, `nanoseconds`, `ns`         |
| microsecond | `microsecond`, `microseconds`, `us`, `u`  |
| millisecond | `millisecond`, `milliseconds`, `ms`       |
| second      | `second`, `seconds`, `ss`, `s`            |
| minute      | `minute`, `minutes`, `mi`, `n`            |
| hour        | `hour`, `hours`, `hh`, `h`                |
| day         | `day`, `days`, `dd`, `d`                  |
| week        | `week`, `weeks`, `wk`, `ww`               |
| month       | `month`, `months`, `mm`, `m`              |
| quarter     | `quarter`, `quarters`, `qq`, `q`          |
| year        | `year`, `years`, `yyyy`, `yy`             |
- `startdate` — 減算する最初の時間値（被減数）。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `enddate` — 減算される第二の時間値（減数）。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。タイムゾーン名。指定された場合、`startdate` と `enddate` の両方に適用されます。指定されていない場合、`startdate` と `enddate` のタイムゾーンが使用されます。同じでない場合、結果は不明です。 [`String`](/sql-reference/data-types/string)


**Returned value**

`enddate` と `startdate` の差を `unit` で表します。 [`Int64`](/sql-reference/data-types/int-uint)

**Examples**

**時間での日付差を計算する**

```sql title=Query
SELECT timeDiff('hour', toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) AS res
```

```response title=Response
┌─res─┐
│  25 │
└─────┘
```

**異なる単位での日付差を計算する**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    timeDiff('day', s, e) AS day_diff,
    timeDiff('month', s, e) AS month_diff,
    timeDiff('year', s, e) AS year_diff
```

```response title=Response
┌──────────e─┬──────────s─┬─day_diff─┬─month_diff─┬─year_diff─┐
│ 2022-01-01 │ 2021-12-29 │        3 │          1 │         1 │
└────────────┴────────────┴──────────┴────────────┴───────────┘
```

## timeSlot {#timeSlot}

Introduced in: v1.1

時間を半時間の長さのインターバルの開始に丸めます。

:::note
この関数は、拡張型 `Date32` と `DateTime64` の値を引数に取ることができますが、
通常の範囲外の時間（1970 年から 2149 年の間の `Date` / 2106 年の `DateTime`）を渡すと不正確な結果が得られます。
:::
    

**Syntax**

```sql
timeSlot(time[, time_zone])
```

**Arguments**

- `time` — 半時間の長さのインターバルの開始に丸めるべき時間。 [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — オプション。タイムゾーンを表す文字列型の定数値または式。 [`String`](/sql-reference/data-types/string)


**Returned value**

半時間の長さのインターバルの開始に丸められた時間を返します。 [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**半時間のインターバルに時間を丸める**

```sql title=Query
SELECT timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))
```

```response title=Response
┌─timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))─┐
│                                2000-01-02 03:00:00 │
└────────────────────────────────────────────────────┘
```

## timeSlots {#timeSlots}

Introduced in: v1.1

`StartTime` から始まり `Duration` 秒間続く時間インターバルのために、指定された時間の間に丸められたポイントの配列を返します。 `Size` はオプションのパラメータで、デフォルトでは 1800（30 分）に設定されています。

これは、対応するセッション内のページビューを検索する際などに必要です。

`DateTime64` の場合、戻り値のスケールは `StartTime` のスケールと異なる場合があります。すべての指定された引数の中で最高のスケールが取られます。
    

**Syntax**

```sql
timeSlots(StartTime, Duration[, Size])
```

**Arguments**

- `StartTime` — インターバルの開始時間。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `Duration` — 秒単位のインターバルの持続時間。 [`UInt32`](/sql-reference/data-types/int-uint) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `Size` — オプション。秒単位の時間スロットのサイズ。デフォルトは 1800（30 分）。 [`UInt32`](/sql-reference/data-types/int-uint) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

DateTime/DateTime64 の配列を返します（戻り値の型は `StartTime` の型に一致します）。DateTime64の場合、戻り値のスケールは `StartTime` のスケールと異なる場合があります。すべての指定された引数の中で最高のスケールが取られます。 [`Array(DateTime)`](/sql-reference/data-types/array) または [`Array(DateTime64)`](/sql-reference/data-types/array)

**Examples**

**インターバルのための時間スロットを生成する**

```sql title=Query
SELECT timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600));
SELECT timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299);
SELECT timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))
```

```response title=Response
┌─timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600))─┐
│ ['2012-01-01 12:00:00','2012-01-01 12:30:00']               │
└─────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299)─┐
│ ['1980-12-12 20:56:13','1980-12-12 21:01:12','1980-12-12 21:06:11']     │
└─────────────────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))─┐
│ ['1980-12-12 20:56:13.0000','1980-12-12 21:01:12.0000','1980-12-12 21:06:11.0000']                        │
└───────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## timestamp {#timestamp}

Introduced in: v23.9

最初の引数 `expr` を [`DateTime64(6)`](/sql-reference/data-types/datetime64) 型に変換します。
二番目の引数 `expr_time` が指定されている場合、その指定された時間を変換された値に追加します。
    

**Syntax**

```sql
timestamp(expr[, expr_time])
```

**Arguments**

- `expr` — 日付または時間付きの日付。 [`String`](/sql-reference/data-types/string)
- `expr_time` — オプション。変換された値に追加される時間。 [`String`](/sql-reference/data-types/string)


**Returned value**

`expr` の変換された値、または追加された時間のある `expr` を返します [`DateTime64(6)`](/sql-reference/data-types/datetime64)

**Examples**

**日付文字列を DateTime64(6) に変換する**

```sql title=Query
SELECT timestamp('2023-12-31') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2023-12-31 00:00:00.000000 │
└────────────────────────────┘
```

**日付文字列に時間を追加する**

```sql title=Query
SELECT timestamp('2023-12-31 12:00:00', '12:00:00.11') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2024-01-01 00:00:00.110000 │
└────────────────────────────┘
```

## timezone {#timezone}

Introduced in: v21.4

現在のセッションのタイムゾーン名を返すか、タイムゾーンオフセットや名前を標準のタイムゾーン名に変換します。
    

**Syntax**

```sql
timezone()
```

**Arguments**

- なし。

**Returned value**

標準のタイムゾーン名を [`String`](/sql-reference/data-types/string) として返します。

**Examples**

**使用例**

```sql title=Query
SELECT timezone()
```

```response title=Response
┌─timezone()───────┐
│ Europe/Amsterdam │
└──────────────────┘
```

## timezoneOf {#timezoneOf}

Introduced in: v21.4

[`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) 値のタイムゾーン名を返します。
    

**Syntax**

```sql
timeZoneOf(datetime)
```

**Arguments**

- `datetime` — 型の値。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。`datetime` 値のタイムゾーンを変換するためのタイムゾーン名。 [`String`](/sql-reference/data-types/string)


**Returned value**

`datetime` のタイムゾーン名を返します [`String`](/sql-reference/data-types/string)

**Examples**

**使用例**

```sql title=Query
SELECT timezoneOf(now());
```

```response title=Response
┌─timezoneOf(now())─┐
│ Europe/Amsterdam  │
└───────────────────┘
```

## timezoneOffset {#timezoneOffset}

Introduced in: v21.6

[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) からのタイムゾーンオフセットを秒単位で返します。
この関数は、指定された日時でのサマータイムや歴史的なタイムゾーンの変更を考慮に入れます。
    

**Syntax**

```sql
timeZoneOffset(datetime)
```

**Arguments**

- `datetime` — タイムゾーンオフセットを取得するための `DateTime` 値。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

UTC からのオフセットを秒単位で返します [`Int32`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toDateTime('2021-04-21 10:20:30', 'America/New_York') AS Time,
toTypeName(Time) AS Type,
timeZoneOffset(Time) AS Offset_in_seconds,
(Offset_in_seconds / 3600) AS Offset_in_hours;
```

```response title=Response
┌────────────────Time─┬─Type─────────────────────────┬─Offset_in_seconds─┬─Offset_in_hours─┐
│ 2021-04-21 10:20:30 │ DateTime('America/New_York') │            -14400 │              -4 │
└─────────────────────┴──────────────────────────────┴───────────────────┴─────────────────┘
```

## toDayOfMonth {#toDayOfMonth}

Introduced in: v1.1

`Date` または `DateTime` の月の日（1-31）を返します。
        

**Syntax**

```sql
toDayOfMonth(datetime)
```

**Arguments**

- `datetime` — 月の日を取得するための対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

指定された日付/時間の月の日を返します [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                              21 │
└─────────────────────────────────────────────────┘
```

## toDayOfWeek {#toDayOfWeek}

Introduced in: v1.1

`Date` または `DateTime` 値の週内の日の番号を返します。

`toDayOfWeek()` の二引数形式は、週の開始日を月曜日または日曜日に指定し、返される値の範囲を 0 から 6 まで、または 1 から 7 まで指定できます。

| Mode | 週の始まり | 範囲                                          |
|------|-------------------|------------------------------------------------|
| 0    | 月曜日            | 1-7: 月曜日 = 1、火曜日 = 2、...、日曜日 = 7  |
| 1    | 月曜日            | 0-6: 月曜日 = 0、火曜日 = 1、...、日曜日 = 6  |
| 2    | 日曜日            | 0-6: 日曜日 = 0、月曜日 = 1、...、土曜日 = 6 |
| 3    | 日曜日            | 1-7: 日曜日 = 1、月曜日 = 2、...、土曜日 = 7 |
        

**Syntax**

```sql
toDayOfWeek(datetime[, mode[, timezone]])
```

**Arguments**

- `datetime` — 週内の日の番号を取得するための日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `mode` — オプション。週モードを指定する整数（0-3）。省略した場合は0がデフォルト。 [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — オプション。変換に使用するタイムゾーン。 [`String`](/sql-reference/data-types/string)


**Returned value**

指定された `Date` または `DateTime` の週の曜日を返します [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
-- The following date is April 21, 2023, which was a Friday:
SELECT
    toDayOfWeek(toDateTime('2023-04-21')),
    toDayOfWeek(toDateTime('2023-04-21'), 1)
```

```response title=Response
┌─toDayOfWeek(toDateTime('2023-04-21'))─┬─toDayOfWeek(toDateTime('2023-04-21'), 1)─┐
│                                     5 │                                        4 │
└───────────────────────────────────────┴──────────────────────────────────────────┘
```

## toDayOfYear {#toDayOfYear}

Introduced in: v18.4

`Date` または `DateTime` 値の年間の番号（1-366）を返します。
        

**Syntax**

```sql
toDayOfYear(datetime)
```

**Arguments**

- `datetime` — 年間の番号を取得するための日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

指定された日付または時間の年間の日を返します [`UInt16`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toDayOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                            111 │
└────────────────────────────────────────────────┘
```

## toDaysSinceYearZero {#toDaysSinceYearZero}

Introduced in: v23.9

与えられた日付に対して、[1 月 1 日 0000](https://en.wikipedia.org/wiki/Year_zero) から経過した日数を返します、これは[ISO 8601 で定義された先行グレゴリオ暦](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar)に基づいています。

計算は、MySQL の [`TO_DAYS`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_to-days）関数と同じです。
    

**Syntax**

```sql
toDaysSinceYearZero(date[, time_zone])
```

**Arguments**

- `date` — 年ゼロから経過した日数を計算するための日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — タイムゾーン。 [`String`](/sql-reference/data-types/string)


**Returned value**

日付 `0000-01-01` から経過した日数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**ゼロ年からの経過日数を計算する**

```sql title=Query
SELECT toDaysSinceYearZero(toDate('2023-09-08'))
```

```response title=Response
┌─toDaysSinceYearZero(toDate('2023-09-08')))─┐
│                                     713569 │
└────────────────────────────────────────────┘
```

## toHour {#toHour}

Introduced in: v1.1

`DateTime` または `DateTime64` 値の時間 コンポーネント（0-23）を返します。
    

**Syntax**

```sql
toHour(datetime)
```

**Arguments**

- `datetime` — 時間を取得するための日付または時間付きの日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

`datetime` の時間（0-23）を返します。 [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toHour(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toHour(toDateTime('2023-04-21 10:20:30'))─┐
│                                        10 │
└───────────────────────────────────────────┘
```

## toISOYear {#toISOYear}

Introduced in: v18.4

日付または時間付きの日付を ISO 年番号に変換します。
    

**Syntax**

```sql
toISOYear(datetime)
```

**Arguments**

- `datetime` — 日付または時間付きの日付の値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

ISO 年番号に変換された入力値を返します。 [`UInt16`](/sql-reference/data-types/int-uint)

**Examples**

**日付値から ISO 年を取得する**

```sql title=Query
SELECT
toISOYear(toDate('2024/10/02')) as year1,
toISOYear(toDateTime('2024-10-02 01:30:00')) as year2
```

```response title=Response
┌─week1─┬─week2─┐
│    40 │    40 │
└───────┴───────┘
```

## toLastDayOfMonth {#toLastDayOfMonth}

Introduced in: v1.1

日付または時間付きの日付を月の最終日に丸めます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することによって構成できます。
:::
    

**Syntax**

```sql
toLastDayOfMonth(value)
```

**Arguments**

- `value` — 月の最終日に丸める対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

指定された日付または時間に対する月の最終日を返します。 [`Date`](/sql-reference/data-types/date)

**Examples**

**月の最終日に丸める**

```sql title=Query
SELECT toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-30 │
└─────────────────────────────────────────────────────┘
```

## toLastDayOfWeek {#toLastDayOfWeek}

Introduced in: v23.5

日付または時間付きの日付を最も近い土曜日または日曜日に丸めます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することによって構成できます。
:::
    

**Syntax**

```sql
toLastDayOfWeek(datetime[, mode[, timezone]])
```

**Arguments**

- `datetime` — 変換する日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `mode` — `toWeek()` 関数に記載されているように、一週間の始まりを決定します。デフォルトは `0`。 [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — オプション。変換に使用するタイムゾーン。指定しない場合はサーバーのタイムゾーンが使用されます。 [`String`](/sql-reference/data-types/string)


**Returned value**

指定された日付に基づき、最も近い土曜日または日曜日の日付を返します。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**最も近い土曜日または日曜日に丸める**

```sql title=Query
SELECT
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')), /* a Friday */
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* a Friday */
    toLastDayOfWeek(toDate('2023-04-23')), /* a Sunday */
    toLastDayOfWeek(toDate('2023-04-23'), 1) /* a Sunday */
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-23
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-22
toLastDayOfWeek(toDate('2023-04-23')):                   2023-04-23
toLastDayOfWeek(toDate('2023-04-23'), 1):                2023-04-23
```

## toMillisecond {#toMillisecond}

Introduced in: v24.2

`DateTime` または `DateTime64` 値のミリ秒コンポーネント（0-999）を返します。
    

**Syntax**

```sql
toMillisecond(datetime)
```

**Arguments**

- `datetime` — ミリ秒を取得するための時間付きの日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

`datetime` の分のミリ秒を返します（0 - 59）。 [`UInt16`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3));
```

```response title=Response
┌──toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3))─┐
│                                                        456 │
└────────────────────────────────────────────────────────────┘
```

## toMinute {#toMinute}

Introduced in: v1.1

`Date` または `DateTime` 値の分コンポーネント（0-59）を返します。
    

**Syntax**

```sql
toMinute(datetime)
```

**Arguments**

- `datetime` — 分を取得するための時間付きの日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

`datetime` の時間の分を返します（0 - 59）。 [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toMinute(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMinute(toDateTime('2023-04-21 10:20:30'))─┐
│                                          20 │
└─────────────────────────────────────────────┘
```

## toModifiedJulianDay {#toModifiedJulianDay}

Introduced in: v21.1

[先行グレゴリオ暦](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar)の日付をテキスト形式 `YYYY-MM-DD` に変換し、[修正ジュリアン日](https://en.wikipedia.org/wiki/Julian_day#Variants)の数に `Int32` で返します。この関数は `0000-01-01` から `9999-12-31` までの日付をサポートします。引数が日付として解析できない場合、または日付が無効な場合は例外をスローします。
    

**Syntax**

```sql
toModifiedJulianDay(date)
```

**Arguments**

- `date` — 文字列での日付。 [`String`](/sql-reference/data-types/string) または [`FixedString`](/sql-reference/data-types/fixedstring)


**Returned value**

修正ジュリアン日番号を返します。 [`Int32`](/sql-reference/data-types/int-uint)

**Examples**

**日付を修正ジュリアン日に変換する**

```sql title=Query
SELECT toModifiedJulianDay('2020-01-01')
```

```response title=Response
┌─toModifiedJulianDay('2020-01-01')─┐
│                             58849 │
└───────────────────────────────────┘
```

## toModifiedJulianDayOrNull {#toModifiedJulianDayOrNull}

Introduced in: v21.1

[`toModifiedJulianDay()`](#toModifiedJulianDay）に似ていますが、例外を発生させるのではなく、`NULL` を返します。
    

**Syntax**

```sql
toModifiedJulianDayOrNull(date)
```

**Arguments**

- `date` — テキスト形式の日付。 [`String`](/sql-reference/data-types/string) または [`FixedString`](/sql-reference/data-types/fixedstring)


**Returned value**

有効な `date` に対する修正ジュリアン日番号を返す、そうでない場合は `null` を返します。 [`Nullable(Int32)`](/sql-reference/data-types/nullable)

**Examples**

**NULL 処理を含む修正ジュリアン日への日付の変換**

```sql title=Query
SELECT toModifiedJulianDayOrNull('2020-01-01');
SELECT toModifiedJulianDayOrNull('0000-00-00'); -- invalid date, returns NULL
```

```response title=Response
┌─toModifiedJu⋯020-01-01')─┐
│                    58849 │
└──────────────────────────┘
┌─toModifiedJu⋯000-00-00')─┐
│                     ᴺᵁᴸᴸ │
└──────────────────────────┘
```

## toMonday {#toMonday}

Introduced in: v1.1

日付または時間付きの日付をその週の月曜日に丸めます。日付を返します。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することによって構成できます。
:::
    

**Syntax**

```sql
toMonday(value)
```

**Arguments**

- `value` — 週の月曜日に丸める対象の日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

指定された日付または時間に対する同じ週の月曜日の日付を返します。 [`Date`](/sql-reference/data-types/date)

**Examples**

**週の月曜日に丸める**

```sql title=Query
SELECT
toMonday(toDateTime('2023-04-21 10:20:30')), -- A Friday
toMonday(toDate('2023-04-24'));              -- Already a Monday
```

```response title=Response
┌─toMonday(toDateTime('2023-04-21 10:20:30'))─┬─toMonday(toDate('2023-04-24'))─┐
│                                  2023-04-17 │                     2023-04-24 │
└─────────────────────────────────────────────┴────────────────────────────────┘
```

## toMonth {#toMonth}

Introduced in: v1.1

`Date` または `DateTime` 値の月コンポーネント（1-12）を返します。
    

**Syntax**

```sql
toMonth(datetime)
```

**Arguments**

- `datetime` — 月を取得するための日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

指定された日付/時間の月を返します [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          4 │
└────────────────────────────────────────────┘
```

## toMonthNumSinceEpoch {#toMonthNumSinceEpoch}

Introduced in: v25.3

1970 年から経過した月数を返します。

**Syntax**

```sql
toMonthNumSinceEpoch(date)
```

**Arguments**

- `date` — 日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

正の整数

**Examples**

**例**

```sql title=Query
SELECT toMonthNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
657
```

## toQuarter {#toQuarter}

Introduced in: v1.1

与えられた `Date` または `DateTime` 値の四半期（1-4）を返します。
    

**Syntax**

```sql
toQuarter(datetime)
```

**Arguments**

- `datetime` — 年の四半期を取得するための日付または時間付きの日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

指定された日付/時間の年の四半期を返します [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                            2 │
└──────────────────────────────────────────────┘
```

## toRelativeDayNum {#toRelativeDayNum}

Introduced in: v1.1


特定の過去の固定点から経過した日数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の日数の差を計算することです。例えば、 `toRelativeDayNum(dt1) - toRelativeDayNum(dt2)`です。

**Syntax**

```sql
toRelativeDayNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過日数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**相対日数を取得**

```sql title=Query
SELECT toRelativeDayNum(toDate('2023-04-01')) - toRelativeDayNum(toDate('2023-01-01'))
```

```response title=Response
┌─minus(toRela⋯3-01-01')))─┐
│                       90 │
└──────────────────────────┘
```
## toRelativeHourNum {#toRelativeHourNum}

Introduced in: v1.1


特定の過去の固定点から経過した時間数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の時間の差を計算することです。例えば、 `toRelativeHourNum(dt1) - toRelativeHourNum(dt2)`です。

**Syntax**

```sql
toRelativeHourNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過時間数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**相対時間数を取得**

```sql title=Query
SELECT toRelativeHourNum(toDateTime('2023-01-01 12:00:00')) - toRelativeHourNum(toDateTime('2023-01-01 00:00:00')) AS hours_difference
```

```response title=Response
┌─hours_difference─┐
│               12 │
└──────────────────┘
```
## toRelativeMinuteNum {#toRelativeMinuteNum}

Introduced in: v1.1


特定の過去の固定点から経過した分数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の分の差を計算することです。例えば、 `toRelativeMinuteNum(dt1) - toRelativeMinuteNum(dt2)`です。

**Syntax**

```sql
toRelativeMinuteNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過分数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**相対分数を取得**

```sql title=Query
SELECT toRelativeMinuteNum(toDateTime('2023-01-01 00:30:00')) - toRelativeMinuteNum(toDateTime('2023-01-01 00:00:00')) AS minutes_difference
```

```response title=Response
┌─minutes_difference─┐
│                 30 │
└────────────────────┘
```
## toRelativeMonthNum {#toRelativeMonthNum}

Introduced in: v1.1


特定の過去の固定点から経過した月数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の月の差を計算することです。例えば、 `toRelativeMonthNum(dt1) - toRelativeMonthNum(dt2)`です。

**Syntax**

```sql
toRelativeMonthNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過月数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**相対月数を取得**

```sql title=Query
SELECT toRelativeMonthNum(toDate('2023-04-01')) - toRelativeMonthNum(toDate('2023-01-01')) AS months_difference
```

```response title=Response
┌─months_difference─┐
│                 3 │
└───────────────────┘
```
## toRelativeQuarterNum {#toRelativeQuarterNum}

Introduced in: v1.1


特定の過去の固定点から経過した四半期数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の四半期の差を計算することです。例えば、 `toRelativeQuarterNum(dt1) - toRelativeQuarterNum(dt2)`です。

**Syntax**

```sql
toRelativeQuarterNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過四半期数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**相対四半期数を取得**

```sql title=Query
SELECT toRelativeQuarterNum(toDate('2023-04-01')) - toRelativeQuarterNum(toDate('2023-01-01')) AS quarters_difference
```

```response title=Response
┌─quarters_difference─┐
│                   1 │
└─────────────────────┘
```
## toRelativeSecondNum {#toRelativeSecondNum}

Introduced in: v1.1


特定の過去の固定点から経過した秒数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の秒の差を計算することです。例えば、 `toRelativeSecondNum(dt1) - toRelativeSecondNum(dt2)`です。

**Syntax**

```sql
toRelativeSecondNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過秒数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**相対秒数を取得**

```sql title=Query
SELECT toRelativeSecondNum(toDateTime('2023-01-01 00:01:00')) - toRelativeSecondNum(toDateTime('2023-01-01 00:00:00')) AS seconds_difference
```

```response title=Response
┌─seconds_difference─┐
│                 60 │
└────────────────────┘
```
## toRelativeWeekNum {#toRelativeWeekNum}

Introduced in: v1.1


特定の過去の固定点から経過した週数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の週の差を計算することです。例えば、 `toRelativeWeekNum(dt1) - toRelativeWeekNum(dt2)`です。

**Syntax**

```sql
toRelativeWeekNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過週数を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**相対週数を取得**

```sql title=Query
SELECT toRelativeWeekNum(toDate('2023-01-08')) - toRelativeWeekNum(toDate('2023-01-01')) AS weeks_difference
```

```response title=Response
┌─weeks_difference─┐
│                1 │
└──────────────────┘
```
## toRelativeYearNum {#toRelativeYearNum}

Introduced in: v1.1


特定の過去の固定点から経過した年数に、日付または時間付き日付を変換します。
正確な時点は実装の詳細であるため、この関数は単独で使用することを意図していません。
この関数の主な目的は、2つの日付または時間付き日付間の年の差を計算することです。例えば、 `toRelativeYearNum(dt1) - toRelativeYearNum(dt2)`です。

**Syntax**

```sql
toRelativeYearNum(date)
```

**Arguments**

- `date` — 日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

固定参照点からの経過年数を返します。 [`UInt16`](/sql-reference/data-types/int-uint)

**Examples**

**相対年数を取得**

```sql title=Query
SELECT toRelativeYearNum('2010-10-01'::DateTime) - toRelativeYearNum('2000-01-01'::DateTime)
```

```response title=Response
┌─minus(toRela⋯ateTime')))─┐
│                       10 │
└──────────────────────────┘
```
## toSecond {#toSecond}

Introduced in: v1.1


`DateTime`または`DateTime64`の値の秒数コンポーネント（0-59）を返します。
        

**Syntax**

```sql
toSecond(datetime)
```

**Arguments**

- `datetime` — 秒を取得するための日付と時間。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

`datetime`の分の秒を返します（0 - 59）。 [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT toSecond(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toSecond(toDateTime('2023-04-21 10:20:30'))─┐
│                                          30 │
└─────────────────────────────────────────────┘
```
## toStartOfDay {#toStartOfDay}

Introduced in: v1.1


時間付き日付を日の開始に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfDay(datetime)
```

**Arguments**

- `datetime` — 切り下げる日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)

**Returned value**

日の開始に切り下げられた時間付き日付を返します。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**日の開始に切り下げる**

```sql title=Query
SELECT toStartOfDay(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfDay(toDateTime('2023-04-21 10:20:30'))─┐
│                             2023-04-21 00:00:00 │
└─────────────────────────────────────────────────┘
```
## toStartOfFifteenMinutes {#toStartOfFifteenMinutes}

Introduced in: v1.1


時間付き日付を15分の間隔の開始に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfFifteenMinutes(datetime)
```

**Arguments**

- `datetime` — 切り下げる日付または時間付き日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

最近の15分間隔の開始に切り下げられた時間付き日付を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**例**

```sql title=Query
SELECT
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:15:00
```
## toStartOfFiveMinutes {#toStartOfFiveMinutes}

Introduced in: v22.6


時間付き日付を最近の5分間隔の開始に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfFiveMinutes(datetime)
```

**Arguments**

- `datetime` — 切り下げる日付付き時間。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

最近の5分間隔の開始に切り下げられた時間付き日付を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**例**

```sql title=Query
SELECT
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```
## toStartOfHour {#toStartOfHour}

Introduced in: v1.1


時間付き日付を時間の開始に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfHour(datetime)
```

**Arguments**

- `datetime` — 切り下げる日付付き時間。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

時間の開始に切り下げられた時間付き日付を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**時間の開始に切り下げる**

```sql title=Query
SELECT
    toStartOfHour(toDateTime('2023-04-21 10:20:30'));
```

```response title=Response
┌─────────────────res─┬─toTypeName(res)─┐
│ 2023-04-21 10:00:00 │ DateTime        │
└─────────────────────┴─────────────────┘
```
## toStartOfISOYear {#toStartOfISOYear}

Introduced in: v1.1


日付または時間付き日付をISO年の初日に切り下げます。これは通常の年とは異なる可能性があります。 [ISO週日](https://en.wikipedia.org/wiki/ISO_week_date)を参照してください。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfISOYear(value)
```

**Arguments**

- `value` — ISO年の初日に切り下げる日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

与えられた日付または時間付き日付のISO年の初日を返します。 [`Date`](/sql-reference/data-types/date)

**Examples**

**ISO年の初日に切り下げる**

```sql title=Query
SELECT toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-01-02 │
└─────────────────────────────────────────────────────┘
```
## toStartOfInterval {#toStartOfInterval}

Introduced in: v20.1


この関数は、`toStartOf*()`関数を一般化し、`toStartOfInterval(date_or_date_with_time, INTERVAL x unit [, time_zone])`という構文を持っています。

例えば、
- `toStartOfInterval(t, INTERVAL 1 YEAR)`は、`toStartOfYear(t)`と同じ結果を返します。
- `toStartOfInterval(t, INTERVAL 1 MONTH)`は、`toStartOfMonth(t)`と同じ結果を返します。
- `toStartOfInterval(t, INTERVAL 1 DAY)`は、`toStartOfDay(t)`と同じ結果を返します。
- `toStartOfInterval(t, INTERVAL 15 MINUTE)`は、`toStartOfFifteenMinutes(t)`と同じ結果を返します。

計算は特定の時点に対して相対的に行われます：

| インターバル  | スタート                |
|---------------|------------------------|
| YEAR          | 年 0                   |
| QUARTER       | 1900 Q1                |
| MONTH         | 1900年1月             |
| WEEK          | 1970年、1週目 (01-05) |
| DAY           | 1970-01-01             |
| HOUR          | (*)                    |
| MINUTE        | 1970-01-01 00:00:00    |
| SECOND        | 1970-01-01 00:00:00    |
| MILLISECOND   | 1970-01-01 00:00:00    |
| MICROSECOND   | 1970-01-01 00:00:00    |
| NANOSECOND    | 1970-01-01 00:00:00    |
(*) 時間インターバルは特別です：計算は常にその日の午前0時（ミッドナイト）に相対して行われます。したがって、1から23の間の時間の値だけが有用です。

`WEEK`が指定された場合、`toStartOfInterval`は週の始まりが月曜日であると仮定します。この動作は、デフォルトで日曜日が週の始まりとなる`toStartOfWeek`関数とは異なります。

第2のオーバーロードは、TimescaleDBの`time_bucket()`関数をエミュレートし、PostgreSQLの`date_bin()`関数をエミュレートします。

**Syntax**

```sql
toStartOfInterval(value, INTERVAL x unit[, time_zone])
toStartOfInterval(value, INTERVAL x unit[, origin[, time_zone]])
```

**Arguments**

- `value` — 切り下げる日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `x` — インターバル長の数。 - `unit` — インターバル単位：YEAR、QUARTER、MONTH、WEEK、DAY、HOUR、MINUTE、SECOND、MILLISECOND、MICROSECOND、NANOSECOND。 - `time_zone` — オプション。文字列としてのタイムゾーン名。 - `origin` — オプション。計算の起点（第2のオーバーロードのみ）。

**Returned value**

入力値を含むインターバルの開始を返します。 [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**基本的なインターバル切り下げ**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-15 14:30:00'), INTERVAL 1 MONTH)
```

```response title=Response
┌─toStartOfInt⋯alMonth(1))─┐
│               2023-01-01 │
└──────────────────────────┘
```

**起点を使用した例**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-01 14:45:00'), INTERVAL 1 MINUTE, toDateTime('2023-01-01 14:35:30'))
```

```response title=Response
┌─toStartOfInt⋯14:35:30'))─┐
│      2023-01-01 14:44:30 │
└──────────────────────────┘
```
## toStartOfMicrosecond {#toStartOfMicrosecond}

Introduced in: v22.6


時間付き日付をマイクロ秒の開始に切り下げます。
    

**Syntax**

```sql
toStartOfMicrosecond(datetime, [timezone])
```

**Arguments**

- `datetime` — 日付と時間。 [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。戻り値のタイムゾーン。指定しない場合、関数は`value`パラメータのタイムゾーンを使用します。 [`String`](/sql-reference/data-types/string)

**Returned value**

サブマイクロ秒を持つ入力値を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**タイムゾーンなしのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64);
```

```response title=Response
┌────toStartOfMicrosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999000 │
└───────────────────────────────┘
```

**タイムゾーンありのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMicrosecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999999000 │
└─────────────────────────────────────────────┘
```
## toStartOfMillisecond {#toStartOfMillisecond}

Introduced in: v22.6


時間付き日付をミリ秒の開始に切り下げます。
    

**Syntax**

```sql
toStartOfMillisecond(datetime, [timezone])
```

**Arguments**

- `datetime` — 日付と時間。 [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。戻り値のタイムゾーン。指定しない場合、関数は`value`パラメータのタイムゾーンを使用します。 [`String`](/sql-reference/data-types/string)

**Returned value**

サブミリ秒を持つ入力値を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**タイムゾーンなしのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64);
```

```response title=Response
┌────toStartOfMillisecond(dt64)─┐
│ 2020-01-01 10:20:30.999000000 │
└───────────────────────────────┘
```

**タイムゾーンありのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMillisecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999000000 │
└─────────────────────────────────────────────┘
```
## toStartOfMinute {#toStartOfMinute}

Introduced in: v1.1


時間付き日付を分の開始に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfMinute(datetime)
```

**Arguments**

- `datetime` — 切り下げる日付付き時間。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

分の開始に切り下げられた時間付き日付を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**分の開始に切り下げる**

```sql title=Query
SELECT
    toStartOfMinute(toDateTime('2023-04-21 10:20:30')),
    toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfMinute(toDateTime('2023-04-21 10:20:30')):           2023-04-21 10:20:00
toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8)): 2023-04-21 10:20:00
```
## toStartOfMonth {#toStartOfMonth}

Introduced in: v1.1


日付または時間付き日付を月の初日に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfMonth(value)
```

**Arguments**

- `value` — 月の初日に切り下げる日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

与えられた日付または時間付き日付の初日を返します。 [`Date`](/sql-reference/data-types/date)

**Examples**

**月の初日に切り下げる**

```sql title=Query
SELECT toStartOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                        2023-04-01 │
└───────────────────────────────────────────────────┘
```
## toStartOfNanosecond {#toStartOfNanosecond}

Introduced in: v22.6


時間付き日付をナノ秒の開始に切り下げます。
        

**Syntax**

```sql
toStartOfNanosecond(datetime, [timezone])
```

**Arguments**

- `datetime` — 日付と時間。 [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。戻り値のタイムゾーン。指定しない場合、関数は`value`パラメータのタイムゾーンを使用します。 [`String`](/sql-reference/data-types/string)

**Returned value**

ナノ秒を持つ入力値を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**タイムゾーンなしのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64);
```

```response title=Response
┌─────toStartOfNanosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999999 │
└───────────────────────────────┘
```

**タイムゾーンありのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfNanosecond(dt64, 'Asia/Istanbul')─┐
│              2020-01-01 12:20:30.999999999 │
└────────────────────────────────────────────┘
```
## toStartOfQuarter {#toStartOfQuarter}

Introduced in: v1.1


日付または時間付き日付を四半期の初日に切り下げます。四半期の初日は1月1日、4月1日、7月1日、または10月1日です。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfQuarter(value)
```

**Arguments**

- `value` — 四半期の初日に切り下げる日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

与えられた日付または時間付き日付の四半期の初日を返します。 [`Date`](/sql-reference/data-types/date)

**Examples**

**四半期の初日に切り下げる**

```sql title=Query
SELECT toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-01 │
└─────────────────────────────────────────────────────┘
```
## toStartOfSecond {#toStartOfSecond}

Introduced in: v20.5


時間付き日付を秒の開始に切り下げます。
    

**Syntax**

```sql
toStartOfSecond(datetime, [timezone])
```

**Arguments**

- `datetime` — サブ秒を切り捨てるための日付と時間。 [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。戻り値のタイムゾーン。指定しない場合、関数は`value`パラメータのタイムゾーンを使用します。 [`String`](/sql-reference/data-types/string)

**Returned value**

サブ秒なしの入力値を返します。 [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**タイムゾーンなしのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64);
```

```response title=Response
┌───toStartOfSecond(dt64)─┐
│ 2020-01-01 10:20:30.000 │
└─────────────────────────┘
```

**タイムゾーンありのクエリ**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfSecond(dt64, 'Asia/Istanbul')─┐
│                2020-01-01 13:20:30.000 │
└────────────────────────────────────────┘
```
## toStartOfTenMinutes {#toStartOfTenMinutes}

Introduced in: v20.1


時間付き日付を最近の10分間隔の開始に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfTenMinutes(datetime)
```

**Arguments**

- `datetime` — 時間付き日付。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

最近の10分間隔の開始に切り下げられた時間付き日付を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**例**

```sql title=Query
SELECT
    toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:10:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```
## toStartOfWeek {#toStartOfWeek}

Introduced in: v20.1


日付または時間付き日付を最近の日曜日または月曜日に切り下げます。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfWeek(datetime[, mode[, timezone]])
```

**Arguments**

- `datetime` — 変換する日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `mode` — `toWeek()`関数で説明されているように、週の初日を決定します。デフォルトは`0`。 [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — 変換に使用するタイムゾーン。指定しない場合、サーバーのタイムゾーンが使用されます。 [`String`](/sql-reference/data-types/string)

**Returned value**

与えられた日付の最近の日曜日または月曜日の日付を返します。モードによって決まります。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**最近の日曜日または月曜日に切り下げる**

```sql title=Query
SELECT
        toStartOfWeek(toDateTime('2023-04-21 10:20:30')), /* a Friday */
        toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* a Friday */
        toStartOfWeek(toDate('2023-04-24')), /* a Monday */
        toStartOfWeek(toDate('2023-04-24'), 1) /* a Monday */
    FORMAT Vertical
```

```response title=Response
Row 1:
    ──────
    toStartOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-17
    toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-17
    toStartOfWeek(toDate('2023-04-24')):                   2023-04-24
    toStartOfWeek(toDate('2023-04-24'), 1):                2023-04-24
```
## toStartOfYear {#toStartOfYear}

Introduced in: v1.1


日付または時間付き日付を年の初日に切り下げます。日付を`Date`オブジェクトとして返します。

:::note
戻り値の型は、[`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions)を設定することで構成できます。
:::
    

**Syntax**

```sql
toStartOfYear(value)
```

**Arguments**

- `value` — 切り下げる日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Returned value**

与えられた日付/時間の年の初日を返します。 [`Date`](/sql-reference/data-types/date)

**Examples**

**年の初日に切り下げる**

```sql title=Query
SELECT toStartOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                       2023-01-01 │
└──────────────────────────────────────────────────┘
```
## toTimeWithFixedDate {#toTimeWithFixedDate}

Introduced in: v1.1


日付または時間付き日付の時間コンポーネントを抽出します。
戻り値は、現在 `1970-01-02` からのオフセットです。
ただし、正確な時点は実装の詳細であり、将来的に変更される可能性があります。

したがって、`toTime`は単独で使用するべきではありません。
この関数の主な目的は、2つの日付または時間付き日付間の時間の差を計算することです。例えば、 `toTime(dt1) - toTime(dt2)`です。

**Syntax**

```sql
toTime(date[, timezone])
```

**Arguments**

- `date` — 時間に変換する日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプション。戻り値のタイムゾーン。 [`String`](/sql-reference/data-types/string)

**Returned value**

固定時点（現在は1970-01-02として選択されています）に対するオフセットの形で、日付または時間付き日付の時間コンポーネントを返します。 [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**2つの日付間の時間差を計算**

```sql title=Query
SELECT toTime('2025-06-15 12:00:00'::DateTime) - toTime('2024-05-10 11:00:00'::DateTime) AS result, toTypeName(result)
```

```response title=Response
┌─result─┬─toTypeName(result)─┐
│   3600 │ Int32              │
└────────┴────────────────────┘
```
## toTimezone {#toTimezone}

Introduced in: v1.1


`DateTime`または`DateTime64`を指定されたタイムゾーンに変換します。
データの内部値（Unix秒数）は変更されません。
値のタイムゾーン属性と値の文字列表現のみが変更されます。
        

**Syntax**

```sql
toTimeZone(datetime, timezone)
```

**Arguments**

- `date` — 変換する値。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — 目標タイムゾーン名。 [`String`](/sql-reference/data-types/string)

**Returned value**

入力と同じタイムスタンプを返しますが、指定されたタイムゾーンとともに。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**使用例**

```sql title=Query
SELECT toDateTime('2019-01-01 00:00:00', 'UTC') AS time_utc,
toTypeName(time_utc) AS type_utc,
toInt32(time_utc) AS int32utc,
toTimeZone(time_utc, 'Asia/Yekaterinburg') AS time_yekat,
toTypeName(time_yekat) AS type_yekat,
toInt32(time_yekat) AS int32yekat,
toTimeZone(time_utc, 'US/Samoa') AS time_samoa,
toTypeName(time_samoa) AS type_samoa,
toInt32(time_samoa) AS int32samoa
FORMAT Vertical;
```

```response title=Response
Row 1:
──────
time_utc:   2019-01-01 00:00:00
type_utc:   DateTime('UTC')
int32utc:   1546300800
time_yekat: 2019-01-01 05:00:00
type_yekat: DateTime('Asia/Yekaterinburg')
int32yekat: 1546300800
time_samoa: 2018-12-31 13:00:00
type_samoa: DateTime('US/Samoa')
int32samoa: 1546300800
```
## toUTCTimestamp {#toUTCTimestamp}

Introduced in: v23.8


日付または時間付き日付を1つのタイムゾーンからUTCタイムゾーンのタイムスタンプに変換します。この関数は、主にApache Sparkや同様のフレームワークとの互換性のために含まれています。
    

**Syntax**

```sql
toUTCTimestamp(datetime, time_zone)
```

**Arguments**

- `datetime` — 日付または時間付き日付の型の定数値または式。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — タイムゾーンを表す定数値または式。 [`String`](/sql-reference/data-types/string)

**Returned value**

UTCタイムゾーンの日付または時間付き日付を返します。 [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**Examples**

**タイムゾーンをUTCに変換**

```sql title=Query
SELECT toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')
```

```response title=Response
┌─toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')─┐
│                                     2023-03-15 16:00:00 │
└─────────────────────────────────────────────────────────┘
```
## toUnixTimestamp {#toUnixTimestamp}

Introduced in: v1.1


`String`、`Date`、または`DateTime`をUnixタイムスタンプ（`1970-01-01 00:00:00 UTC`からの秒数）に変換します。これは、`UInt32`として返されます。
    

**Syntax**

```sql
toUnixTimestamp(date, [timezone])
```

**Arguments**

- `date` — 変換する値。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64) または [`String`](/sql-reference/data-types/string)
- `timezone` — オプション。変換に使用するタイムゾーン。指定しない場合、サーバーのタイムゾーンが使用されます。 [`String`](/sql-reference/data-types/string)

**Returned value**

Unixタイムスタンプを返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**使用例**

```sql title=Query
SELECT
'2017-11-05 08:07:47' AS dt_str,
toUnixTimestamp(dt_str) AS from_str,
toUnixTimestamp(dt_str, 'Asia/Tokyo') AS from_str_tokyo,
toUnixTimestamp(toDateTime(dt_str)) AS from_datetime,
toUnixTimestamp(toDateTime64(dt_str, 0)) AS from_datetime64,
toUnixTimestamp(toDate(dt_str)) AS from_date,
toUnixTimestamp(toDate32(dt_str)) AS from_date32
FORMAT Vertical;
```

```response title=Response
Row 1:
──────
dt_str:          2017-11-05 08:07:47
from_str:        1509869267
from_str_tokyo:  1509836867
from_datetime:   1509869267
from_datetime64: 1509869267
from_date:       1509840000
from_date32:     1509840000
```
## toWeek {#toWeek}

Introduced in: v20.1


この関数は、日付または日時の週番号を返します。`toWeek()`の2引数形式では、週の始まりが日曜日か月曜日か、また、戻り値が`0`から`53`の範囲か、または`1`から`53`の範囲かを指定できます。

[`toISOWeek()`](#toWeek)は、`toWeek(date,3)`に相当する互換性のある関数です。

以下の表は、モード引数の動作を説明しています。

| モード | 週の始まり | 範囲 | 週1は最初の週 ...   |
|--------|-------------|-------|----------------------|
| 0      | 日曜日      | 0-53  | 今年の中の1つの日曜日 |
| 1      | 月曜日      | 0-53  | 今年中に4日以上ある  |
| 2      | 日曜日      | 1-53  | 今年の中の1つの日曜日 |
| 3      | 月曜日      | 1-53  | 今年中に4日以上ある  |
| 4      | 日曜日      | 0-53  | 今年中に4日以上ある  |
| 5      | 月曜日      | 0-53  | 今年の中の1つの月曜日 |
| 6      | 日曜日      | 1-53  | 今年中に4日以上ある  |
| 7      | 月曜日      | 1-53  | 今年の中の1つの月曜日 |
| 8      | 日曜日      | 1-53  | 1月1日を含む         |
| 9      | 月曜日      | 1-53  | 1月1日を含む         |

「今年中に4日以上ある」という意味のモード値に対しては、ISO 8601:1988に従って週が番号付けされています：

- 1月1日を含む週が新年に4日以上ある場合、それは週1です。
- そうでない場合、それは前年の最後の週であり、次の週が週1です。

「1月1日を含む」という意味のモード値に対しては、その週に1月1日がある場合、それは週1です。
新年に何日があったかは関係ありません。たとえ新年に1日しか含まれていなくても、前年の最後の週に1月1日が含まれている場合、その次の週は来年の週1となります。

第1引数は、[`String`](../data-types/string.md)としても指定でき、[`parseDateTime64BestEffort()`](type-conversion-functions.md#parsedatetime64besteffort)でサポートされている形式です。文字列引数のサポートは、特定のサードパーティツールに期待されるMySQLとの互換性のためにのみ存在します。文字列引数のサポートは、将来的に新しいMySQL互換性設定に依存する可能性があり、文字列解析は通常遅いため、使用しないことが推奨されます。

**Syntax**

```sql
toWeek(datetime[, mode[, time_zone]])
```

**Arguments**

- `datetime` — 週番号を取得する日付または時間付き日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)
- `mode` — オプション。 `0`から`9`のモードは、週の初日と週番号の範囲を決定します。デフォルトは`0`。 - `time_zone` — オプション。タイムゾーン。 [`String`](/sql-reference/data-types/string)

**Returned value**

指定されたモードに従って週番号を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**異なるモードでの週番号の取得**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toWeek(date) AS week0, toWeek(date,1) AS week1, toWeek(date,9) AS week9
```

```response title=Response
┌───────date─┬─week0─┬─week1─┬─week9─┐
│ 2016-12-27 │    52 │    52 │     1 │
└────────────┴───────┴───────┴───────┘
```

## toYYYYMM {#toYYYYMM}

導入: v1.1

日付または時刻を含む日付を、年と月の番号を含む `UInt32` 数値に変換します (YYYY * 100 + MM)。第2のオプショナルなタイムゾーン引数を受け付けます。指定した場合、タイムゾーンは文字列定数でなければなりません。

この関数は `YYYYMMDDToDate()` の逆です。
    
**構文**

```sql
toYYYYMM(datetime[, timezone])
```

**引数**

- `datetime` — 変換する日付または時刻を含む日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプショナル。変換のためのタイムゾーン。指定した場合、タイムゾーンは文字列定数でなければなりません。 [`String`](/sql-reference/data-types/string)

**返される値**

年と月の番号を含む UInt32 数値を返します (YYYY * 100 + MM)。 [`UInt32`](/sql-reference/data-types/int-uint)

**例**

**現在の日付を YYYYMM 形式に変換**

```sql title=Query
SELECT toYYYYMM(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMM(now(), 'US/Eastern')─┐
│                        202303 │
└───────────────────────────────┘
```
## toYYYYMMDD {#toYYYYMMDD}

導入: v1.1

日付または時刻を含む日付を、年、月、日を含む `UInt32` 数値に変換します (YYYY * 10000 + MM * 100 + DD)。第2のオプショナルなタイムゾーン引数を受け付けます。指定した場合、タイムゾーンは文字列定数でなければなりません。
    
**構文**

```sql
toYYYYMMDD(datetime[, timezone])
```

**引数**

- `datetime` — 変換する日付または時刻を含む日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプショナル。変換のためのタイムゾーン。指定した場合、タイムゾーンは文字列定数でなければなりません。 [`String`](/sql-reference/data-types/string)

**返される値**

年、月、日を含む `UInt32` 数値を返します (YYYY * 10000 + MM * 100 + DD)。 [`UInt32`](/sql-reference/data-types/int-uint)

**例**

**現在の日付を YYYYMMDD 形式に変換**

```sql title=Query
SELECT toYYYYMMDD(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDD(now(), 'US/Eastern')─┐
│                        20230302 │
└─────────────────────────────────┘
```
## toYYYYMMDDhhmmss {#toYYYYMMDDhhmmss}

導入: v1.1

日付または時刻を含む日付を、年、月、日、時、分、秒を含む `UInt64` 数値に変換します (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss)。第2のオプショナルなタイムゾーン引数を受け付けます。指定した場合、タイムゾーンは文字列定数でなければなりません。
    
**構文**

```sql
toYYYYMMDDhhmmss(datetime[, timezone])
```

**引数**

- `datetime` — 変換する日付または時刻を含む日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — オプショナル。変換のためのタイムゾーン。指定した場合、タイムゾーンは文字列定数でなければなりません。 [`String`](/sql-reference/data-types/string)

**返される値**

年、月、日、時、分、秒を含む `UInt64` 数値を返します (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss)。 [`UInt64`](/sql-reference/data-types/int-uint)

**例**

**現在の日付と時刻を YYYYMMDDhhmmss 形式に変換**

```sql title=Query
SELECT toYYYYMMDDhhmmss(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDDhhmmss(now(), 'US/Eastern')─┐
│                        20230302112209 │
└───────────────────────────────────────┘
```
## toYear {#toYear}

導入: v1.1

`Date` または `DateTime` 値の年成分 (AD) を返します。
    
**構文**

```sql
toYear(datetime)
```

**引数**

- `datetime` — 年を取得する日付または時刻を含む日付。 [`Date`](/sql-reference/data-types/date) または [`Date32`](/sql-reference/data-types/date32) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返される値**

指定した日付または DateTime の年を返します。 [`UInt16`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
SELECT toYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toYear(toDateTime('2023-04-21 10:20:30'))─┐
    │                                     2023  │
    └───────────────────────────────────────────┘
```
## toYearNumSinceEpoch {#toYearNumSinceEpoch}

導入: v25.3

1970年から経過した年数を返します。

**構文**

```sql
toYearNumSinceEpoch(date)
```

**引数**

- `date` — 変換する日付または時刻を含む日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime) または [`DateTime64`](/sql-reference/data-types/datetime64)

**返される値**

正の整数

**例**

**例**

```sql title=Query
SELECT toYearNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
54
```
## toYearWeek {#toYearWeek}

導入: v20.1

日付の年と週を返します。結果の年は、年の最初の週と最後の週に関して、日付引数の年と異なる場合があります。

モード引数は [`toWeek()`](/sql-reference/functions/date-time-functions#toWeek) のモード引数と同様に機能します。

警告: `toYearWeek()` によって返される週番号は、`toWeek()` が返すものと異なる場合があります。`toWeek()` は常に指定された年のコンテキストで週番号を返し、`toWeek()` が `0` を返す場合、`toYearWeek()` は前年の最終週に対応する値を返します。以下の例の `prev_yearWeek` を参照してください。

最初の引数は、[`parseDateTime64BestEffort()`](type-conversion-functions.md#parsedatetime64besteffort) によってサポートされる形式の [`String`](../data-types/string.md) としても指定できます。文字列引数のサポートは、特定の3rdパーティーツールが期待する MySQL との互換性のためにのみ存在します。文字列引数のサポートは、将来的に新しい MySQL 互換性設定に依存するようになり、文字列解析が一般に遅いため、使用しないことをお勧めします。
    
**構文**

```sql
toYearWeek(datetime[, mode[, timezone]])
```

**引数**

- `datetime` — 年と週を取得する日付または時刻を含む日付。 [`Date`](/sql-reference/data-types/date) または [`DateTime`](/sql-reference/data-types/datetime)
- `mode` — オプショナル。`0` から `9` までのモードが、週の最初の日と週番号の範囲を決定します。デフォルトは `0`。 - `timezone` — オプショナル。タイムゾーン。 [`String`](/sql-reference/data-types/string)

**返される値**

年と週番号を組み合わせた整数値を返します。 [`UInt32`](/sql-reference/data-types/int-uint)

**例**

**異なるモードでの年-週の組み合わせを取得**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toYearWeek(date) AS yearWeek0, toYearWeek(date,1) AS yearWeek1, toYearWeek(date,9) AS yearWeek9, toYearWeek(toDate('2022-01-01')) AS prev_yearWeek
```

```response title=Response
┌───────date─┬─yearWeek0─┬─yearWeek1─┬─yearWeek9─┬─prev_yearWeek─┐
│ 2016-12-27 │    201652 │    201652 │    201701 │        202152 │
└────────────┴───────────┴───────────┴───────────┴───────────────┘
```
## today {#today}

導入: v1.1

クエリ解析の瞬間の現在の日付を返します。 `toDate(now())` と同じです。

**構文**

```sql
today()
```

**引数**

- なし。
**返される値**

現在の日付を返します。 [`Date`](/sql-reference/data-types/date)

**例**

**使用例**

```sql title=Query
SELECT today() AS today, curdate() AS curdate, current_date() AS current_date FORMAT Pretty
```

```response title=Response
┏━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━┓
┃      today ┃    curdate ┃ current_date ┃
┡━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━┩
│ 2025-03-03 │ 2025-03-03 │   2025-03-03 │
└────────────┴────────────┴──────────────┘
```
## yesterday {#yesterday}

導入: v1.1

引数を受け取らず、クエリ解析のいずれかの瞬間の昨日の日付を返します。
    
**構文**

```sql
yesterday()
```

**引数**

- なし。
**返される値**

昨日の日付を返します。 [`Date`](/sql-reference/data-types/date)

**例**

**昨日の日付を取得**

```sql title=Query
SELECT yesterday();
SELECT today() - 1;
```

```response title=Response
┌─yesterday()─┐
│  2025-06-09 │
└─────────────┘
┌─minus(today(), 1)─┐
│        2025-06-09 │
└───────────────────┘
```
