---
description: 'uniqTheta 関数に関するドキュメント'
sidebar_label: 'uniqTheta'
slug: /sql-reference/functions/uniqtheta-functions
title: 'uniqTheta 関数'
doc_type: 'reference'
---

# uniqTheta 関数 \{#uniqtheta-functions\}

uniqTheta 関数は 2 つの uniqThetaSketch オブジェクトに対して、∪ / ∩ / ×（和集合 / 共通部分 / 補集合）などの集合演算を行い、その結果を含む新しい uniqThetaSketch オブジェクトを返します。

uniqThetaSketch オブジェクトは、集約関数 uniqTheta の -State バリアントによって構築されます。

UniqThetaSketch は、集合の要素数を近似的に表現するためのデータ構造です。
RoaringBitmap の詳細については、[Theta Sketch Framework](https://datasketches.apache.org/docs/Theta/ThetaSketchFramework.html) を参照してください。

## uniqThetaUnion \{#uniqthetaunion\}

2 つの uniqThetaSketch オブジェクトの和集合（集合演算 ∪）を計算し、その結果として新しい uniqThetaSketch オブジェクトを返します。

```sql
uniqThetaUnion(uniqThetaSketch,uniqThetaSketch)
```

**引数**

* `uniqThetaSketch` – uniqThetaSketch オブジェクト。

**例**

```sql
SELECT finalizeAggregation(uniqThetaUnion(a, b)) AS a_union_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[1,2]) AS a, arrayReduce('uniqThetaState',[2,3,4]) AS b );
```

```text
┌─a_union_b─┬─a_cardinality─┬─b_cardinality─┐
│         4 │             2 │             3 │
└───────────┴───────────────┴───────────────┘
```

## uniqThetaIntersect \{#uniqthetaintersect\}

2 つの uniqThetaSketch オブジェクト間の積集合（∩）を計算し、その結果として新しい uniqThetaSketch を返します。

```sql
uniqThetaIntersect(uniqThetaSketch,uniqThetaSketch)
```

**引数**

* `uniqThetaSketch` — uniqThetaSketchオブジェクト。

**例**

```sql
SELECT finalizeAggregation(uniqThetaIntersect(a, b)) AS a_intersect_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[1,2]) AS a, arrayReduce('uniqThetaState',[2,3,4]) AS b );
```

```text
┌─a_intersect_b─┬─a_cardinality─┬─b_cardinality─┐
│             1 │             2 │             3 │
└───────────────┴───────────────┴───────────────┘
```

## uniqThetaNot \{#uniqthetanot\}

2 つの uniqThetaSketch オブジェクトに対して a&#95;not&#95;b（集合演算の差）を計算し、その結果として新しい uniqThetaSketch を生成します。

```sql
uniqThetaNot(uniqThetaSketch,uniqThetaSketch)
```

**引数**

* `uniqThetaSketch` – uniqThetaSketch オブジェクト。

**例**

```sql
SELECT finalizeAggregation(uniqThetaNot(a, b)) AS a_not_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[2,3,4]) AS a, arrayReduce('uniqThetaState',[1,2]) AS b );
```

```text
┌─a_not_b─┬─a_cardinality─┬─b_cardinality─┐
│       2 │             3 │             2 │
└─────────┴───────────────┴───────────────┘
```

**関連項目**

* [uniqThetaSketch](/sql-reference/aggregate-functions/reference/uniqthetasketch)

{/* 
  以下のタグ内の内容は、ドキュメントフレームワークのビルド時に
  system.functions から自動生成されたドキュメントで置き換えられます。タグを変更したり削除したりしないでください。
  詳しくは https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md を参照してください。
  */ }

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
