---
'description': 'Documentation for distance functions'
'sidebar_label': '距離'
'slug': '/sql-reference/functions/distance-functions'
'title': '距離関数'
'keywords':
- 'distance functions'
- 'norms'
- 'distances'
- 'vectors'
'doc_type': 'reference'
---


# 距離関数

<!-- 
The inner content of the tags below are replaced at doc framework build time with 
docs generated from system.functions. Please do not modify or remove the tags.
See: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->

<!--AUTOGENERATED_START-->
## L1Distance {#L1Distance}

Introduced in: v21.11


2つの点の間の距離を計算します（ベクトルの要素は座標です）`L1` 空間における（1ノルム ([タクシー幾何学](https://en.wikipedia.org/wiki/Taxicab_geometry) 距離)).
    

**構文**

```sql
L1Distance(vector1, vector2)
```

**引数**

- `vector1` — 最初のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — 2番目のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)


**返される値**

1ノルムの距離を返します。 [`UInt32`](/sql-reference/data-types/int-uint) または [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT L1Distance((1, 2), (2, 3))
```

```response title=Response
┌─L1Distance((1, 2), (2, 3))─┐
│                          2 │
└────────────────────────────┘
```



## L1Norm {#L1Norm}

Introduced in: v21.11


ベクトルの絶対要素の合計を計算します。
    

**構文**

```sql
L1Norm(vector)
```

**引数**

- `vector` — 数値の値を持つベクトルまたはタプル。 [`Array(T)`](/sql-reference/data-types/array) または [`Tuple(T)`](/sql-reference/data-types/tuple)


**返される値**

L1ノルムまたは [タクシー幾何学](https://en.wikipedia.org/wiki/Taxicab_geometry) 距離を返します。 [`UInt*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**例**

**基本的な使用法**

```sql title=Query
SELECT L1Norm((1, 2))
```

```response title=Response
┌─L1Norm((1, 2))─┐
│              3 │
└────────────────┘
```



## L1Normalize {#L1Normalize}

Introduced in: v21.11


指定されたベクトルの単位ベクトルを計算します（タプルの要素は座標です）`L1` 空間において ([タクシー幾何学](https://en.wikipedia.org/wiki/Taxicab_geometry)).
    

**構文**

```sql
L1Normalize(tuple)
```

**引数**

- `tuple` — 数値の値を持つタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple)


**返される値**

単位ベクトルを返します。 [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用法**

```sql title=Query
SELECT L1Normalize((1, 2))
```

```response title=Response
┌─L1Normalize((1, 2))─────────────────────┐
│ (0.3333333333333333,0.6666666666666666) │
└─────────────────────────────────────────┘
```



## L2Distance {#L2Distance}

Introduced in: v21.11


2つの点の間の距離を計算します（ベクトルの要素は座標です）ユークリッド空間における ([ユークリッド距離](https://en.wikipedia.org/wiki/Euclidean_distance)).
    

**構文**

```sql
L2Distance(vector1, vector2)
```

**引数**

- `vector1` — 最初のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — 2番目のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)


**返される値**

2ノルムの距離を返します。 [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT L2Distance((1, 2), (2, 3))
```

```response title=Response
┌─L2Distance((1, 2), (2, 3))─┐
│         1.4142135623730951 │
└────────────────────────────┘
```



## L2DistanceTransposed {#L2DistanceTransposed}

Introduced in: v25.10


ユークリッド空間における2つの点の間の近似距離を計算します（ベクトルの値は座標です） ([ユークリッド距離](https://en.wikipedia.org/wiki/Euclidean_distance)).    

**構文**

```sql
L2DistanceTransposed(vector1, vector2, p)
```

**引数**

- `vectors` — ベクトル。 [`QBit(T, UInt64)`](/sql-reference/data-types/qbit)
- `reference` — 参照ベクトル。 [`Array(T)`](/sql-reference/data-types/array)
- `p` — 距離計算に使用する各ベクトル要素からのビット数（要素ビット幅の1から）。 量子化レベルは精度と速度のトレードオフを制御します。 ビット数が少ないほど、I/Oと計算が高速になり、精度は低下しますが、ビット数が多いほど精度が向上し、パフォーマンスが低下します。 [`UInt`](/sql-reference/data-types/int-uint)


**返される値**

近似2ノルムの距離を返します。 [`Float`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
CREATE TABLE qbit (id UInt32, vec QBit(Float64, 2)) ENGINE = Memory;
INSERT INTO qbit VALUES (1, [0, 1]);
SELECT L2DistanceTransposed(vec, array(1.0, 2.0), 16) FROM qbit;"
```

```response title=Response
┌─L2DistanceTransposed([0, 1], [1.0, 2.0], 16)─┐
│                           1.4142135623730951 │
└──────────────────────────────────────────────┘
```



## L2Norm {#L2Norm}

Introduced in: v21.11


ベクトル要素の平方の合計の平方根を計算します。
    

**構文**

```sql
L2Norm(vector)
```

**引数**

- `vector` — 数値の値を持つベクトルまたはタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)


**返される値**

L2ノルムまたは [ユークリッド距離](https://en.wikipedia.org/wiki/Euclidean_distance)を返します。 [`UInt*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT L2Norm((1, 2))
```

```response title=Response
┌───L2Norm((1, 2))─┐
│ 2.23606797749979 │
└──────────────────┘
```



## L2Normalize {#L2Normalize}

Introduced in: v21.11


指定されたベクトルの単位ベクトルを計算します（タプルの要素は座標です）ユークリッド空間において（[ユークリッド距離](https://en.wikipedia.org/wiki/Euclidean_distance)を使用して）。
    

**構文**

```sql
L2Normalize(tuple)
```

**引数**

- `tuple` — 数値の値を持つタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple)


**返される値**

単位ベクトルを返します。 [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用法**

```sql title=Query
SELECT L2Normalize((3, 4))
```

```response title=Response
┌─L2Normalize((3, 4))─┐
│ (0.6,0.8)           │
└─────────────────────┘
```



## L2SquaredDistance {#L2SquaredDistance}

Introduced in: v22.7


2つのベクトルの対応する要素間の差の平方の合計を計算します。
    

**構文**

```sql
L2SquaredDistance(vector1, vector2)
```

**引数**

- `vector1` — 最初のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — 2番目のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)


**返される値**

2つのベクトル間の対応する要素の差の平方の合計を返します。 [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT L2SquaredDistance([1, 2, 3], [0, 0, 0])
```

```response title=Response
┌─L2SquaredDis⋯ [0, 0, 0])─┐
│                       14 │
└──────────────────────────┘
```



## L2SquaredNorm {#L2SquaredNorm}

Introduced in: v22.7


ベクトル要素の平方根の平方の合計を計算します（[`L2Norm`](#L2Norm)）の平方。
    

**構文**

```sql
L2SquaredNorm(vector)
```

**引数**

- `vector` — 数値の値を持つベクトルまたはタプル。 [`Array(T)`](/sql-reference/data-types/array) または [`Tuple(T)`](/sql-reference/data-types/tuple)


**返される値**

L2ノルムの平方を返します。 [`UInt*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float) または [`Decimal`](/sql-reference/data-types/decimal)

**例**

**基本的な使用法**

```sql title=Query
SELECT L2SquaredNorm((1, 2))
```

```response title=Response
┌─L2SquaredNorm((1, 2))─┐
│                     5 │
└───────────────────────┘
```



## LinfDistance {#LinfDistance}

Introduced in: v21.11


2つの点の間の距離を計算します（ベクトルの要素は座標です） `L_{inf}` 空間における ([最大ノルム](https://en.wikipedia.org/wiki/Norm_(mathematics)#Maximum_norm_(special_case_of:_infinity_norm,_uniform_norm,_or_supremum_norm))).
    

**構文**

```sql
LinfDistance(vector1, vector2)
```

**引数**

- `vector1` — 最初のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — 2番目のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)


**返される値**

無限ノルムの距離を返します。 [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT LinfDistance((1, 2), (2, 3))
```

```response title=Response
┌─LinfDistance((1, 2), (2, 3))─┐
│                            1 │
└──────────────────────────────┘
```



## LinfNorm {#LinfNorm}

Introduced in: v21.11


ベクトルの絶対要素の最大を計算します。
    

**構文**

```sql
LinfNorm(vector)
```

**引数**

- `vector` — 数値の値を持つベクトルまたはタプル。 [`Array(T)`](/sql-reference/data-types/array) または [`Tuple(T)`](/sql-reference/data-types/tuple)


**返される値**

Linfノルムまたは最大絶対値を返します。 [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT LinfNorm((1, -2))
```

```response title=Response
┌─LinfNorm((1, -2))─┐
│                 2 │
└───────────────────┘
```



## LinfNormalize {#LinfNormalize}

Introduced in: v21.11


指定されたベクトルの単位ベクトルを計算します（タプルの要素は座標です） `L_{inf}` 空間において（[最大ノルム](https://en.wikipedia.org/wiki/Norm_(mathematics)#Maximum_norm_(special_case_of:_infinity_norm,_uniform_norm,_or_supremum_norm)を使用して）。
    

**構文**

```sql
LinfNormalize(tuple)
```

**引数**

- `tuple` — 数値の値を持つタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple)


**返される値**

単位ベクトルを返します。 [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用法**

```sql title=Query
SELECT LinfNormalize((3, 4))
```

```response title=Response
┌─LinfNormalize((3, 4))─┐
│ (0.75,1)              │
└───────────────────────┘
```



## LpDistance {#LpDistance}

Introduced in: v21.11


2つの点の間の距離を計算します（ベクトルの要素は座標です） `Lp` 空間における ([p-norm距離](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm)).
    

**構文**

```sql
LpDistance(vector1, vector2, p)
```

**引数**

- `vector1` — 最初のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — 2番目のベクトル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `p` — 力。 可能な値: `[1; inf)`の実数。 [`UInt*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

p-norm距離を返します。 [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT LpDistance((1, 2), (2, 3), 3)
```

```response title=Response
┌─LpDistance((1, 2), (2, 3), 3)─┐
│            1.2599210498948732 │
└───────────────────────────────┘
```



## LpNorm {#LpNorm}

Introduced in: v21.11


ベクトルのpノルムを計算します。すなわち、要素の絶対値のp乗の合計のp根です。

特別なケース:
- p=1のとき、それはL1Norm（マンハッタン距離）に相当します。
- p=2のとき、それはL2Norm（ユークリッド距離）に相当します。
- p=∞のとき、それはLinfNorm（最大ノルム）に相当します。
    

**構文**

```sql
LpNorm(vector, p)
```

**引数**

- `vector` — 数値の値を持つベクトルまたはタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `p` — 力。 可能な値は `[1; inf)` の範囲の実数です。 [`UInt*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

[Lpノルム](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm)を返します。 [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT LpNorm((1, -2), 2)
```

```response title=Response
┌─LpNorm((1, -2), 2)─┐
│   2.23606797749979 │
└────────────────────┘
```



## LpNormalize {#LpNormalize}

Introduced in: v21.11


指定されたベクトルの単位ベクトルを計算します（タプルの要素は座標です） `Lp` 空間において（[p-norm](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm)を使用して）。
        

**構文**

```sql
LpNormalize(tuple, p)
```

**引数**

- `tuple` — 数値の値を持つタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple)
- `p` — 力。 可能な値は `[1; inf)` の範囲の任意の数です。 [`UInt*`](/sql-reference/data-types/int-uint) または [`Float*`](/sql-reference/data-types/float)


**返される値**

単位ベクトルを返します。 [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用法**

```sql title=Query
SELECT LpNormalize((3, 4), 5)
```

```response title=Response
┌─LpNormalize((3, 4), 5)──────────────────┐
│ (0.7187302630182624,0.9583070173576831) │
└─────────────────────────────────────────┘
```



## cosineDistance {#cosineDistance}

Introduced in: v1.1


2つのベクトル間のコサイン距離を計算します（タプルの要素は座標です）。返される値が小さいほど、ベクトルはより類似しています。
    

**構文**

```sql
cosineDistance(vector1, vector2)
```

**引数**

- `vector1` — 最初のタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — 2番目のタプル。 [`Tuple(T)`](/sql-reference/data-types/tuple) または [`Array(T)`](/sql-reference/data-types/array)


**返される値**

2つのベクトル間の角度のコサインを1から引いた値を返します。 [`Float64`](/sql-reference/data-types/float)

**例**

**基本的な使用法**

```sql title=Query
SELECT cosineDistance((1, 2), (2, 3));
```

```response title=Response
┌─cosineDistance((1, 2), (2, 3))─┐
│           0.007722123286332261 │
└────────────────────────────────┘
```



<!--AUTOGENERATED_END-->
