---
description: 'Nullable 値を扱う関数に関するドキュメント'
sidebar_label: 'Nullable'
slug: /sql-reference/functions/functions-for-nulls
title: 'Nullable 値を扱う関数'
keywords: ['nullable', 'functions']
doc_type: 'reference'
---

# NULL 可能な値を扱う関数 \\{#functions-for-working-with-nullable-values\\}

{/* 
  以下のタグ内のコンテンツは、ドキュメントフレームワークのビルド時に
  system.functions から生成されるドキュメントで置き換えられます。タグを変更または削除しないでください。
  詳細は次を参照してください: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## assumeNotNull \\{#assumeNotNull\\}

導入バージョン: v1.1

型 [`Nullable`](../data-types/nullable.md) の値に対して、対応する非 `Nullable` 型の値を返します。
元の値が `NULL` の場合、不定の結果が返されることがあります。

関連項目: 関数 [`ifNull`](#ifNull)、[`coalesce`](#coalesce)。

**構文**

```sql
assumeNotNull(x)
```

**引数**

* `x` — 任意の `Nullable` 型の元の値。[`Nullable(T)`](/sql-reference/data-types/nullable)

**戻り値**

元の値が `NULL` でない場合は非 `Nullable` 型の値を返し、入力値が `NULL` の場合は任意の値を返します。[`Any`](/sql-reference/data-types)

**例**

**使用例**

```sql title=Query
CREATE TABLE t_null (x Int8, y Nullable(Int8))
ENGINE=MergeTree()
ORDER BY x;

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT assumeNotNull(y) FROM table;
SELECT toTypeName(assumeNotNull(y)) FROM t_null;
```

```response title=Response
┌─assumeNotNull(y)─┐
│                0 │
│                3 │
└──────────────────┘
┌─toTypeName(assumeNotNull(y))─┐
│ Int8                         │
│ Int8                         │
└──────────────────────────────┘
```

## coalesce \\{#coalesce\\}

導入バージョン: v1.1

最も左側にある `NULL` ではない引数を返します。

**構文**

```sql
coalesce(x[, y, ...])
```

**引数**

* `x[, y, ...]` — 任意個数の非複合型パラメータ。すべてのパラメータは互いに互換性のあるデータ型である必要があります。[`Any`](/sql-reference/data-types)

**戻り値**

最初の `NULL` ではない引数を返します。すべての引数が `NULL` の場合は `NULL` を返します。[`Any`](/sql-reference/data-types) または [`NULL`](/sql-reference/syntax#null)

**例**

**使用例**

```sql title=Query
-- 顧客への複数の連絡方法を指定可能な連絡先リストを考えます。

CREATE TABLE aBook
(
    name String,
    mail Nullable(String),
    phone Nullable(String),
    telegram Nullable(UInt32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO aBook VALUES ('client 1', NULL, '123-45-67', 123), ('client 2', NULL, NULL, NULL);

-- mailフィールドとphoneフィールドはString型ですが、telegramフィールドはUInt32型のため、String型への変換が必要です。

-- 連絡先リストから顧客の利用可能な最初の連絡方法を取得します

SELECT name, coalesce(mail, phone, CAST(telegram,'Nullable(String)')) FROM aBook;
```

```response title=Response
┌─name─────┬─coalesce(mail, phone, CAST(telegram, 'Nullable(String)'))─┐
│ client 1 │ 123-45-67                                                 │
│ client 2 │ ᴺᵁᴸᴸ                                                      │
└──────────┴───────────────────────────────────────────────────────────┘
```

## firstNonDefault \\{#firstNonDefault\\}

導入バージョン: v25.9

引数の中から、デフォルト値ではない最初の値を返します。

**構文**

```sql
```

**引数**

* `arg1` — 確認する最初の引数 - `arg2` — 確認する2番目の引数 - `...` — 確認する追加の引数

**返り値**

結果の型は、すべての引数のスーパータイプになります

**例**

**整数**

```sql title=Query
SELECT firstNonDefault(0, 1, 2)
```

```response title=Response
1
```

**文字列**

```sql title=Query
SELECT firstNonDefault('', 'hello', 'world')
```

```response title=Response
'hello'
```

**NULL 値**

```sql title=Query
SELECT firstNonDefault(NULL, 0 :: UInt8, 1 :: UInt8)
```

```response title=Response
1
```

**NULL 許容ゼロ**

```sql title=Query
SELECT firstNonDefault(NULL, 0 :: Nullable(UInt8), 1 :: Nullable(UInt8))
```

```response title=Response
0
```

## ifNull \\{#ifNull\\}

導入バージョン: v1.1

最初の引数が `NULL` の場合に、代わりの値を返します。

**構文**

```sql
ifNull(x, alt)
```

**引数**

* `x` — `NULL` かどうかをチェックする値。[`Any`](/sql-reference/data-types)
* `alt` — `x` が `NULL` の場合に関数が返す値。[`Any`](/sql-reference/data-types)

**返される値**

`x` が `NULL` でない場合は `x` の値を返し、それ以外の場合は `alt` を返します。[`Any`](/sql-reference/data-types)

**例**

**使用例**

```sql title=Query
SELECT ifNull('a', 'b'), ifNull(NULL, 'b');
```

```response title=Response
┌─ifNull('a', 'b')─┬─ifNull(NULL, 'b')─┐
│ a                │ b                 │
└──────────────────┴───────────────────┘
```

## isNotNull \\{#isNotNull\\}

導入: v1.1

引数が `NULL` でないかどうかを判定します。

関連項目: 演算子 [`IS NOT NULL`](/sql-reference/operators#is_not_null)。

**構文**

```sql
isNotNull(x)
```

**引数**

* `x` — 非複合データ型の値。[`Any`](/sql-reference/data-types)

**戻り値**

`x` が `NULL` でない場合は `1`、それ以外の場合は `0` を返します。[`UInt8`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT x FROM t_null WHERE isNotNull(y);
```

```response title=Response
┌─x─┐
│ 2 │
└───┘
```

## isNull \\{#isNull\\}

導入バージョン: v1.1

引数が `NULL` かどうかをチェックします。

関連項目: 演算子 [`IS NULL`](/sql-reference/operators#is_null)。

**構文**

```sql
isNull(x)
```

**引数**

* `x` — 非複合データ型の値。[`Any`](/sql-reference/data-types)

**戻り値**

`x` が `NULL` の場合は `1` を、それ以外の場合は `0` を返します。[`UInt8`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT x FROM t_null WHERE isNull(y);
```

```response title=Response
┌─x─┐
│ 1 │
└───┘
```

## isNullable \\{#isNullable\\}

導入: v22.7

引数のデータ型が `Nullable`（`NULL` 値を許容する型）かどうかを判定します。

**構文**

```sql
isNullable(x)
```

**引数**

* `x` — 任意のデータ型の値。[`Any`](/sql-reference/data-types)

**戻り値**

`x` が `Nullable` データ型であれば `1` を返し、それ以外の場合は `0` を返します。[`UInt8`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=Query
CREATE TABLE tab (
    ordinary_col UInt32,
    nullable_col Nullable(UInt32)
)
ENGINE = MergeTree
ORDER BY tuple();
INSERT INTO tab (ordinary_col, nullable_col) VALUES (1,1), (2, 2), (3,3);
SELECT isNullable(ordinary_col), isNullable(nullable_col) FROM tab;
```

```response title=Response
┌───isNullable(ordinary_col)──┬───isNullable(nullable_col)──┐
│                           0 │                           1 │
│                           0 │                           1 │
│                           0 │                           1 │
└─────────────────────────────┴─────────────────────────────┘
```

## isZeroOrNull \\{#isZeroOrNull\\}

導入バージョン: v20.3

引数がゼロ（`0`）または `NULL` かどうかをチェックします。

**構文**

```sql
isZeroOrNull(x)
```

**引数**

* `x` — 数値型の値。[`UInt`](/sql-reference/data-types/int-uint)

**返される値**

`x` が `NULL` またはゼロに等しい場合は `1` を返し、それ以外の場合は `0` を返します。[`UInt8/16/32/64`](/sql-reference/data-types/int-uint) または [`Float32/Float64`](/sql-reference/data-types/float)

**例**

**使用例**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 0), (3, 3);

SELECT x FROM t_null WHERE isZeroOrNull(y);
```

```response title=Response
┌─x─┐
│ 1 │
│ 2 │
└───┘
```

## nullIf \\{#nullIf\\}

導入バージョン: v1.1

2つの引数が等しい場合、`NULL` を返します。

**構文**

```sql
nullIf(x, y)
```

**引数**

* `x` — 1つ目の値。[`Any`](/sql-reference/data-types)
* `y` — 2つ目の値。[`Any`](/sql-reference/data-types)

**戻り値**

両方の引数が同じ値の場合は `NULL` を返し、それ以外の場合は 1つ目の引数を返します。[`NULL`](/sql-reference/syntax#null) または [`Nullable(x)`](/sql-reference/data-types/nullable)

**例**

**使用例**

```sql title=Query
SELECT nullIf(1, 1), nullIf(1, 2);
```

```response title=Response
┌─nullIf(1, 1)─┬─nullIf(1, 2)─┐
│         ᴺᵁᴸᴸ │            1 │
└──────────────┴──────────────┘
```

## toNullable \\{#toNullable\\}

導入バージョン: v1.1

指定された引数の型を `Nullable` 型に変換します。

**構文**

```sql
toNullable(x)
```

**引数**

* `x` — 任意の非複合型の値。[`Any`](/sql-reference/data-types)

**戻り値**

入力値と同じ値を返すが、その型は `Nullable` となる。[`Nullable(Any)`](/sql-reference/data-types/nullable)

**例**

**使用例**

```sql title=Query
SELECT toTypeName(10), toTypeName(toNullable(10));
```

```response title=Response
┌─toTypeName(10)─┬─toTypeName(toNullable(10))─┐
│ UInt8          │ Nullable(UInt8)            │
└────────────────┴────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
