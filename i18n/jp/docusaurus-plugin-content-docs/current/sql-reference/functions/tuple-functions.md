---
description: "タプル関数のドキュメント"
sidebar_label: "タプル"
slug: /sql-reference/functions/tuple-functions
title: "タプル関数"
doc_type: "reference"
---

:::note
以下のドキュメントは `system.functions` システムテーブルから生成されています。
:::

<!--
以下のタグ内のコンテンツは、ドキュメントフレームワークのビルド時に system.functions から生成されたドキュメントに置き換えられます。タグを変更または削除しないでください。
参照: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->


<!--AUTOGENERATED_START-->

## flattenTuple {#flattenTuple}

導入バージョン: v22.6

名前付きおよびネストされたタプルを平坦化します。
返されるタプルの要素は、入力タプルのパスです。

**構文**

```sql
flattenTuple(input)
```

**引数**

- `input` — 平坦化する名前付きおよびネストされたタプル。[`Tuple(n1 T1[, n2 T2, ... ])`](/sql-reference/data-types/tuple)

**戻り値**

元の入力からのパスを要素とする出力タプルを返します。[`Tuple(T)`](/sql-reference/data-types/tuple)

**例**

**使用例**

```sql title=クエリ
CREATE TABLE tab(t Tuple(a UInt32, b Tuple(c String, d UInt32))) ENGINE = MergeTree ORDER BY tuple();
INSERT INTO tab VALUES ((3, ('c', 4)));

SELECT flattenTuple(t) FROM tab;
```

```response title=レスポンス
┌─flattenTuple(t)┐
│ (3, 'c', 4)    │
└────────────────┘
```


## tuple {#tuple}

導入バージョン: v

入力引数をグループ化してタプルを返します。

型T1、T2、...を持つカラムC1、C2、...に対して、それらの名前が一意でクォートなしの識別子として扱える場合は、これらのカラムを含む名前付きTuple(C1 T1, C2 T2, ...)型のタプルを返します。そうでない場合はTuple(T1, T2, ...)が返されます。この関数の実行にコストはかかりません。
タプルは通常、IN演算子の引数の中間値として、またはラムダ関数の仮引数リストを作成するために使用されます。タプルはテーブルに書き込むことはできません。

この関数は演算子`(x, y, ...)`を実装しています。

**構文**

```sql

```

**引数**

- なし

**戻り値**

**例**

**典型例**

```sql title=クエリ
SELECT tuple(1, 2)
```

```response title=レスポンス
(1,2)
```


## tupleConcat {#tupleConcat}

導入バージョン: v23.8

引数として渡されたタプルを結合します。

**構文**

```sql
tupleConcat(tuple1[, tuple2, [...]])
```

**引数**

- `tupleN` — Tuple型の任意の数の引数。[`Tuple(T)`](/sql-reference/data-types/tuple)

**戻り値**

入力タプルのすべての要素を含むタプルを返します。[`Tuple(T)`](/sql-reference/data-types/tuple)

**例**

**使用例**

```sql title=Query
SELECT tupleConcat((1, 2), ('a',), (true, false))
```

```response title=Response
(1, 2, 'a', true, false)
```


## tupleDivide {#tupleDivide}

導入バージョン: v21.11

同じサイズの2つのタプルの対応する要素の除算を計算します。

:::note
ゼロ除算は `inf` を返します。
:::

**構文**

```sql
tupleDivide(t1, t2)
```

**引数**

- `t1` — 1つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple) または [`Tuple(Float*)`](/sql-reference/data-types/tuple) または [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — 2つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple) または [`Tuple(Float*)`](/sql-reference/data-types/tuple) または [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

除算結果を含むタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple) または [`Tuple(Float*)`](/sql-reference/data-types/tuple) または [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleDivide((1, 2), (2, 3))
```

```response title=レスポンス
(0.5, 0.6666666666666666)
```


## tupleDivideByNumber {#tupleDivideByNumber}

導入バージョン: v21.11

タプルの全要素を数値で除算した結果を返します。

:::note
ゼロ除算は `inf` を返します。
:::

**構文**

```sql
tupleDivideByNumber(tuple, number)
```

**引数**

- `tuple` — 除算するタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `number` — 除数。[`(U)Int*`](/sql-reference/data-types/int-uint)、[`Float*`](/sql-reference/data-types/float)、または[`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

除算された要素を持つタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleDivideByNumber((1, 2), 0.5)
```

```response title=レスポンス
(2, 4)
```


## tupleElement {#tupleElement}

導入バージョン: v1.1

インデックスまたは名前を使用してタプルから要素を抽出します。

インデックスによるアクセスの場合、1から始まる数値インデックスを指定します。
名前によるアクセスの場合、要素名を文字列として指定できます（名前付きタプルでのみ動作します）。

オプションの第3引数では、アクセスする要素が存在しない場合に例外をスローする代わりに返されるデフォルト値を指定できます。
すべての引数は定数である必要があります。

この関数は実行時コストがゼロであり、演算子`x.index`および`x.name`を実装しています。

**構文**

```sql
tupleElement(tuple, index|name[, default_value])
```

**引数**

- `tuple` — タプルまたはタプルの配列。[`Tuple(T)`](/sql-reference/data-types/tuple)または[`Array(Tuple(T))`](/sql-reference/data-types/array)
- `index` — 1から始まる列インデックス。[`const UInt8/16/32/64`](/sql-reference/data-types/int-uint)
- `name` — 要素の名前。[`const String`](/sql-reference/data-types/string)
- `default_value` — インデックスが範囲外の場合または要素が存在しない場合に返されるデフォルト値。[`Any`](/sql-reference/data-types)

**戻り値**

指定されたインデックスまたは名前の要素を返します。[`Any`](/sql-reference/data-types)

**例**

**インデックスアクセス**

```sql title=クエリ
SELECT tupleElement((1, 'hello'), 2)
```

```response title=レスポンス
hello
```

**テーブルを使用した名前付きタプル**

```sql title=クエリ
CREATE TABLE example (values Tuple(name String, age UInt32)) ENGINE = Memory;
INSERT INTO example VALUES (('Alice', 30));
SELECT tupleElement(values, 'name') FROM example;
```

```response title=レスポンス
Alice
```

**デフォルト値を使用**

```sql title=クエリ
SELECT tupleElement((1, 2), 5, 'not_found')
```

```response title=レスポンス
not_found
```

**演算子構文**

```sql title=クエリ
SELECT (1, 'hello').2
```

```response title=レスポンス
hello
```


## tupleHammingDistance {#tupleHammingDistance}

導入バージョン: v21.1

同じサイズの2つのタプル間の[ハミング距離](https://en.wikipedia.org/wiki/Hamming_distance)を返します。

:::note
結果の型は、入力タプルの要素数に基づいて、[算術関数](../../sql-reference/functions/arithmetic-functions.md)と同じ方法で決定されます。

```sql
SELECT
    toTypeName(tupleHammingDistance(tuple(0), tuple(0))) AS t1,
    toTypeName(tupleHammingDistance((0, 0), (0, 0))) AS t2,
    toTypeName(tupleHammingDistance((0, 0, 0), (0, 0, 0))) AS t3,
    toTypeName(tupleHammingDistance((0, 0, 0, 0), (0, 0, 0, 0))) AS t4,
    toTypeName(tupleHammingDistance((0, 0, 0, 0, 0), (0, 0, 0, 0, 0))) AS t5
```

```text
┌─t1────┬─t2─────┬─t3─────┬─t4─────┬─t5─────┐
│ UInt8 │ UInt16 │ UInt32 │ UInt64 │ UInt64 │
└───────┴────────┴────────┴────────┴────────┘
```

:::

**構文**

```sql
tupleHammingDistance(t1, t2)
```

**引数**

- `t1` — 1番目のタプル。[`Tuple(*)`](/sql-reference/data-types/tuple)
- `t2` — 2番目のタプル。[`Tuple(*)`](/sql-reference/data-types/tuple)

**戻り値**

ハミング距離を返します。[`UInt8/16/32/64`](/sql-reference/data-types/int-uint)

**例**

**使用例**

```sql title=クエリ
SELECT tupleHammingDistance((1, 2, 3), (3, 2, 1))
```

```response title=レスポンス
2
```

**MinHashを使用した準重複文字列の検出**

```sql title=クエリ
SELECT tupleHammingDistance(wordShingleMinHash(string), wordShingleMinHashCaseInsensitive(string)) FROM (SELECT 'ClickHouse is a column-oriented database management system for online analytical processing of queries.' AS string)
```

```response title=レスポンス
2
```


## tupleIntDiv {#tupleIntDiv}

導入バージョン: v23.8

分子のタプルと分母のタプルを用いて整数除算を実行します。商のタプルを返します。
いずれかのタプルに非整数要素が含まれている場合、各非整数の分子または除数を最も近い整数に丸めて結果が計算されます。
0による除算はエラーが発生します。

**構文**

```sql
tupleIntDiv(tuple_num, tuple_div)
```

**引数**

- `tuple_num` — 分子の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_div` — 除数の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

商のタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用法**

```sql title=クエリ
SELECT tupleIntDiv((15, 10, 5), (5, 5, 5))
```

```response title=レスポンス
(3, 2, 1)
```

**小数を使用する場合**

```sql title=クエリ
SELECT tupleIntDiv((15, 10, 5), (5.5, 5.5, 5.5))
```

```response title=レスポンス
(2, 1, 0)
```


## tupleIntDivByNumber {#tupleIntDivByNumber}

導入バージョン: v23.8

分子のタプルを指定された除数で整数除算し、商のタプルを返します。
入力パラメータのいずれかに非整数要素が含まれている場合、各非整数の分子または除数を最も近い整数に丸めて結果が計算されます。
0による除算の場合はエラーが発生します。

**構文**

```sql
tupleIntDivByNumber(tuple_num, div)
```

**引数**

- `tuple_num` — 分子の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — 除数の値。[`(U)Int*`](/sql-reference/data-types/int-uint)、[`Float*`](/sql-reference/data-types/float)、または[`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

商のタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleIntDivByNumber((15, 10, 5), 5)
```

```response title=レスポンス
(3, 2, 1)
```

**小数を使用した場合**

```sql title=クエリ
SELECT tupleIntDivByNumber((15.2, 10.7, 5.5), 5.8)
```

```response title=レスポンス
(2, 1, 0)
```


## tupleIntDivOrZero {#tupleIntDivOrZero}

導入バージョン: v23.8

[`tupleIntDiv`](#tupleIntDiv)と同様に、分子のタプルと分母のタプルの整数除算を実行し、商のタプルを返します。
0による除算の場合、例外をスローせずに商として0を返します。
いずれかのタプルに非整数要素が含まれている場合、各非整数の分子または除数を最も近い整数に丸めて結果が計算されます。

**構文**

```sql
tupleIntDivOrZero(tuple_num, tuple_div)
```

**引数**

- `tuple_num` — 分子の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_div` — 除数の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

商のタプルを返します。除数が0の場合、その商は0を返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**除数がゼロの場合**

```sql title=Query
SELECT tupleIntDivOrZero((5, 10, 15), (0, 0, 0))
```

```response title=Response
(0, 0, 0)
```


## tupleIntDivOrZeroByNumber {#tupleIntDivOrZeroByNumber}

導入バージョン: v23.8

[`tupleIntDivByNumber`](#tupleIntDivByNumber)と同様に、分子のタプルを指定された除数で整数除算し、商のタプルを返します。
ゼロ除数に対してエラーをスローせず、商をゼロとして返します。
タプルまたは除数に非整数要素が含まれている場合、各非整数の分子または除数を最も近い整数に丸めて結果が計算されます。

**構文**

```sql
tupleIntDivOrZeroByNumber(tuple_num, div)
```

**引数**

- `tuple_num` — 分子の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — 除数の値。[`(U)Int*`](/sql-reference/data-types/int-uint)、[`Float*`](/sql-reference/data-types/float)、または[`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

除数が`0`の場合の商を`0`とした商のタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用法**

```sql title=クエリ
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 5)
```

```response title=レスポンス
(3, 2, 1)
```

**ゼロ除数の場合**

```sql title=クエリ
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 0)
```

```response title=レスポンス
(0, 0, 0)
```


## tupleMinus {#tupleMinus}

導入バージョン: v21.11

同じサイズの2つのタプルの対応する要素間の差分を計算します。

**構文**

```sql
tupleMinus(t1, t2)
```

**エイリアス**: `vectorDifference`

**引数**

- `t1` — 1つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — 2つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

減算結果を含むタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleMinus((1, 2), (2, 3))
```

```response title=レスポンス
(-1, -1)
```


## tupleModulo {#tupleModulo}

導入バージョン: v23.8

2つのタプルの除算演算の剰余（モジュロ）のタプルを返します。

**構文**

```sql
tupleModulo(tuple_num, tuple_mod)
```

**引数**

- `tuple_num` — 被除数の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_mod` — 除数の値のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

除算の剰余のタプルを返します。ゼロ除算の場合はエラーがスローされます。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleModulo((15, 10, 5), (5, 3, 2))
```

```response title=レスポンス
(0, 1, 1)
```


## tupleModuloByNumber {#tupleModuloByNumber}

導入バージョン: v23.8

タプルと指定された除数による除算演算の剰余(余り)のタプルを返します。

**構文**

```sql
tupleModuloByNumber(tuple_num, div)
```

**引数**

- `tuple_num` — 分子要素のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — 除数の値。[`(U)Int*`](/sql-reference/data-types/int-uint)、[`Float*`](/sql-reference/data-types/float)、または[`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

除算の剰余のタプルを返します。ゼロ除算の場合はエラーがスローされます。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleModuloByNumber((15, 10, 5), 2)
```

```response title=レスポンス
(1, 0, 1)
```


## tupleMultiply {#tupleMultiply}

導入バージョン: v21.11

同じサイズの2つのタプルの対応する要素の積を計算します。

**構文**

```sql
tupleMultiply(t1, t2)
```

**引数**

- `t1` — 1つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — 2つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

乗算結果を含むタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleMultiply((1, 2), (2, 3))
```

```response title=レスポンス
(2, 6)
```


## tupleMultiplyByNumber {#tupleMultiplyByNumber}

導入バージョン: v21.11

すべての要素を数値で乗算したタプルを返します。

**構文**

```sql
tupleMultiplyByNumber(tuple, number)
```

**引数**

- `tuple` — 乗算対象のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `number` — 乗数。[`(U)Int*`](/sql-reference/data-types/int-uint)、[`Float*`](/sql-reference/data-types/float)、または[`Decimal`](/sql-reference/data-types/decimal)

**戻り値**

乗算された要素を持つタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleMultiplyByNumber((1, 2), -2.1)
```

```response title=レスポンス
(-2.1, -4.2)
```


## tupleNames {#tupleNames}

導入バージョン: v

タプルをカラム名の配列に変換します。`Tuple(a T, b T, ...)` 形式のタプルに対して、タプルの名前付きカラムを表す文字列の配列を返します。タプルの要素に明示的な名前がない場合は、インデックスがカラム名として使用されます。

**構文**

```sql

```

**引数**

- なし

**戻り値**

**例**

**典型例**

```sql title=クエリ
SELECT tupleNames(tuple(1 as a, 2 as b))
```

```response title=レスポンス
['a','b']
```


## tupleNegate {#tupleNegate}

導入バージョン: v21.11

タプル要素の符号を反転します。

**構文**

```sql
tupleNegate(t)
```

**引数**

- `t` — 符号反転するタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

符号反転した結果のタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tupleNegate((1, 2))
```

```response title=レスポンス
(-1, -2)
```


## tuplePlus {#tuplePlus}

導入バージョン: v21.11

同じサイズの2つのタプルの対応する要素の合計を計算します。

**構文**

```sql
tuplePlus(t1, t2)
```

**エイリアス**: `vectorSum`

**引数**

- `t1` — 1つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — 2つ目のタプル。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**戻り値**

入力タプル引数の対応する要素の合計を含むタプルを返します。[`Tuple((U)Int*)`](/sql-reference/data-types/tuple)、[`Tuple(Float*)`](/sql-reference/data-types/tuple)、または[`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**例**

**基本的な使用方法**

```sql title=クエリ
SELECT tuplePlus((1, 2), (2, 3))
```

```response title=レスポンス
(3, 5)
```


## tupleToNameValuePairs {#tupleToNameValuePairs}

導入バージョン: v21.9

タプルを `(name, value)` ペアの配列に変換します。
例えば、タプル `Tuple(n1 T1, n2 T2, ...)` は `Array(Tuple('n1', T1), Tuple('n2', T2), ...)` に変換されます。
タプル内のすべての値は同じ型である必要があります。

**構文**

```sql
tupleToNameValuePairs(tuple)
```

**引数**

- `tuple` — 任意の型の値を持つ名前付きタプル。[`Tuple(n1 T1[, n2 T2, ...])`](/sql-reference/data-types/tuple)

**戻り値**

`(name, value)` ペアの配列を返します。[`Array(Tuple(String, T))`](/sql-reference/data-types/array)

**例**

**名前付きタプル**

```sql title=Query
SELECT tupleToNameValuePairs(tuple(1593 AS user_ID, 2502 AS session_ID))
```

```response title=Response
[('1', 1593), ('2', 2502)]
```

**名前なしタプル**

```sql title=Query
SELECT tupleToNameValuePairs(tuple(3, 2, 1))
```

```response title=Response
[('1', 3), ('2', 2), ('3', 1)]
```

<!--AUTOGENERATED_END-->


## untuple {#untuple}

呼び出し位置で[tuple](/sql-reference/data-types/tuple)要素の構文的な置換を実行します。

結果列の名前は実装依存であり、変更される可能性があります。`untuple`の後に特定の列名を想定しないでください。

**構文**

```sql
untuple(x)
```

`EXCEPT`式を使用して、クエリ結果から列をスキップできます。

**引数**

- `x` — `tuple`関数、列、または要素のタプル。[Tuple](../data-types/tuple.md)。

**戻り値**

- なし。

**例**

入力テーブル:

```text
┌─key─┬─v1─┬─v2─┬─v3─┬─v4─┬─v5─┬─v6────────┐
│   1 │ 10 │ 20 │ 40 │ 30 │ 15 │ (33,'ab') │
│   2 │ 25 │ 65 │ 70 │ 40 │  6 │ (44,'cd') │
│   3 │ 57 │ 30 │ 20 │ 10 │  5 │ (55,'ef') │
│   4 │ 55 │ 12 │  7 │ 80 │ 90 │ (66,'gh') │
│   5 │ 30 │ 50 │ 70 │ 25 │ 55 │ (77,'kl') │
└─────┴────┴────┴────┴────┴────┴───────────┘
```

`Tuple`型の列を`untuple`関数のパラメータとして使用する例:

クエリ:

```sql
SELECT untuple(v6) FROM kv;
```

結果:

```text
┌─_ut_1─┬─_ut_2─┐
│    33 │ ab    │
│    44 │ cd    │
│    55 │ ef    │
│    66 │ gh    │
│    77 │ kl    │
└───────┴───────┘
```

`EXCEPT`式を使用する例:

クエリ:

```sql
SELECT untuple((* EXCEPT (v2, v3),)) FROM kv;
```

結果:

```text
┌─key─┬─v1─┬─v4─┬─v5─┬─v6────────┐
│   1 │ 10 │ 30 │ 15 │ (33,'ab') │
│   2 │ 25 │ 40 │  6 │ (44,'cd') │
│   3 │ 57 │ 10 │  5 │ (55,'ef') │
│   4 │ 55 │ 80 │ 90 │ (66,'gh') │
│   5 │ 30 │ 25 │ 55 │ (77,'kl') │
└─────┴────┴────┴────┴───────────┘
```


## 距離関数 {#distance-functions}

サポートされているすべての関数については、[距離関数のドキュメント](../../sql-reference/functions/distance-functions.md)を参照してください。
