---
description: 'テーブル関数のドキュメント'
sidebar_label: 'テーブル関数'
sidebar_position: 1
slug: /sql-reference/table-functions/
title: 'テーブル関数'
doc_type: 'リファレンス'
---



# テーブル関数

テーブル関数は、テーブルを生成するための関数です。



{/*AUTOGENERATED_START*/ }

| ページ                                                                                    | 説明                                                                                                                                                                                                        |
| -------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [azureBlobStorage](/sql-reference/table-functions/azureBlobStorage)                    | Azure Blob Storage 内のファイルを選択や挿入するためのテーブルのようなインターフェースを提供します。`s3` 関数と同様です。                                                                                                                                  |
| [azureBlobStorageCluster](/sql-reference/table-functions/azureBlobStorageCluster)      | Azure Blob Storage 上のファイルを、指定したクラスタ内の多数のノードで並列処理できるようにします。                                                                                                                                                |
| [clusterAllReplicas](/sql-reference/table-functions/cluster)                           | `remote_servers` セクションで設定されたクラスタのすべてのシャードに対して、Distributed テーブルを作成することなくアクセスできるようにします。                                                                                                                     |
| [deltaLake](/sql-reference/table-functions/deltalake)                                  | Amazon S3 上の Delta Lake テーブルに対して、読み取り専用のテーブル形式インターフェイスを提供します。                                                                                                                                             |
| [deltaLakeCluster](/sql-reference/table-functions/deltalakeCluster)                    | これは deltaLake テーブル関数を拡張したものです。                                                                                                                                                                            |
| [dictionary](/sql-reference/table-functions/dictionary)                                | 辞書データを ClickHouse のテーブルとして表示します。Dictionary エンジンと同様に動作します。                                                                                                                                                 |
| [executable](/engines/table-functions/executable)                                      | `executable` テーブル関数は、行を **stdout**（標準出力）に出力するスクリプト内で定義したユーザー定義関数 (UDF) の出力に基づいてテーブルを作成します。                                                                                                                |
| [file](/sql-reference/table-functions/file)                                            | ファイルに対して `SELECT` や `INSERT` を実行するための、テーブル同様のインターフェースを提供するテーブルエンジンです。`s3()` テーブル関数と同様に動作します。ローカルファイルを扱う場合は `file()` を使用し、S3、GCS、MinIO などのオブジェクトストレージ内のバケットを扱う場合は `s3()` を使用します。                           |
| [fileCluster](/sql-reference/table-functions/fileCluster)                              | 指定されたパスに一致するファイルを、クラスター内の複数ノードで同時に処理できるようにします。イニシエーターはワーカーノードへの接続を確立し、ファイルパス内のグロブを展開して、ファイル読み取りタスクをワーカーノードに委譲します。各ワーカーノードは、処理すべき次のファイルを取得するためにイニシエーターへ問い合わせ、すべてのタスクが完了するまで（すべてのファイルが読み込まれるまで）この処理を繰り返します。 |
| [format](/sql-reference/table-functions/format)                                        | 指定された入力フォーマットに従って、引数からデータをパースします。structure 引数が指定されていない場合は、データから抽出されます。                                                                                                                                    |
| [gcs](/sql-reference/table-functions/gcs)                                              | Google Cloud Storage からデータを `SELECT` および `INSERT` できるテーブル形式のインターフェースを提供します。`Storage Object User` IAM ロールが必要です。                                                                                            |
| [fuzzQuery](/sql-reference/table-functions/fuzzQuery)                                  | 指定されたクエリ文字列にランダムな変動を加えます。                                                                                                                                                                                 |
| [fuzzJSON](/sql-reference/table-functions/fuzzJSON)                                    | JSON 文字列にランダムな変動を加えます。                                                                                                                                                                                    |
| [generateRandom](/sql-reference/table-functions/generate)                              | 指定されたスキーマに基づいてランダムなデータを生成します。そのデータでテストテーブルを埋めることができます。すべてのデータ型がサポートされているわけではありません。                                                                                                                        |
| [mergeTreeProjection](/sql-reference/table-functions/mergeTreeProjection)              | MergeTree テーブル内の特定のプロジェクションの内容を表します。内部状態の確認に使用できます。                                                                                                                                                       |
| [mergeTreeIndex](/sql-reference/table-functions/mergeTreeIndex)                        | MergeTree テーブルのインデックスファイルおよび marks ファイルの内容を表します。テーブル内部の構造を調査する目的で利用できます。                                                                                                                                  |
| [hdfs](/sql-reference/table-functions/hdfs)                                            | HDFS 上のファイルからテーブルを作成するテーブル関数です。このテーブル関数は `url` および `file` テーブル関数に似ています。                                                                                                                                   |
| [hdfsCluster](/sql-reference/table-functions/hdfsCluster)                              | 指定したクラスター内の多数のノードから、HDFS 上のファイルを並列処理できるようにします。                                                                                                                                                            |
| [hudi](/sql-reference/table-functions/hudi)                                            | Amazon S3 上の Apache Hudi テーブルに対する読み取り専用のテーブルライクなインターフェイスを提供します。                                                                                                                                           |
| [ytsaurus](/sql-reference/table-functions/ytsaurus)                                    | テーブル関数を使用すると、YTsaurus クラスターからデータを読み込むことができます。                                                                                                                                                             |
| [hudiCluster テーブル関数](/sql-reference/table-functions/hudiCluster)                       | `hudi` テーブル関数の拡張機能。指定したクラスタ内の多数のノードで並列に、Amazon S3 上の Apache Hudi テーブルのファイルを処理できます。                                                                                                                        |
| [iceberg](/sql-reference/table-functions/iceberg)                                      | Amazon S3、Azure、HDFS、またはローカルストレージに保存された Apache Iceberg テーブルに対して、読み取り専用のテーブル形式インターフェイスを提供します。                                                                                                              |
| [paimon](/sql-reference/table-functions/paimon)                                        | Amazon S3、Azure、HDFS、またはローカルに保存された Apache Paimon テーブルに対する読み取り専用のテーブル形式インターフェイスを提供します。                                                                                                                     |
| [icebergCluster](/sql-reference/table-functions/icebergCluster)                        | 指定したクラスター内の複数ノードから Apache Iceberg のファイルを並列処理できる、iceberg テーブル関数の拡張です。                                                                                                                                      |
| [paimonCluster](/sql-reference/table-functions/paimonCluster)                          | 指定したクラスター内の複数ノード上で Apache Paimon のファイルを並列処理できるようにする、`paimon` テーブル関数の拡張です。                                                                                                                                 |
| [input](/sql-reference/table-functions/input)                                          | サーバーに送信された所定の構造のデータを、別の構造を持つテーブルに効率的に変換して挿入するためのテーブル関数。                                                                                                                                                   |
| [jdbc](/sql-reference/table-functions/jdbc)                                            | JDBC ドライバーを介して接続されたテーブルを返します。                                                                                                                                                                             |
| [merge](/sql-reference/table-functions/merge)                                          | 一時的な Merge テーブルを作成します。テーブル構造は、基になるテーブルの列の和集合を取り、その列型から共通の型を導出することで決定されます。                                                                                                                                 |
| [mongodb](/sql-reference/table-functions/mongodb)                                      | リモート MongoDB サーバーに保存されているデータに対して `SELECT` クエリを実行できるようにします。                                                                                                                                                |
| [mysql](/sql-reference/table-functions/mysql)                                          | リモートの MySQL サーバーに保存されているデータに対して `SELECT` および `INSERT` クエリを実行できるようにします。                                                                                                                                    |
| [null](/sql-reference/table-functions/null)                                            | 指定した構造を持つ一時テーブルを、Null テーブルエンジンで作成します。この関数は、テストの記述やデモ用に便利です。                                                                                                                                               |
| [timeSeriesMetrics](/sql-reference/table-functions/timeSeriesMetrics)                  | timeSeriesMetrics は、テーブルエンジンに TimeSeries エンジンを使用するテーブル `db_name.time_series_table` が使用するメトリクステーブルを返します。                                                                                                   |
| [timeSeriesSelector](/sql-reference/table-functions/timeSeriesSelector)                | セレクターでフィルタリングされた TimeSeries テーブルから、指定した時間範囲内のタイムスタンプを持つ時系列データを読み取ります。                                                                                                                                     |
| [timeSeriesTags](/sql-reference/table-functions/timeSeriesTags)                        | timeSeriesTags テーブル関数は、テーブルエンジンが TimeSeries エンジンである `db_name.time_series_table` テーブルで使用される tags テーブルを返します。                                                                                                |
| [prometheusQueryRange](/sql-reference/table-functions/prometheusQueryRange)            | TimeSeries テーブルのデータを使用して Prometheus のクエリを評価します。                                                                                                                                                           |
| [zeros](/sql-reference/table-functions/zeros)                                          | テスト目的で多数の行を最速で生成するために使用されます。`system.zeros` および `system.zeros_mt` システムテーブルに類似しています。                                                                                                                        |
| [timeSeriesData](/sql-reference/table-functions/timeSeriesData)                        | timeSeriesData は、テーブルエンジンに TimeSeries を使用するテーブル `db_name.time_series_table` で利用されるデータテーブルを返します。                                                                                                           |
| [numbers](/sql-reference/table-functions/numbers)                                      | 指定した整数を含む単一の `number` 列を持つテーブルを返します。                                                                                                                                                                      |
| [prometheusQuery](/sql-reference/table-functions/prometheusQuery)                      | TimeSeries テーブル内のデータを使用して、Prometheus のクエリを評価します。                                                                                                                                                          |
| [generate&#95;series (generateSeries)](/sql-reference/table-functions/generate_series) | `generate_series` という単一の列 (UInt64) を持つテーブルを返します。この列には、`start` から `stop` までの両端を含む整数が格納されます。                                                                                                                |
| [odbc](/sql-reference/table-functions/odbc)                                            | ODBC 経由で接続されているテーブルを返します。                                                                                                                                                                                 |
| [postgresql](/sql-reference/table-functions/postgresql)                                | リモート PostgreSQL サーバー上に保存されたデータに対して、`SELECT` および `INSERT` クエリを実行できるようにします。                                                                                                                                 |
| [redis](/sql-reference/table-functions/redis)                                          | このテーブル関数を使用すると、ClickHouse と Redis を統合できます。                                                                                                                                                                |
| [remote, remoteSecure](/sql-reference/table-functions/remote)                          | テーブル関数 `remote` は、分散テーブルを作成することなく、その場でリモートサーバーへアクセスできます。テーブル関数 `remoteSecure` は `remote` と同様ですが、セキュアな接続を利用します。                                                                                            |
| [S3 テーブル関数](/sql-reference/table-functions/s3)                                         | Amazon S3 と Google Cloud Storage 上のファイルを選択/挿入するためのテーブル形式のインターフェイスを提供します。このテーブル関数は `hdfs` 関数に似ていますが、S3 固有の機能を備えています。                                                                                       |
| [s3Cluster](/sql-reference/table-functions/s3Cluster)                                  | `S3` テーブル関数を拡張したもので、指定したクラスター内の複数ノードで Amazon S3 と Google Cloud Storage 上のファイルを並列処理できます。                                                                                                                   |
| [sqlite](/sql-reference/table-functions/sqlite)                                        | SQLite データベースに保存されたデータに対してクエリを実行できるようにします。                                                                                                                                                                |
| [arrowFlight](/sql-reference/table-functions/arrowflight)                              | Apache Arrow Flight サーバーで公開されているデータに対してクエリを実行できるようにします。                                                                                                                                                   |
| [url](/sql-reference/table-functions/url)                                              | 指定された `format` と `structure` に従って、`URL` からテーブルを作成します                                                                                                                                                      |
| [urlCluster](/sql-reference/table-functions/urlCluster)                                | 指定したクラスター内の複数ノードで、URL から取得したファイルを並列処理できるようにします。                                                                                                                                                           |
| [view](/sql-reference/table-functions/view)                                            | サブクエリをテーブルとして扱えるようにします。この関数はビューを実現します。                                                                                                                                                                    |
| [values](/sql-reference/table-functions/values)                                        | 列を値で埋める一時ストレージを作成します。                                                                                                                                                                                     |
| [loop](/sql-reference/table-functions/loop)                                            | ClickHouse の `loop` テーブル関数は、クエリ結果を無限ループで繰り返し返すために使用されます。                                                                                                                                                  |

{/*AUTOGENERATED_END*/ }





## 使用方法

テーブル関数は、`SELECT` クエリの [`FROM`](../../sql-reference/statements/select/from.md)
句で使用できます。たとえば、ローカルマシン上のファイルに対して `file` テーブル関数を使用して
データを `SELECT` できます。

```bash
echo "1, 2, 3" > example.csv
```

```text
./clickhouse client
:) SELECT * FROM file('example.csv')
┌─c1─┬─c2─┬─c3─┐
│  1 │  2 │  3 │
└────┴────┴────┘
```

現在のクエリ内でのみ利用可能な一時テーブルを作成するために、テーブル関数を使用することもできます。例えば次のようになります。

```sql title="Query"
SELECT * FROM generateSeries(1,5);
```

```response title="Response"
┌─generate_series─┐
│               1 │
│               2 │
│               3 │
│               4 │
│               5 │
└─────────────────┘
```

クエリの実行が完了すると、そのテーブルは削除されます。

テーブル関数は、次の構文でテーブルを作成する手段として使用できます。

```sql
CREATE TABLE [IF NOT EXISTS] [db.]table_name AS table_function()
```

例えば：

```sql title="Query"
CREATE TABLE series AS generateSeries(1, 5);
SELECT * FROM series;
```

```response
┌─generate_series─┐
│               1 │
│               2 │
│               3 │
│               4 │
│               5 │
└─────────────────┘
```

最後に、テーブル関数はテーブルにデータを `INSERT` するためにも使用できます。たとえば、
前の例で作成したテーブルの内容を、再び `file` テーブル関数を使用してディスク上のファイルに書き出すことができます。

```sql
INSERT INTO FUNCTION file('numbers.csv', 'CSV') SELECT * FROM series;
```

```bash
cat numbers.csv
1
2
3
4
5
```

:::note
[allow&#95;ddl](/operations/settings/settings#allow_ddl) 設定が無効になっている場合、テーブル関数は使用できません。
:::
