---
description: '最近の非同期ジョブ（例: 読み込み中のテーブルに対するジョブ）に関する情報と状態を含むシステムテーブル。このテーブルにはジョブごとに 1 行が格納されます。'
keywords: ['system テーブル', 'asynchronous_loader']
slug: /operations/system-tables/asynchronous_loader
title: 'system.asynchronous_loader'
doc_type: 'reference'
---

import SystemTableCloud from '@site/docs/_snippets/_system_table_cloud.md';


# system.asynchronous&#95;loader

<SystemTableCloud />

最近の非同期ジョブ（例: テーブルのロード）に関する情報およびステータスを含みます。このテーブルには、各ジョブごとに 1 行が格納されます。このテーブルの情報を可視化するためのツールとして `utils/async_loader_graph` が用意されています。

例:

```sql
SELECT *
FROM system.asynchronous_loader
LIMIT 1
FORMAT Vertical
```

カラム:

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }

保留中のジョブは、次のいずれかの状態になっている可能性があります:

* `is_executing` (`UInt8`) - ジョブが現在ワーカーによって実行中である。
* `is_blocked` (`UInt8`) - ジョブが依存関係の完了を待機している。
* `is_ready` (`UInt8`) - ジョブが実行可能な状態で、ワーカーを待機している。
* `elapsed` (`Float64`) - 実行開始から経過した秒数。ジョブが開始されていなければ 0。ジョブが完了していれば合計実行時間。

すべてのジョブには関連付けられたプールがあり、そのプール内で開始されます。各プールには固定の優先度と、変更可能な最大ワーカー数があります。優先度が高い（`priority` 値が低い）ジョブが先に実行されます。少なくとも 1 つの高優先度ジョブが実行中または実行可能である間は、低優先度ジョブは開始されません。ジョブの優先度は（下げることはできませんが）引き上げることができ、ジョブを優先順位付けすることで行います。たとえば、あるテーブルのロードや起動に関するジョブは、そのテーブルを必要とするクエリが到着した場合に優先されます。ジョブの実行中に優先順位付けを行うことも可能ですが、その場合でもジョブは `execution_pool` から新たに割り当てられた `pool` へは移動しません。ジョブは優先度逆転を避けるために、新しいジョブを作成する際に `pool` を使用します。すでに開始されたジョブは、高優先度ジョブによってプリエンプトされることはなく、開始後は常に完了まで実行されます。

* `pool_id` (`UInt64`) - 現在そのジョブに割り当てられているプールの ID。

* `pool` (`String`) - `pool_id` のプール名。

* `priority` (`Int64`) - `pool_id` のプールの優先度。

* `execution_pool_id` (`UInt64`) - ジョブが実行されているプールの ID。実行開始前に最初に割り当てられたプールと同一。

* `execution_pool` (`String`) - `execution_pool_id` のプール名。

* `execution_priority` (`Int64`) - `execution_pool_id` のプールの優先度。

* `ready_seqno` (`Nullable(UInt64)`) - 実行可能なジョブに対して非 Null。ワーカーは、そのプールの ready キューから次に実行するジョブを取得します。複数の実行可能ジョブがある場合、`ready_seqno` の値が最も小さいジョブが選択されます。

* `waiters` (`UInt64`) - このジョブを待機しているスレッド数。

* `exception` (`Nullable(String)`) - 失敗またはキャンセルされたジョブに対して非 Null。クエリ実行中に発生したエラーメッセージ、またはこのジョブのキャンセルの原因となったエラーと、それに至る依存関係の失敗によるジョブ名のチェーンを保持します。

ジョブのライフタイム中の時刻情報:

* `schedule_time` (`DateTime64`) - ジョブが作成され、（通常はすべての依存関係とともに）実行するようスケジュールされた時刻。
* `enqueue_time` (`Nullable(DateTime64)`) - ジョブが実行可能になり、そのプールの ready キューにエンキューされた時刻。ジョブがまだ実行可能でなければ Null。
* `start_time` (`Nullable(DateTime64)`) - ワーカーが ready キューからジョブをデキューし、その実行を開始した時刻。ジョブがまだ開始されていなければ Null。
* `finish_time` (`Nullable(DateTime64)`) - ジョブの実行が完了した時刻。ジョブがまだ完了していなければ Null。
