---
description: '最近の非同期ジョブ（例：読み込み中のテーブルなど）に関する情報とステータスを含むシステムテーブル。このテーブルには各ジョブにつき1行が格納される。'
keywords: ['system table', 'asynchronous_loader']
slug: /operations/system-tables/asynchronous_loader
title: 'system.asynchronous_loader'
doc_type: 'reference'
---

import SystemTableCloud from '@site/docs/_snippets/_system_table_cloud.md';


# system.asynchronous_loader

<SystemTableCloud />

最近の非同期ジョブ(テーブルの読み込みなど)に関する情報とステータスを格納します。このテーブルには各ジョブごとに1行が含まれます。このテーブルの情報を可視化するためのツール`utils/async_loader_graph`が用意されています。

例:

```sql
SELECT *
FROM system.asynchronous_loader
LIMIT 1
FORMAT Vertical
```

カラム:

<!--AUTOGENERATED_START-->

- `job` ([String](../../sql-reference/data-types/)) — ジョブ名(一意でない場合があります)。
- `job_id` ([UInt64](../../sql-reference/data-types/)) — ジョブの一意なID。
- `dependencies` ([Array(UInt64)](../../sql-reference/data-types/)) — このジョブの前に完了すべきジョブのIDのリスト。
- `dependencies_left` ([UInt64](../../sql-reference/data-types/)) — 完了待ちの依存関係の現在の数。
- `status` ([Enum8('PENDING' = 0, 'OK' = 1, 'FAILED' = 2, 'CANCELED' = 3)](../../sql-reference/data-types/)) — ジョブの現在の読み込みステータス: PENDING: 読み込みジョブはまだ開始されていません。OK: 読み込みジョブが実行され、成功しました。FAILED: 読み込みジョブが実行され、失敗しました。CANCELED: 削除または依存関係の失敗により、読み込みジョブは実行されません。
- `is_executing` ([UInt8](../../sql-reference/data-types/)) — ジョブが現在ワーカーによって実行中です。
- `is_blocked` ([UInt8](../../sql-reference/data-types/)) — ジョブが依存関係の完了を待機中です。
- `is_ready` ([UInt8](../../sql-reference/data-types/)) — ジョブが実行準備完了で、ワーカーを待機中です。
- `elapsed` ([Float64](../../sql-reference/data-types/)) — 実行開始からの経過秒数。ジョブが開始されていない場合はゼロ。ジョブが完了している場合は合計実行時間。
- `pool_id` ([UInt64](../../sql-reference/data-types/)) — ジョブに現在割り当てられているプールのID。
- `pool` ([String](../../sql-reference/data-types/)) — `pool_id`プールの名前。
- `priority` ([Int64](../../sql-reference/data-types/)) — `pool_id`プールの優先度。
- `execution_pool_id` ([UInt64](../../sql-reference/data-types/)) — ジョブが実行されるプールのID。実行開始前は最初に割り当てられたプールと同じです。
- `execution_pool` ([String](../../sql-reference/data-types/)) — `execution_pool_id`プールの名前。
- `execution_priority` ([Int64](../../sql-reference/data-types/)) — `execution_pool_id`プールの優先度。
- `ready_seqno` ([Nullable(UInt64)](../../sql-reference/data-types/)) — 準備完了ジョブの場合は非NULL。ワーカーは、プールの準備完了キューから次に実行するジョブを取得します。複数の準備完了ジョブがある場合、`ready_seqno`の値が最も小さいジョブが選択されます。
- `waiters` ([UInt64](../../sql-reference/data-types/)) — このジョブを待機しているスレッドの数。
- `exception` ([Nullable(String)](../../sql-reference/data-types/)) — 失敗およびキャンセルされたジョブの場合は非NULL。クエリ実行中に発生したエラーメッセージ、またはこのジョブのキャンセルにつながったエラーとジョブ名の依存関係失敗チェーンを保持します。
- `schedule_time` ([DateTime64(6)](../../sql-reference/data-types/)) — ジョブが作成され、実行がスケジュールされた時刻(通常はすべての依存関係とともに)。
- `enqueue_time` ([Nullable(DateTime64(6))](../../sql-reference/data-types/)) — ジョブが準備完了となり、プールの準備完了キューにエンキューされた時刻。ジョブがまだ準備完了でない場合はNULL。
- `start_time` ([Nullable(DateTime64(6))](../../sql-reference/data-types/)) — ワーカーが準備完了キューからジョブをデキューし、実行を開始した時刻。ジョブがまだ開始されていない場合はNULL。
- `finish_time` ([Nullable(DateTime64(6))](../../sql-reference/data-types/)) — ジョブの実行が完了した時刻。ジョブがまだ完了していない場合はNULL。
<!--AUTOGENERATED_END-->

保留中のジョブは、以下のいずれかの状態にある可能性があります:

- `is_executing` (`UInt8`) - ジョブが現在ワーカーによって実行中です。
- `is_blocked` (`UInt8`) - ジョブが依存関係の完了を待機中です。
- `is_ready` (`UInt8`) - ジョブが実行準備完了で、ワーカーを待機中です。
- `elapsed` (`Float64`) - 実行開始からの経過秒数。ジョブが開始されていない場合はゼロ。ジョブが完了している場合は合計実行時間。


すべてのジョブにはそれに関連付けられたプールがあり、そのプール内で開始されます。各プールには固定の優先度と可変のワーカー数の上限があります。優先度が高い（`priority` の値が小さい）ジョブが先に実行されます。少なくとも 1 つの高優先度ジョブが準備完了または実行中である間は、より低い優先度のジョブは開始されません。ジョブの優先度は、ジョブを優先扱いすることで引き上げることはできますが、引き下げることはできません。たとえば、テーブルのロードおよび起動用のジョブは、入力クエリがそのテーブルを必要とする場合に優先されます。ジョブの実行中にそのジョブを優先扱いにすることも可能ですが、その場合でもジョブは `execution_pool` から新たに割り当てられた `pool` へは移動しません。ジョブは優先度逆転を避けるために、新しいジョブを作成する際には `pool` を使用します。すでに開始されたジョブは、高優先度ジョブによってプリエンプトされることはなく、開始後は常に完了まで実行されます。
- `pool_id` (`UInt64`) - 現在ジョブに割り当てられているプールの ID。
- `pool` (`String`) - `pool_id` のプール名。
- `priority` (`Int64`) - `pool_id` のプールの優先度。
- `execution_pool_id` (`UInt64`) - ジョブが実行されるプールの ID。実行開始前は、最初に割り当てられたプールと同じ値になります。
- `execution_pool` (`String`) - `execution_pool_id` のプール名。
- `execution_priority` (`Int64`) - `execution_pool_id` のプールの優先度。

- `ready_seqno` (`Nullable(UInt64)`) - 準備完了状態のジョブの場合に非 NULL。ワーカーは、自身のプールの ready キューから次に実行するジョブを取得します。複数の準備完了ジョブがある場合、`ready_seqno` の値が最も小さいジョブが選択されます。
- `waiters` (`UInt64`) - このジョブを待機しているスレッド数。
- `exception` (`Nullable(String)`) - 失敗したジョブおよびキャンセルされたジョブの場合に非 NULL。クエリ実行中に発生したエラーメッセージ、またはこのジョブのキャンセルにつながったエラーと、その依存関係の失敗に伴うジョブ名の依存チェーンを保持します。

ジョブのライフタイム中の時刻情報:
- `schedule_time` (`DateTime64`) - ジョブが作成され、（通常はすべての依存関係とともに）実行のためにスケジュールされた時刻。
- `enqueue_time` (`Nullable(DateTime64)`) - ジョブが準備完了となり、自身のプールの ready キューにエンキューされた時刻。ジョブがまだ準備完了でない場合は NULL。
- `start_time` (`Nullable(DateTime64)`) - ワーカーが ready キューからジョブをデキューし、その実行を開始した時刻。ジョブがまだ開始されていない場合は NULL。
- `finish_time` (`Nullable(DateTime64)`) - ジョブの実行が終了した時刻。ジョブがまだ終了していない場合は NULL。
