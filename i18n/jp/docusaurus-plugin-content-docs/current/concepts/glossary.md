---
sidebar_label: "用語集"
description: "このページには、ClickHouseに関してよく使用される用語とその定義の一覧が記載されています。"
title: "用語集"
slug: /concepts/glossary
keywords: ["用語集", "定義", "用語"]
doc_type: "reference"
---

<!-- no-glossary -->


# 用語集



## 原子性 {#atomicity}

原子性は、トランザクション（一連のデータベース操作）が単一の不可分な単位として扱われることを保証します。これは、トランザクション内のすべての操作が実行されるか、まったく実行されないかのいずれかを意味します。原子性トランザクションの例として、ある銀行口座から別の銀行口座への送金があります。送金のいずれかのステップが失敗した場合、トランザクションは失敗し、資金は最初の口座に残ります。原子性により、資金が失われたり新たに生成されたりすることがないことが保証されます。


## Block {#block}

ブロックは、データ処理とストレージを整理するための論理単位です。各ブロックにはカラムナーデータが含まれており、クエリ実行時のパフォーマンス向上のために一括処理されます。ブロック単位でデータを処理することで、ClickHouseはキャッシュミスを最小限に抑え、ベクトル化実行を促進し、CPUコアを効率的に活用します。ClickHouseは、LZ4、ZSTD、Deltaなどの各種圧縮アルゴリズムを使用して、ブロック内のデータを圧縮します。


## クラスタ {#cluster}

データの保存と処理を協調して行うノード（サーバー）の集合体。


## CMEK {#cmek}

顧客管理暗号化キー（CMEK）を使用すると、顧客は自身のキー管理サービス（KMS）キーを用いてClickHouseディスクデータキーを暗号化し、保存データを保護できます。


## ディクショナリ {#dictionary}

ディクショナリは、キーと値のペアのマッピングであり、さまざまな種類の参照リストに有用です。これは強力な機能で、クエリ内でディクショナリを効率的に使用できるようにします。多くの場合、参照テーブルとの`JOIN`を使用するよりも効率的です。


## 分散テーブル {#distributed-table}

ClickHouseの分散テーブルは、データそのものを保存せず、クラスタ内の複数のサーバーにわたる分散クエリ処理のための統合ビューを提供する特殊なテーブル型です。


## Granule {#granule}

granuleは、非圧縮ブロック内の行のバッチです。データ読み取り時、ClickHouseは個々の行ではなくgranule単位でアクセスします。これにより、分析ワークロードにおけるデータ処理が高速化されます。granuleにはデフォルトで8192行が含まれます。プライマリインデックスには、granuleごとに1つのエントリが含まれます。


## インクリメンタルマテリアライズドビュー {#incremental-materialized-view}

ClickHouseにおけるインクリメンタルマテリアライズドビューは、データ挿入時に処理と集約を行うマテリアライズドビューの一種です。ソーステーブルに新しいデータが挿入されると、マテリアライズドビューは新規挿入されたブロックのみを対象に事前定義されたSQL集約クエリを実行し、集約結果をターゲットテーブルに書き込みます。


## 軽量アップデート {#lightweight-update}

ClickHouseの軽量アップデートは、標準的なSQL UPDATE構文を使用してテーブル内の行を更新できる実験的機能です。従来のミューテーションのように列全体やデータパート全体を書き換える代わりに、更新された列と行のみを含む「パッチパート」を作成します。これらの更新はパッチの適用によってSELECTクエリで即座に可視化されますが、物理データの更新は後続のマージ処理時に行われます。


## マテリアライズドビュー {#materialized-view}

ClickHouseのマテリアライズドビューは、ソーステーブルへのデータ挿入時に自動的にクエリを実行し、変換または集計された結果を別のターゲットテーブルに保存することで、高速なクエリを可能にする仕組みです。


## MergeTree {#mergetree}

ClickHouseのMergeTreeは、高速なデータ取り込みと大容量データの処理に最適化されたテーブルエンジンです。ClickHouseの中核となるストレージエンジンであり、カラムナストレージ、カスタムパーティショニング、スパース主キーインデックス、バックグラウンドでのデータマージなどの機能を提供します。


## Mutation {#mutation}

ClickHouseにおけるmutationとは、テーブル内の既存データを変更または削除する操作を指し、通常は ALTER TABLE ... UPDATE や ALTER TABLE ... DELETE などのコマンドを使用します。Mutationは、行を直接変更するのではなく、変更の影響を受けるデータパート全体を書き換える非同期のバックグラウンドプロセスとして実装されています。


## オンザフライミューテーション {#on-the-fly-mutation}

ClickHouseのオンザフライミューテーションは、バックグラウンドのミューテーションプロセスの完了を待たずに、ミューテーションの送信直後から更新や削除の結果を後続のSELECTクエリで即座に反映できる仕組みです。


## パーツ {#parts}

テーブルデータの一部を格納するディスク上の物理ファイルです。パーティションキーを使用して作成されるテーブルデータの論理的な分割であるパーティションとは異なります。


## パーティショニングキー {#partitioning-key}

ClickHouseのパーティショニングキーは、テーブル作成時にPARTITION BY句で定義されるSQL式です。これにより、データがディスク上で論理的にどのようにパーティションへグループ化されるかが決まります。パーティショニングキーの一意な値ごとに独立した物理パーティションが形成され、パーティション全体の削除、移動、アーカイブといったデータ管理操作を効率的に実行できます。


## プライマリキー {#primary-key}

ClickHouseでは、プライマリキーはディスク上でのデータの格納順序を決定し、クエリフィルタリングを高速化するスパースインデックスの構築に使用されます。従来のデータベースとは異なり、ClickHouseのプライマリキーは一意性を保証しません。そのため、複数の行が同じプライマリキー値を持つことが可能です。


## プロジェクション {#projection}

ClickHouseのプロジェクションは、データを異なる順序で格納したり、事前集計を行ったりすることでクエリを高速化する、自動的に維持される隠しテーブルです。特に、メインのプライマリキーに含まれないカラムでフィルタリングするクエリに有効です。


## リフレッシュ可能なマテリアライズドビュー {#refreshable-materialized-view}

リフレッシュ可能なマテリアライズドビューは、データセット全体に対してクエリを定期的に再実行し、その結果をターゲットテーブルに格納するマテリアライズドビューの一種です。インクリメンタルマテリアライズドビューとは異なり、リフレッシュ可能なマテリアライズドビューはスケジュールに従って更新され、JOINやUNIONを含む複雑なクエリを制限なしでサポートします。


## Replica {#replica}

ClickHouseデータベースに保存されたデータのコピーです。冗長性と信頼性を確保するために、同じデータの複数のレプリカを任意の数だけ保持できます。レプリカはReplicatedMergeTreeテーブルエンジンと併用され、ClickHouseが異なるサーバー間でデータの複数のコピーを同期状態に維持することを可能にします。


## Shard {#shard}

データの部分集合です。ClickHouseは常にデータに対して少なくとも1つのシャードを保持します。複数のサーバーにデータを分割しない場合、データは1つのシャードに格納されます。複数のサーバーにデータをシャーディングすることで、単一サーバーの容量を超えた場合に負荷を分散することができます。


## スキッピングインデックス {#skipping-index}

スキッピングインデックスは、連続する複数のグラニュールレベルで少量のメタデータを保存し、ClickHouseが無関係な行のスキャンを回避できるようにするために使用されます。スキッピングインデックスは、プロジェクションに対する軽量な代替手段を提供します。


## ソートキー {#sorting-key}

ClickHouseでは、ソートキーによってディスク上の行の物理的な順序が定義されます。プライマリキーを指定しない場合、ClickHouseはソートキーをプライマリキーとして使用します。両方を指定する場合は、プライマリキーがソートキーのプレフィックスである必要があります。


## スパースインデックス {#sparse-index}

プライマリインデックスが個々の行ではなく、行のグループに対して1つのエントリを含むインデックス方式です。行のグループに対応するエントリはマークと呼ばれます。スパースインデックスでは、ClickHouseはまずクエリに一致する可能性のある行のグループを特定し、その後それらを個別に処理して一致するものを見つけます。このため、プライマリインデックスはメモリに読み込めるほど十分に小さくなります。


## テーブルエンジン {#table-engine}

ClickHouseのテーブルエンジンは、データの書き込み、保存、アクセス方法を決定します。MergeTreeは最も一般的なテーブルエンジンで、大量のデータを高速に挿入でき、バックグラウンドで処理されます。


## TTL {#ttl}

Time To Live（TTL）は、指定した期間経過後に列または行を自動的に移動、削除、またはロールアップするClickHouseの機能です。頻繁にアクセスする必要がなくなったデータを削除、移動、またはアーカイブすることで、ストレージをより効率的に管理できます。
