---
title: Как проверить состояние сервиса в ClickHouse Cloud
description: Узнайте, как использовать API ClickHouse Cloud, чтобы определить, остановлен ли ваш сервис, простаивает или работает, не пробуждая его.
date: 2023-11-16
tags: ['Управление облаком']
keywords: ['Состояние облачного сервиса']
---

{frontMatter.description}

{/* усечение */}

## Как проверить состояние сервиса ClickHouse Cloud \{#how-to-check-your-clickhouse-cloud-service-state\}

Как проверить состояние сервиса ClickHouse Cloud? Я хочу узнать, остановлен ли сервис, простаивает или работает, но при этом не хочу переводить его в активное состояние.

## Ответ \{#answer\}

[ClickHouse Cloud API](/cloud/manage/api/api-overview) отлично подходит для проверки состояния облачного сервиса. Перед использованием Cloud API необходимо создать API-ключ в вашем сервисе. Это можно сделать в ClickHouse Cloud [clickhouse.cloud](https://console.clickhouse.cloud):

* [Обзор API](/cloud/manage/api/api-overview)
* [Swagger](https://clickhouse.com/docs/cloud/manage/api/swagger)

1. Чтобы проверить состояние сервиса, выполните следующую команду. Замените `Key-ID` и `Key-Secret` на соответствующие значения:

   ```shell
   curl --user '[Key-ID]:[Key-Secret]' https://api.clickhouse.cloud/v1/organizations/[Org-ID]/services/[Service-ID]
   ```

   Команда выведет примерно следующее:

   ```json
   result":{"id":"[Service-ID]","name":"[Service-Name]","provider":"aws","region":"us-east-1","state":"**idle**","endpoints":[{"protocol":"nativesecure","host":"[Connect-URL]","port":9440},{"protocol":"https","host":"[Connect-URL]","port":8443}],"tier":"development","idleScaling":true,"idleTimeoutMinutes":15,"ipAccessList":[{"source":"[my-IP]","description":"[my-IP-name]"}],"createdAt":"2023-04-13T23:47:47Z"},"status":200}
   ```

2. Вы можете использовать [утилиту JQ](https://jqlang.github.io/jq/) для извлечения значения поля `state`:

   ```shell
   curl --user '[Key-ID]:[Key-Secret]' https://api.clickhouse.cloud/v1/organizations/[Org-ID]/services/[Service-ID] | jq '.state'
   ```

   Команда выведет примерно следующее:

   ```json
   **idle**
   ```

3. Выполнение той же команды для активно работающего сервиса выведет:

   ```json
   **running**
   ```