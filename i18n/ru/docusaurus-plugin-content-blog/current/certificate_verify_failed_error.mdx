---
title: Устранение ошибки проверки SSL-сертификата в ClickHouse
description: Узнайте, как устранить ошибку SSL CERTIFICATE_VERIFY_FAILED.
date: 2023-05-02
tags: ['Безопасность и аутентификация', 'Ошибки и исключения']
keywords: ['Ошибка', 'SSL-сертификат', '210']
---

{frontMatter.description}

{/* усечение */}


## Устранение ошибки проверки SSL-сертификата с кодом 210 в ClickHouse \{#resolving-ssl-certificate-verify-error-in-clickhouse\}

Ошибка обычно выглядит следующим образом:

`Code: 210. DB::NetException: SSL Exception: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED`

## Причина ошибки \{#cause-of-the-error\}

Эта ошибка возникает при попытке подключиться к серверу ClickHouse с помощью `clickhouse-client`. Причиной ошибки может быть одно из следующего:

- в файле конфигурации клиента `config.xml` отсутствует корневой сертификат в стандартном хранилище доверенных сертификатов CA на машине, или
- используется самоподписанный сертификат или внутренний сертификат CA, который не настроен

## Решение

При использовании внутреннего или самоподписанного удостоверяющего центра (CA) настройте корневой сертификат УЦ в файле `config.xml` в клиентском каталоге (например, `/etc/clickhouse-client`) и отключите загрузку корневых сертификатов УЦ по умолчанию из стандартного расположения.

Ниже приведён пример конфигурации:

```xml
<openSSL>
    <client>
        <loadDefaultCAFile>false</loadDefaultCAFile>
        <caConfig>/etc/clickhouse-server/certs/marsnet_ca.crt</caConfig>
        <cacheSessions>true</cacheSessions>
        <disableProtocols>sslv2,sslv3</disableProtocols>
        <preferServerCiphers>true</preferServerCiphers>
        <invalidCertificateHandler>
            <name>RejectCertificateHandler</name>
        </invalidCertificateHandler>
    </client>
</openSSL>
```


## Дополнительные ресурсы \{#additional-resources\}

См. документацию: [https://clickhouse.com/docs/interfaces/cli/#configuration_files](https://clickhouse.com/docs/interfaces/cli/#configuration_files)