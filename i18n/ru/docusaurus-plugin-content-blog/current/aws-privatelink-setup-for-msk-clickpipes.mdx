---
title: Настройка AWS PrivateLink для доступа ClickPipes к MSK
description: Пошаговая настройка предоставления доступа к приватному кластеру MSK для ClickPipes через MSK multi-VPC connectivity.
date: 2025-4-15
tags: ['Безопасность и аутентификация', 'Управление облаком']
keywords: ['AWS PrivateLink', 'MSK', 'ClickPipes']
---

{frontMatter.description}

{/* обрезка */}

## Обзор \{#overview\}

Это руководство поможет вам настроить **MSK multi-VPC** для использования с [ClickPipes reverse private endpoint](/integrations/clickpipes/aws-privatelink#msk-multi-vpc).

## Требования \{#requirements\}

VPC вашего кластера MSK должна быть расположена в одном из регионов ClickPipes. Список поддерживаемых регионов см. в разделе [регионы ClickPipes](/integrations/clickpipes/aws-privatelink#aws-privatelink-regions).

## Включение подключения нескольких VPC \{#enabling-multi-vpc-connectivity\}

1. Перейдите к кластеру MSK.
   * В консоли Amazon MSK в левой панели навигации выберите &quot;Clusters&quot;.
   * Выберите конкретный кластер MSK, который вы хотите настроить для подключения нескольких VPC.
2. Включите подключение нескольких VPC для MSK
   * На вкладке **Connectivity** найдите раздел **Multi-VPC connectivity**.
   * Нажмите **Edit**.
   * Включите опцию **Turn-on MSK multi-VPC connectivity**.
   * Следуйте инструкциям.
3. Добавьте principal учётной записи ClickPipes в политику кластера
   * Перейдите на вкладку **Configuration**.
   * Нажмите **Edit** в разделе **Cluster policy**.
   * Добавьте `arn:aws:iam::072088201116:root` в **IAM policy**. Пример:
     ```json
     {
         "Version": "2012-10-17",
         "Statement": [
             {
                 "Effect": "Allow",
                 "Principal": {
                     "AWS": [
                         "arn:aws:iam::072088201116:root"
                     ]
                 },
                 "Action": [
                     "kafka-cluster:Connect",
                     "kafka-cluster:DescribeCluster",
                     "kafka-cluster:ListClusters"
                 ]
             }
         ]
     }
     ```

:::tip
Политика IAM кластера позволяет ClickPipes инициировать подключение от ClickPipes к вашему кластеру MSK.
Если вы хотите настроить аутентификацию IAM для своего кластера MSK, обратитесь к [документации по аутентификации IAM](/integrations/clickpipes/kafka/best-practices#iam).
:::

## Создание обратной приватной конечной точки \{#creating-reverse-private-endpoint\}

Следуйте инструкциям по созданию обратной приватной конечной точки в [документации по ClickPipes](/integrations/clickpipes/aws-privatelink#creating-clickpipe).