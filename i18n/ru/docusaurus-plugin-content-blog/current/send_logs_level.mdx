---
date: 2023-03-01
title: "Сбор серверных логов запросов на стороне клиента"
description: "Узнайте, как получать серверные логи на стороне клиента, даже при разных настройках логирования, с помощью клиентской настройки `send_logs_level`."
tags: ['Администрирование сервера']
keywords: ['Серверные логи']
---

{frontMatter.description}

{/* усечь */}


## Узнайте, как получать журналы сервера с запросами на стороне клиента.

Клиент может просматривать журналы сервера — даже на уровне детализации, отличающемся от настроенного уровня логирования на сервере, — установив клиентский параметр `send_logs_level`.

Например, если клиент выполняет:

```sql
SET send_logs_level = 'trace';
```

Клиент будет получать трассировочные логи, даже если на сервере установлен уровень логирования `info`.

Один из полезных сценариев — использовать `send_logs_level` для мониторинга вставки строк в таблицу `Distributed`:

* Включите логи в `clickhouse-client`, выполнив `SET send_logs_level = 'trace';`
* Выполните запрос `INSERT`
* Вставки в распределённую таблицу по умолчанию выполняются асинхронно. Данные записываются во внутренний локальный буфер на диск, затем в фоновом режиме отправляются на удалённые серверы.
* Логи будут отправляться со всех узлов, участвующих в обработке запроса (распределённое трассирование)

Чтобы проверить статус распределённых вставок, просмотрите [таблицу `system.distribution_queue`](https://clickhouse.com/docs/operations/system-tables/distribution_queue/). Эта таблица содержит информацию о локальных файлах, которые находятся в очереди на отправку шардам. Эти локальные файлы содержат новые части, создаваемые при вставке новых данных в таблицу `Distributed` в асинхронном режиме.
