---
title: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Node.js —Å @clickhouse/client
description: "–£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @clickhouse/client –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Node.js –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å ClickHouse –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤."
date: 2023-11-22
tags: ['Language Clients']
keywords: ['NodeJS']
---

{frontMatter.description}

{/* –æ–±—Ä–µ–∑–∫–∞ */}


## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NodeJS —Å @clickhouse/client

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ `main.ts`.

`Package.json` (—Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ `./`):

```json
{
  "name": "–ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞ ClickHouse",
  "version": "1.0.0",
  "main": "main.js",
  "license": "MIT",
  "devDependencies": {
    "typescript": "^5.3.2"
  },
  "dependencies": {
    "@clickhouse/client": "^0.2.6"
  }
}
```

`Main.ts` (–ø–æ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ –∫–∞—Ç–∞–ª–æ–≥ `./src`):

```ts
import { ClickHouseClient, createClient } from '@clickhouse/client'; // or '@clickhouse/client-web'

interface ClickHouseResultSet<T> {
  meta: Meta[];
  data: T[];
  rows: number;
  statistics: Statistics;
}

interface Statistics {
  elapsed: number;
  rows_read: number;
  bytes_read: number;
}

interface Meta {
  name: string;
  type: string;
}

interface Count {
  c: number;
}

//–ó–∞–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ `host`,
//`username`, `password`, `database`, –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

const initClickHouseClient = async (): Promise<ClickHouseClient> => {
  const client = createClient({
    host: 'https://FQDN.aws.clickhouse.cloud',
    username: 'default',
    password: 'password',
    database: 'default',
    application: `pingpong`,
  });

  console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ —Å ClickHouse');
  if (!(await client.ping())) {
    throw new Error('–Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑—å —Å ClickHouse!');
  }
  console.log('–°–≤—è–∑—å —Å ClickHouse —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!');
  return client;
};

const main = async () => {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ ClickHouse');
  const client = await initClickHouseClient();

  const row = await client.query({
    query: `SELECT count() AS c FROM system.tables WHERE database='system'`,
  });

  const jsonRow: ClickHouseResultSet<Count> = await row.json();

  console.log(`–ù–∞–π–¥–µ–Ω–æ ${jsonRow.data[0].c} —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü!`);

  await client.close();
  console.log(`üëã`);
};

main();
```

–ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `yarn` –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `./`:

```
$ yarn
yarn install v1.22.19
[1/4] üîç  –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤...
[2/4] üöö  –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤...
[3/4] üîó  –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
[4/4] üî®  –°–±–æ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤...
‚ú®  –ì–æ—Ç–æ–≤–æ –∑–∞ 0.14s.
```

–≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –≤ `main.ts`, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ–º –≤ `./`, —Å –ø–æ–º–æ—â—å—é:

```
$ npx ts-node src/main.ts
```

–≤—ã–≤–µ–¥–µ—Ç:

```
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ ClickHouse
ClickHouse ping
ClickHouse pong!
–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 120 —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü!
üëã
```
