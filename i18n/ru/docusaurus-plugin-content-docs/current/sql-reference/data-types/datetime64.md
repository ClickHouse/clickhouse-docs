---
slug: /sql-reference/data-types/datetime64
sidebar_position: 18
sidebar_label: DateTime64
---


# DateTime64

Позволяет хранить момент времени, который может быть выражен как календарная дата и время суток с определенной подсекундной точностью.

Размер тика (точность): 10<sup>-точность</sup> секунд. Допустимый диапазон: [ 0 : 9 ].
Обычно используются - 3 (миллисекунды), 6 (микросекунды), 9 (наносекунды).

**Синтаксис:**

``` sql
DateTime64(точность, [часовой_пояс])
```

Внутренне данные хранятся как число 'тиков' с начала эпохи (1970-01-01 00:00:00 UTC) в формате Int64. Разрешение тика определяется параметром точности. Кроме того, тип `DateTime64` может хранить часовой пояс, который одинаков для всей колонки, что влияет на отображение значений типа `DateTime64` в текстовом формате и на разбор значений, указанных в виде строк ('2020-01-01 05:00:01.000'). Часовой пояс не хранится в строках таблицы (или в результирующем наборе), но хранится в метаданных колонки. См. детали в [DateTime](../../sql-reference/data-types/datetime.md).

Поддерживаемый диапазон значений: \[1900-01-01 00:00:00, 2299-12-31 23:59:59.99999999\]

Примечание: Точность максимального значения равняется 8. Если используется максимальная точность 9 цифр (наносекунды), максимальное поддерживаемое значение - `2262-04-11 23:47:16` в UTC.

## Примеры {#examples}

1. Создание таблицы с колонкой типа `DateTime64` и вставка данных в нее:

``` sql
CREATE TABLE dt64
(
    `timestamp` DateTime64(3, 'Asia/Istanbul'),
    `event_id` UInt8
)
ENGINE = TinyLog;
```

``` sql
-- Разбор DateTime
-- - из целого числа, интерпретируемого как количество секунд с 1970-01-01.
-- - из строки,
INSERT INTO dt64 VALUES (1546300800123, 1), (1546300800.123, 2), ('2019-01-01 00:00:00', 3);

SELECT * FROM dt64;
```

``` text
┌───────────────timestamp─┬─event_id─┐
│ 2019-01-01 03:00:00.123 │        1 │
│ 2019-01-01 03:00:00.123 │        2 │
│ 2019-01-01 00:00:00.000 │        3 │
└─────────────────────────┴──────────┘
```

- При вставке datetime в качестве целого числа он рассматривается как соответствующим образом масштабированный Unix Timestamp (UTC). `1546300800000` (с точностью 3) представляет собой `'2019-01-01 00:00:00'` UTC. Однако так как колонка `timestamp` имеет указанный часовой пояс `Asia/Istanbul` (UTC+3), при выводе в строковом формате значение будет отображаться как `'2019-01-01 03:00:00'`. Вставка datetime в качестве десятичного числа будет обрабатываться аналогично целому числу, за исключением того, что значение до десятичной точки является Unix Timestamp до и включая секунды, а значение после десятичной точки считается точностью.
- При вставке строкового значения в качестве datetime, оно обрабатывается как находящееся в часовом поясе колонки. `'2019-01-01 00:00:00'` будет рассматриваться как находящееся в часовом поясе `Asia/Istanbul` и сохранится как `1546290000000`.

2. Фильтрация по значениям `DateTime64`

``` sql
SELECT * FROM dt64 WHERE timestamp = toDateTime64('2019-01-01 00:00:00', 3, 'Asia/Istanbul');
```

``` text
┌───────────────timestamp─┬─event_id─┐
│ 2019-01-01 00:00:00.000 │        3 │
└─────────────────────────┴──────────┘
```

В отличие от `DateTime`, значения `DateTime64` не конвертируются автоматически из `String`.

``` sql
SELECT * FROM dt64 WHERE timestamp = toDateTime64(1546300800.123, 3);
```

``` text
┌───────────────timestamp─┬─event_id─┐
│ 2019-01-01 03:00:00.123 │        1 │
│ 2019-01-01 03:00:00.123 │        2 │
└─────────────────────────┴──────────┘
```

В отличие от вставки, функция `toDateTime64` будет обрабатывать все значения как десятичные, поэтому точность должна быть указана после десятичной точки.

3. Получение часового пояса для значения типа `DateTime64`:

``` sql
SELECT toDateTime64(now(), 3, 'Asia/Istanbul') AS column, toTypeName(column) AS x;
```

``` text
┌──────────────────column─┬─x──────────────────────────────┐
│ 2023-06-05 00:09:52.000 │ DateTime64(3, 'Asia/Istanbul') │
└─────────────────────────┴────────────────────────────────┘
```

4. Конверсия часового пояса

``` sql
SELECT
toDateTime64(timestamp, 3, 'Europe/London') as lon_time,
toDateTime64(timestamp, 3, 'Asia/Istanbul') as istanbul_time
FROM dt64;
```

``` text
┌────────────────lon_time─┬───────────istanbul_time─┐
│ 2019-01-01 00:00:00.123 │ 2019-01-01 03:00:00.123 │
│ 2019-01-01 00:00:00.123 │ 2019-01-01 03:00:00.123 │
│ 2018-12-31 21:00:00.000 │ 2019-01-01 00:00:00.000 │
└─────────────────────────┴─────────────────────────┘
```

**См. также**

- [Функции преобразования типов](../../sql-reference/functions/type-conversion-functions.md)
- [Функции для работы с датами и временем](../../sql-reference/functions/date-time-functions.md)
- [Параметр настройки `date_time_input_format`](../../operations/settings/settings-formats.md#date_time_input_format)
- [Параметр настройки `date_time_output_format`](../../operations/settings/settings.md#date_time_output_format)
- [Параметр конфигурации сервера `timezone`](../../operations/server-configuration-parameters/settings.md#timezone)
- [Параметр настройки `session_timezone`](../../operations/settings/settings.md#session_timezone)
- [Операторы для работы с датами и временем](../../sql-reference/operators/index.md#operators-for-working-with-dates-and-times)
- [`Date` тип данных](../../sql-reference/data-types/date.md)
- [`DateTime` тип данных](../../sql-reference/data-types/datetime.md)
