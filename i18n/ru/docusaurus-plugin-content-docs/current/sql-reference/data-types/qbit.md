---
'description': 'Документация о QBit тип данных в ClickHouse, он позволяет проводить精细化以进行类似于量的搜索.'
'keywords':
- 'qbit'
- 'data type'
'sidebar_label': 'QBit'
'sidebar_position': 64
'slug': '/sql-reference/data-types/qbit'
'title': 'QBit тип данных'
'doc_type': 'reference'
---
import ExperimentalBadge from '@theme/badges/ExperimentalBadge';

<ExperimentalBadge/>

Тип данных `QBit` reorganizes векторное хранилище для более быстрых аппроксимированных поисков. Вместо хранения элементов каждого вектора вместе, он группирует одинаковые позиции двоичных разрядов во всех векторах. Это позволяет хранить векторы с полной точностью, позволяя вам выбирать уровень детализированной квантизации во время поиска: считывайте меньше битов для меньшего ввода-вывода и более быстрых расчетов или больше битов для более высокой точности. Вы получаете преимущества скорости за счет уменьшения передачи данных и вычислений благодаря квантизации, но все исходные данные остаются доступными при необходимости.

:::note
Тип данных `QBit` и связанные с ним функции расстояния в настоящее время являются экспериментальными. 
Чтобы активировать их, сначала выполните команду `SET allow_experimental_qbit_type = 1`. 
Если возникнут проблемы, пожалуйста, откройте issue в [репозитории ClickHouse](https://github.com/clickhouse/clickhouse/issues).
:::

Чтобы объявить колонку типа `QBit`, используйте следующий синтаксис:

```sql
column_name QBit(element_type, dimension)
```

* `element_type` – тип каждого элемента вектора. Разрешенные типы: `BFloat16`, `Float32` и `Float64`
* `dimension` – количество элементов в каждом векторе

## Создание QBit {#creating-qbit}

Использование типа `QBit` в определении столбца таблицы:

```sql
CREATE TABLE test (id UInt32, vec QBit(Float32, 8)) ENGINE = Memory;
INSERT INTO test VALUES (1, [1, 2, 3, 4, 5, 6, 7, 8]), (2, [9, 10, 11, 12, 13, 14, 15, 16]);
SELECT vec FROM test ORDER BY id;
```

```text
┌─vec──────────────────────┐
│ [1,2,3,4,5,6,7,8]        │
│ [9,10,11,12,13,14,15,16] │
└──────────────────────────┘
```

## Подколонки QBit {#qbit-subcolumns}

`QBit` реализует шаблон доступа к подколонкам, который позволяет вам обращаться к отдельным битовым плоскостям сохраненных векторов. Каждая позиция бита может быть доступна с помощью синтаксиса `.N`, где `N` — это позиция бита:

```sql
CREATE TABLE test (id UInt32, vec QBit(Float32, 8)) ENGINE = Memory;
INSERT INTO test VALUES (1, [0, 0, 0, 0, 0, 0, 0, 0]);
INSERT INTO test VALUES (1, [-0, -0, -0, -0, -0, -0, -0, -0]);
SELECT bin(vec.1) FROM test;
```

```text
┌─bin(tupleElement(vec, 1))─┐
│ 00000000                  │
│ 11111111                  │
└───────────────────────────┘
```

Количество доступных подколонок зависит от типа элемента:

* `BFloat16`: 16 подколонок (1-16)
* `Float32`: 32 подколонки (1-32)
* `Float64`: 64 подколонки (1-64)

## Функции поиска векторов {#vector-search-functions}

Это функции расстояния для поиска по схожести векторов, которые используют тип данных `QBit`:

* [`L2DistanceTransposed`](../functions/distance-functions.md#L2DistanceTransposed)