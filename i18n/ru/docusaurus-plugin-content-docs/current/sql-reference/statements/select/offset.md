---
description: 'Документация по OFFSET'
sidebar_label: 'OFFSET'
slug: /sql-reference/statements/select/offset
title: 'Предложение OFFSET FETCH'
doc_type: 'reference'
---

`OFFSET` и `FETCH` позволяют выбирать данные порциями. Они задают блок строк, который нужно получить одним запросом.

```sql
OFFSET offset_row_count {ROW | ROWS}] [FETCH {FIRST | NEXT} fetch_row_count {ROW | ROWS} {ONLY | WITH TIES}]
```

Значение `offset_row_count` или `fetch_row_count` может быть числом или литеральной константой. Параметр `fetch_row_count` можно опустить; по умолчанию он равен 1.

`OFFSET` задает количество строк, которые нужно пропустить перед тем, как начать возвращать строки из результирующего набора запроса. `OFFSET n` пропускает первые `n` строк результата.

Поддерживается отрицательный OFFSET: `OFFSET -n` пропускает последние `n` строк результата.

Также поддерживается дробный OFFSET: `OFFSET n` — если 0 &lt; n &lt; 1, то пропускается первая n * 100% часть результата.

Пример:
• `OFFSET 0.1` — пропускает первые 10% результата.

> **Примечание**
> • Дробное значение должно быть числом типа [Float64](../../data-types/float.md), меньшим 1 и большим 0.
> • Если в результате вычисления получается дробное количество строк, оно округляется вверх до следующего целого числа.

`FETCH` задает максимальное количество строк, которое может быть в результате запроса.

Опция `ONLY` используется для возврата строк, которые непосредственно следуют за строками, пропущенными с помощью `OFFSET`. В этом случае `FETCH` является альтернативой предложению [LIMIT](../../../sql-reference/statements/select/limit.md). Например, следующий запрос

```sql
SELECT * FROM test_fetch ORDER BY a OFFSET 1 ROW FETCH FIRST 3 ROWS ONLY;
```

совпадает с запросом

```sql
SELECT * FROM test_fetch ORDER BY a LIMIT 3 OFFSET 1;
```

Параметр `WITH TIES` используется для возврата всех дополнительных строк, которые делят последнее место в результирующем наборе в соответствии с предложением `ORDER BY`. Например, если `fetch_row_count` установлено в 5, но ещё две строки совпадают по значениям столбцов, указанных в `ORDER BY`, с пятой строкой, то результирующий набор будет содержать семь строк.

:::note\
Согласно стандарту, предложение `OFFSET` должно располагаться перед предложением `FETCH`, если оба используются.
:::

:::note\
Фактическое смещение также может зависеть от настройки [offset](../../../operations/settings/settings.md#offset).
:::


## Примеры {#examples}

Входная таблица:

```text
┌─a─┬─b─┐
│ 1 │ 1 │
│ 2 │ 1 │
│ 3 │ 4 │
│ 1 │ 3 │
│ 5 │ 4 │
│ 0 │ 6 │
│ 5 │ 7 │
└───┴───┘
```

Использование параметра `ONLY`:

```sql
SELECT * FROM test_fetch ORDER BY a OFFSET 3 ROW FETCH FIRST 3 ROWS ONLY;
```

Результат:

```text
┌─a─┬─b─┐
│ 2 │ 1 │
│ 3 │ 4 │
│ 5 │ 4 │
└───┴───┘
```

Использование параметра `WITH TIES`:

```sql
SELECT * FROM test_fetch ORDER BY a OFFSET 3 ROW FETCH FIRST 3 ROWS WITH TIES;
```

Результат:

```text
┌─a─┬─b─┐
│ 2 │ 1 │
│ 3 │ 4 │
│ 5 │ 4 │
│ 5 │ 7 │
└───┴───┘
```
