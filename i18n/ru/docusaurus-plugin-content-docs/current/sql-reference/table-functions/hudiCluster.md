---
description: 'Расширение табличной функции hudi. Позволяет обрабатывать файлы из таблиц Apache Hudi в Amazon S3 параллельно на множестве узлов в указанном кластере.'
sidebar_label: 'hudiCluster'
sidebar_position: 86
slug: /sql-reference/table-functions/hudiCluster
title: 'Табличная функция hudiCluster'
doc_type: 'reference'
---



# Табличная функция hudiCluster

Это расширение табличной функции [hudi](sql-reference/table-functions/hudi.md).

Позволяет обрабатывать файлы из таблиц Apache [Hudi](https://hudi.apache.org/) в Amazon S3 параллельно на множестве узлов в указанном кластере. На инициирующем узле создаётся соединение со всеми узлами в кластере, и каждый файл динамически распределяется между ними. Рабочий узел запрашивает у инициатора следующую задачу и обрабатывает её. Это повторяется до тех пор, пока все задачи не будут выполнены.



## Синтаксис {#syntax}

```sql
hudiCluster(cluster_name, url [,aws_access_key_id, aws_secret_access_key] [,format] [,structure] [,compression])
```


## Аргументы {#arguments}

| Аргумент                                     | Описание                                                                                                                                                                                                                                                                                                                                                                          |
| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `cluster_name`                               | Имя кластера, используемое для формирования набора адресов и параметров подключения к удалённым и локальным серверам.                                                                                                                                                                                                                                                                    |
| `url`                                        | URL бакета с путём к существующей таблице Hudi в S3.                                                                                                                                                                                                                                                                                                                            |
| `aws_access_key_id`, `aws_secret_access_key` | Долгосрочные учётные данные пользователя аккаунта [AWS](https://aws.amazon.com/). Используются для аутентификации запросов. Эти параметры необязательны. Если учётные данные не указаны, используются значения из конфигурации ClickHouse. Подробнее см. [Использование S3 для хранения данных](/engines/table-engines/mergetree-family/mergetree.md/#table_engine-mergetree-s3). |
| `format`                                     | [Формат](/interfaces/formats) файла.                                                                                                                                                                                                                                                                                                                                       |
| `structure`                                  | Структура таблицы. Формат `'column1_name column1_type, column2_name column2_type, ...'`.                                                                                                                                                                                                                                                                                        |
| `compression`                                | Необязательный параметр. Поддерживаемые значения: `none`, `gzip/gz`, `brotli/br`, `xz/LZMA`, `zstd/zst`. По умолчанию тип сжатия определяется автоматически по расширению файла.                                                                                                                                                                                                                  |


## Возвращаемое значение {#returned_value}

Таблица с указанной структурой для чтения данных из указанной таблицы Hudi в S3 на кластере.


## Виртуальные столбцы {#virtual-columns}

- `_path` — Путь к файлу. Тип: `LowCardinality(String)`.
- `_file` — Имя файла. Тип: `LowCardinality(String)`.
- `_size` — Размер файла в байтах. Тип: `Nullable(UInt64)`. Если размер файла неизвестен, значение — `NULL`.
- `_time` — Время последнего изменения файла. Тип: `Nullable(DateTime)`. Если время неизвестно, значение — `NULL`.
- `_etag` — ETag файла. Тип: `LowCardinality(String)`. Если ETag неизвестен, значение — `NULL`.


## Связанные разделы {#related}

- [Движок Hudi](engines/table-engines/integrations/hudi.md)
- [Табличная функция Hudi](sql-reference/table-functions/hudi.md)
