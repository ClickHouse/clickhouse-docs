---
slug: '/sql-reference/table-functions/hudiCluster'
sidebar_label: hudiCluster
sidebar_position: 86
description: 'Расширение функции hudi для представления. Позволяет обрабатывать'
title: 'Табличная функция hudiCluster'
doc_type: reference
---
# hudiCluster Табличная Функция

Это расширение для табличной функции [hudi](sql-reference/table-functions/hudi.md).

Позволяет обрабатывать файлы из таблиц Apache [Hudi](https://hudi.apache.org/) в Amazon S3 параллельно с множеством узлов в указанном кластере. На инициаторе создается соединение со всеми узлами кластера и динамически распределяет каждый файл. На рабочем узле он запрашивает у инициатора следующую задачу для обработки и выполняет её. Это повторяется до тех пор, пока все задачи не будут завершены.

## Синтаксис {#syntax}

```sql
hudiCluster(cluster_name, url [,aws_access_key_id, aws_secret_access_key] [,format] [,structure] [,compression])
```

## Аргументы {#arguments}

| Аргумент                                    | Описание                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `cluster_name`                              | Имя кластера, которое используется для построения набора адресов и параметров соединения с удаленными и локальными серверами.                                                                                                                                                                                                                                                     |
| `url`                                       | URL корзины с путем к существующей таблице Hudi в S3.                                                                                                                                                                                                                                                                                                                             |
| `aws_access_key_id`, `aws_secret_access_key` | Долгосрочные учетные данные для пользователя учетной записи [AWS](https://aws.amazon.com/). Вы можете использовать их для аутентификации ваших запросов. Эти параметры являются необязательными. Если учетные данные не указаны, используются те, что заданы в конфигурации ClickHouse. Для получения дополнительной информации см. [Использование S3 для хранения данных](/engines/table-engines/mergetree-family/mergetree.md/#table_engine-mergetree-s3).  |
| `format`                                    | [Формат](/interfaces/formats) файла.                                                                                                                                                                                                                                                                                                                                             |
| `structure`                                 | Структура таблицы. Формат: `'column1_name column1_type, column2_name column2_type, ...'`.                                                                                                                                                                                                                                                                                         |
| `compression`                               | Параметр является необязательным. Поддерживаемые значения: `none`, `gzip/gz`, `brotli/br`, `xz/LZMA`, `zstd/zst`. По умолчанию сжатие будет автоматически определяться по расширению файла.                                                                                                                                                                                   |

## Возвращаемое значение {#returned_value}

Таблица с указанной структурой для чтения данных из кластера в указанной таблице Hudi в S3.

## Виртуальные колонки {#virtual-columns}

- `_path` — Путь к файлу. Тип: `LowCardinality(String)`.
- `_file` — Имя файла. Тип: `LowCardinality(String)`.
- `_size` — Размер файла в байтах. Тип: `Nullable(UInt64)`. Если размер файла неизвестен, значение равно `NULL`.
- `_time` — Время последнего изменения файла. Тип: `Nullable(DateTime)`. Если время неизвестно, значение равно `NULL`.
- `_etag` — Etag файла. Тип: `LowCardinality(String)`. Если etag неизвестен, значение равно `NULL`.

## Связанные {#related}

- [Hudi engine](engines/table-engines/integrations/hudi.md)
- [Hudi табличная функция](sql-reference/table-functions/hudi.md)