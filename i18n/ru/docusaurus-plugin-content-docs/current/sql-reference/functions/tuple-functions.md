---
description: 'Документация по функциям работы с кортежами'
sidebar_label: 'Кортежи'
slug: /sql-reference/functions/tuple-functions
title: 'Функции работы с кортежами'
doc_type: 'reference'
---

:::note
Приведённая ниже документация сгенерирована из системной таблицы `system.functions`.
:::

{/* 
  Внутреннее содержимое тегов ниже подменяется при сборке фреймворка документации
  документацией, сгенерированной из system.functions. Пожалуйста, не изменяйте и не удаляйте теги.
  См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/* AUTOGENERATED_START */}


## flattenTuple {#flattenTuple}

Добавлена в версии v22.6

Разворачивает именованный и вложенный `tuple`.
Элементы возвращаемого `tuple` представляют собой пути к элементам входного `tuple`.

**Синтаксис**

```sql
flattenTuple(input)
```

**Аргументы**

* `input` — Именованный вложенный кортеж для разворачивания. [`Tuple(n1 T1[, n2 T2, ... ])`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, элементы которого являются путями к элементам исходного кортежа. [`Tuple(T)`](/sql-reference/data-types/tuple)

**Примеры**

**Пример использования**

```sql title=Query
CREATE TABLE tab(t Tuple(a UInt32, b Tuple(c String, d UInt32))) ENGINE = MergeTree ORDER BY tuple();
INSERT INTO tab VALUES ((3, ('c', 4)));

SELECT flattenTuple(t) FROM tab;
```

```response title=Response
┌─flattenTuple(t)┐
│ (3, 'c', 4)    │
└────────────────┘
```


## tuple {#tuple}

Впервые представлена в: v

Возвращает кортеж, группируя входные аргументы.

Для столбцов C1, C2, ... с типами T1, T2, ... функция возвращает кортеж типа Tuple(C1 T1, C2 T2, ...) с именованными полями, содержащий эти столбцы, если их имена уникальны и могут рассматриваться как идентификаторы без кавычек; в противном случае возвращается Tuple(T1, T2, ...). Выполнение функции не требует вычислительных затрат.
Кортежи обычно используются в качестве промежуточных значений в аргументах операторов IN или для создания списка формальных параметров lambda-функций. Кортежи нельзя записывать в таблицу.

Функция реализует оператор `(x, y, ...)`.

**Синтаксис**

```sql
```

**Аргументы**

* Нет.

**Возвращаемое значение**

**Примеры**

**Типичный**

```sql title=Query
SELECT tuple(1, 2)
```

```response title=Response
(1,2)
```


## tupleConcat {#tupleConcat}

Появилось в версии: v23.8

Объединяет кортежи, переданные в качестве аргументов.

**Синтаксис**

```sql
tupleConcat(tuple1[, tuple2, [...]])
```

**Аргументы**

* `tupleN` — Произвольное число аргументов типа Tuple. [`Tuple(T)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, содержащий все элементы из входных кортежей. [`Tuple(T)`](/sql-reference/data-types/tuple)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tupleConcat((1, 2), ('a',), (true, false))
```

```response title=Response
(1, 2, 'a', true, false)
```


## tupleDivide {#tupleDivide}

Введена в версии: v21.11

Выполняет деление соответствующих элементов двух кортежей одинакового размера.

:::note
При делении на ноль возвращается значение `inf`.
:::

**Синтаксис**

```sql
tupleDivide(t1, t2)
```

**Аргументы**

* `t1` — первый кортеж: [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `t2` — второй кортеж: [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж с результатами деления: [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleDivide((1, 2), (2, 3))
```

```response title=Response
(0.5, 0.6666666666666666)
```


## tupleDivideByNumber {#tupleDivideByNumber}

Впервые представлена в: v21.11

Возвращает кортеж, в котором каждый элемент делится на число.

:::note
При делении на ноль возвращается `inf`.
:::

**Синтаксис**

```sql
tupleDivideByNumber(tuple, number)
```

**Аргументы**

* `tuple` — кортеж для деления. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `number` — делитель. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж с разделёнными элементами. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleDivideByNumber((1, 2), 0.5)
```

```response title=Response
(2, 4)
```


## tupleElement {#tupleElement}

Впервые появилась в: v1.1

Извлекает элемент из кортежа по индексу или имени.

Для доступа по индексу используется числовой индекс, начинающийся с 1.
Для доступа по имени имя элемента может быть передано в виде строки (работает только для именованных кортежей).

Поддерживаются отрицательные индексы. В этом случае выбирается соответствующий элемент, нумерация ведется с конца. Например, `tuple.-1` — это последний элемент кортежа.

Необязательный третий аргумент задает значение по умолчанию, которое возвращается вместо выброса исключения, если запрашиваемый элемент не существует.
Все аргументы должны быть константами.

Эта функция имеет нулевую стоимость выполнения и реализует операторы `x.index` и `x.name`.

**Синтаксис**

```sql
tupleElement(tuple, index|name[, default_value])
```

**Аргументы**

* `tuple` — Кортеж или массив кортежей. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(Tuple(T))`](/sql-reference/data-types/array)
* `index` — Индекс столбца, начиная с 1. [`const UInt8/16/32/64`](/sql-reference/data-types/int-uint)
* `name` — Имя элемента. [`const String`](/sql-reference/data-types/string)
* `default_value` — Значение по умолчанию, возвращаемое, когда индекс выходит за допустимые границы или элемент не существует. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает элемент по указанному индексу или имени. [`Any`](/sql-reference/data-types)

**Примеры**

**Доступ по индексу**

```sql title=Query
SELECT tupleElement((1, 'hello'), 2)
```

```response title=Response
hello
```

**Отрицательные индексы**

```sql title=Query
SELECT tupleElement((1, 'hello'), -1)
```

```response title=Response
hello
```

**Именованный кортеж и таблица**

```sql title=Query
CREATE TABLE example (values Tuple(name String, age UInt32)) ENGINE = Memory;
INSERT INTO example VALUES (('Alice', 30));
SELECT tupleElement(values, 'name') FROM example;
```

```response title=Response
Alice
```

**Со значением по умолчанию**

```sql title=Query
SELECT tupleElement((1, 2), 5, 'not_found')
```

```response title=Response
not_found
```

**Синтаксис оператора**

```sql title=Query
SELECT (1, 'hello').2
```

```response title=Response
hello
```


## tupleHammingDistance {#tupleHammingDistance}

Добавлено в: v21.1

Возвращает [расстояние Хэмминга](https://en.wikipedia.org/wiki/Hamming_distance) между двумя кортежами одинакового размера.

:::note
Тип результата определяется так же, как и для [арифметических функций](../../sql-reference/functions/arithmetic-functions.md), на основе числа элементов во входных кортежах.

```sql
SELECT
    toTypeName(tupleHammingDistance(tuple(0), tuple(0))) AS t1,
    toTypeName(tupleHammingDistance((0, 0), (0, 0))) AS t2,
    toTypeName(tupleHammingDistance((0, 0, 0), (0, 0, 0))) AS t3,
    toTypeName(tupleHammingDistance((0, 0, 0, 0), (0, 0, 0, 0))) AS t4,
    toTypeName(tupleHammingDistance((0, 0, 0, 0, 0), (0, 0, 0, 0, 0))) AS t5
```

```text
┌─t1────┬─t2─────┬─t3─────┬─t4─────┬─t5─────┐
│ UInt8 │ UInt16 │ UInt32 │ UInt64 │ UInt64 │
└───────┴────────┴────────┴────────┴────────┘
```

:::

**Синтаксис**

```sql
tupleHammingDistance(t1, t2)
```

**Аргументы**

* `t1` — первый кортеж. [`Tuple(*)`](/sql-reference/data-types/tuple)
* `t2` — второй кортеж. [`Tuple(*)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает расстояние Хэмминга. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tupleHammingDistance((1, 2, 3), (3, 2, 1))
```

```response title=Response
2
```

**С MinHash для обнаружения почти дублирующихся строк**

```sql title=Query
SELECT tupleHammingDistance(wordShingleMinHash(string), wordShingleMinHashCaseInsensitive(string)) FROM (SELECT 'ClickHouse is a column-oriented database management system for online analytical processing of queries.' AS string)
```

```response title=Response
2
```


## tupleIntDiv {#tupleIntDiv}

Введено в: v23.8

Выполняет целочисленное поэлементное деление кортежа числителей на кортеж знаменателей. Возвращает кортеж частных.
Если какой-либо из кортежей содержит нецелочисленные элементы, результат вычисляется с округлением до ближайшего целого для каждого нецелочисленного числителя или делителя.
Деление на 0 приводит к ошибке.

**Синтаксис**

```sql
tupleIntDiv(tuple_num, tuple_div)
```

**Аргументы**

* `tuple_num` — кортеж значений числителя. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `tuple_div` — кортеж значений делителя. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж результатов деления. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleIntDiv((15, 10, 5), (5, 5, 5))
```

```response title=Response
(3, 2, 1)
```

**С десятичными числами**

```sql title=Query
SELECT tupleIntDiv((15, 10, 5), (5.5, 5.5, 5.5))
```

```response title=Response
(2, 1, 0)
```


## tupleIntDivByNumber {#tupleIntDivByNumber}

Введено в: v23.8

Выполняет целочисленное деление кортежа числителей на заданный знаменатель и возвращает кортеж частных.
Если хотя бы один из входных параметров содержит нецелочисленные элементы, результат вычисляется с округлением до ближайшего целого для каждого нецелочисленного числителя или делителя.
При попытке деления на 0 генерируется ошибка.

**Синтаксис**

```sql
tupleIntDivByNumber(tuple_num, div)
```

**Аргументы**

* `tuple_num` — кортеж значений числителя. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `div` — значение делителя. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж результатов деления. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleIntDivByNumber((15, 10, 5), 5)
```

```response title=Response
(3, 2, 1)
```

**Для десятичных значений**

```sql title=Query
SELECT tupleIntDivByNumber((15.2, 10.7, 5.5), 5.8)
```

```response title=Response
(2, 1, 0)
```


## tupleIntDivOrZero {#tupleIntDivOrZero}

Введена в версии v23.8

Аналогично функции [`tupleIntDiv`](#tupleIntDiv) выполняет целочисленное деление кортежа числителей на кортеж знаменателей и возвращает кортеж частных.
В случае деления на 0 возвращает частное, равное 0, вместо генерации исключения.
Если хотя бы один из кортежей содержит нецелочисленные элементы, результат вычисляется путём округления до ближайшего целого для каждого нецелочисленного числителя или делителя.

**Синтаксис**

```sql
tupleIntDivOrZero(tuple_num, tuple_div)
```

**Аргументы**

* `tuple_num` — кортеж значений числителей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `tuple_div` — кортеж значений делителей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж частных. Возвращает 0 для тех частных, у которых делитель равен 0. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**С нулевыми делителями**

```sql title=Query
SELECT tupleIntDivOrZero((5, 10, 15), (0, 0, 0))
```

```response title=Response
(0, 0, 0)
```


## tupleIntDivOrZeroByNumber {#tupleIntDivOrZeroByNumber}

Введено в: v23.8

Как и [`tupleIntDivByNumber`](#tupleIntDivByNumber), выполняет целочисленное деление кортежа числителей на заданный знаменатель и возвращает кортеж частных.
Не вызывает ошибку при нулевом делителе, а вместо этого возвращает частное, равное нулю.
Если кортеж числителей или делитель содержат нецелочисленные элементы, результат вычисляется путём округления до ближайшего целого для каждого нецелочисленного числителя или делителя.

**Синтаксис**

```sql
tupleIntDivOrZeroByNumber(tuple_num, div)
```

**Аргументы**

* `tuple_num` — кортеж значений числителя. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `div` — значение делителя. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж частных, где для элементов с делителем, равным `0`, возвращается `0`. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовый пример**

```sql title=Query
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 5)
```

```response title=Response
(3, 2, 1)
```

**При нулевом делителе**

```sql title=Query
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 0)
```

```response title=Response
(0, 0, 0)
```


## tupleMinus {#tupleMinus}

Добавлена в: v21.11

Вычисляет разность между соответствующими элементами двух кортежей одинакового размера.

**Синтаксис**

```sql
tupleMinus(t1, t2)
```

**Псевдонимы**: `vectorDifference`

**Аргументы**

* `t1` — Первый кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `t2` — Второй кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, содержащий результаты операций вычитания. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleMinus((1, 2), (2, 3))
```

```response title=Response
(-1, -1)
```


## tupleModulo {#tupleModulo}

Появилась в версии: v23.8

Возвращает кортеж остатков (модулей) поэлементного деления двух кортежей.

**Синтаксис**

```sql
tupleModulo(tuple_num, tuple_mod)
```

**Аргументы**

* `tuple_num` — Кортеж значений числителя. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `tuple_mod` — Кортеж значений модуля деления. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж остатков от деления. При делении на ноль выбрасывается ошибка. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleModulo((15, 10, 5), (5, 3, 2))
```

```response title=Response
(0, 1, 1)
```


## tupleModuloByNumber {#tupleModuloByNumber}

Добавлена в версии: v23.8

Возвращает кортеж остатков от деления элементов кортежа на заданный делитель.

**Синтаксис**

```sql
tupleModuloByNumber(tuple_num, div)
```

**Аргументы**

* `tuple_num` — кортеж элементов числителя. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `div` — значение делителя. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж остатков от деления. При делении на ноль выбрасывается ошибка. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleModuloByNumber((15, 10, 5), 2)
```

```response title=Response
(1, 0, 1)
```


## tupleMultiply {#tupleMultiply}

Введено в версии: v21.11

Вычисляет произведение соответствующих элементов двух кортежей одинакового размера.

**Синтаксис**

```sql
tupleMultiply(t1, t2)
```

**Аргументы**

* `t1` — Первый кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `t2` — Второй кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж с результатами умножения. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleMultiply((1, 2), (2, 3))
```

```response title=Response
(2, 6)
```


## tupleMultiplyByNumber {#tupleMultiplyByNumber}

Добавлена в версии: v21.11

Возвращает кортеж, в котором все элементы умножены на число.

**Синтаксис**

```sql
tupleMultiplyByNumber(tuple, number)
```

**Аргументы**

* `tuple` — кортеж, который нужно умножить. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `number` — множитель. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж с умноженными элементами. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleMultiplyByNumber((1, 2), -2.1)
```

```response title=Response
(-2.1, -4.2)
```


## tupleNames {#tupleNames}

Добавлена в: v

Преобразует кортеж в массив имён столбцов. Для кортежа вида `Tuple(a T, b T, ...)` возвращает массив строк, представляющих именованные столбцы кортежа. Если элементы кортежа не имеют явных имён, в качестве имён столбцов используются их индексы.

**Синтаксис**

```sql
```

**Аргументы**

* Нет

**Возвращаемое значение**

**Примеры**

**Типичный пример**

```sql title=Query
SELECT tupleNames(tuple(1 as a, 2 as b))
```

```response title=Response
['a','b']
```


## tupleNegate {#tupleNegate}

Введена в версии v21.11

Вычисляет отрицание элементов кортежа.

**Синтаксис**

```sql
tupleNegate(t)
```

**Аргументы**

* `t` — кортеж, к которому применяется операция отрицания. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж с результатом отрицания. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleNegate((1, 2))
```

```response title=Response
(-1, -2)
```


## tuplePlus {#tuplePlus}

Добавлена в версии v21.11

Вычисляет сумму соответствующих элементов двух кортежей одинаковой длины.

**Синтаксис**

```sql
tuplePlus(t1, t2)
```

**Псевдонимы**: `vectorSum`

**Аргументы**

* `t1` — Первый кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
* `t2` — Второй кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, содержащий суммы соответствующих элементов входных кортежей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tuplePlus((1, 2), (2, 3))
```

```response title=Response
(3, 5)
```


## tupleToNameValuePairs {#tupleToNameValuePairs}

Впервые появился в: v21.9

Преобразует кортеж в массив пар `(name, value)`.
Например, кортеж `Tuple(n1 T1, n2 T2, ...)` преобразуется в `Array(Tuple('n1', T1), Tuple('n2', T2), ...)`.
Все значения в кортеже должны быть одного типа.

**Синтаксис**

```sql
tupleToNameValuePairs(tuple)
```

**Аргументы**

* `tuple` — именованный кортеж произвольных типов. [`Tuple(n1 T1[, n2 T2, ...])`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает массив пар вида `(name, value)`. [`Array(Tuple(String, T))`](/sql-reference/data-types/array)

**Примеры**

**Именованный кортеж**

```sql title=Query
SELECT tupleToNameValuePairs(tuple(1593 AS user_ID, 2502 AS session_ID))
```

```response title=Response
[('1', 1593), ('2', 2502)]
```

**Неименованный кортеж**

```sql title=Query
SELECT tupleToNameValuePairs(tuple(3, 2, 1))
```

```response title=Response
[('1', 3), ('2', 2), ('3', 1)]
```

{/* AUTOGENERATED_END */ }


## untuple {#untuple}

Выполняет синтаксическую подстановку элементов [tuple](/sql-reference/data-types/tuple) на месте вызова.

Имена результирующих столбцов зависят от реализации и могут изменяться. Не полагайтесь на конкретные имена столбцов после `untuple`.

**Синтаксис**

```sql
untuple(x)
```

Вы можете использовать выражение `EXCEPT`, чтобы исключать столбцы из результата запроса.

**Аргументы**

* `x` — функция `tuple`, столбец или кортеж элементов. [Tuple](../data-types/tuple.md).

**Возвращаемое значение**

* Отсутствует.

**Примеры**

Входная таблица:

```text
┌─key─┬─v1─┬─v2─┬─v3─┬─v4─┬─v5─┬─v6────────┐
│   1 │ 10 │ 20 │ 40 │ 30 │ 15 │ (33,'ab') │
│   2 │ 25 │ 65 │ 70 │ 40 │  6 │ (44,'cd') │
│   3 │ 57 │ 30 │ 20 │ 10 │  5 │ (55,'ef') │
│   4 │ 55 │ 12 │  7 │ 80 │ 90 │ (66,'gh') │
│   5 │ 30 │ 50 │ 70 │ 25 │ 55 │ (77,'kl') │
└─────┴────┴────┴────┴────┴────┴───────────┘
```

Пример использования столбца типа данных `Tuple` в качестве параметра функции `untuple`:

Запрос:

```sql
SELECT untuple(v6) FROM kv;
```

Результат:

```text
┌─_ut_1─┬─_ut_2─┐
│    33 │ ab    │
│    44 │ cd    │
│    55 │ ef    │
│    66 │ gh    │
│    77 │ kl    │
└───────┴───────┘
```

Пример использования выражения `EXCEPT`:

Запрос:

```sql
SELECT untuple((* EXCEPT (v2, v3),)) FROM kv;
```

Результат:

```text
┌─key─┬─v1─┬─v4─┬─v5─┬─v6────────┐
│   1 │ 10 │ 30 │ 15 │ (33,'ab') │
│   2 │ 25 │ 40 │  6 │ (44,'cd') │
│   3 │ 57 │ 10 │  5 │ (55,'ef') │
│   4 │ 55 │ 80 │ 90 │ (66,'gh') │
│   5 │ 30 │ 25 │ 55 │ (77,'kl') │
└─────┴────┴────┴────┴───────────┘
```


## Функции расстояния {#distance-functions}

Все поддерживаемые функции описаны в [документации по функциям расстояния](../../sql-reference/functions/distance-functions.md).