---
description: "Документация по функциям для работы с кортежами"
sidebar_label: "Кортежи"
slug: /sql-reference/functions/tuple-functions
title: "Функции для работы с кортежами"
doc_type: "reference"
---

:::note
Документация ниже автоматически генерируется из системной таблицы `system.functions`.
:::

<!--
Внутреннее содержимое тегов ниже заменяется во время сборки фреймворка документации
на документацию, сгенерированную из system.functions. Пожалуйста, не изменяйте и не удаляйте теги.
См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->


<!--AUTOGENERATED_START-->

## flattenTuple {#flattenTuple}

Введена в версии: v22.6

Преобразует именованный и вложенный кортеж в плоский.
Элементы возвращаемого кортежа представляют собой пути к элементам входного кортежа.

**Синтаксис**

```sql
flattenTuple(input)
```

**Аргументы**

- `input` — именованный и вложенный кортеж для преобразования в плоский. [`Tuple(n1 T1[, n2 T2, ... ])`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, элементы которого представляют собой пути к элементам исходного входного кортежа. [`Tuple(T)`](/sql-reference/data-types/tuple)

**Примеры**

**Пример использования**

```sql title=Запрос
CREATE TABLE tab(t Tuple(a UInt32, b Tuple(c String, d UInt32))) ENGINE = MergeTree ORDER BY tuple();
INSERT INTO tab VALUES ((3, ('c', 4)));

SELECT flattenTuple(t) FROM tab;
```

```response title=Результат
┌─flattenTuple(t)┐
│ (3, 'c', 4)    │
└────────────────┘
```


## tuple {#tuple}

Введено в версии: v

Возвращает кортеж, группируя входные аргументы.

Для столбцов C1, C2, ... с типами T1, T2, ... возвращается именованный кортеж типа Tuple(C1 T1, C2 T2, ...), содержащий эти столбцы, если их имена уникальны и могут использоваться как идентификаторы без кавычек, в противном случае возвращается Tuple(T1, T2, ...). Выполнение функции не требует вычислительных затрат.
Кортежи обычно используются как промежуточные значения для аргументов операторов IN или для создания списка формальных параметров лямбда-функций. Кортежи нельзя записать в таблицу.

Функция реализует оператор `(x, y, ...)`.

**Синтаксис**

```sql

```

**Аргументы**

- Отсутствуют.

**Возвращаемое значение**

**Примеры**

**типичный**

```sql title=Запрос
SELECT tuple(1, 2)
```

```response title=Результат
(1,2)
```


## tupleConcat {#tupleConcat}

Введена в версии: v23.8

Объединяет кортежи, переданные в качестве аргументов.

**Синтаксис**

```sql
tupleConcat(tuple1[, tuple2, [...]])
```

**Аргументы**

- `tupleN` — Произвольное количество аргументов типа Tuple. [`Tuple(T)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, содержащий все элементы из входных кортежей. [`Tuple(T)`](/sql-reference/data-types/tuple)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT tupleConcat((1, 2), ('a',), (true, false))
```

```response title=Результат
(1, 2, 'a', true, false)
```


## tupleDivide {#tupleDivide}

Введена в версии: v21.11

Вычисляет деление соответствующих элементов двух кортежей одинакового размера.

:::note
Деление на ноль вернёт `inf`.
:::

**Синтаксис**

```sql
tupleDivide(t1, t2)
```

**Аргументы**

- `t1` — первый кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — второй кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж с результатом деления. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleDivide((1, 2), (2, 3))
```

```response title=Результат
(0.5, 0.6666666666666666)
```


## tupleDivideByNumber {#tupleDivideByNumber}

Введена в версии: v21.11

Возвращает кортеж, все элементы которого разделены на число.

:::note
Деление на ноль вернёт `inf`.
:::

**Синтаксис**

```sql
tupleDivideByNumber(tuple, number)
```

**Аргументы**

- `tuple` — кортеж для деления. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `number` — делитель. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж с разделёнными элементами. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT tupleDivideByNumber((1, 2), 0.5)
```

```response title=Response
(2, 4)
```


## tupleElement {#tupleElement}

Введена в версии: v1.1

Извлекает элемент из кортежа по индексу или имени.

Для доступа по индексу используется числовой индекс, начинающийся с 1.
Для доступа по имени имя элемента указывается в виде строки (работает только для именованных кортежей).

Необязательный третий аргумент задаёт значение по умолчанию, которое возвращается вместо генерации исключения, если запрашиваемый элемент не существует.
Все аргументы должны быть константами.

Эта функция не имеет накладных расходов во время выполнения и реализует операторы `x.index` и `x.name`.

**Синтаксис**

```sql
tupleElement(tuple, index|name[, default_value])
```

**Аргументы**

- `tuple` — Кортеж или массив кортежей. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(Tuple(T))`](/sql-reference/data-types/array)
- `index` — Индекс элемента, начиная с 1. [`const UInt8/16/32/64`](/sql-reference/data-types/int-uint)
- `name` — Имя элемента. [`const String`](/sql-reference/data-types/string)
- `default_value` — Значение по умолчанию, возвращаемое, если индекс выходит за границы или элемент не существует. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает элемент по указанному индексу или имени. [`Any`](/sql-reference/data-types)

**Примеры**

**Доступ по индексу**

```sql title=Query
SELECT tupleElement((1, 'hello'), 2)
```

```response title=Response
hello
```

**Именованный кортеж с таблицей**

```sql title=Query
CREATE TABLE example (values Tuple(name String, age UInt32)) ENGINE = Memory;
INSERT INTO example VALUES (('Alice', 30));
SELECT tupleElement(values, 'name') FROM example;
```

```response title=Response
Alice
```

**С значением по умолчанию**

```sql title=Query
SELECT tupleElement((1, 2), 5, 'not_found')
```

```response title=Response
not_found
```

**Синтаксис оператора**

```sql title=Query
SELECT (1, 'hello').2
```

```response title=Response
hello
```


## tupleHammingDistance {#tupleHammingDistance}

Введена в версии: v21.1

Возвращает [расстояние Хэмминга](https://en.wikipedia.org/wiki/Hamming_distance) между двумя кортежами одинакового размера.

:::note
Тип результата определяется так же, как для [арифметических функций](../../sql-reference/functions/arithmetic-functions.md), на основе количества элементов во входных кортежах.

```sql
SELECT
    toTypeName(tupleHammingDistance(tuple(0), tuple(0))) AS t1,
    toTypeName(tupleHammingDistance((0, 0), (0, 0))) AS t2,
    toTypeName(tupleHammingDistance((0, 0, 0), (0, 0, 0))) AS t3,
    toTypeName(tupleHammingDistance((0, 0, 0, 0), (0, 0, 0, 0))) AS t4,
    toTypeName(tupleHammingDistance((0, 0, 0, 0, 0), (0, 0, 0, 0, 0))) AS t5
```

```text
┌─t1────┬─t2─────┬─t3─────┬─t4─────┬─t5─────┐
│ UInt8 │ UInt16 │ UInt32 │ UInt64 │ UInt64 │
└───────┴────────┴────────┴────────┴────────┘
```

:::

**Синтаксис**

```sql
tupleHammingDistance(t1, t2)
```

**Аргументы**

- `t1` — первый кортеж. [`Tuple(*)`](/sql-reference/data-types/tuple)
- `t2` — второй кортеж. [`Tuple(*)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Расстояние Хэмминга. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT tupleHammingDistance((1, 2, 3), (3, 2, 1))
```

```response title=Результат
2
```

**Использование MinHash для обнаружения частично дублирующихся строк**

```sql title=Запрос
SELECT tupleHammingDistance(wordShingleMinHash(string), wordShingleMinHashCaseInsensitive(string)) FROM (SELECT 'ClickHouse is a column-oriented database management system for online analytical processing of queries.' AS string)
```

```response title=Результат
2
```


## tupleIntDiv {#tupleIntDiv}

Введена в версии: v23.8

Выполняет целочисленное деление кортежа числителей на кортеж знаменателей. Возвращает кортеж частных.
Если любой из кортежей содержит нецелочисленные элементы, то результат вычисляется путём округления до ближайшего целого числа для каждого нецелочисленного числителя или делителя.
Деление на 0 приводит к ошибке.

**Синтаксис**

```sql
tupleIntDiv(tuple_num, tuple_div)
```

**Аргументы**

- `tuple_num` — Кортеж значений числителей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_div` — Кортеж значений знаменателей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж частных. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleIntDiv((15, 10, 5), (5, 5, 5))
```

```response title=Результат
(3, 2, 1)
```

**С десятичными числами**

```sql title=Запрос
SELECT tupleIntDiv((15, 10, 5), (5.5, 5.5, 5.5))
```

```response title=Результат
(2, 1, 0)
```


## tupleIntDivByNumber {#tupleIntDivByNumber}

Введена в версии: v23.8

Выполняет целочисленное деление кортежа числителей на заданный знаменатель и возвращает кортеж частных.
Если любой из входных параметров содержит нецелочисленные элементы, результат вычисляется путём округления до ближайшего целого числа для каждого нецелочисленного числителя или делителя.
При делении на 0 возникает ошибка.

**Синтаксис**

```sql
tupleIntDivByNumber(tuple_num, div)
```

**Аргументы**

- `tuple_num` — Кортеж значений числителей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — Значение делителя. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж частных. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleIntDivByNumber((15, 10, 5), 5)
```

```response title=Результат
(3, 2, 1)
```

**С десятичными числами**

```sql title=Запрос
SELECT tupleIntDivByNumber((15.2, 10.7, 5.5), 5.8)
```

```response title=Результат
(2, 1, 0)
```


## tupleIntDivOrZero {#tupleIntDivOrZero}

Введена в версии: v23.8

Аналогично [`tupleIntDiv`](#tupleIntDiv) выполняет целочисленное деление кортежа числителей на кортеж знаменателей и возвращает кортеж частных.
В случае деления на 0 возвращает 0 в качестве частного вместо генерации исключения.
Если любой из кортежей содержит нецелочисленные элементы, результат вычисляется путём округления до ближайшего целого числа для каждого нецелочисленного числителя или знаменателя.

**Синтаксис**

```sql
tupleIntDivOrZero(tuple_num, tuple_div)
```

**Аргументы**

- `tuple_num` — Кортеж значений числителей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_div` — Кортеж значений знаменателей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж частных. Возвращает 0 для частных, где знаменатель равен 0. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**С нулевыми знаменателями**

```sql title=Запрос
SELECT tupleIntDivOrZero((5, 10, 15), (0, 0, 0))
```

```response title=Ответ
(0, 0, 0)
```


## tupleIntDivOrZeroByNumber {#tupleIntDivOrZeroByNumber}

Введена в версии: v23.8

Подобно [`tupleIntDivByNumber`](#tupleIntDivByNumber), выполняет целочисленное деление кортежа числителей на заданный знаменатель и возвращает кортеж частных.
Не генерирует ошибку при делении на ноль, а возвращает частное, равное нулю.
Если кортеж или делитель содержат нецелочисленные элементы, результат вычисляется путём округления до ближайшего целого числа для каждого нецелочисленного числителя или делителя.

**Синтаксис**

```sql
tupleIntDivOrZeroByNumber(tuple_num, div)
```

**Аргументы**

- `tuple_num` — Кортеж значений числителей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — Значение делителя. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж частных, где частное равно `0` в случаях, когда делитель равен `0`. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 5)
```

```response title=Результат
(3, 2, 1)
```

**С нулевым делителем**

```sql title=Запрос
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 0)
```

```response title=Результат
(0, 0, 0)
```


## tupleMinus {#tupleMinus}

Введена в версии: v21.11

Вычисляет разность между соответствующими элементами двух кортежей одинакового размера.

**Синтаксис**

```sql
tupleMinus(t1, t2)
```

**Псевдонимы**: `vectorDifference`

**Аргументы**

- `t1` — первый кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — второй кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, содержащий результаты вычитания. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleMinus((1, 2), (2, 3))
```

```response title=Результат
(-1, -1)
```


## tupleModulo {#tupleModulo}

Введена в версии: v23.8

Возвращает кортеж остатков от деления элементов двух кортежей.

**Синтаксис**

```sql
tupleModulo(tuple_num, tuple_mod)
```

**Аргументы**

- `tuple_num` — Кортеж значений делимых. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_mod` — Кортеж значений делителей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж остатков от деления. При делении на ноль возникает ошибка. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleModulo((15, 10, 5), (5, 3, 2))
```

```response title=Результат
(0, 1, 1)
```


## tupleModuloByNumber {#tupleModuloByNumber}

Введено в версии: v23.8

Возвращает кортеж остатков от деления элементов кортежа на заданный делитель.

**Синтаксис**

```sql
tupleModuloByNumber(tuple_num, div)
```

**Аргументы**

- `tuple_num` — Кортеж делимых. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — Делитель. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Кортеж остатков от деления. При делении на ноль возникает ошибка. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleModuloByNumber((15, 10, 5), 2)
```

```response title=Результат
(1, 0, 1)
```


## tupleMultiply {#tupleMultiply}

Введена в версии: v21.11

Вычисляет произведение соответствующих элементов двух кортежей одинакового размера.

**Синтаксис**

```sql
tupleMultiply(t1, t2)
```

**Аргументы**

- `t1` — первый кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — второй кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж с результатами умножения. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleMultiply((1, 2), (2, 3))
```

```response title=Результат
(2, 6)
```


## tupleMultiplyByNumber {#tupleMultiplyByNumber}

Введено в версии: v21.11

Возвращает кортеж, все элементы которого умножены на число.

**Синтаксис**

```sql
tupleMultiplyByNumber(tuple, number)
```

**Аргументы**

- `tuple` — кортеж для умножения. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `number` — множитель. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает кортеж с умноженными элементами. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleMultiplyByNumber((1, 2), -2.1)
```

```response title=Результат
(-2.1, -4.2)
```


## tupleNames {#tupleNames}

Введено в версии: v

Преобразует кортеж в массив имён столбцов. Для кортежа вида `Tuple(a T, b T, ...)` возвращает массив строк, представляющих именованные столбцы кортежа. Если элементы кортежа не имеют явных имён, в качестве имён столбцов будут использованы их индексы.

**Синтаксис**

```sql

```

**Аргументы**

- Отсутствуют.

**Возвращаемое значение**

**Примеры**

**Типичный пример**

```sql title=Запрос
SELECT tupleNames(tuple(1 as a, 2 as b))
```

```response title=Результат
['a','b']
```


## tupleNegate {#tupleNegate}

Введена в версии: v21.11

Вычисляет отрицание элементов кортежа.

**Синтаксис**

```sql
tupleNegate(t)
```

**Аргументы**

- `t` — кортеж для отрицания. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж с результатом отрицания. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tupleNegate((1, 2))
```

```response title=Результат
(-1, -2)
```


## tuplePlus {#tuplePlus}

Введена в версии: v21.11

Вычисляет сумму соответствующих элементов двух кортежей одинакового размера.

**Синтаксис**

```sql
tuplePlus(t1, t2)
```

**Псевдонимы**: `vectorSum`

**Аргументы**

- `t1` — первый кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — второй кортеж. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает кортеж, содержащий суммы соответствующих элементов входных кортежей. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) или [`Tuple(Float*)`](/sql-reference/data-types/tuple) или [`Tuple(Decimal)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT tuplePlus((1, 2), (2, 3))
```

```response title=Результат
(3, 5)
```


## tupleToNameValuePairs {#tupleToNameValuePairs}

Введена в версии: v21.9

Преобразует кортеж в массив пар `(name, value)`.
Например, кортеж `Tuple(n1 T1, n2 T2, ...)` преобразуется в `Array(Tuple('n1', T1), Tuple('n2', T2), ...)`.
Все значения в кортеже должны иметь одинаковый тип.

**Синтаксис**

```sql
tupleToNameValuePairs(tuple)
```

**Аргументы**

- `tuple` — именованный кортеж с любыми типами значений. [`Tuple(n1 T1[, n2 T2, ...])`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает массив с парами `(name, value)`. [`Array(Tuple(String, T))`](/sql-reference/data-types/array)

**Примеры**

**Именованный кортеж**

```sql title=Запрос
SELECT tupleToNameValuePairs(tuple(1593 AS user_ID, 2502 AS session_ID))
```

```response title=Ответ
[('1', 1593), ('2', 2502)]
```

**Неименованный кортеж**

```sql title=Запрос
SELECT tupleToNameValuePairs(tuple(3, 2, 1))
```

```response title=Ответ
[('1', 3), ('2', 2), ('3', 1)]
```

<!--AUTOGENERATED_END-->


## untuple {#untuple}

Выполняет синтаксическую подстановку элементов [tuple](/sql-reference/data-types/tuple) в месте вызова.

Имена результирующих столбцов зависят от реализации и могут изменяться. Не следует полагаться на конкретные имена столбцов после применения `untuple`.

**Синтаксис**

```sql
untuple(x)
```

Для исключения столбцов из результата запроса можно использовать выражение `EXCEPT`.

**Аргументы**

- `x` — функция `tuple`, столбец или кортеж элементов. [Tuple](../data-types/tuple.md).

**Возвращаемое значение**

- Отсутствует.

**Примеры**

Входная таблица:

```text
┌─key─┬─v1─┬─v2─┬─v3─┬─v4─┬─v5─┬─v6────────┐
│   1 │ 10 │ 20 │ 40 │ 30 │ 15 │ (33,'ab') │
│   2 │ 25 │ 65 │ 70 │ 40 │  6 │ (44,'cd') │
│   3 │ 57 │ 30 │ 20 │ 10 │  5 │ (55,'ef') │
│   4 │ 55 │ 12 │  7 │ 80 │ 90 │ (66,'gh') │
│   5 │ 30 │ 50 │ 70 │ 25 │ 55 │ (77,'kl') │
└─────┴────┴────┴────┴────┴────┴───────────┘
```

Пример использования столбца типа `Tuple` в качестве параметра функции `untuple`:

Запрос:

```sql
SELECT untuple(v6) FROM kv;
```

Результат:

```text
┌─_ut_1─┬─_ut_2─┐
│    33 │ ab    │
│    44 │ cd    │
│    55 │ ef    │
│    66 │ gh    │
│    77 │ kl    │
└───────┴───────┘
```

Пример использования выражения `EXCEPT`:

Запрос:

```sql
SELECT untuple((* EXCEPT (v2, v3),)) FROM kv;
```

Результат:

```text
┌─key─┬─v1─┬─v4─┬─v5─┬─v6────────┐
│   1 │ 10 │ 30 │ 15 │ (33,'ab') │
│   2 │ 25 │ 40 │  6 │ (44,'cd') │
│   3 │ 57 │ 10 │  5 │ (55,'ef') │
│   4 │ 55 │ 80 │ 90 │ (66,'gh') │
│   5 │ 30 │ 25 │ 55 │ (77,'kl') │
└─────┴────┴────┴────┴───────────┘
```


## Функции расстояния {#distance-functions}

Все поддерживаемые функции описаны в [документации функций расстояния](../../sql-reference/functions/distance-functions.md).
