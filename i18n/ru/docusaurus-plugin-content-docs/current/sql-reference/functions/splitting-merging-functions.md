---
description: 'Документация по функциям разбиения строк'
sidebar_label: 'Разбиение строк'
slug: /sql-reference/functions/splitting-merging-functions
title: 'Функции разбиения строк'
doc_type: 'reference'
---

import DeprecatedBadge from '@theme/badges/DeprecatedBadge';

# Функции для разделения строк {#functions-for-splitting-strings}

:::note
Документация ниже генерируется из системной таблицы `system.functions`.
:::

{/* 
  Внутреннее содержимое тегов ниже при сборке фреймворка документации
  заменяется документацией, сгенерированной из system.functions. Не изменяйте и не удаляйте эти теги.
  См. https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## alphaTokens {#alphaTokens}

Введена в версии v1.1

Выбирает подстроки из последовательностей подряд идущих байт в диапазонах `a-z` и `A-Z` и возвращает массив этих подстрок.

**Синтаксис**

```sql
alphaTokens(s[, max_substrings])
```

**Псевдонимы**: `splitByAlpha`

**Аргументы**

* `s` — строка, которую нужно разбить. [`String`](/sql-reference/data-types/string)
* `max_substrings` — необязательный параметр. Если `max_substrings > 0`, количество возвращаемых подстрок не будет превышать `max_substrings`, в противном случае функция вернёт максимально возможное количество подстрок. [`Int64`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив полученных подстрок `s`. [`Array(String)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT alphaTokens('abca1abc');
```

```response title=Response
┌─alphaTokens('abca1abc')─┐
│ ['abca','abc']          │
└─────────────────────────┘
```



## arrayStringConcat {#arrayStringConcat}

Introduced in: v1.1


Concatenates string representations of values listed in the array with the provided separator, which is an optional parameter set to an empty string by default.


**Syntax**

```sql
arrayStringConcat(arr[, separator])
```

**Arguments**

- `arr` — The array to concatenate. [`Array(T)`](/sql-reference/data-types/array)
- `separator` — Optional. Separator string. By default an empty string. [`const String`](/sql-reference/data-types/string)


**Returned value**

Returns the concatenated string. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT arrayStringConcat(['12/05/2021', '12:50:00'], ' ') AS DateString;
```

```response title=Response
┌─DateString──────────┐
│ 12/05/2021 12:50:00 │
└─────────────────────┘
```



## extractAllGroupsVertical {#extractAllGroupsVertical}

Introduced in: v20.5


Matches all groups of a string using a regular expression and returns an array of arrays, where each array includes matching fragments from every group, grouped in order of appearance in the input string.


**Syntax**

```sql
extractAllGroupsVertical(s, regexp)
```

**Aliases**: `extractAllGroups`

**Arguments**

- `s` — Input string to extract from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `regexp` — Regular expression to match by. [`const String`](/sql-reference/data-types/string) or [`const FixedString`](/sql-reference/data-types/fixedstring)


**Returned value**

Returns an array of arrays, where each inner array contains the captured groups from one match. Each match produces an array with elements corresponding to the capturing groups in the regular expression (group 1, group 2, etc.). If no matches are found, returns an empty array. [`Array(Array(String))`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
WITH '< Server: nginx
< Date: Tue, 22 Jan 2019 00:26:14 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
' AS s
SELECT extractAllGroupsVertical(s, '< ([\\w\\-]+): ([^\\r\\n]+)');
```

```response title=Response
[['Server','nginx'],['Date','Tue, 22 Jan 2019 00:26:14 GMT'],['Content-Type','text/html; charset=UTF-8'],['Connection','keep-alive']]
```



## ngrams {#ngrams}

Introduced in: v21.11


Splits a UTF-8 string into n-grams of length `N`.


**Syntax**

```sql
ngrams(s, N)
```

**Arguments**

- `s` — Input string. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `N` — The n-gram length. [`const UInt8/16/32/64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns an array with n-grams. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT ngrams('ClickHouse', 3);
```

```response title=Response
['Cli','lic','ick','ckH','kHo','Hou','ous','use']
```



## splitByChar {#splitByChar}

Introduced in: v1.1


Splits a string separated by a specified constant string `separator` of exactly one character into an array of substrings.
Empty substrings may be selected if the separator occurs at the beginning or end of the string, or if there are multiple consecutive separators.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::

Empty substrings may be selected when:
- A separator occurs at the beginning or end of the string
- There are multiple consecutive separators
- The original string `s` is empty


**Syntax**

```sql
splitByChar(separator, s[, max_substrings])
```

**Arguments**

- `separator` — The separator must be a single-byte character. [`String`](/sql-reference/data-types/string)
- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. If `max_substrings > 0`, the returned array will contain at most `max_substrings` substrings, otherwise the function will return as many substrings as possible. The default value is `0`.  [`Int64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns an array of selected substrings. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT splitByChar(',', '1,2,3,abcde');
```

```response title=Response
┌─splitByChar(⋯2,3,abcde')─┐
│ ['1','2','3','abcde']    │
└──────────────────────────┘
```



## splitByNonAlpha {#splitByNonAlpha}

Introduced in: v21.9


Splits a string separated by whitespace and punctuation characters into an array of substrings.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::


**Syntax**

```sql
splitByNonAlpha(s[, max_substrings])
```

**Arguments**

- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns an array of selected substrings of `s`. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT splitByNonAlpha('user@domain.com');
```

```response title=Response
['user','domain','com']
```



## splitByRegexp {#splitByRegexp}

Introduced in: v21.6


Splits a string which is separated by the provided regular expression into an array of substrings.
If the provided regular expression is empty, it will split the string into an array of single characters.
If no match is found for the regular expression, the string won't be split.

Empty substrings may be selected when:
- a non-empty regular expression match occurs at the beginning or end of the string
- there are multiple consecutive non-empty regular expression matches
- the original string string is empty while the regular expression is not empty.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::


**Syntax**

```sql
splitByRegexp(regexp, s[, max_substrings])
```

**Arguments**

- `regexp` — Regular expression. Constant. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns an array of the selected substrings of `s`. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT splitByRegexp('\\d+', 'a12bc23de345f');
```

```response title=Response
┌─splitByRegex⋯c23de345f')─┐
│ ['a12bc23de345f']        │
└──────────────────────────┘
```

**Empty regexp**

```sql title=Query
SELECT splitByRegexp('', 'abcde');
```

```response title=Response
┌─splitByRegexp('', 'abcde')─┐
│ ['a','b','c','d','e']      │
└────────────────────────────┘
```



## splitByString {#splitByString}

Introduced in: v1.1


Splits a string with a constant `separator` consisting of multiple characters into an array of substrings.
If the string `separator` is empty, it will split the string `s` into an array of single characters.

Empty substrings may be selected when:
- A non-empty separator occurs at the beginning or end of the string
- There are multiple consecutive non-empty separators
- The original string `s` is empty while the separator is not empty

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::


**Syntax**

```sql
splitByString(separator, s[, max_substrings])
```

**Arguments**

- `separator` — The separator. [`String`](/sql-reference/data-types/string)
- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns an array of selected substrings of `s` [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT splitByString(', ', '1, 2 3, 4,5, abcde');
```

```response title=Response
┌─splitByStrin⋯4,5, abcde')─┐
│ ['1','2 3','4,5','abcde'] │
└───────────────────────────┘
```

**Empty separator**

```sql title=Query
SELECT splitByString('', 'abcde');
```

```response title=Response
┌─splitByString('', 'abcde')─┐
│ ['a','b','c','d','e']      │
└────────────────────────────┘
```



## splitByWhitespace {#splitByWhitespace}

Introduced in: v21.9


Splits a string which is separated by whitespace characters into an array of substrings.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::


**Syntax**

```sql
splitByWhitespace(s[, max_substrings])
```

**Arguments**

- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns an array of the selected substrings of `s`. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT splitByWhitespace('  1!  a,  b.  ');
```

```response title=Response
['1!','a,','b.']
```



## tokens {#tokens}

Introduced in: v21.11


Splits a string into tokens using the given tokenizer.
The default tokenizer uses non-alphanumeric ASCII characters as separators.

In case of the `split` tokenizer, if the tokens do not form a [prefix code](https://en.wikipedia.org/wiki/Prefix_code), you likely want that the matching prefers longer separators first.
To do so, pass the separators in order of descending length.
For example, with separators = `['%21', '%']` string `%21abc` would be tokenized as `['abc']`, whereas separators = `['%', '%21']` would tokenize to `['21ac']` (which is likely not what you wanted).


**Syntax**

```sql
tokens(value[, tokenizer[, ngrams[, separators]]])
```

**Arguments**

- `value` — The input string. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `tokenizer` — The tokenizer to use. Valid arguments are `splitByNonAlpha`, `ngrams`, `splitByString`, `array`, and `sparseGrams`. Optional, if not set explicitly, defaults to `splitByNonAlpha`. [`const String`](/sql-reference/data-types/string)
- `ngrams` — Only relevant if argument `tokenizer` is `ngrams`: An optional parameter which defines the length of the ngrams. Must be between 1 and 8. If not set explicitly, defaults to `3`. [`const UInt8`](/sql-reference/data-types/int-uint)
- `separators` — Only relevant if argument `tokenizer` is `split`: An optional parameter which defines the separator strings. If not set explicitly, defaults to `[' ']`. [`const Array(String)`](/sql-reference/data-types/array)


**Returned value**

Returns the resulting array of tokens from input string. [`Array`](/sql-reference/data-types/array)

**Examples**

**Default tokenizer**

```sql title=Query
SELECT tokens('test1,;\\\\ test2,;\\\\ test3,;\\\\   test4') AS tokens;
```

```response title=Response
['test1','test2','test3','test4']
```

**Ngram tokenizer**

```sql title=Query
SELECT tokens('abc def', 'ngrams', 3) AS tokens;
```

```response title=Response
['abc','bc ','c d',' de','def']
```

{/*AUTOGENERATED_END*/ }
