---
slug: '/sql-reference/functions/distance-functions'
sidebar_label: Расстояние
description: 'Документация для функций расстояния'
title: 'Функции расстояний'
doc_type: reference
---
# Функции расстояния

<!-- 
Содержимое тегов ниже заменяется на этапе сборки документации 
документами, сгенерированными из system.functions. Пожалуйста, не модифицируйте и не удаляйте теги.
Смотрите: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->

<!--AUTOGENERATED_START-->
## L1Distance {#L1Distance}

Представлено в: v21.11


Вычисляет расстояние между двумя точками (элементы векторов являются координатами) в пространстве `L1` (1-норма ([геометрия такси](https://en.wikipedia.org/wiki/Taxicab_geometry) расстояние)).
    

**Синтаксис**

```sql
L1Distance(vector1, vector2)
```

**Аргументы**

- `vector1` — Первый вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Второй вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)


**Возвращаемое значение**

Возвращает 1-норму. [`UInt32`](/sql-reference/data-types/int-uint) или [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L1Distance((1, 2), (2, 3))
```

```response title=Response
┌─L1Distance((1, 2), (2, 3))─┐
│                          2 │
└────────────────────────────┘
```



## L1Norm {#L1Norm}

Представлено в: v21.11


Вычисляет сумму абсолютных элементов вектора.
    

**Синтаксис**

```sql
L1Norm(vector)
```

**Аргументы**

- `vector` — Вектор или кортеж числовых значений. [`Array(T)`](/sql-reference/data-types/array) или [`Tuple(T)`](/sql-reference/data-types/tuple)


**Возвращаемое значение**

Возвращает L1-норму или [геометрию такси](https://en.wikipedia.org/wiki/Taxicab_geometry) расстояние. [`UInt*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L1Norm((1, 2))
```

```response title=Response
┌─L1Norm((1, 2))─┐
│              3 │
└────────────────┘
```



## L1Normalize {#L1Normalize}

Представлено в: v21.11


Вычисляет единичный вектор заданного вектора (элементы кортежа являются координатами) в пространстве `L1` ([геометрия такси](https://en.wikipedia.org/wiki/Taxicab_geometry)).
    

**Синтаксис**

```sql
L1Normalize(tuple)
```

**Аргументы**

- `tuple` — Кортеж числовых значений. [`Tuple(T)`](/sql-reference/data-types/tuple)


**Возвращаемое значение**

Возвращает единичный вектор. [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L1Normalize((1, 2))
```

```response title=Response
┌─L1Normalize((1, 2))─────────────────────┐
│ (0.3333333333333333,0.6666666666666666) │
└─────────────────────────────────────────┘
```



## L2Distance {#L2Distance}

Представлено в: v21.11


Вычисляет расстояние между двумя точками (элементы векторов являются координатами) в евклидном пространстве ([евклидово расстояние](https://en.wikipedia.org/wiki/Euclidean_distance)).
    

**Синтаксис**

```sql
L2Distance(vector1, vector2)
```

**Аргументы**

- `vector1` — Первый вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Второй вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)


**Возвращаемое значение**

Возвращает 2-норму. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L2Distance((1, 2), (2, 3))
```

```response title=Response
┌─L2Distance((1, 2), (2, 3))─┐
│         1.4142135623730951 │
└────────────────────────────┘
```



## L2DistanceTransposed {#L2DistanceTransposed}

Представлено в: v25.10


Вычисляет приблизительное расстояние между двумя точками (значения векторов являются координатами) в евклидном пространстве ([евклидово расстояние](https://en.wikipedia.org/wiki/Euclidean_distance)).    

**Синтаксис**

```sql
L2DistanceTransposed(vector1, vector2, p)
```

**Аргументы**

- `vectors` — Векторы. [`QBit(T, UInt64)`](/sql-reference/data-types/qbit)
- `reference` — Референтный вектор. [`Array(T)`](/sql-reference/data-types/array)
- `p` — Количество бит от каждого элемента вектора, используемое в вычислении расстояния (от 1 до размера бита элемента). Уровень квантования контролирует компромисс между точностью и скоростью. Использование меньшего количества битов приводит к более быстрой I/O и вычислениям с меньшей точностью, в то время как использование большего количества битов увеличивает точность за счет производительности. [`UInt`](/sql-reference/data-types/int-uint)


**Возвращаемое значение**

Возвращает приблизительное 2-норму расстояния. [`Float`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
CREATE TABLE qbit (id UInt32, vec QBit(Float64, 2)) ENGINE = Memory;
INSERT INTO qbit VALUES (1, [0, 1]);
SELECT L2DistanceTransposed(vec, array(1.0, 2.0), 16) FROM qbit;"
```

```response title=Response
┌─L2DistanceTransposed([0, 1], [1.0, 2.0], 16)─┐
│                           1.4142135623730951 │
└──────────────────────────────────────────────┘
```



## L2Norm {#L2Norm}

Представлено в: v21.11


Вычисляет квадратный корень из суммы квадратов элементов вектора.
    

**Синтаксис**

```sql
L2Norm(vector)
```

**Аргументы**

- `vector` — Вектор или кортеж числовых значений. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)


**Возвращаемое значение**

Возвращает L2-норму или [евклидово расстояние](https://en.wikipedia.org/wiki/Euclidean_distance). [`UInt*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L2Norm((1, 2))
```

```response title=Response
┌───L2Norm((1, 2))─┐
│ 2.23606797749979 │
└──────────────────┘
```



## L2Normalize {#L2Normalize}

Представлено в: v21.11


Вычисляет единичный вектор заданного вектора (элементы кортежа являются координатами) в евклидном пространстве (с использованием [евклидова расстояния](https://en.wikipedia.org/wiki/Euclidean_distance)).
    

**Синтаксис**

```sql
L2Normalize(tuple)
```

**Аргументы**

- `tuple` — Кортеж числовых значений. [`Tuple(T)`](/sql-reference/data-types/tuple)


**Возвращаемое значение**

Возвращает единичный вектор. [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L2Normalize((3, 4))
```

```response title=Response
┌─L2Normalize((3, 4))─┐
│ (0.6,0.8)           │
└─────────────────────┘
```



## L2SquaredDistance {#L2SquaredDistance}

Представлено в: v22.7


Вычисляет сумму квадратов разности между соответствующими элементами двух векторов.
    

**Синтаксис**

```sql
L2SquaredDistance(vector1, vector2)
```

**Аргументы**

- `vector1` — Первый вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Второй вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)


**Возвращаемое значение**

Возвращает сумму квадратов разности между соответствующими элементами двух векторов. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L2SquaredDistance([1, 2, 3], [0, 0, 0])
```

```response title=Response
┌─L2SquaredDis⋯ [0, 0, 0])─┐
│                       14 │
└──────────────────────────┘
```



## L2SquaredNorm {#L2SquaredNorm}

Представлено в: v22.7


Вычисляет квадратный корень из суммы квадратов элементов вектора (квадрат [`L2Norm`](#L2Norm)).
    

**Синтаксис**

```sql
L2SquaredNorm(vector)
```

**Аргументы**

- `vector` — Вектор или кортеж числовых значений. [`Array(T)`](/sql-reference/data-types/array) или [`Tuple(T)`](/sql-reference/data-types/tuple)


**Возвращаемое значение**

Возвращает L2-норму в квадрате. [`UInt*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT L2SquaredNorm((1, 2))
```

```response title=Response
┌─L2SquaredNorm((1, 2))─┐
│                     5 │
└───────────────────────┘
```



## LinfDistance {#LinfDistance}

Представлено в: v21.11


Вычисляет расстояние между двумя точками (элементы векторов являются координатами) в пространстве `L_{inf}` ([максимальная норма](https://en.wikipedia.org/wiki/Norm_(mathematics)#Maximum_norm_(special_case_of:_infinity_norm,_uniform_norm,_or_supremum_norm))).
    

**Синтаксис**

```sql
LinfDistance(vector1, vector2)
```

**Аргументы**

- `vector1` — Первый вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Второй вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)


**Возвращаемое значение**

Возвращает расстояние бесконечности. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT LinfDistance((1, 2), (2, 3))
```

```response title=Response
┌─LinfDistance((1, 2), (2, 3))─┐
│                            1 │
└──────────────────────────────┘
```



## LinfNorm {#LinfNorm}

Представлено в: v21.11


Вычисляет максимум абсолютных элементов вектора.
    

**Синтаксис**

```sql
LinfNorm(vector)
```

**Аргументы**

- `vector` — Вектор или кортеж числовых значений. [`Array(T)`](/sql-reference/data-types/array) или [`Tuple(T)`](/sql-reference/data-types/tuple)


**Возвращаемое значение**

Возвращает Linf-норму или максимальное абсолютное значение. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT LinfNorm((1, -2))
```

```response title=Response
┌─LinfNorm((1, -2))─┐
│                 2 │
└───────────────────┘
```



## LinfNormalize {#LinfNormalize}

Представлено в: v21.11


Вычисляет единичный вектор заданного вектора (элементы кортежа являются координатами) в пространстве `L_{inf}` (с использованием [максимальной нормы](https://en.wikipedia.org/wiki/Norm_(mathematics)#Maximum_norm_(special_case_of:_infinity_norm,_uniform_norm,_or_supremum_norm))).
    

**Синтаксис**

```sql
LinfNormalize(tuple)
```

**Аргументы**

- `tuple` — Кортеж числовых значений. [`Tuple(T)`](/sql-reference/data-types/tuple)


**Возвращаемое значение**

Возвращает единичный вектор. [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT LinfNormalize((3, 4))
```

```response title=Response
┌─LinfNormalize((3, 4))─┐
│ (0.75,1)              │
└───────────────────────┘
```



## LpDistance {#LpDistance}

Представлено в: v21.11


Вычисляет расстояние между двумя точками (элементы векторов являются координатами) в пространстве `Lp` ([p-норма расстояния](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm)).
    

**Синтаксис**

```sql
LpDistance(vector1, vector2, p)
```

**Аргументы**

- `vector1` — Первый вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Второй вектор. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `p` — Степень. Возможные значения: вещественное число из `[1; inf)`. [`UInt*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)


**Возвращаемое значение**

Возвращает p-норму расстояния. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT LpDistance((1, 2), (2, 3), 3)
```

```response title=Response
┌─LpDistance((1, 2), (2, 3), 3)─┐
│            1.2599210498948732 │
└───────────────────────────────┘
```



## LpNorm {#LpNorm}

Представлено в: v21.11


Вычисляет p-норму вектора, которая является p-мудрым корнем из суммы p-ых степеней абсолютных элементов его элементов.

Особые случаи:
- Когда p=1, это эквивалентно L1Norm (расстояние Манхэттена).
- Когда p=2, это эквивалентно L2Norm (евклидово расстояние).
- Когда p=∞, это эквивалентно LinfNorm (максимальная норма).
    

**Синтаксис**

```sql
LpNorm(vector, p)
```

**Аргументы**

- `vector` — Вектор или кортеж числовых значений. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `p` — Степень. Возможные значения — вещественные числа в диапазоне `[1; inf)`. [`UInt*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)


**Возвращаемое значение**

Возвращает [Lp-норму](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm). [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT LpNorm((1, -2), 2)
```

```response title=Response
┌─LpNorm((1, -2), 2)─┐
│   2.23606797749979 │
└────────────────────┘
```



## LpNormalize {#LpNormalize}

Представлено в: v21.11


Вычисляет единичный вектор заданного вектора (элементы кортежа являются координатами) в пространстве `Lp` (с использованием [p-нормы](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm)).
        

**Синтаксис**

```sql
LpNormalize(tuple, p)
```

**Аргументы**

- `tuple` — Кортеж числовых значений. [`Tuple(T)`](/sql-reference/data-types/tuple)
- `p` — Степень. Возможные значения — любое число в диапазоне от `[1; inf)`. [`UInt*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)


**Возвращаемое значение**

Возвращает единичный вектор. [`Tuple(Float64)`](/sql-reference/data-types/tuple)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT LpNormalize((3, 4), 5)
```

```response title=Response
┌─LpNormalize((3, 4), 5)──────────────────┐
│ (0.7187302630182624,0.9583070173576831) │
└─────────────────────────────────────────┘
```



## cosineDistance {#cosineDistance}

Представлено в: v1.1


Вычисляет косинусное расстояние между двумя векторами (элементы кортежей являются координатами). Чем меньше возвращаемое значение, тем более похожи векторы.
    

**Синтаксис**

```sql
cosineDistance(vector1, vector2)
```

**Аргументы**

- `vector1` — Первый кортеж. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Второй кортеж. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array)


**Возвращаемое значение**

Возвращает косинус угла между двумя векторами, вычтенный из одного. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT cosineDistance((1, 2), (2, 3));
```

```response title=Response
┌─cosineDistance((1, 2), (2, 3))─┐
│           0.007722123286332261 │
└────────────────────────────────┘
```



<!--AUTOGENERATED_END-->