---
description: 'Документация по строковым функциям'
sidebar_label: 'Строки'
slug: /sql-reference/functions/string-functions
title: 'Функции для работы со строками'
doc_type: 'reference'
---

import VersionBadge from '@theme/badges/VersionBadge';


# Функции для работы со строками

Функции [поиска](string-search-functions.md) и [замены](string-replace-functions.md) в строках описаны отдельно.

:::note
Документация ниже автоматически генерируется из системной таблицы `system.functions`.
:::

<!--
The inner content of the tags below are replaced at doc framework build time with
docs generated from system.functions. Please do not modify or remove the tags.
See: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->


<!--AUTOGENERATED_START-->

## CRC32 {#CRC32}

Добавлена в версии: v20.1

Вычисляет контрольную сумму CRC32 строки, используя полином CRC-32-IEEE 802.3 и начальное значение `0xffffffff` (реализация zlib).

**Синтаксис**

```sql
CRC32(s)
```

**Аргументы**

- `s` — строка, для которой вычисляется CRC32. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC32 строки. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT CRC32('ClickHouse')
```

```response title=Результат
┌─CRC32('ClickHouse')─┐
│          1538217360 │
└─────────────────────┘
```


## CRC32IEEE {#CRC32IEEE}

Введена в версии: v20.1

Вычисляет контрольную сумму CRC32 строки с использованием полинома CRC-32-IEEE 802.3.

**Синтаксис**

```sql
CRC32IEEE(s)
```

**Аргументы**

- `s` — строка, для которой вычисляется CRC32. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC32 строки. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC32IEEE('ClickHouse');
```

```response title=Response
┌─CRC32IEEE('ClickHouse')─┐
│              3089448422 │
└─────────────────────────┘
```


## CRC64 {#CRC64}

Введена в версии: v20.1

Вычисляет контрольную сумму CRC64 строки с использованием полинома CRC-64-ECMA.

**Синтаксис**

```sql
CRC64(s)
```

**Аргументы**

- `s` — строка, для которой вычисляется CRC64. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC64 строки. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC64('ClickHouse');
```

```response title=Response
┌──CRC64('ClickHouse')─┐
│ 12126588151325169346 │
└──────────────────────┘
```


## appendTrailingCharIfAbsent {#appendTrailingCharIfAbsent}

Введена в версии: v1.1

Добавляет символ `c` в конец строки `s`, если `s` не пустая и не заканчивается символом `c`.

**Синтаксис**

```sql
appendTrailingCharIfAbsent(s, c)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)
- `c` — символ для добавления, если он отсутствует. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s` с добавленным в конец символом `c`, если `s` не заканчивается на `c`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT appendTrailingCharIfAbsent('https://example.com', '/');
```

```response title=Результат
┌─appendTraili⋯.com', '/')─┐
│ https://example.com/     │
└──────────────────────────┘
```


## ascii {#ascii}

Введено в версии: v22.11

Возвращает код ASCII первого символа строки `s` в виде `Int32`.

**Синтаксис**

```sql
ascii(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает код ASCII первого символа. Если `s` пустая, результат равен `0`. Если первый символ не является символом ASCII или не входит в диапазон дополнения Latin-1 кодировки UTF-16, результат не определён. [`Int32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT ascii('234')
```

```response title=Результат
┌─ascii('234')─┐
│           50 │
└──────────────┘
```


## base32Decode {#base32Decode}

Введена в версии: v25.6

Декодирует строку в формате [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6) (RFC 4648).
Если строка не является корректной Base32-кодировкой, генерируется исключение.

**Синтаксис**

```sql
base32Decode(encoded)
```

**Аргументы**

- `encoded` — столбец или константа типа String. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─base32Decode('IVXGG33EMVSA====')─┐
│ Encoded                          │
└──────────────────────────────────┘
```


## base32Encode {#base32Encode}

Добавлено в версии: v25.6

Кодирует строку с использованием [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6).

**Синтаксис**

```sql
base32Encode(plaintext)
```

**Аргументы**

- `plaintext` — Текст для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с закодированным значением аргумента. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT base32Encode('Encoded')
```

```response title=Результат
┌─base32Encode('Encoded')─┐
│ IVXGG33EMVSA====        │
└─────────────────────────┘
```


## base58Decode {#base58Decode}

Введена в версии: v22.7

Декодирует строку в формате [Base58](https://datatracker.ietf.org/doc/html/draft-msporny-base58-03#section-3).
Если строка не является корректной Base58-кодировкой, генерируется исключение.

**Синтаксис**

```sql
base58Decode(encoded)
```

**Аргументы**

- `encoded` — столбец или константа типа String для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT base58Decode('JxF12TrwUP45BMd');
```

```response title=Результат
┌─base58Decode⋯rwUP45BMd')─┐
│ Hello World              │
└──────────────────────────┘
```


## base58Encode {#base58Encode}

Добавлена в версии: v22.7

Кодирует строку с использованием кодировки [Base58](https://tools.ietf.org/id/draft-msporny-base58-01.html).

**Синтаксис**

```sql
base58Encode(plaintext)
```

**Аргументы**

- `plaintext` — Текст для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT base58Encode('ClickHouse');
```

```response title=Результат
┌─base58Encode('ClickHouse')─┐
│ 4nhk8K7GHXf6zx             │
└────────────────────────────┘
```


## base64Decode {#base64Decode}

Добавлено в версии: v18.16

Декодирует строку из представления [Base64](https://en.wikipedia.org/wiki/Base64) согласно RFC 4648.
В случае ошибки генерирует исключение.

**Синтаксис**

```sql
base64Decode(encoded)
```

**Псевдонимы**: `FROM_BASE64`

**Аргументы**

- `encoded` — Строковый столбец или константа для декодирования. Если строка не является корректно закодированной в Base64, генерируется исключение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает декодированную строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT base64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Результат
┌─base64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                       │
└──────────────────────────────────┘
```


## base64Encode {#base64Encode}

Введена в версии: v18.16

Кодирует строку в представление [Base64](https://en.wikipedia.org/wiki/Base64) согласно RFC 4648.

**Синтаксис**

```sql
base64Encode(plaintext)
```

**Псевдонимы**: `TO_BASE64`

**Аргументы**

- `plaintext` — Столбец или константа с текстом для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с закодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT base64Encode('clickhouse')
```

```response title=Результат
┌─base64Encode('clickhouse')─┐
│ Y2xpY2tob3VzZQ==           │
└────────────────────────────┘
```


## base64URLDecode {#base64URLDecode}

Введена в версии: v24.6

Декодирует строку из представления [Base64](https://en.wikipedia.org/wiki/Base64) с использованием URL-безопасного алфавита в соответствии с RFC 4648.
В случае ошибки выбрасывает исключение.

**Синтаксис**

```sql
base64URLDecode(encoded)
```

**Аргументы**

- `encoded` — строковый столбец или константа для декодирования. Если строка не является корректно закодированной в Base64, выбрасывается исключение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                            │
└───────────────────────────────────────────────────┘
```


## base64URLEncode {#base64URLEncode}

Введена в версии: v18.16

Кодирует строку в представление [Base64](https://datatracker.ietf.org/doc/html/rfc4648#section-4) (RFC 4648) с использованием URL-безопасного алфавита.

**Синтаксис**

```sql
base64URLEncode(plaintext)
```

**Аргументы**

- `plaintext` — Столбец или константа с текстом для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с закодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64URLEncode('https://clickhouse.com')
```

```response title=Response
┌─base64URLEncode('https://clickhouse.com')─┐
│ aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ            │
└───────────────────────────────────────────┘
```


## basename {#basename}

Introduced in: v20.1

Извлекает последнюю часть строки после последнего символа прямой или обратной косой черты.
Эта функция часто используется для извлечения имени файла из пути.

**Синтаксис**

```sql
basename(expr)
```

**Аргументы**

- `expr` — Строковое выражение. Обратные косые черты должны быть экранированы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает последнюю часть входной строки после последнего символа прямой или обратной косой черты. Если входная строка заканчивается прямой или обратной косой чертой, функция возвращает пустую строку. Возвращает исходную строку, если в ней нет прямых или обратных косых черт. [`String`](/sql-reference/data-types/string)

**Примеры**

**Извлечение имени файла из пути Unix**

```sql title=Запрос
SELECT 'some/long/path/to/file' AS a, basename(a)
```

```response title=Результат
┌─a──────────────────────┬─basename('some/long/path/to/file')─┐
│ some/long/path/to/file │ file                               │
└────────────────────────┴────────────────────────────────────┘
```

**Извлечение имени файла из пути Windows**

```sql title=Запрос
SELECT 'some\\long\\path\\to\\file' AS a, basename(a)
```

```response title=Результат
┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
```

**Строка без разделителей пути**

```sql title=Запрос
SELECT 'some-file-name' AS a, basename(a)
```

```response title=Результат
┌─a──────────────┬─basename('some-file-name')─┐
│ some-file-name │ some-file-name             │
└────────────────┴────────────────────────────┘
```


## byteHammingDistance {#byteHammingDistance}

Введена в версии: v23.9

Вычисляет [расстояние Хэмминга](https://en.wikipedia.org/wiki/Hamming_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
byteHammingDistance(s1, s2)
```

**Псевдонимы**: `mismatches`

**Аргументы**

- `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
- `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние Хэмминга между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT byteHammingDistance('karolin', 'kathrin')
```

```response title=Результат
┌─byteHammingDistance('karolin', 'kathrin')─┐
│                                         3 │
└───────────────────────────────────────────┘
```


## compareSubstrings {#compareSubstrings}

Введена в версии: v25.2

Выполняет лексикографическое сравнение двух строк.

**Синтаксис**

```sql
compareSubstrings(s1, s2, s1_offset, s2_offset, num_bytes)
```

**Аргументы**

- `s1` — Первая строка для сравнения. [`String`](/sql-reference/data-types/string)
- `s2` — Вторая строка для сравнения. [`String`](/sql-reference/data-types/string)
- `s1_offset` — Позиция (индексация с нуля) в `s1`, с которой начинается сравнение. [`UInt*`](/sql-reference/data-types/int-uint)
- `s2_offset` — Позиция (индексация с нуля) в `s2`, с которой начинается сравнение. [`UInt*`](/sql-reference/data-types/int-uint)
- `num_bytes` — Максимальное количество байтов для сравнения в обеих строках. Если `s1_offset` (или `s2_offset`) + `num_bytes` выходит за пределы входной строки, значение `num_bytes` будет соответствующим образом уменьшено. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

- `-1`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] < `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
- `0`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] = `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
- `1`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] > `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
  [`Int8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT compareSubstrings('Saxony', 'Anglo-Saxon', 0, 6, 5) AS result
```

```response title=Результат
┌─result─┐
│      0 │
└────────┘
```


## concat {#concat}

Введено в версии: v1.1

Конкатенирует (объединяет) переданные аргументы.

Аргументы, не являющиеся типами [`String`](../data-types/string.md) или [`FixedString`](../data-types/fixedstring.md), преобразуются в строки с использованием стандартной сериализации.
Поскольку это снижает производительность, не рекомендуется использовать аргументы типов, отличных от String/FixedString.

**Синтаксис**

```sql
concat([s1, s2, ...])
```

**Аргументы**

- `s1, s2, ...` — Любое количество значений произвольного типа. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает строку, созданную путём конкатенации аргументов. Если любой из аргументов равен `NULL`, функция возвращает `NULL`. Если аргументы отсутствуют, возвращается пустая строка. [`Nullable(String)`](/sql-reference/data-types/nullable)

**Примеры**

**Конкатенация строк**

```sql title=Запрос
SELECT concat('Hello, ', 'World!')
```

```response title=Результат
┌─concat('Hello, ', 'World!')─┐
│ Hello, World!               │
└─────────────────────────────┘
```

**Конкатенация чисел**

```sql title=Запрос
SELECT concat(42, 144)
```

```response title=Результат
┌─concat(42, 144)─┐
│ 42144           │
└─────────────────┘
```


## concatAssumeInjective {#concatAssumeInjective}

Введена в версии: v1.1

Аналогична [`concat`](#concat), но предполагает, что `concat(s1, s2, ...) → sn` является инъективной,
то есть возвращает различные результаты для различных аргументов.

Может использоваться для оптимизации `GROUP BY`.

**Синтаксис**

```sql
concatAssumeInjective([s1, s2, ...])
```

**Аргументы**

- `s1, s2, ...` — Любое количество значений произвольного типа. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает строку, созданную путём конкатенации аргументов. Если любое из значений аргументов равно `NULL`, функция возвращает `NULL`. Если аргументы не переданы, возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Примеры**

**Оптимизация GROUP BY**

```sql title=Запрос
SELECT concat(key1, key2), sum(value) FROM key_val GROUP BY concatAssumeInjective(key1, key2)
```

```response title=Результат
┌─concat(key1, key2)─┬─sum(value)─┐
│ Hello, World!      │          3 │
│ Hello, World!      │          2 │
│ Hello, World       │          3 │
└────────────────────┴────────────┘
```


## concatWithSeparator {#concatWithSeparator}

Введена в версии: v22.12

Объединяет переданные строки, разделяя их указанным разделителем.

**Синтаксис**

```sql
concatWithSeparator(sep[, exp1, exp2, ...])
```

**Псевдонимы**: `concat_ws`

**Аргументы**

- `sep` — Разделитель. [`const String`](/sql-reference/data-types/string) или [`const FixedString`](/sql-reference/data-types/fixedstring)
- `exp1, exp2, ...` — Выражения для объединения. Аргументы, не являющиеся типами `String` или `FixedString`, преобразуются в строки с использованием сериализации по умолчанию. Поскольку это снижает производительность, не рекомендуется использовать аргументы типов, отличных от String/FixedString. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает строку, созданную путём объединения аргументов. Если любой из аргументов имеет значение `NULL`, функция возвращает `NULL`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT concatWithSeparator('a', '1', '2', '3', '4')
```

```response title=Результат
┌─concatWithSeparator('a', '1', '2', '3', '4')─┐
│ 1a2a3a4                                      │
└──────────────────────────────────────────────┘
```


## concatWithSeparatorAssumeInjective {#concatWithSeparatorAssumeInjective}

Введена в версии: v22.12

Аналогична [`concatWithSeparator`](#concatWithSeparator), но предполагает, что `concatWithSeparator(sep[,exp1, exp2, ... ]) → result` является инъективной.
Функция называется инъективной, если она возвращает разные результаты для разных аргументов.

Может использоваться для оптимизации `GROUP BY`.

**Синтаксис**

```sql
concatWithSeparatorAssumeInjective(sep[, exp1, exp2, ... ])
```

**Аргументы**

- `sep` — разделитель. [`const String`](/sql-reference/data-types/string) или [`const FixedString`](/sql-reference/data-types/fixedstring)
- `exp1, exp2, ...` — выражения для конкатенации. Аргументы, не являющиеся типами `String` или `FixedString`, преобразуются в строки с использованием сериализации по умолчанию. Поскольку это снижает производительность, не рекомендуется использовать аргументы типов, отличных от String/FixedString. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает строку, созданную путём конкатенации аргументов. Если любой из аргументов имеет значение `NULL`, функция возвращает `NULL`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
CREATE TABLE user_data (
user_id UInt32,
first_name String,
last_name String,
score UInt32
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO user_data VALUES
(1, 'John', 'Doe', 100),
(2, 'Jane', 'Smith', 150),
(3, 'John', 'Wilson', 120),
(4, 'Jane', 'Smith', 90);

SELECT
    concatWithSeparatorAssumeInjective('-', first_name, last_name) as full_name,
    sum(score) as total_score
FROM user_data
GROUP BY concatWithSeparatorAssumeInjective('-', first_name, last_name);
```

```response title=Результат
┌─full_name───┬─total_score─┐
│ Jane-Smith  │         240 │
│ John-Doe    │         100 │
│ John-Wilson │         120 │
└─────────────┴─────────────┘
```


## conv {#conv}

Введена в версии: v1.1

Преобразует числа между различными системами счисления.

Функция преобразует число из одной системы счисления в другую. Поддерживаются основания от 2 до 36.
Для оснований больше 10 используются буквы A-Z (без учёта регистра) для представления цифр 10-35.

Эта функция совместима с функцией CONV() MySQL.

**Синтаксис**

```sql
conv(number, from_base, to_base)
```

**Аргументы**

- `number` — Число для преобразования. Может быть строкой или числовым типом.
- `from_base` — Исходное основание (2-36). Должно быть целым числом.
- `to_base` — Целевое основание (2-36). Должно быть целым числом.

**Возвращаемое значение**

Строковое представление числа в целевой системе счисления.

**Примеры**

**Преобразование десятичного числа в двоичное**

```sql title=Query
SELECT conv('10', 10, 2)
```

```response title=Response
1010
```

**Преобразование шестнадцатеричного числа в десятичное**

```sql title=Query
SELECT conv('FF', 16, 10)
```

```response title=Response
255
```

**Преобразование отрицательного числа**

```sql title=Query
SELECT conv('-1', 10, 16)
```

```response title=Response
FFFFFFFFFFFFFFFF
```

**Преобразование двоичного числа в восьмеричное**

```sql title=Query
SELECT conv('1010', 2, 8)
```

```response title=Response
12
```


## convertCharset {#convertCharset}

Введена в версии: v1.1

Возвращает строку `s`, преобразованную из кодировки `from` в кодировку `to`.

**Синтаксис**

```sql
convertCharset(s, from, to)
```

**Аргументы**

- `s` — Входная строка. [`String`](/sql-reference/data-types/string)
- `from` — Исходная кодировка. [`String`](/sql-reference/data-types/string)
- `to` — Целевая кодировка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Строка `s`, преобразованная из кодировки `from` в кодировку `to`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT convertCharset('Café', 'UTF-8', 'ISO-8859-1');
```

```response title=Результат
┌─convertChars⋯SO-8859-1')─┐
│ Caf�                     │
└──────────────────────────┘
```


## damerauLevenshteinDistance {#damerauLevenshteinDistance}

Введена в версии: v24.1

Вычисляет [расстояние Дамерау — Левенштейна](https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
damerauLevenshteinDistance(s1, s2)
```

**Аргументы**

- `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
- `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние Дамерау — Левенштейна между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT damerauLevenshteinDistance('clickhouse', 'mouse')
```

```response title=Результат
┌─damerauLevenshteinDistance('clickhouse', 'mouse')─┐
│                                                 6 │
└───────────────────────────────────────────────────┘
```


## decodeHTMLComponent {#decodeHTMLComponent}

Добавлена в версии: v23.9

Декодирует HTML-сущности в строке, преобразуя их в соответствующие символы.

**Синтаксис**

```sql
decodeHTMLComponent(s)
```

**Аргументы**

- `s` — строка, содержащая HTML-сущности для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированными HTML-сущностями. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')
```

```response title=Результат
┌─decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')─┐
│ <div>Hello & "World"</div>                                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```


## decodeXMLComponent {#decodeXMLComponent}

Введена в версии: v21.2

Декодирует XML-сущности в строке, преобразуя их в соответствующие символы.

**Синтаксис**

```sql
decodeXMLComponent(s)
```

**Аргументы**

- `s` — строка, содержащая XML-сущности для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает переданную строку с декодированными XML-сущностями. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT decodeXMLComponent('&lt;tag&gt;Hello &amp; World&lt;/tag&gt;')
```

```response title=Результат
┌─decodeXMLCom⋯;/tag&gt;')─┐
│ <tag>Hello & World</tag> │
└──────────────────────────┘
```


## editDistance {#editDistance}

Введено в версии: v23.9

Вычисляет [расстояние редактирования](https://en.wikipedia.org/wiki/Edit_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
editDistance(s1, s2)
```

**Псевдонимы**: `levenshteinDistance`

**Аргументы**

- `s1` — Первая входная строка. [`String`](/sql-reference/data-types/string)
- `s2` — Вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние редактирования между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT editDistance('clickhouse', 'mouse')
```

```response title=Response
┌─editDistance('clickhouse', 'mouse')─┐
│                                   6 │
└─────────────────────────────────────┘
```


## editDistanceUTF8 {#editDistanceUTF8}

Введено в версии: v24.6

Вычисляет [расстояние редактирования](https://en.wikipedia.org/wiki/Edit_distance) между двумя UTF8-строками.

**Синтаксис**

```sql
editDistanceUTF8(s1, s2)
```

**Псевдонимы**: `levenshteinDistanceUTF8`

**Аргументы**

- `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
- `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние редактирования между двумя UTF8-строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT editDistanceUTF8('我是谁', '我是我')
```

```response title=Response
┌─editDistanceUTF8('我是谁', '我是我')──┐
│                                   1 │
└─────────────────────────────────────┘
```


## encodeXMLComponent {#encodeXMLComponent}

Введена в версии: v21.1

Экранирует символы для размещения строки в текстовом узле или атрибуте XML.

**Синтаксис**

```sql
encodeXMLComponent(s)
```

**Аргументы**

- `s` — строка для экранирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает экранированную строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    '<tag>Hello & "World"</tag>' AS original,
    encodeXMLComponent('<tag>Hello & "World"</tag>') AS xml_encoded;
```

```response title=Response
┌─original───────────────────┬─xml_encoded──────────────────────────────────────────┐
│ <tag>Hello & "World"</tag> │ &lt;tag&gt;Hello &amp; &quot;World&quot;&lt;/tag&gt; │
└────────────────────────────┴──────────────────────────────────────────────────────┘
```


## endsWith {#endsWith}

Введена в версии: v1.1

Проверяет, заканчивается ли строка указанным суффиксом.

**Синтаксис**

```sql
endsWith(s, suffix)
```

**Аргументы**

- `s` — проверяемая строка. [`String`](/sql-reference/data-types/string)
- `suffix` — суффикс для проверки. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` заканчивается на `suffix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT endsWith('ClickHouse', 'House');
```

```response title=Результат
┌─endsWith('Cl⋯', 'House')─┐
│                        1 │
└──────────────────────────┘
```


## endsWithCaseInsensitive {#endsWithCaseInsensitive}

Введена в версии: v25.9

Проверяет, заканчивается ли строка указанным суффиксом без учёта регистра.

**Синтаксис**

```sql
endsWithCaseInsensitive(s, suffix)
```

**Аргументы**

- `s` — проверяемая строка. [`String`](/sql-reference/data-types/string)
- `suffix` — суффикс для проверки без учёта регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если строка `s` заканчивается на `suffix` без учёта регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT endsWithCaseInsensitive('ClickHouse', 'HOUSE');
```

```response title=Результат
┌─endsWithCaseInsensitive('Cl⋯', 'HOUSE')─┐
│                                       1 │
└─────────────────────────────────────────┘
```


## endsWithCaseInsensitiveUTF8 {#endsWithCaseInsensitiveUTF8}

Introduced in: v25.9

Возвращает, заканчивается ли строка `s` суффиксом `suffix` без учёта регистра.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, а результат не определён.

**Синтаксис**

```sql
endsWithCaseInsensitiveUTF8(s, suffix)
```

**Аргументы**

- `s` — проверяемая строка. [`String`](/sql-reference/data-types/string)
- `suffix` — суффикс для проверки без учёта регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` заканчивается суффиксом `suffix` без учёта регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithCaseInsensitiveUTF8('данных', 'ых');
```

```response title=Response
┌─endsWithCaseInsensitiveUTF8('данных', 'ых')─┐
│                                           1 │
└─────────────────────────────────────────────┘
```


## endsWithUTF8 {#endsWithUTF8}

Введена в версии: v23.8

Возвращает, заканчивается ли строка `s` на `suffix`.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, а результат не определён.

**Синтаксис**

```sql
endsWithUTF8(s, suffix)
```

**Аргументы**

- `s` — проверяемая строка. [`String`](/sql-reference/data-types/string)
- `suffix` — суффикс для проверки. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` заканчивается на `suffix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithUTF8('данных', 'ых');
```

```response title=Response
┌─endsWithUTF8('данных', 'ых')─┐
│                            1 │
└──────────────────────────────┘
```


## extractTextFromHTML {#extractTextFromHTML}

Введена в версии: v21.3

Извлекает текстовое содержимое из HTML или XHTML.

Функция удаляет HTML-теги, комментарии и элементы script/style, оставляя только текстовое содержимое. Она обрабатывает:

- Удаление всех HTML/XML-тегов
- Удаление комментариев (`<!-- -->`)
- Удаление элементов script и style вместе с их содержимым
- Обработку секций CDATA (копируются дословно)
- Корректную обработку и нормализацию пробельных символов

Примечание: HTML-сущности не декодируются и при необходимости должны обрабатываться отдельной функцией.

**Синтаксис**

```sql
extractTextFromHTML(html)
```

**Аргументы**

- `html` — строка, содержащая HTML-содержимое, из которого извлекается текст. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает извлечённое текстовое содержимое с нормализованными пробельными символами. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT extractTextFromHTML('
<html>
    <head><title>Page Title</title></head>
    <body>
        <p>Hello <b>World</b>!</p>
        <script>alert("test");</script>
        <!-- comment -->
    </body>
</html>
');
```

```response title=Ответ
┌─extractTextFromHTML('<html><head>...')─┐
│ Page Title Hello World!                │
└────────────────────────────────────────┘
```


## firstLine {#firstLine}

Введена в версии: v23.7

Возвращает первую строку из многострочной строки.

**Синтаксис**

```sql
firstLine(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает первую строку входной строки или всю строку, если в ней нет разделителей строк. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT firstLine('foo\\nbar\\nbaz')
```

```response title=Результат
┌─firstLine('foo\nbar\nbaz')─┐
│ foo                        │
└────────────────────────────┘
```


## idnaDecode {#idnaDecode}

Введена в версии: v24.1

Возвращает представление доменного имени в формате Unicode (UTF-8) (алгоритм ToUnicode) согласно механизму [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
В случае ошибки (например, если входные данные некорректны) возвращается входная строка.
Обратите внимание, что повторное применение [`idnaEncode()`](#idnaEncode) и [`idnaDecode()`](#idnaDecode) не обязательно вернёт исходную строку из-за нормализации регистра.

**Синтаксис**

```sql
idnaDecode(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает представление входной строки в формате Unicode (UTF-8) согласно механизму IDNA. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')
```

```response title=Response
┌─idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')─┐
│ straße.münchen.de                             │
└───────────────────────────────────────────────┘
```


## idnaEncode {#idnaEncode}

Введена в версии: v24.1

Возвращает ASCII-представление (алгоритм ToASCII) доменного имени согласно механизму [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
Входная строка должна быть в кодировке UTF и преобразуема в ASCII-строку, иначе возникает исключение.

:::note
Процентное декодирование и удаление символов табуляции, пробелов или управляющих символов не выполняется.
:::

**Синтаксис**

```sql
idnaEncode(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает ASCII-представление входной строки согласно механизму IDNA. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT idnaEncode('straße.münchen.de')
```

```response title=Response
┌─idnaEncode('straße.münchen.de')─────┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```


## initcap {#initcap}

Введена в версии: v23.7

Преобразует первую букву каждого слова в верхний регистр, а остальные — в нижний.
Словами считаются последовательности буквенно-цифровых символов, разделённые небуквенно-цифровыми символами.

:::note
Поскольку `initcap` преобразует в верхний регистр только первую букву каждого слова, для слов, содержащих апострофы или заглавные буквы, может наблюдаться неожиданное поведение.
Это известная особенность поведения, исправление которой в настоящее время не планируется.
:::

**Синтаксис**

```sql
initcap(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `s` с первой буквой каждого слова, преобразованной в верхний регистр. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT initcap('building for fast')
```

```response title=Результат
┌─initcap('building for fast')─┐
│ Building For Fast            │
└──────────────────────────────┘
```

**Пример известного поведения для слов, содержащих апострофы или заглавные буквы**

```sql title=Запрос
SELECT initcap('John''s cat won''t eat.');
```

```response title=Результат
┌─initcap('Joh⋯n\'t eat.')─┐
│ John'S Cat Won'T Eat.    │
└──────────────────────────┘
```


## initcapUTF8 {#initcapUTF8}

Введена в версии: v23.7

Как и [`initcap`](#initcap), функция `initcapUTF8` преобразует первую букву каждого слова в верхний регистр, а остальные буквы — в нижний.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не генерируется, и результат не определён.

:::note
Функция не определяет язык текста, например, для турецкого языка результат может быть не совсем корректным (i/İ vs. i/I).
Если длина байтовой последовательности UTF-8 различается для верхнего и нижнего регистра кодовой точки, результат может быть некорректным для этой кодовой точки.
:::

**Синтаксис**

```sql
initcapUTF8(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s` с первой буквой каждого слова, преобразованной в верхний регистр. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT initcapUTF8('не тормозит')
```

```response title=Response
┌─initcapUTF8('не тормозит')─┐
│ Не Тормозит                │
└────────────────────────────┘
```


## isValidASCII {#isValidASCII}

Введена в версии: v25.9

Возвращает 1, если входная строка типа String или FixedString содержит только ASCII-байты (0x00–0x7F), в противном случае 0.

**Синтаксис**

```sql

```

**Псевдонимы**: `isASCII`

**Аргументы**

- Отсутствуют.

**Возвращаемое значение**

**Примеры**

**isValidASCII**

```sql title=Запрос
SELECT isValidASCII('hello') AS is_ascii, isValidASCII('你好') AS is_not_ascii
```

```response title=Результат

```


## isValidUTF8 {#isValidUTF8}

Введена в версии: v20.1

Проверяет, является ли набор байтов корректным текстом в кодировке UTF-8.

**Синтаксис**

```sql
isValidUTF8(s)
```

**Аргументы**

- `s` — Строка для проверки на корректность кодировки UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если набор байтов является корректным текстом в кодировке UTF-8, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT isValidUTF8('\\xc3\\xb1') AS valid, isValidUTF8('\\xc3\\x28') AS invalid
```

```response title=Результат
┌─valid─┬─invalid─┐
│     1 │       0 │
└───────┴─────────┘
```


## jaroSimilarity {#jaroSimilarity}

Введена в версии: v24.1

Вычисляет [сходство Джаро](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance#Jaro_similarity) между двумя байтовыми строками.

**Синтаксис**

```sql
jaroSimilarity(s1, s2)
```

**Аргументы**

- `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
- `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает сходство Джаро между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT jaroSimilarity('clickhouse', 'click')
```

```response title=Результат
┌─jaroSimilarity('clickhouse', 'click')─┐
│                    0.8333333333333333 │
└───────────────────────────────────────┘
```


## jaroWinklerSimilarity {#jaroWinklerSimilarity}

Введена в версии: v24.1

Вычисляет [сходство Джаро-Винклера](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
jaroWinklerSimilarity(s1, s2)
```

**Аргументы**

- `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
- `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает сходство Джаро-Винклера между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT jaroWinklerSimilarity('clickhouse', 'click')
```

```response title=Response
┌─jaroWinklerSimilarity('clickhouse', 'click')─┐
│                           0.8999999999999999 │
└──────────────────────────────────────────────┘
```


## left {#left}

Введено в версии: v22.1

Возвращает подстроку строки `s` с указанным смещением `offset` от начала строки.

**Синтаксис**

```sql
left(s, offset)
```

**Аргументы**

- `s` — строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — смещение в байтах. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

- Для положительного `offset` — подстроку `s` длиной `offset` байт от начала строки.
- Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт от начала строки.
- Пустую строку, если `length` равна `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT left('Hello World', 5)
```

```response title=Response
Helllo
```

**Отрицательное смещение**

```sql title=Query
SELECT left('Hello World', -6)
```

```response title=Response
Hello
```


## leftPad {#leftPad}

Введена в версии: v21.8

Дополняет строку слева пробелами или указанной строкой (многократно, при необходимости), пока результирующая строка не достигнет заданной длины `length`.

**Синтаксис**

```sql
leftPad(string, length[, pad_string])
```

**Псевдонимы**: `lpad`

**Аргументы**

- `string` — Входная строка для дополнения. [`String`](/sql-reference/data-types/string)
- `length` — Длина результирующей строки. Если значение меньше длины входной строки, входная строка обрезается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — Необязательный параметр. Строка для дополнения входной строки. Если не указана, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную слева. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT leftPad('abc', 7, '*'), leftPad('def', 7)
```

```response title=Результат
┌─leftPad('abc', 7, '*')─┬─leftPad('def', 7)─┐
│ ****abc                │     def           │
└────────────────────────┴───────────────────┘
```


## leftPadUTF8 {#leftPadUTF8}

Введена в версии: v21.8

Дополняет UTF8-строку слева пробелами или указанной строкой (многократно, при необходимости), пока результирующая строка не достигнет заданной длины.
В отличие от [`leftPad`](#leftPad), которая измеряет длину строки в байтах, данная функция измеряет длину в кодовых точках.

**Синтаксис**

```sql
leftPadUTF8(string, length[, pad_string])
```

**Аргументы**

- `string` — Входная строка для дополнения. [`String`](/sql-reference/data-types/string)
- `length` — Длина результирующей строки. Если значение меньше длины входной строки, входная строка обрезается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — Необязательный параметр. Строка для дополнения входной строки. Если не указана, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную слева. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT leftPadUTF8('абвг', 7, '*'), leftPadUTF8('дежз', 7)
```

```response title=Результат
┌─leftPadUTF8('абвг', 7, '*')─┬─leftPadUTF8('дежз', 7)─┐
│ ***абвг                     │    дежз                │
└─────────────────────────────┴────────────────────────┘
```


## leftUTF8 {#leftUTF8}

Введена в версии: v22.1

Возвращает подстроку UTF-8-кодированной строки `s` с указанным смещением `offset` от начала строки.

**Синтаксис**

```sql
leftUTF8(s, offset)
```

**Аргументы**

- `s` — UTF-8-кодированная строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — Смещение в байтах. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

- Для положительного `offset` — подстроку `s` длиной `offset` байт от начала строки.
- Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт от начала строки.
- Пустую строку, если `length` равна 0.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT leftUTF8('Привет', 4)
```

```response title=Response
Прив
```

**Отрицательное смещение**

```sql title=Query
SELECT leftUTF8('Привет', -4)
```

```response title=Response
Пр
```


## lengthUTF8 {#lengthUTF8}

Введена в версии: v1.1

Возвращает длину строки в кодовых точках Unicode, а не в байтах или символах.
Предполагается, что строка содержит валидный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не генерируется, и результат не определён.

**Синтаксис**

```sql
lengthUTF8(s)
```

**Псевдонимы**: `CHAR_LENGTH`, `CHARACTER_LENGTH`

**Аргументы**

- `s` — строка, содержащая валидный текст в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Длина строки `s` в кодовых точках Unicode. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT lengthUTF8('Здравствуй, мир!')
```

```response title=Response
┌─lengthUTF8('Здравствуй, мир!')─┐
│                             16 │
└────────────────────────────────┘
```


## lower {#lower}

Introduced in: v1.1

Преобразует ASCII-строку в нижний регистр.

**Синтаксис**

```sql
lower(s)
```

**Псевдонимы**: `lcase`

**Аргументы**

- `s` — строка для преобразования в нижний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нижнем регистре. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT lower('CLICKHOUSE')
```

```response title=Результат
┌─lower('CLICKHOUSE')─┐
│ clickhouse          │
└─────────────────────┘
```


## lowerUTF8 {#lowerUTF8}

Добавлено в версии: v1.1

Преобразует строку в нижний регистр, предполагая, что строка содержит корректный текст в кодировке UTF-8. Если это предположение нарушено, исключение не генерируется, и результат не определён.

**Синтаксис**

```sql
lowerUTF8(input)
```

**Аргументы**

- `input` — Входная строка для преобразования в нижний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нижнем регистре. [`String`](/sql-reference/data-types/string)

**Примеры**

**Первый**

```sql title=Запрос
SELECT lowerUTF8('München') as Lowerutf8;
```

```response title=Результат
münchen
```


## normalizeUTF8NFC {#normalizeUTF8NFC}

Добавлено в версии: v21.11

Нормализует строку UTF-8 в соответствии с [формой нормализации NFC](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFC(str)
```

**Аргументы**

- `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку UTF-8 в нормализованной форме NFC. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
'é' AS original, -- e + комбинируемый диакритический знак акута (U+0065 + U+0301)
length(original),
normalizeUTF8NFC('é') AS nfc_normalized, -- é (U+00E9)
length(nfc_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfc_normalized─┬─length(nfc_normalized)─┐
│ é        │                2 │ é              │                      2 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```


## normalizeUTF8NFD {#normalizeUTF8NFD}

Введена в версии: v21.11

Нормализует строку UTF-8 в соответствии с [формой нормализации NFD](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFD(str)
```

**Аргументы**

- `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку UTF-8 в нормализованной форме NFD. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    'é' AS original, -- é (U+00E9)
    length(original),
    normalizeUTF8NFD('é') AS nfd_normalized, -- e + комбинирующий акут (U+0065 + U+0301)
    length(nfd_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfd_normalized─┬─length(nfd_normalized)─┐
│ é        │                2 │ é              │                      3 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```


## normalizeUTF8NFKC {#normalizeUTF8NFKC}

Введена в версии: v21.11

Нормализует строку UTF-8 в соответствии с [формой нормализации NFKC](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFKC(str)
```

**Аргументы**

- `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку UTF-8 в нормализованной форме NFKC. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    '① ② ③' AS original,                            -- Символы чисел в кружках
    normalizeUTF8NFKC('① ② ③') AS nfkc_normalized;  -- Преобразуется в 1 2 3
```

```response title=Response
┌─original─┬─nfkc_normalized─┐
│ ① ② ③  │ 1 2 3           │
└──────────┴─────────────────┘
```


## normalizeUTF8NFKD {#normalizeUTF8NFKD}

Добавлено в версии: v21.11

Нормализует строку UTF-8 в соответствии с [формой нормализации NFKD](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFKD(str)
```

**Аргументы**

- `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку UTF-8 в нормализованной форме NFKD. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    'H₂O²' AS original,                            -- H + нижний индекс 2 + O + верхний индекс 2
    normalizeUTF8NFKD('H₂O²') AS nfkd_normalized;  -- Преобразуется в H 2 O 2
```

```response title=Response
┌─original─┬─nfkd_normalized─┐
│ H₂O²     │ H2O2            │
└──────────┴─────────────────┘
```


## punycodeDecode {#punycodeDecode}

Введена в версии: v24.1

Возвращает декодированную UTF8-строку из строки, закодированной в формате [Punycode](https://en.wikipedia.org/wiki/Punycode).
Если передана некорректная строка в формате Punycode, генерируется исключение.

**Синтаксис**

```sql
punycodeDecode(s)
```

**Аргументы**

- `s` — строка, закодированная в формате Punycode. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает декодированную строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT punycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─punycodeDecode('Mnchen-3ya')─┐
│ München                      │
└──────────────────────────────┘
```


## punycodeEncode {#punycodeEncode}

Введена в версии: v24.1

Возвращает представление строки в формате [Punycode](https://en.wikipedia.org/wiki/Punycode).
Строка должна быть в кодировке UTF-8, в противном случае поведение не определено.

**Синтаксис**

```sql
punycodeEncode(s)
```

**Аргументы**

- `s` — входное значение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает представление входного значения в формате Punycode. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT punycodeEncode('München')
```

```response title=Результат
┌─punycodeEncode('München')─┐
│ Mnchen-3ya                │
└───────────────────────────┘
```


## regexpExtract {#regexpExtract}

Введена в версии: v23.2

Извлекает первую подстроку из `haystack`, которая соответствует шаблону регулярного выражения и указанному индексу группы.

**Синтаксис**

```sql
regexpExtract(haystack, pattern[, index])
```

**Псевдонимы**: `REGEXP_EXTRACT`

**Аргументы**

- `haystack` — Строка, в которой выполняется поиск по регулярному выражению. [`String`](/sql-reference/data-types/string)
- `pattern` — Строка с регулярным выражением. `pattern` может содержать несколько групп захвата, `index` указывает, какую группу извлечь. Индекс 0 означает совпадение со всем регулярным выражением. [`const String`](/sql-reference/data-types/string)
- `index` — Необязательный параметр. Целое число больше или равно 0, по умолчанию 1. Указывает, какую группу регулярного выражения извлечь. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает найденную подстроку [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    regexpExtract('100-200', '(\\d+)-(\\d+)', 1),
    regexpExtract('100-200', '(\\d+)-(\\d+)', 2),
    regexpExtract('100-200', '(\\d+)-(\\d+)', 0),
    regexpExtract('100-200', '(\\d+)-(\\d+)');
```

```response title=Response
┌─regexpExtract('100-200', '(\\d+)-(\\d+)', 1)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)', 2)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)', 0)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)')─┐
│ 100                                          │ 200                                          │ 100-200                                      │ 100                                       │
└──────────────────────────────────────────────┴──────────────────────────────────────────────┴──────────────────────────────────────────────┴───────────────────────────────────────────┘
```


## repeat {#repeat}

Введено в версии: v20.1

Повторяет строку указанное количество раз.

**Синтаксис**

```sql
repeat(s, n)
```

**Аргументы**

- `s` — Строка для повторения. [`String`](/sql-reference/data-types/string)
- `n` — Количество повторений строки. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Строка, содержащая строку `s`, повторенную `n` раз. Если `n` отрицательное, функция возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT repeat('abc', 10)
```

```response title=Результат
┌─repeat('abc', 10)──────────────┐
│ abcabcabcabcabcabcabcabcabcabc │
└────────────────────────────────┘
```


## reverseUTF8 {#reverseUTF8}

Введена в версии: v1.1

Разворачивает последовательность кодовых точек Unicode в строке.
Предполагается, что строка содержит валидный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, и результат не определён.

**Синтаксис**

```sql
reverseUTF8(s)
```

**Аргументы**

- `s` — строка, содержащая валидный текст в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с развёрнутой последовательностью кодовых точек Unicode. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT reverseUTF8('ClickHouse')
```

```response title=Response
esuoHkcilC
```


## right {#right}

Введено в версии: v22.1

Возвращает подстроку строки `s` с указанным смещением `offset` от конца строки.

**Синтаксис**

```sql
right(s, offset)
```

**Аргументы**

- `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — Смещение в байтах. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

- Для положительного `offset` — подстроку `s` длиной `offset` байт от конца строки.
- Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт от конца строки.
- Пустую строку, если `length` равна `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT right('Hello', 3)
```

```response title=Response
llo
```

**Отрицательное смещение**

```sql title=Query
SELECT right('Hello', -3)
```

```response title=Response
lo
```


## rightPad {#rightPad}

Введена в версии: v21.8

Дополняет строку справа пробелами или указанной строкой (многократно, при необходимости), пока результирующая строка не достигнет заданной длины `length`.

**Синтаксис**

```sql
rightPad(string, length[, pad_string])
```

**Псевдонимы**: `rpad`

**Аргументы**

- `string` — Входная строка для дополнения. [`String`](/sql-reference/data-types/string)
- `length` — Длина результирующей строки. Если значение меньше длины входной строки, входная строка обрезается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — Необязательный параметр. Строка для дополнения входной строки. Если не указана, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT rightPad('abc', 7, '*'), rightPad('abc', 7)
```

```response title=Результат
┌─rightPad('abc', 7, '*')─┬─rightPad('abc', 7)─┐
│ abc****                 │ abc                │
└─────────────────────────┴────────────────────┘
```


## rightPadUTF8 {#rightPadUTF8}

Введена в версии: v21.8

Дополняет строку справа пробелами или указанной строкой (многократно, если необходимо) до тех пор, пока результирующая строка не достигнет заданной длины.
В отличие от [`rightPad`](#rightPad), которая измеряет длину строки в байтах, данная функция измеряет длину строки в кодовых точках.

**Синтаксис**

```sql
rightPadUTF8(string, length[, pad_string])
```

**Аргументы**

- `string` — входная строка для дополнения. [`String`](/sql-reference/data-types/string)
- `length` — длина результирующей строки. Если значение меньше длины входной строки, то входная строка обрезается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — необязательный параметр. Строка, которой дополняется входная строка. Если не указана, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT rightPadUTF8('абвг', 7, '*'), rightPadUTF8('абвг', 7)
```

```response title=Response
┌─rightPadUTF8('абвг', 7, '*')─┬─rightPadUTF8('абвг', 7)─┐
│ абвг***                      │ абвг                    │
└──────────────────────────────┴─────────────────────────┘
```


## rightUTF8 {#rightUTF8}

Introduced in: v22.1

Возвращает подстроку UTF-8 кодированной строки `s` с указанным смещением `offset` справа.

**Синтаксис**

```sql
rightUTF8(s, offset)
```

**Аргументы**

- `s` — UTF-8 кодированная строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — Количество байтов смещения. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

- Для положительного `offset` — подстроку `s` длиной `offset` байт, начиная с правого края строки.
- Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт, начиная с правого края строки.
- Пустую строку, если `length` равна `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT rightUTF8('Привет', 4)
```

```response title=Response
ивет
```

**Отрицательное смещение**

```sql title=Query
SELECT rightUTF8('Привет', -4)
```

```response title=Response
ет
```


## soundex {#soundex}

Введена в версии: v23.4

Возвращает [код Soundex](https://en.wikipedia.org/wiki/Soundex) для строки.

**Синтаксис**

```sql
soundex(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Код Soundex для входной строки. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT soundex('aksel')
```

```response title=Response
┌─soundex('aksel')─┐
│ A240             │
└──────────────────┘
```


## space {#space}

Введена в версии: v23.5

Повторяет пробел (` `) указанное количество раз.

**Синтаксис**

```sql
space(n)
```

**Аргументы**

- `n` — количество повторений пробела. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает строку, содержащую пробел, повторённый `n` раз. Если `n <= 0`, функция возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT space(3) AS res, length(res);
```

```response title=Результат
┌─res─┬─length(res)─┐
│     │           3 │
└─────┴─────────────┘
```


## sparseGrams {#sparseGrams}

Введена в версии: v25.5

Находит все подстроки заданной строки длиной не менее `n`,
у которых хеши (n-1)-грамм на границах подстроки
строго больше хешей любой (n-1)-граммы внутри подстроки.
В качестве хеш-функции используется `CRC32`.

**Синтаксис**

```sql
sparseGrams(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — необязательный параметр. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — необязательный параметр. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Должно быть не меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Массив выбранных подстрок. [`Array(String)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGrams('alice', 3)
```

```response title=Response
┌─sparseGrams('alice', 3)────────────┐
│ ['ali','lic','lice','ice']         │
└────────────────────────────────────┘
```


## sparseGramsHashes {#sparseGramsHashes}

Введена в версии: v25.5

Находит хеши всех подстрок заданной строки длиной не менее `n`,
где хеши (n-1)-грамм на границах подстроки
строго больше хешей любой (n-1)-граммы внутри подстроки.
В качестве хеш-функции используется `CRC32`.

**Синтаксис**

```sql
sparseGramsHashes(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

- `s` — Входная строка. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — Необязательный параметр. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — Необязательный параметр. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Должно быть не меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив CRC32-хешей выбранных подстрок. [`Array(UInt32)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGramsHashes('alice', 3)
```

```response title=Response
┌─sparseGramsHashes('alice', 3)──────────────────────┐
│ [1481062250,2450405249,4012725991,1918774096]      │
└────────────────────────────────────────────────────┘
```


## sparseGramsHashesUTF8 {#sparseGramsHashesUTF8}

Введена в версии: v25.5

Находит хеши всех подстрок заданной UTF-8 строки длиной не менее `n`, где хеши (n-1)-грамм на границах подстроки строго больше хешей любой (n-1)-граммы внутри подстроки.
Ожидает строку в кодировке UTF-8, выбрасывает исключение в случае некорректной UTF-8 последовательности.
Использует `CRC32` в качестве хеш-функции.

**Синтаксис**

```sql
sparseGramsHashesUTF8(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

- `s` — Входная строка. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — Опционально. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — Опционально. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Должна быть не меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив CRC32-хешей выбранных UTF-8 подстрок. [`Array(UInt32)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT sparseGramsHashesUTF8('алиса', 3)
```

```response title=Ответ
┌─sparseGramsHashesUTF8('алиса', 3)─┐
│ [4178533925,3855635300,561830861] │
└───────────────────────────────────┘
```


## sparseGramsUTF8 {#sparseGramsUTF8}

Введена в версии: v25.5

Находит все подстроки заданной UTF-8 строки длиной не менее `n`, где хеши (n-1)-грамм на границах подстроки строго больше хешей любой (n-1)-граммы внутри подстроки.
Ожидает строку в кодировке UTF-8, выбрасывает исключение при обнаружении некорректной UTF-8 последовательности.
Использует `CRC32` в качестве хеш-функции.

**Синтаксис**

```sql
sparseGramsUTF8(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

- `s` — Входная строка. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — Необязательный параметр. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — Необязательный параметр. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Должна быть не меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив выбранных UTF-8 подстрок. [`Array(String)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT sparseGramsUTF8('алиса', 3)
```

```response title=Результат
┌─sparseGramsUTF8('алиса', 3)─┐
│ ['али','лис','иса']         │
└─────────────────────────────┘
```


## startsWith {#startsWith}

Введена в версии: v1.1

Проверяет, начинается ли строка с указанной подстроки.

**Синтаксис**

```sql
startsWith(s, prefix)
```

**Аргументы**

- `s` — проверяемая строка. [`String`](/sql-reference/data-types/string)
- `prefix` — префикс для проверки. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT startsWith('ClickHouse', 'Click');
```

```response title=Результат
┌─startsWith('⋯', 'Click')─┐
│                        1 │
└──────────────────────────┘
```


## startsWithCaseInsensitive {#startsWithCaseInsensitive}

Введена в версии: v25.9

Проверяет, начинается ли строка с указанного префикса без учёта регистра.

**Синтаксис**

```sql
startsWithCaseInsensitive(s, prefix)
```

**Аргументы**

- `s` — Проверяемая строка. [`String`](/sql-reference/data-types/string)
- `prefix` — Префикс для проверки без учёта регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если строка `s` начинается с префикса `prefix` без учёта регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT startsWithCaseInsensitive('ClickHouse', 'CLICK');
```

```response title=Результат
┌─startsWithCaseInsensitive('⋯', 'CLICK')─┐
│                                       1 │
└─────────────────────────────────────────┘
```


## startsWithCaseInsensitiveUTF8 {#startsWithCaseInsensitiveUTF8}

Введена в версии: v25.9

Проверяет, начинается ли строка с указанного префикса без учёта регистра.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, и результат не определён.

**Синтаксис**

```sql
startsWithCaseInsensitiveUTF8(s, prefix)
```

**Аргументы**

- `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
- `prefix` — префикс для проверки без учёта регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix` без учёта регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT startsWithCaseInsensitiveUTF8('приставка', 'при')
```

```response title=Результат
┌─startsWithUT⋯ка', 'при')─┐
│                        1 │
└──────────────────────────┘
```


## startsWithUTF8 {#startsWithUTF8}

Введена в версии: v23.8

Проверяет, начинается ли строка с указанного префикса.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не генерируется, и результат не определён.

**Синтаксис**

```sql
startsWithUTF8(s, prefix)
```

**Аргументы**

- `s` — проверяемая строка. [`String`](/sql-reference/data-types/string)
- `prefix` — искомый префикс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWithUTF8('приставка', 'при')
```

```response title=Response
┌─startsWithUT⋯ка', 'при')─┐
│                        1 │
└──────────────────────────┘
```


## stringBytesEntropy {#stringBytesEntropy}

Введена в версии: v25.6

Вычисляет энтропию Шеннона для распределения байтов в строке.

**Синтаксис**

```sql
stringBytesEntropy(s)
```

**Аргументы**

- `s` — анализируемая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает энтропию Шеннона для распределения байтов в строке. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT stringBytesEntropy('Hello, world!')
```

```response title=Результат
┌─stringBytesEntropy('Hello, world!')─┐
│                         3.07049960  │
└─────────────────────────────────────┘
```


## stringBytesUniq {#stringBytesUniq}

Введена в версии: v25.6

Подсчитывает количество различных байтов в строке.

**Синтаксис**

```sql
stringBytesUniq(s)
```

**Аргументы**

- `s` — Анализируемая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает количество различных байтов в строке. [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT stringBytesUniq('Hello')
```

```response title=Результат
┌─stringBytesUniq('Hello')─┐
│                        4 │
└──────────────────────────┘
```


## stringJaccardIndex {#stringJaccardIndex}

Добавлена в версии: v23.11

Вычисляет [индекс подобия Жаккара](https://en.wikipedia.org/wiki/Jaccard_index) между двумя байтовыми строками.

**Синтаксис**

```sql
stringJaccardIndex(s1, s2)
```

**Аргументы**

- `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
- `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает индекс подобия Жаккара между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT stringJaccardIndex('clickhouse', 'mouse')
```

```response title=Результат
┌─stringJaccardIndex('clickhouse', 'mouse')─┐
│                                       0.4 │
└───────────────────────────────────────────┘
```


## stringJaccardIndexUTF8 {#stringJaccardIndexUTF8}

Introduced in: v23.11

Аналогична [`stringJaccardIndex`](#stringJaccardIndex), но для строк в кодировке UTF-8.

**Синтаксис**

```sql
stringJaccardIndexUTF8(s1, s2)
```

**Аргументы**

- `s1` — первая входная строка UTF-8. [`String`](/sql-reference/data-types/string)
- `s2` — вторая входная строка UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает индекс сходства Жаккара между двумя строками UTF-8. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringJaccardIndexUTF8('我爱你', '我也爱你')
```

```response title=Response
┌─stringJaccardIndexUTF8('我爱你', '我也爱你')─┐
│                                       0.75 │
└─────────────────────────────────────────────┘
```


## substring {#substring}

Введена в версии: v1.1

Возвращает подстроку строки `s`, начинающуюся с указанного байтового индекса `offset`.
Подсчёт байтов начинается с 1 по следующей логике:

- Если `offset` равен `0`, возвращается пустая строка.
- Если `offset` отрицательный, подстрока начинается за `pos` символов от конца строки, а не от начала.

Необязательный аргумент `length` задаёт максимальное количество байтов возвращаемой подстроки.

**Синтаксис**

```sql
substring(s, offset[, length])
```

**Псевдонимы**: `byteSlice`, `mid`, `substr`

**Аргументы**

- `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string), [`FixedString`](/sql-reference/data-types/fixedstring) или [`Enum`](/sql-reference/data-types/enum)
- `offset` — Начальная позиция подстроки в `s`. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `length` — Необязательный параметр. Максимальная длина подстроки. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Подстрока `s` длиной `length` байтов, начинающаяся с индекса `offset`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Базовое использование**

```sql title=Запрос
SELECT 'database' AS db, substr(db, 5), substr(db, 5, 1)
```

```response title=Результат
┌─db───────┬─substring('database', 5)─┬─substring('database', 5, 1)─┐
│ database │ base                     │ b                           │
└──────────┴──────────────────────────┴─────────────────────────────┘
```


## substringIndex {#substringIndex}

Добавлено в версии: v23.7

Возвращает подстроку из `s` до `count`-го вхождения разделителя `delim`, аналогично Spark или MySQL.

**Синтаксис**

```sql
substringIndex(s, delim, count)
```

**Псевдонимы**: `SUBSTRING_INDEX`

**Аргументы**

- `s` — строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string)
- `delim` — символ разделителя. [`String`](/sql-reference/data-types/string)
- `count` — количество вхождений разделителя, которые нужно учесть перед извлечением подстроки. Если `count` положительное, возвращается всё, что находится слева от последнего разделителя (считая слева). Если `count` отрицательное, возвращается всё, что находится справа от последнего разделителя (считая справа). [`UInt`](/sql-reference/data-types/int-uint) или [`Int`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Подстрока из `s` до `count`-го вхождения `delim`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT substringIndex('www.clickhouse.com', '.', 2)
```

```response title=Результат
┌─substringIndex('www.clickhouse.com', '.', 2)─┐
│ www.clickhouse                               │
└──────────────────────────────────────────────┘
```


## substringIndexUTF8 {#substringIndexUTF8}

Введена в версии: v23.7

Возвращает подстроку `s` перед `count`-м вхождением разделителя `delim`, с учётом кодовых точек Unicode.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, и результат не определён.

**Синтаксис**

```sql
substringIndexUTF8(s, delim, count)
```

**Аргументы**

- `s` — строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string)
- `delim` — символ-разделитель. [`String`](/sql-reference/data-types/string)
- `count` — количество вхождений разделителя перед извлечением подстроки. Если count положительное, возвращается всё, что находится слева от последнего разделителя (при подсчёте слева). Если count отрицательное, возвращается всё, что находится справа от последнего разделителя (при подсчёте справа). [`UInt`](/sql-reference/data-types/int-uint) или [`Int`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку `s` перед `count`-м вхождением `delim`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример с UTF-8**

```sql title=Запрос
SELECT substringIndexUTF8('www.straßen-in-europa.de', '.', 2)
```

```response title=Результат
www.straßen-in-europa
```


## substringUTF8 {#substringUTF8}

Введена в версии: v1.1

Возвращает подстроку строки `s`, начинающуюся с указанного байтового индекса `offset` для кодовых точек Unicode.
Подсчёт байтов начинается с `1` по следующей логике:

- Если `offset` равен `0`, возвращается пустая строка.
- Если `offset` отрицательный, подстрока начинается за `pos` символов от конца строки, а не от начала.

Необязательный аргумент `length` задаёт максимальное количество байтов возвращаемой подстроки.

:::note
Функция предполагает, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, и результат не определён.
:::

**Синтаксис**

```sql
substringUTF8(s, offset[, length])
```

**Аргументы**

- `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string), [`FixedString`](/sql-reference/data-types/fixedstring) или [`Enum`](/sql-reference/data-types/enum)
- `offset` — Начальная позиция подстроки в `s`. [`Int`](/sql-reference/data-types/int-uint) или [`UInt`](/sql-reference/data-types/int-uint)
- `length` — Максимальная длина подстроки. Необязательный параметр. [`Int`](/sql-reference/data-types/int-uint) или [`UInt`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Подстрока `s` длиной `length` байтов, начинающаяся с индекса `offset`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT 'Täglich grüßt das Murmeltier.' AS str, substringUTF8(str, 9), substringUTF8(str, 9, 5)
```

```response title=Response
Täglich grüßt das Murmeltier.    grüßt das Murmeltier.    grüßt
```


## toValidUTF8 {#toValidUTF8}

Введена в версии: v20.1

Преобразует строку в валидную кодировку UTF-8, заменяя все невалидные символы UTF-8 символом замены `�` (U+FFFD).
Если обнаружено несколько последовательных невалидных символов, они сворачиваются в один символ замены.

**Синтаксис**

```sql
toValidUTF8(s)
```

**Аргументы**

- `s` — любой набор байтов, представленный как объект типа данных String. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает валидную строку UTF-8. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toValidUTF8('\\x61\\xF0\\x80\\x80\\x80b')
```

```response title=Response
c
┌─toValidUTF8('a����b')─┐
│ a�b                   │
└───────────────────────┘
```


## trimBoth {#trimBoth}

Введена в версии: v20.1

Удаляет указанные символы из начала и конца строки.
По умолчанию удаляются обычные пробельные (ASCII) символы.

**Синтаксис**

```sql
trimBoth(s[, trim_characters])
```

**Псевдонимы**: `trim`

**Аргументы**

- `s` — строка для обрезки. [`String`](/sql-reference/data-types/string)
- `trim_characters` — необязательный параметр. Символы для удаления. Если не указан, удаляются обычные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с удалёнными указанными символами с обоих концов. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT trimBoth('$$ClickHouse$$', '$')
```

```response title=Результат
┌─trimBoth('$$⋯se$$', '$')─┐
│ ClickHouse               │
└──────────────────────────┘
```


## trimLeft {#trimLeft}

Введена в версии: v20.1

Удаляет указанные символы из начала строки.
По умолчанию удаляются обычные пробельные символы (ASCII).

**Синтаксис**

```sql
trimLeft(input[, trim_characters])
```

**Псевдонимы**: `ltrim`

**Аргументы**

- `input` — строка для обрезки. [`String`](/sql-reference/data-types/string)
- `trim_characters` — необязательный параметр. Символы для удаления. Если не указан, удаляются обычные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с удалёнными указанными символами слева. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT trimLeft('ClickHouse', 'Click');
```

```response title=Результат
┌─trimLeft('Cl⋯', 'Click')─┐
│ House                    │
└──────────────────────────┘
```


## trimRight {#trimRight}

Введено в версии: v20.1

Удаляет указанные символы с конца строки.
По умолчанию удаляются обычные пробельные символы (ASCII).

**Синтаксис**

```sql
trimRight(s[, trim_characters])
```

**Псевдонимы**: `rtrim`

**Аргументы**

- `s` — строка для обрезки. [`String`](/sql-reference/data-types/string)
- `trim_characters` — необязательные символы для удаления. Если не указаны, удаляются обычные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с удалёнными указанными символами справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT trimRight('ClickHouse','House');
```

```response title=Результат
┌─trimRight('C⋯', 'House')─┐
│ Click                    │
└──────────────────────────┘
```


## tryBase32Decode {#tryBase32Decode}

Введена в версии: v25.6

Принимает строку и декодирует её с использованием схемы кодирования [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6).

**Синтаксис**

```sql
tryBase32Decode(encoded)
```

**Аргументы**

- `encoded` — строковый столбец или константа для декодирования. Если строка не является корректно закодированной в Base32, в случае ошибки возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─tryBase32Decode('IVXGG33EMVSA====')─┐
│ Encoded                             │
└─────────────────────────────────────┘
```


## tryBase58Decode {#tryBase58Decode}

Введена в версии: v22.10

Аналогична [`base58Decode`](#base58Decode), но возвращает пустую строку в случае ошибки.

**Синтаксис**

```sql
tryBase58Decode(encoded)
```

**Аргументы**

- `encoded` — столбец или константа типа String. Если строка не является корректно закодированной в Base58, возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT tryBase58Decode('3dc8KtHrwM') AS res, tryBase58Decode('invalid') AS res_invalid;
```

```response title=Результат
┌─res─────┬─res_invalid─┐
│ Encoded │             │
└─────────┴─────────────┘
```


## tryBase64Decode {#tryBase64Decode}

Добавлена в версии: v18.16

Аналогична [`base64Decode`](#base64Decode), но возвращает пустую строку в случае ошибки.

**Синтаксис**

```sql
tryBase64Decode(encoded)
```

**Аргументы**

- `encoded` — столбец или константа типа String для декодирования. Если строка не является корректно закодированной в Base64, возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT tryBase64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Результат
┌─tryBase64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                          │
└─────────────────────────────────────┘
```


## tryBase64URLDecode {#tryBase64URLDecode}

Введена в версии: v18.16

Аналогична [`base64URLDecode`](#base64URLDecode), но возвращает пустую строку в случае ошибки.

**Синтаксис**

```sql
tryBase64URLDecode(encoded)
```

**Аргументы**

- `encoded` — строковый столбец или константа для декодирования. Если строка не является корректно закодированной в Base64, возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                               │
└──────────────────────────────────────────────────────┘
```


## tryIdnaEncode {#tryIdnaEncode}

Введена в версии: v24.1

Возвращает представление доменного имени в формате Unicode (UTF-8) (алгоритм ToUnicode) согласно механизму [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
В случае ошибки возвращает пустую строку вместо генерации исключения.

**Синтаксис**

```sql
tryIdnaEncode(s)
```

**Аргументы**

- `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает ASCII-представление входной строки согласно механизму IDNA или пустую строку, если входные данные некорректны. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryIdnaEncode('straße.münchen.de')
```

```response title=Response
┌─tryIdnaEncode('straße.münchen.de')──┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```


## tryPunycodeDecode {#tryPunycodeDecode}

Введена в версии: v24.1

Аналогична `punycodeDecode`, но возвращает пустую строку, если передана некорректная строка в кодировке Punycode.

**Синтаксис**

```sql
tryPunycodeDecode(s)
```

**Аргументы**

- `s` — строка в кодировке Punycode. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает декодированный текст входного значения или пустую строку, если входные данные некорректны. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryPunycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─tryPunycodeDecode('Mnchen-3ya')─┐
│ München                         │
└─────────────────────────────────┘
```


## upper {#upper}

Введена в версии: v1.1

Преобразует латинские символы ASCII в строке в верхний регистр.

**Синтаксис**

```sql
upper(s)
```

**Синонимы**: `ucase`

**Аргументы**

- `s` — строка для преобразования в верхний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s`, преобразованную в верхний регистр. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Запрос
SELECT upper('clickhouse')
```

```response title=Результат
┌─upper('clickhouse')─┐
│ CLICKHOUSE          │
└─────────────────────┘
```


## upperUTF8 {#upperUTF8}

Добавлено в версии: v1.1

Преобразует строку в верхний регистр, предполагая, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не генерируется, и результат не определён.

:::note
Функция не определяет язык текста, например, для турецкого языка результат может быть неточным (i/İ vs. i/I).
Если длина байтовой последовательности UTF-8 различается для верхнего и нижнего регистра кодовой точки (например, `ẞ` и `ß`), результат может быть некорректным для этой кодовой точки.
:::

**Синтаксис**

```sql
upperUTF8(s)
```

**Аргументы**

- `s` — строковый тип. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Значение типа данных String. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT upperUTF8('München') AS Upperutf8
```

```response title=Response
┌─Upperutf8─┐
│ MÜNCHEN   │
└───────────┘
```

<!--AUTOGENERATED_END-->
