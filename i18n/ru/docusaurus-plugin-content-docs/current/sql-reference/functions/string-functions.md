---
description: 'Справочник по строковым функциям'
sidebar_label: 'Строки'
slug: /sql-reference/functions/string-functions
title: 'Функции для работы со строками'
doc_type: 'reference'
---

import VersionBadge from '@theme/badges/VersionBadge';

# Функции для работы со строками {#functions-for-working-with-strings}

Функции для [поиска](string-search-functions.md) в строках и для [замены](string-replace-functions.md) в строках описаны отдельно.

:::note
Приведённая ниже документация сгенерирована из системной таблицы `system.functions`.
:::

{/* 
  Внутреннее содержимое тегов ниже при сборке фреймворка документации
  заменяется документацией, сгенерированной из system.functions. Пожалуйста, не изменяйте и не удаляйте эти теги.
  См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## CRC32 {#CRC32}

Добавлена в версии: v20.1

Вычисляет контрольную сумму CRC32 строки, используя полином CRC-32-IEEE 802.3 и начальное значение `0xffffffff` (реализация zlib).

**Синтаксис**

```sql
CRC32(s)
```

**Аргументы**

* `s` — Строка, для которой нужно вычислить CRC32. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC32 строки. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC32('ClickHouse')
```

```response title=Response
┌─CRC32('ClickHouse')─┐
│          1538217360 │
└─────────────────────┘
```

## CRC32IEEE {#CRC32IEEE}

Добавлено в версии: v20.1

Вычисляет контрольную сумму CRC32 для строки с использованием полинома CRC-32-IEEE 802.3.

**Синтаксис**

```sql
CRC32IEEE(s)
```

**Аргументы**

* `s` — строка, для которой нужно вычислить CRC32. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает CRC32-контрольную сумму строки. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC32IEEE('ClickHouse');
```

```response title=Response
┌─CRC32IEEE('ClickHouse')─┐
│              3089448422 │
└─────────────────────────┘
```

## CRC64 {#CRC64}

Добавлена в версии: v20.1

Вычисляет контрольную сумму CRC64 строки с использованием полинома CRC-64-ECMA.

**Синтаксис**

```sql
CRC64(s)
```

**Аргументы**

* `s` — строка, для которой вычисляется CRC64. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC64 строки. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC64('ClickHouse');
```

```response title=Response
┌──CRC64('ClickHouse')─┐
│ 12126588151325169346 │
└──────────────────────┘
```

## appendTrailingCharIfAbsent {#appendTrailingCharIfAbsent}

Появилась в версии v1.1

Добавляет символ `c` к строке `s`, если `s` не пуста и не оканчивается символом `c`.

**Синтаксис**

```sql
appendTrailingCharIfAbsent(s, c)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `c` — символ, который добавляется при отсутствии. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s` с добавленным символом `c`, если `s` не оканчивается на `c`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT appendTrailingCharIfAbsent('https://example.com', '/');
```

```response title=Response
┌─appendTraili⋯.com', '/')─┐
│ https://example.com/     │
└──────────────────────────┘
```

## ascii {#ascii}

Появилась в версии: v22.11

Возвращает код символа ASCII первого символа строки `s` в виде `Int32`.

**Синтаксис**

```sql
ascii(s)
```

**Аргументы**

* `s` — Строковый аргумент. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает кодовую точку ASCII первого символа. Если `s` пустая, результат равен `0`. Если первый символ не является ASCII-символом или не входит в диапазон дополнения Latin-1 в UTF-16, результат не определён. [`Int32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT ascii('234')
```

```response title=Response
┌─ascii('234')─┐
│           50 │
└──────────────┘
```

## base32Decode {#base32Decode}

Появилась в версии: v25.6

Декодирует строку, закодированную в формате [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6) (RFC 4648).
Если строка не является корректной Base32-кодировкой, будет выброшено исключение.

**Синтаксис**

```sql
base32Decode(encoded)
```

**Аргументы**

* `encoded` — столбец типа String или константа. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─base32Decode('IVXGG33EMVSA====')─┐
│ Закодировано                     │
└──────────────────────────────────┘
```

## base32Encode {#base32Encode}

Появилась в версии: v25.6

Кодирует строку с использованием [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6).

**Синтаксис**

```sql
base32Encode(plaintext)
```

**Аргументы**

* `plaintext` — Текст в открытом виде для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base32Encode('Encoded')
```

```response title=Response
┌─base32Encode('Encoded')─┐
│ IVXGG33EMVSA====        │
└─────────────────────────┘
```

## base58Decode {#base58Decode}

Добавлено в версии: v22.7

Декодирует строку, закодированную в формате [Base58](https://datatracker.ietf.org/doc/html/draft-msporny-base58-03#section-3).
Если строка не является корректной Base58-последовательностью, выбрасывается исключение.

**Синтаксис**

```sql
base58Decode(encoded)
```

**Аргументы**

* `encoded` — Столбец типа String или константа для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base58Decode('JxF12TrwUP45BMd');
```

```response title=Response
┌─base58Decode⋯rwUP45BMd')─┐
│ Hello World              │
└──────────────────────────┘
```

## base58Encode {#base58Encode}

Добавлена в версии v22.7

Кодирует строку в кодировке [Base58](https://tools.ietf.org/id/draft-msporny-base58-01.html).

**Синтаксис**

```sql
base58Encode(plaintext)
```

**Аргументы**

* `plaintext` — Исходный текст для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с закодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base58Encode('ClickHouse');
```

```response title=Response
┌─base58Encode('ClickHouse')─┐
│ 4nhk8K7GHXf6zx             │
└────────────────────────────┘
```

## base64Decode {#base64Decode}

Появилась в: v18.16

Декодирует строку из представления [Base64](https://en.wikipedia.org/wiki/Base64) в соответствии с RFC 4648.
В случае ошибки выбрасывает исключение.

**Синтаксис**

```sql
base64Decode(encoded)
```

**Псевдонимы**: `FROM_BASE64`

**Аргументы**

* `encoded` — строковый столбец или константа для декодирования. Если строка не является корректной строкой в кодировке Base64, выбрасывается исключение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает декодированную строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Response
┌─base64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                       │
└──────────────────────────────────┘
```

## base64Encode {#base64Encode}

Добавлена в версии: v18.16

Кодирует строку в представление [Base64](https://en.wikipedia.org/wiki/Base64) в соответствии с RFC 4648.

**Синтаксис**

```sql
base64Encode(plaintext)
```

**Псевдонимы**: `TO_BASE64`

**Аргументы**

* `plaintext` — Столбец или константа с исходным текстом для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64Encode('clickhouse')
```

```response title=Response
┌─base64Encode('clickhouse')─┐
│ Y2xpY2tob3VzZQ==           │
└────────────────────────────┘
```

## base64URLDecode {#base64URLDecode}

Добавлена в версии: v24.6

Декодирует строку из формата [Base64](https://en.wikipedia.org/wiki/Base64), используя URL-безопасный алфавит в соответствии с RFC 4648.
В случае ошибки выбрасывает исключение.

**Синтаксис**

```sql
base64URLDecode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец или константа для кодирования. Если строка не является корректной Base64-строкой, выбрасывается исключение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                            │
└───────────────────────────────────────────────────┘
```

## base64URLEncode {#base64URLEncode}

Добавлена в версии: v18.16

Кодирует строку с использованием представления [Base64](https://datatracker.ietf.org/doc/html/rfc4648#section-4) (RFC 4648) с алфавитом, безопасным для URL.

**Синтаксис**

```sql
base64URLEncode(plaintext)
```

**Аргументы**

* `plaintext` — Столбец или константа с исходным текстом для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64URLEncode('https://clickhouse.com')
```

```response title=Response
┌─base64URLEncode('https://clickhouse.com')─┐
│ aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ            │
└───────────────────────────────────────────┘
```

## basename {#basename}

Появилась в версии: v20.1

Извлекает часть строки после последней косой черты (`/`) или обратной косой черты (`\`).
Эта функция часто используется для получения имени файла из пути.

**Синтаксис**

```sql
basename(expr)
```

**Аргументы**

* `expr` — строковое выражение. Символы обратной косой черты должны экранироваться. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает часть входной строки после её последней прямой или обратной косой черты. Если входная строка заканчивается прямой или обратной косой чертой, функция возвращает пустую строку. Возвращает исходную строку, если в ней нет прямых или обратных косых черт. [`String`](/sql-reference/data-types/string)

**Примеры**

**Извлечение имени файла из пути в стиле Unix**

```sql title=Query
SELECT 'some/long/path/to/file' AS a, basename(a)
```

```response title=Response
┌─a──────────────────────┬─basename('some/long/path/to/file')─┐
│ some/long/path/to/file │ file                               │
└────────────────────────┴────────────────────────────────────┘
```

**Извлечь имя файла из пути в Windows**

```sql title=Query
SELECT 'some\\long\\path\\to\\file' AS a, basename(a)
```

```response title=Response
┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
```

**Строка без разделителей пути**

```sql title=Query
SELECT 'some-file-name' AS a, basename(a)
```

```response title=Response
┌─a──────────────┬─basename('some-file-name')─┐
│ some-file-name │ some-file-name             │
└────────────────┴────────────────────────────┘
```

## byteHammingDistance {#byteHammingDistance}

Добавлена в версии v23.9

Вычисляет [расстояние Хэмминга](https://en.wikipedia.org/wiki/Hamming_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
byteHammingDistance(s1, s2)
```

**Псевдонимы**: `mismatches`

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние Хэмминга между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT byteHammingDistance('karolin', 'kathrin')
```

```response title=Response
┌─byteHammingDistance('karolin', 'kathrin')─┐
│                                         3 │
└───────────────────────────────────────────┘
```

## compareSubstrings {#compareSubstrings}

Введена в версии: v25.2

Лексикографически сравнивает две строки.

**Синтаксис**

```sql
compareSubstrings(s1, s2, s1_offset, s2_offset, num_bytes)
```

**Аргументы**

* `s1` — первая строка для сравнения. [`String`](/sql-reference/data-types/string)
* `s2` — вторая строка для сравнения. [`String`](/sql-reference/data-types/string)
* `s1_offset` — позиция (начиная с нуля) в `s1`, с которой начинается сравнение. [`UInt*`](/sql-reference/data-types/int-uint)
* `s2_offset` — позиция (начиная с нуля) в `s2`, с которой начинается сравнение. [`UInt*`](/sql-reference/data-types/int-uint)
* `num_bytes` — максимальное количество байт, сравниваемых в обеих строках. Если `s1_offset` (или `s2_offset`) + `num_bytes` превышает длину входной строки, значение `num_bytes` будет соответственно уменьшено. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* `-1`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] &lt; `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
* `0`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] = `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
* `1`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] &gt; `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
  [`Int8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT compareSubstrings('Saxony', 'Anglo-Saxon', 0, 6, 5) AS result
```

```response title=Response
┌─result─┐
│      0 │
└────────┘
```

## concat {#concat}

Добавлена в версии: v1.1

Объединяет (конкатенирует) переданные аргументы.

Аргументы, которые не имеют типов [`String`](../data-types/string.md) или [`FixedString`](../data-types/fixedstring.md), преобразуются в строки с использованием их сериализации по умолчанию.
Поскольку это снижает производительность, не рекомендуется использовать аргументы типов, отличных от String/FixedString.

**Синтаксис**

```sql
concat([s1, s2, ...])
```

**Аргументы**

* `s1, s2, ...` — Любое количество значений произвольного типа. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает строку типа String, полученную конкатенацией аргументов. Если хотя бы один из аргументов равен `NULL`, функция возвращает `NULL`. Если аргументы отсутствуют, возвращается пустая строка. [`Nullable(String)`](/sql-reference/data-types/nullable)

**Примеры**

**Конкатенация строк**

```sql title=Query
SELECT concat('Hello, ', 'World!')
```

```response title=Response
┌─concat('Hello, ', 'World!')─┐
│ Hello, World!               │
└─────────────────────────────┘
```

**Конкатенация числовых значений**

```sql title=Query
SELECT concat(42, 144)
```

```response title=Response
┌─concat(42, 144)─┐
│ 42144           │
└─────────────────┘
```

## concatAssumeInjective {#concatAssumeInjective}

Добавлена в версии v1.1

Аналог функции [`concat`](#concat), но предполагает, что `concat(s1, s2, ...) → sn` является инъективной,
т. е. возвращает разные результаты для разных аргументов.

Может использоваться для оптимизации `GROUP BY`.

**Синтаксис**

```sql
concatAssumeInjective([s1, s2, ...])
```

**Аргументы**

* `s1, s2, ...` — Произвольное количество значений любого типа. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает строку, созданную путём конкатенации аргументов. Если хотя бы одно из значений аргументов равно `NULL`, функция возвращает `NULL`. Если аргументы не переданы, возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Оптимизация GROUP BY**

```sql title=Query
SELECT concat(key1, key2), sum(value) FROM key_val GROUP BY concatAssumeInjective(key1, key2)
```

```response title=Response
┌─concat(key1, key2)─┬─sum(value)─┐
│ Hello, World!      │          3 │
│ Hello, World!      │          2 │
│ Hello, World       │          3 │
└────────────────────┴────────────┘
```

## concatWithSeparator {#concatWithSeparator}

Впервые появилась в версии v22.12

Объединяет переданные строки, разделяя их указанным разделителем.

**Синтаксис**

```sql
concatWithSeparator(sep[, exp1, exp2, ...])
```

**Псевдонимы**: `concat_ws`

**Аргументы**

* `sep` — разделитель. [`const String`](/sql-reference/data-types/string) или [`const FixedString`](/sql-reference/data-types/fixedstring)
* `exp1, exp2, ...` — выражения для конкатенации. Аргументы, тип которых не `String` и не `FixedString`, преобразуются в строки с использованием их сериализации по умолчанию. Поскольку это снижает производительность, не рекомендуется использовать аргументы типов, отличных от String/FixedString. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает строку, созданную путём конкатенации аргументов. Если какое-либо из значений аргументов равно `NULL`, функция возвращает `NULL`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT concatWithSeparator('a', '1', '2', '3', '4')
```

```response title=Response
┌─concatWithSeparator('a', '1', '2', '3', '4')─┐
│ 1a2a3a4                                      │
└──────────────────────────────────────────────┘
```

## concatWithSeparatorAssumeInjective {#concatWithSeparatorAssumeInjective}

Добавлена в: v22.12

Похожа на [`concatWithSeparator`](#concatWithSeparator), но предполагает, что `concatWithSeparator(sep[,exp1, exp2, ... ]) → result` является инъективной.
Функция называется инъективной, если она возвращает разные результаты для разных аргументов.

Может использоваться для оптимизации `GROUP BY`.

**Синтаксис**

```sql
concatWithSeparatorAssumeInjective(sep[, exp1, exp2, ... ])
```

**Аргументы**

* `sep` — Разделитель. [`const String`](/sql-reference/data-types/string) или [`const FixedString`](/sql-reference/data-types/fixedstring)
* `exp1, exp2, ...` — Выражения для конкатенации. Аргументы, которые не относятся к типу `String` или `FixedString`, преобразуются в строки с использованием их сериализации по умолчанию. Поскольку это снижает производительность, не рекомендуется использовать аргументы типов, отличных от String/FixedString. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает строку, полученную конкатенацией аргументов. Если любое из значений аргументов равно `NULL`, функция возвращает `NULL`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
CREATE TABLE user_data (
user_id UInt32,
first_name String,
last_name String,
score UInt32
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO user_data VALUES
(1, 'John', 'Doe', 100),
(2, 'Jane', 'Smith', 150),
(3, 'John', 'Wilson', 120),
(4, 'Jane', 'Smith', 90);

SELECT
    concatWithSeparatorAssumeInjective('-', first_name, last_name) as full_name,
    sum(score) as total_score
FROM user_data
GROUP BY concatWithSeparatorAssumeInjective('-', first_name, last_name);
```

```response title=Response
┌─full_name───┬─total_score─┐
│ Jane-Smith  │         240 │
│ John-Doe    │         100 │
│ John-Wilson │         120 │
└─────────────┴─────────────┘
```

## conv {#conv}

Появилась в версии: v1.1

Преобразует числа между различными системами счисления.

Функция преобразует число из одной системы счисления в другую. Поддерживаются системы счисления с основанием от 2 до 36.
Для оснований больше 10 используются буквы A–Z (без учета регистра) для представления цифр 10–35.

Эта функция совместима с функцией MySQL CONV().

**Синтаксис**

```sql
conv(number, from_base, to_base)
```

**Аргументы**

* `number` — число для преобразования; может быть строкой или числом. - `from_base` — исходная система счисления (2-36); должен быть целым числом. - `to_base` — целевая система счисления (2-36); должен быть целым числом.

**Возвращаемое значение**

Строковое представление числа в целевой системе счисления.

**Примеры**

**Преобразование из десятичной системы в двоичную**

```sql title=Query
SELECT conv('10', 10, 2)
```

```response title=Response
1010
```

**Преобразование шестнадцатеричного числа в десятичное**

```sql title=Query
SELECT conv('FF', 16, 10)
```

```response title=Response
255
```

**Преобразование с отрицательным значением**

```sql title=Query
SELECT conv('-1', 10, 16)
```

```response title=Response
FFFFFFFFFFFFFFFF
```

**Преобразование двоичного числа в восьмеричное**

```sql title=Query
SELECT conv('1010', 2, 8)
```

```response title=Response
12
```

## convertCharset {#convertCharset}

Появилась в версии v1.1

Возвращает строку `s`, перекодированную из кодировки `from` в кодировку `to`.

**Синтаксис**

```sql
convertCharset(s, from, to)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `from` — исходная кодировка символов. [`String`](/sql-reference/data-types/string)
* `to` — целевая кодировка символов. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s`, преобразованную из кодировки `from` в кодировку `to`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT convertCharset('Café', 'UTF-8', 'ISO-8859-1');
```

```response title=Response
┌─convertChars⋯SO-8859-1')─┐
│ Caf�                     │
└──────────────────────────┘
```

## damerauLevenshteinDistance {#damerauLevenshteinDistance}

Добавлена в: v24.1

Вычисляет [расстояние Дамерау — Левенштейна](https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
damerauLevenshteinDistance(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние Дамерау—Левенштейна между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT damerauLevenshteinDistance('clickhouse', 'mouse')
```

```response title=Response
┌─damerauLevenshteinDistance('clickhouse', 'mouse')─┐
│                                                 6 │
└───────────────────────────────────────────────────┘
```

## decodeHTMLComponent {#decodeHTMLComponent}

Добавлена в версии: v23.9

Преобразует HTML-сущности в строке в соответствующие символы.

**Синтаксис**

```sql
decodeHTMLComponent(s)
```

**Аргументы**

* `s` — строка, содержащая HTML-сущности для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированными HTML-сущностями. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')
```

```response title=Response
┌─decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')─┐
│ <div>Hello & "World"</div>                                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

## decodeXMLComponent {#decodeXMLComponent}

Впервые представлена в версии v21.2

Декодирует XML-сущности в строке, заменяя их соответствующими символами.

**Синтаксис**

```sql
decodeXMLComponent(s)
```

**Аргументы**

* `s` — Строка, содержащая XML-сущности для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает переданную строку с декодированными XML-сущностями. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT decodeXMLComponent('&lt;tag&gt;Hello &amp; World&lt;/tag&gt;')
```

```response title=Response
┌─decodeXMLCom⋯;/tag&gt;')─┐
│ <tag>Hello & World</tag> │
└──────────────────────────┘
```

## editDistance {#editDistance}

Введена в версии: v23.9

Вычисляет [редакционное расстояние](https://en.wikipedia.org/wiki/Edit_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
editDistance(s1, s2)
```

**Псевдонимы**: `levenshteinDistance`

**Аргументы**

* `s1` — Первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — Вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает редакционное расстояние между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT editDistance('clickhouse', 'mouse')
```

```response title=Response
┌─editDistance('clickhouse', 'mouse')─┐
│                                   6 │
└─────────────────────────────────────┘
```

## editDistanceUTF8 {#editDistanceUTF8}

Добавлена в версии v24.6

Вычисляет [редакционное расстояние](https://en.wikipedia.org/wiki/Edit_distance) между двумя строками в кодировке UTF-8.

**Синтаксис**

```sql
editDistanceUTF8(s1, s2)
```

**Псевдонимы**: `levenshteinDistanceUTF8`

**Аргументы**

* `s1` — Первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — Вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние Левенштейна между двумя строками в кодировке UTF-8. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT editDistanceUTF8('我是谁', '我是我')
```

```response title=Response
┌─editDistanceUTF8('我是谁', '我是我')──┐
│                                   1 │
└─────────────────────────────────────┘
```

## encodeXMLComponent {#encodeXMLComponent}

Добавлена в версии v21.1

Экранирует символы строки для помещения её в текстовый узел или атрибут XML.

**Синтаксис**

```sql
encodeXMLComponent(s)
```

**Аргументы**

* `s` — строка для экранирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает экранированную строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    '<tag>Hello & "World"</tag>' AS original,
    encodeXMLComponent('<tag>Hello & "World"</tag>') AS xml_encoded;
```

```response title=Response
┌─оригинал───────────────────┬─xml_кодировка────────────────────────────────────────┐
│ <tag>Привет & "Мир"</tag> │ &lt;tag&gt;Привет &amp; &quot;Мир&quot;&lt;/tag&gt; │
└────────────────────────────┴──────────────────────────────────────────────────────┘
```

## endsWith {#endsWith}

Введена в версии: v1.1

Проверяет, заканчивается ли строка указанным суффиксом.

**Синтаксис**

```sql
endsWith(s, suffix)
```

**Аргументы**

* `s` — Строка для проверки. [`String`](/sql-reference/data-types/string)
* `suffix` — Суффикс, который нужно проверить. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` оканчивается на `suffix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWith('ClickHouse', 'House');
```

```response title=Response
┌─endsWith('Cl⋯', 'House')─┐
│                        1 │
└──────────────────────────┘
```

## endsWithCaseInsensitive {#endsWithCaseInsensitive}

Добавлена в версии v25.9

Проверяет, оканчивается ли строка на указанный суффикс без учета регистра.

**Синтаксис**

```sql
endsWithCaseInsensitive(s, suffix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `suffix` — суффикс для проверки (независимо от регистра). [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` оканчивается на `suffix` независимо от регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithCaseInsensitive('ClickHouse', 'HOUSE');
```

```response title=Response
┌─endsWithCaseInsensitive('Cl⋯', 'HOUSE')─┐
│                                       1 │
└─────────────────────────────────────────┘
```

## endsWithCaseInsensitiveUTF8 {#endsWithCaseInsensitiveUTF8}

Впервые добавлена в: v25.9

Возвращает, заканчивается ли строка `s` суффиксом `suffix` без учета регистра.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, а результат не определен.

**Синтаксис**

```sql
endsWithCaseInsensitiveUTF8(s, suffix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `suffix` — суффикс для проверки (сравнение без учёта регистра). [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` заканчивается на `suffix` при сравнении без учёта регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithCaseInsensitiveUTF8('данных', 'ых');
```

```response title=Response
┌─endsWithCaseInsensitiveUTF8('данных', 'ых')─┐
│                                           1 │
└─────────────────────────────────────────────┘
```

## endsWithUTF8 {#endsWithUTF8}

Добавлена в: v23.8

Возвращает, оканчивается ли строка `s` суффиксом `suffix`.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, а результат не определен.

**Синтаксис**

```sql
endsWithUTF8(s, suffix)
```

**Аргументы**

* `s` — Строка для проверки. [`String`](/sql-reference/data-types/string)
* `suffix` — Суффикс для проверки. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` оканчивается на `suffix`, в противном случае — `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithUTF8('данных', 'ых');
```

```response title=Response
┌─endsWithUTF8('данных', 'ых')─┐
│                            1 │
└──────────────────────────────┘
```

## extractTextFromHTML {#extractTextFromHTML}

Появилась в версии: v21.3

Извлекает текстовое содержимое из HTML или XHTML.

Эта функция удаляет HTML‑теги, комментарии и элементы script/style, оставляя только текст. Она выполняет:

* удаление всех HTML/XML‑тегов;
* удаление комментариев (`<!-- -->`);
* удаление элементов script и style вместе с их содержимым;
* обработку CDATA‑секций (копируются дословно);
* корректную обработку и нормализацию пробелов.

Примечание: HTML‑сущности не декодируются и при необходимости должны обрабатываться отдельной функцией.

**Синтаксис**

```sql
extractTextFromHTML(html)
```

**Аргументы**

* `html` — строка, содержащая HTML‑контент, из которого извлекается текст. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает извлечённый текст с нормализованными пробельными символами. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT extractTextFromHTML('
<html>
    <head><title>Заголовок страницы</title></head>
    <body>
        <p>Привет <b>Мир</b>!</p>
        <script>alert("test");</script>
        <!-- comment -->
    </body>
</html>
');
```

```response title=Response
┌─extractTextFromHTML('<html><head>...')─┐
│ Page Title Hello World!                │
└────────────────────────────────────────┘
```

## firstLine {#firstLine}

Добавлена в версии v23.7

Возвращает первую строку многострочного текста.

**Синтаксис**

```sql
firstLine(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает первую строку из входной строки или всю строку, если во входной строке нет разделителей строк. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT firstLine('foo\\nbar\\nbaz')
```

```response title=Response
┌─firstLine('foo\nbar\nbaz')─┐
│ foo                        │
└────────────────────────────┘
```

## idnaDecode {#idnaDecode}

Добавлена в версии: v24.1

Возвращает представление доменного имени в Юникоде (UTF-8) (алгоритм ToUnicode) в соответствии с механизмом [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
В случае ошибки (например, из-за некорректного входного значения) возвращается исходная строка.
Обратите внимание, что повторное применение [`idnaEncode()`](#idnaEncode) и [`idnaDecode()`](#idnaDecode) не обязательно возвращает исходную строку из-за нормализации регистра.

**Синтаксис**

```sql
idnaDecode(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает Unicode-представление во входной строки в кодировке UTF-8 в соответствии с механизмом IDNA для этого значения. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')
```

```response title=Response
┌─idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')─┐
│ straße.münchen.de                             │
└───────────────────────────────────────────────┘
```

## idnaEncode {#idnaEncode}

Впервые представлена в: v24.1

Возвращает ASCII-представление (алгоритм ToASCII) доменного имени в соответствии с механизмом [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
Входная строка должна быть в UTF-кодировке и может быть преобразована в ASCII-строку, в противном случае генерируется исключение.

:::note
Не выполняется декодирование percent-encoding и удаление табуляций, пробелов или управляющих символов.
:::

**Синтаксис**

```sql
idnaEncode(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает ASCII-представление входной строки в соответствии с механизмом IDNA для входного значения. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT idnaEncode('straße.münchen.de')
```

```response title=Response
┌─idnaEncode('straße.münchen.de')─────┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```

## initcap {#initcap}

Появилась в версии: v23.7

Преобразует первую букву каждого слова в верхний регистр, а остальные — в нижний.
Словами считаются последовательности буквенно-цифровых символов, разделённые небуквенно-цифровыми символами.

:::note
Поскольку `initcap` преобразует только первую букву каждого слова в верхний регистр, вы можете наблюдать неожиданное поведение для слов, содержащих апострофы или заглавные буквы.
Это ожидаемое поведение, и в настоящее время исправлять его не планируется.
:::

**Синтаксис**

```sql
initcap(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `s`, в которой первая буква каждого слова преобразована в верхний регистр. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT initcap('строительство для быстрого')
```

```response title=Response
┌─initcap('building for fast')─┐
│ Building For Fast            │
└──────────────────────────────┘
```

**Пример известного поведения при работе со словами, содержащими апострофы или заглавные буквы**

```sql title=Query
SELECT initcap('John''s cat won''t eat.');
```

```response title=Response
┌─initcap('Joh⋯n\'t eat.')─┐
│ John'S Cat Won'T Eat.    │
└──────────────────────────┘
```

## initcapUTF8 {#initcapUTF8}

Добавлена в: v23.7

Подобно функции [`initcap`](#initcap), `initcapUTF8` преобразует первую букву каждого слова в верхний регистр, а остальные — в нижний.
Предполагается, что строка содержит текст в корректной кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, и результат является неопределённым.

:::note
Эта функция не определяет язык, поэтому, например, для турецкого результат может быть не совсем корректным (i/İ vs. i/I).
Если длина последовательности байт UTF-8 отличается для верхнего и нижнего регистра одной и той же точки кода (code point), результат для этого символа может быть некорректным.
:::

**Синтаксис**

```sql
initcapUTF8(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `s` с первой буквой каждого слова, преобразованной в верхний регистр. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT initcapUTF8('не тормозит')
```

```response title=Response
┌─initcapUTF8('не тормозит')─┐
│ Не Тормозит                │
└────────────────────────────┘
```

## isValidASCII {#isValidASCII}

Добавлено в: v25.9

Возвращает 1, если входной String или FixedString содержит только ASCII-байты (0x00–0x7F), иначе 0. Функция оптимизирована для положительного случая (когда входное значение *является* корректным ASCII).

**Синтаксис**

```sql
```

**Псевдонимы**: `isASCII`

**Аргументы**

* Нет.

**Возвращаемое значение**

**Примеры**

**isValidASCII**

```sql title=Query
SELECT isValidASCII('hello') AS is_ascii, isValidASCII('你好') AS is_not_ascii
```

```response title=Response
```


## isValidUTF8 {#isValidUTF8}

Добавлена в версии: v20.1

Проверяет, представляет ли набор байтов корректный текст в кодировке UTF-8.

**Синтаксис**

```sql
isValidUTF8(s)
```

**Аргументы**

* `s` — Строка, которую нужно проверить на корректность кодировки UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если набор байтов представляет собой корректный UTF-8-кодированный текст, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT isValidUTF8('\\xc3\\xb1') AS валидный, isValidUTF8('\\xc3\\x28') AS невалидный
```

```response title=Response
┌─valid─┬─invalid─┐
│     1 │       0 │
└───────┴─────────┘
```

## jaroSimilarity {#jaroSimilarity}

Добавлена в версии: v24.1

Вычисляет [Jaro similarity](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance#Jaro_similarity) между двумя байтовыми строками.

**Синтаксис**

```sql
jaroSimilarity(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает меру сходства Джаро между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT jaroSimilarity('clickhouse', 'click')
```

```response title=Response
┌─jaroSimilarity('clickhouse', 'click')─┐
│                    0.8333333333333333 │
└───────────────────────────────────────┘
```

## jaroWinklerSimilarity {#jaroWinklerSimilarity}

Добавлена в версии v24.1

Вычисляет [сходство Джаро–Винклера](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
jaroWinklerSimilarity(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает сходство Джаро — Винклера между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT jaroWinklerSimilarity('clickhouse', 'click')
```

```response title=Response
┌─jaroWinklerSimilarity('clickhouse', 'click')─┐
│                           0.8999999999999999 │
└──────────────────────────────────────────────┘
```

## left {#left}

Введена в версии: v22.1

Возвращает подстроку строки `s` со смещением `offset` от левого края.

**Синтаксис**

```sql
left(s, offset)
```

**Аргументы**

* `s` — Строка, из которой вычисляется подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — Количество байт смещения. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного `offset` — подстроку `s` длиной `offset` байт, начиная с левого края строки.
* Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт, начиная с левого края строки.
* Пустую строку, если `length` равен `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT left('Hello World', 5)
```

```response title=Response
Hello
```

**Отрицательный сдвиг**

```sql title=Query
SELECT left('Hello World', -6)
```

```response title=Response
Hello
```

## leftPad {#leftPad}

Добавлена в: v21.8

Дополняет строку слева пробелами или указанной строкой (при необходимости многократно) до тех пор, пока её длина не достигнет заданного значения `length`.

**Синтаксис**

```sql
leftPad(string, length[, pad_string])
```

**Псевдонимы**: `lpad`

**Аргументы**

* `string` — Входная строка, которую нужно дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный аргумент. Строка, которой дополняется входная строка. Если не указан, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает дополненную слева строку заданной длины. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT leftPad('abc', 7, '*'), leftPad('def', 7)
```

```response title=Response
┌─leftPad('abc', 7, '*')─┬─leftPad('def', 7)─┐
│ ****abc                │     def           │
└────────────────────────┴───────────────────┘
```

## leftPadUTF8 {#leftPadUTF8}

Введена в версии: v21.8

Дополняет строку в кодировке UTF8 слева пробелами или указанной строкой (при необходимости несколько раз), пока результирующая строка не достигнет заданной длины.
В отличие от [`leftPad`](#leftPad), который измеряет длину строки в байтах, здесь длина строки измеряется в кодовых точках.

**Синтаксис**

```sql
leftPadUTF8(string, length[, pad_string])
```

**Аргументы**

* `string` — Входная строка, которую необходимо дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, то входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный параметр. Строка, которой дополняется входная строка. Если параметр не указан, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, дополненную слева до заданной длины. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT leftPadUTF8('абвг', 7, '*'), leftPadUTF8('дежз', 7)
```

```response title=Response
┌─leftPadUTF8('абвг', 7, '*')─┬─leftPadUTF8('дежз', 7)─┐
│ ***абвг                     │    дежз                │
└─────────────────────────────┴────────────────────────┘
```

## leftUTF8 {#leftUTF8}

Добавлена в: v22.1

Возвращает подстроку строки `s` в кодировке UTF-8 с заданным `offset`, начиная слева.

**Синтаксис**

```sql
leftUTF8(s, offset)
```

**Аргументы**

* `s` — строка в кодировке UTF-8, для которой вычисляется подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — количество байт смещения. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного `offset` — подстроку `s` длиной `offset` байт, начиная от начала строки.\n&quot;
* Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт, начиная от начала строки.\n&quot;
* Пустую строку, если `length` равно 0.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT leftUTF8('Привет', 4)
```

```response title=Response
Прив
```

**Отрицательное смещение**

```sql title=Query
SELECT leftUTF8('Привет', -4)
```

```response title=Response
Пр
```

## lengthUTF8 {#lengthUTF8}

Появилась в версии: v1.1

Возвращает длину строки в кодовых точках Юникода, а не в байтах или символах.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не генерируется, а результат неопределён.

**Синтаксис**

```sql
lengthUTF8(s)
```

**Псевдонимы**: `CHAR_LENGTH`, `CHARACTER_LENGTH`

**Аргументы**

* `s` — строка, содержащая корректный текст в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Длина строки `s` в кодовых точках Unicode. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT lengthUTF8('Здравствуй, мир!')
```

```response title=Response
┌─lengthUTF8('Здравствуй, мир!')─┐
│                             16 │
└────────────────────────────────┘
```

## lower {#lower}

Впервые появилась в версии: v1.1

Преобразует ASCII-строку в нижний регистр.

**Синтаксис**

```sql
lower(s)
```

**Псевдонимы**: `lcase`

**Аргументы**

* `s` — строка для преобразования в нижний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s` в нижнем регистре. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT lower('CLICKHOUSE')
```

```response title=Response
┌─lower('CLICKHOUSE')─┐
│ clickhouse          │
└─────────────────────┘
```

## lowerUTF8 {#lowerUTF8}

Добавлена в: v1.1

Преобразует строку в нижний регистр, предполагая, что строка содержит корректный текст в кодировке UTF-8. Если это предположение нарушено, исключение не выбрасывается, а результат не определён.

**Синтаксис**

```sql
lowerUTF8(input)
```

**Аргументы**

* `input` — входная строка для преобразования в нижний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нижнем регистре. [`String`](/sql-reference/data-types/string)

**Примеры**

**first**

```sql title=Query
SELECT lowerUTF8('München') as Lowerutf8;
```

```response title=Response
münchen
```

## normalizeUTF8NFC {#normalizeUTF8NFC}

Добавлена в: v21.11

Нормализует строку в кодировке UTF-8 в соответствии с [формой нормализации NFC](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFC(str)
```

**Аргументы**

* `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нормальной форме NFC (NFC-normalized) для UTF-8. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
'é' AS original, -- e + комбинируемый знак акута (U+0065 + U+0301)
length(original),
normalizeUTF8NFC('é') AS nfc_normalized, -- é (U+00E9)
length(nfc_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfc_normalized─┬─length(nfc_normalized)─┐
│ é        │                2 │ é              │                      2 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```

## normalizeUTF8NFD {#normalizeUTF8NFD}

Добавлена в версии v21.11

Нормализует строку в кодировке UTF-8 в соответствии с [нормальной формой NFD](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFD(str)
```

**Аргументы**

* `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нормализованной форме NFD для UTF-8. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    'é' AS original, -- é (U+00E9)
    length(original),
    normalizeUTF8NFD('é') AS nfd_normalized, -- e + комбинируемый акут (U+0065 + U+0301)
    length(nfd_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfd_normalized─┬─length(nfd_normalized)─┐
│ é        │                2 │ é              │                      3 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```

## normalizeUTF8NFKC {#normalizeUTF8NFKC}

Появилась в версии v21.11

Нормализует строку UTF‑8 в соответствии с [нормальной формой NFKC](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFKC(str)
```

**Аргументы**

* `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нормализованной форме NFKC в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    '① ② ③' AS original,                            -- Символы чисел в кружках
    normalizeUTF8NFKC('① ② ③') AS nfkc_normalized;  -- Преобразует в 1 2 3
```

```response title=Response
┌─original─┬─nfkc_normalized─┐
│ ① ② ③  │ 1 2 3           │
└──────────┴─────────────────┘
```

## normalizeUTF8NFKD {#normalizeUTF8NFKD}

Добавлено в версии v21.11

Нормализует строку в кодировке UTF-8 в соответствии с [формой нормализации NFKD](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFKD(str)
```

**Аргументы**

* `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нормализованной форме NFKD исходной UTF-8-строки. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    'H₂O²' AS original,                            -- H + индекс 2 внизу + O + индекс 2 вверху
    normalizeUTF8NFKD('H₂O²') AS nfkd_normalized;  -- Преобразует в H 2 O 2
```

```response title=Response
┌─original─┬─nfkd_normalized─┐
│ H₂O²     │ H2O2            │
└──────────┴─────────────────┘
```

## punycodeDecode {#punycodeDecode}

Добавлено в версии: v24.1

Возвращает исходный текст в кодировке UTF-8 для строки, закодированной в формате [Punycode](https://en.wikipedia.org/wiki/Punycode).
Если передана некорректная строка в кодировке Punycode, генерируется исключение.

**Синтаксис**

```sql
punycodeDecode(s)
```

**Аргументы**

* `s` — строка в кодировке Punycode. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает исходное текстовое значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT punycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─punycodeDecode('Mnchen-3ya')─┐
│ München                      │
└──────────────────────────────┘
```

## punycodeEncode {#punycodeEncode}

Появилась в: v24.1

Возвращает представление строки в кодировке [Punycode](https://en.wikipedia.org/wiki/Punycode).
Строка должна быть закодирована в UTF-8, иначе поведение не определено.

**Синтаксис**

```sql
punycodeEncode(s)
```

**Аргументы**

* `s` — входное значение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает представление входного значения в Punycode. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT punycodeEncode('München')
```

```response title=Response
┌─punycodeEncode('München')─┐
│ Mnchen-3ya                │
└───────────────────────────┘
```

## regexpExtract {#regexpExtract}

Впервые появился в: v23.2

Извлекает первую подстроку в `haystack`, которая соответствует шаблону регулярного выражения и указанному индексу группы.

**Синтаксис**

```sql
regexpExtract(haystack, pattern[, index])
```

**Псевдонимы**: `REGEXP_EXTRACT`

**Аргументы**

* `haystack` — Строка, в которой ищется шаблон регулярного выражения. [`String`](/sql-reference/data-types/string)
* `pattern` — Строка, регулярное выражение. `pattern` может содержать несколько групп регулярного выражения, `index` указывает, какую группу извлечь. Индекс 0 означает совпадение со всем регулярным выражением. [`const String`](/sql-reference/data-types/string)
* `index` — Необязательный параметр. Целое число больше или равно 0, по умолчанию — 1. Определяет, какую группу регулярного выражения извлечь. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает строку с совпадением. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    regexpExtract('100-200', '(\\d+)-(\\d+)', 1),
    regexpExtract('100-200', '(\\d+)-(\\d+)', 2),
    regexpExtract('100-200', '(\\d+)-(\\d+)', 0),
    regexpExtract('100-200', '(\\d+)-(\\d+)');
```

```response title=Response
┌─regexpExtract('100-200', '(\\d+)-(\\d+)', 1)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)', 2)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)', 0)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)')─┐
│ 100                                          │ 200                                          │ 100-200                                      │ 100                                       │
└──────────────────────────────────────────────┴──────────────────────────────────────────────┴──────────────────────────────────────────────┴───────────────────────────────────────────┘
```

## repeat {#repeat}

Введена в версии v20.1

Повторяет строку заданное количество раз.

**Синтаксис**

```sql
repeat(s, n)
```

**Аргументы**

* `s` — строка для повторения. [`String`](/sql-reference/data-types/string)
* `n` — количество повторений строки. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Строка, содержащая строку `s`, повторённую `n` раз. Если `n` отрицательное, функция возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT repeat('abc', 10)
```

```response title=Response
┌─repeat('abc', 10)──────────────┐
│ abcabcabcabcabcabcabcabcabcabc │
└────────────────────────────────┘
```

## reverseUTF8 {#reverseUTF8}

Добавлено в: v1.1

Разворачивает последовательность кодовых точек Unicode в строке.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не генерируется, и результат неопределён.

**Синтаксис**

```sql
reverseUTF8(s)
```

**Аргументы**

* `s` — Строка, содержащая текст в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с последовательностью кодовых точек Unicode в обратном порядке. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT reverseUTF8('ClickHouse')
```

```response title=Response
esuoHkcilC
```

## right {#right}

Появилась в версии v22.1

Возвращает подстроку строки `s` с заданным смещением `offset`, отсчитываемым справа.

**Синтаксис**

```sql
right(s, offset)
```

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — Величина смещения в байтах. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного `offset` — подстроку `s` длиной `offset` байт, считая с правого края строки.
* Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт, считая с правого края строки.
* Пустую строку, если значение `length` равно `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT right('Hello', 3)
```

```response title=Response
llo
```

**Отрицательное смещение**

```sql title=Query
SELECT right('Hello', -3)
```

```response title=Response
lo
```

## rightPad {#rightPad}

Появилась в версии v21.8

Дополняет строку справа пробелами или указанной строкой (при необходимости многократно) до тех пор, пока длина результирующей строки не достигнет заданного значения `length`.

**Синтаксис**

```sql
rightPad(string, length[, pad_string])
```

**Псевдонимы**: `rpad`

**Аргументы**

* `string` — Входная строка, которую нужно дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, то входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный параметр. Строка, которой дополняется входная строка. Если параметр не указан, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT rightPad('abc', 7, '*'), rightPad('abc', 7)
```

```response title=Response
┌─rightPad('abc', 7, '*')─┬─rightPad('abc', 7)─┐
│ abc****                 │ abc                │
└─────────────────────────┴────────────────────┘
```

## rightPadUTF8 {#rightPadUTF8}

Добавлена в версии v21.8

Дополняет строку справа пробелами или указанной строкой (при необходимости многократно) до тех пор, пока результирующая строка не достигнет заданной длины.
В отличие от [`rightPad`](#rightPad), который измеряет длину строки в байтах, здесь длина строки измеряется в кодовых точках.

**Синтаксис**

```sql
rightPadUTF8(string, length[, pad_string])
```

**Аргументы**

* `string` — Входная строка, которую нужно дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, то входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный параметр. Строка, которой дополняется входная строка. Если не указано, то входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT rightPadUTF8('абвг', 7, '*'), rightPadUTF8('абвг', 7)
```

```response title=Response
┌─rightPadUTF8('абвг', 7, '*')─┬─rightPadUTF8('абвг', 7)─┐
│ абвг***                      │ абвг                    │
└──────────────────────────────┴─────────────────────────┘
```

## rightUTF8 {#rightUTF8}

Впервые появилась в: v22.1

Возвращает подстроку строки в кодировке UTF‑8 `s` с заданным `offset`, начиная с конца.

**Синтаксис**

```sql
rightUTF8(s, offset)
```

**Аргументы**

* `s` — Строка в кодировке UTF-8, для которой вычисляется подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — Смещение в байтах. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного значения `offset` — подстроку `s` длиной `offset` байт, начиная от правого края строки.
* Для отрицательного значения `offset` — подстроку `s` длиной `length(s) - |offset|` байт, начиная от правого края строки.
* Пустую строку, если `length` равно `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT rightUTF8('Привет', 4)
```

```response title=Response
ивет
```

**Отрицательное смещение**

```sql title=Query
SELECT rightUTF8('Привет', -4)
```

```response title=Response
ет
```

## soundex {#soundex}

Впервые появилась в версии: v23.4

Возвращает [код Soundex](https://en.wikipedia.org/wiki/Soundex) для строки.

**Синтаксис**

```sql
soundex(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает код Soundex для входной строки. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT soundex('aksel')
```

```response title=Response
┌─soundex('aksel')─┐
│ A240             │
└──────────────────┘
```

## space {#space}

Появилась в версии: v23.5

Повторяет символ пробела (` `) указанное число раз.

**Синтаксис**

```sql
space(n)
```

**Аргументы**

* `n` — количество повторений символа пробела. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает строку, в которой пробел повторяется `n` раз. Если `n <= 0`, функция возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT space(3) AS res, length(res);
```

```response title=Response
┌─res─┬─length(res)─┐
│     │           3 │
└─────┴─────────────┘
```

## sparseGrams {#sparseGrams}

Добавлена в: v25.5

Находит все подстроки заданной строки длиной не менее `n`,
для которых хеши (n-1)-грамм на границах подстроки
строго больше хешей любых (n-1)-грамм внутри подстроки.
Использует `CRC32` в качестве хеш-функции.

**Синтаксис**

```sql
sparseGrams(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — необязательный параметр. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — необязательный параметр. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Должно быть не меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — необязательный параметр. Если задан, возвращаются только n-граммы длиной не меньше `min_cutoff_length`. Значение по умолчанию такое же, как у `min_ngram_length`. Должно быть не меньше `min_ngram_length` и не больше `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив извлечённых подстрок. [`Array(String)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGrams('alice', 3)
```

```response title=Response
┌─sparseGrams('alice', 3)────────────┐
│ ['ali','lic','lice','ice']         │
└────────────────────────────────────┘
```


## sparseGramsHashes {#sparseGramsHashes}

Добавлена в: v25.5

Находит хэши всех подстрок заданной строки длиной не менее `n`,
для которых хэши (n-1)-грамм на границах подстроки
строго больше хэшей любых (n-1)-грамм внутри подстроки.
Использует `CRC32` в качестве хеш-функции.

**Синтаксис**

```sql
sparseGramsHashes(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — необязательный параметр. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — необязательный параметр. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Не должно быть меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — необязательный параметр. Если указан, возвращаются только n-граммы длиной не меньше `min_cutoff_length`. Значение по умолчанию совпадает с `min_ngram_length`. Не должно быть меньше `min_ngram_length` и не больше `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив хэшей CRC32 выбранных подстрок. [`Array(UInt32)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGramsHashes('alice', 3)
```

```response title=Response
┌─sparseGramsHashes('alice', 3)──────────────────────┐
│ [1481062250,2450405249,4012725991,1918774096]      │
└────────────────────────────────────────────────────┘
```


## sparseGramsHashesUTF8 {#sparseGramsHashesUTF8}

Появилась в: v25.5

Находит хэши всех подстрок заданной строки в кодировке UTF-8 длиной не менее `n`, для которых хэши (n-1)-грамм на границах подстроки строго больше хэшей любых (n-1)-грамм внутри подстроки.
Ожидает строку в кодировке UTF-8, выбрасывает исключение при некорректной UTF-8-последовательности.
Использует `CRC32` в качестве функции хеширования.

**Синтаксис**

```sql
sparseGramsHashesUTF8(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — Входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — Необязательный параметр. Минимальная длина извлекаемых n-грамм. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — Необязательный параметр. Максимальная длина извлекаемых n-грамм. Значение по умолчанию — 100. Не должно быть меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — Необязательный параметр. Если указан, возвращаются только n-граммы длиной не менее `min_cutoff_length`. Значение по умолчанию совпадает с `min_ngram_length`. Не должно быть меньше `min_ngram_length` и не больше `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив CRC32-хэшей выбранных подстрок в кодировке UTF-8. [`Array(UInt32)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGramsHashesUTF8('алиса', 3)
```

```response title=Response
┌─sparseGramsHashesUTF8('алиса', 3)─┐
│ [4178533925,3855635300,561830861] │
└───────────────────────────────────┘
```


## sparseGramsUTF8 {#sparseGramsUTF8}

Появилась в: v25.5

Находит все подстроки заданной строки в кодировке UTF-8 длиной не менее `n`, для которых хэши (n-1)-грамм на границах подстроки строго больше хэшей любых (n-1)-грамм внутри неё.
Ожидает строку в кодировке UTF-8, выбрасывает исключение при обнаружении некорректной UTF-8-последовательности.
Использует `CRC32` в качестве хэш-функции.

**Синтаксис**

```sql
sparseGramsUTF8(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — Входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — Необязательный аргумент. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — Необязательный аргумент. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Не должно быть меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — Необязательный аргумент. Если задано, возвращаются только n-граммы длиной не меньше `min_cutoff_length`. Значение по умолчанию совпадает с `min_ngram_length`. Не должно быть меньше `min_ngram_length` и не должно быть больше `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив выбранных подстрок в кодировке UTF-8. [`Array(String)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGramsUTF8('алиса', 3)
```

```response title=Response
┌─sparseGramsUTF8('алиса', 3)─┐
│ ['али','лис','иса']         │
└─────────────────────────────┘
```


## startsWith {#startsWith}

Добавлена в версии: v1.1

Проверяет, начинается ли строка с указанной строки.

**Синтаксис**

```sql
startsWith(s, prefix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `prefix` — префикс для проверки. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWith('ClickHouse', 'Click');
```

```response title=Response
┌─startsWith('⋯', 'Click')─┐
│                        1 │
└──────────────────────────┘
```

## startsWithCaseInsensitive {#startsWithCaseInsensitive}

Добавлена в версии: v25.9

Проверяет, начинается ли строка с указанной подстроки без учета регистра.

**Синтаксис**

```sql
startsWithCaseInsensitive(s, prefix)
```

**Аргументы**

* `s` — Строка для проверки. [`String`](/sql-reference/data-types/string)
* `prefix` — Префикс, проверяемый без учета регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix` (сравнение без учета регистра), иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWithCaseInsensitive('ClickHouse', 'CLICK');
```

```response title=Response
┌─startsWithCaseInsensitive('⋯', 'CLICK')─┐
│                                       1 │
└─────────────────────────────────────────┘
```

## startsWithCaseInsensitiveUTF8 {#startsWithCaseInsensitiveUTF8}

Добавлено в v25.9

Проверяет, начинается ли строка с заданного префикса без учета регистра.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, и результат становится неопределённым.

**Синтаксис**

```sql
startsWithCaseInsensitiveUTF8(s, prefix)
```

**Аргументы**

* `s` — Строка для проверки. [`String`](/sql-reference/data-types/string)
* `prefix` — Префикс для проверки без учета регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix` (без учета регистра), иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWithCaseInsensitiveUTF8('приставка', 'при')
```

```response title=Response
┌─startsWithUT⋯ка', 'при')─┐
│                        1 │
└──────────────────────────┘
```

## startsWithUTF8 {#startsWithUTF8}

Добавлена в: v23.8

Проверяет, начинается ли строка с указанного префикса.
Предполагается, что строка содержит валидный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, а результат не определён.

**Синтаксис**

```sql
startsWithUTF8(s, prefix)
```

**Аргументы**

* `s` — строка, которую нужно проверить. [`String`](/sql-reference/data-types/string)
* `prefix` — префикс, наличие которого проверяется. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWithUTF8('приставка', 'при')
```

```response title=Response
┌─startsWithUT⋯ка', 'при')─┐
│                        1 │
└──────────────────────────┘
```

## stringBytesEntropy {#stringBytesEntropy}

Добавлена в версии: v25.6

Вычисляет энтропию Шеннона распределения байтов в строке.

**Синтаксис**

```sql
stringBytesEntropy(s)
```

**Аргументы**

* `s` — строка для анализа. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает энтропию Шеннона распределения байтов в строке. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringBytesEntropy('Hello, world!')
```

```response title=Response
┌─stringBytesEntropy('Hello, world!')─┐
│                         3.07049960  │
└─────────────────────────────────────┘
```

## stringBytesUniq {#stringBytesUniq}

Добавлена в: v25.6

Считает количество различных байтов в строке.

**Синтаксис**

```sql
stringBytesUniq(s)
```

**Аргументы**

* `s` — строка для анализа. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает количество уникальных байт в строке. [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringBytesUniq('Hello')
```

```response title=Response
┌─stringBytesUniq('Hello')─┐
│                        4 │
└──────────────────────────┘
```

## stringJaccardIndex {#stringJaccardIndex}

Добавлена в версии: v23.11

Вычисляет [индекс сходства Жаккара](https://en.wikipedia.org/wiki/Jaccard_index) между двумя байтовыми строками.

**Синтаксис**

```sql
stringJaccardIndex(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает индекс сходства Жаккара между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringJaccardIndex('clickhouse', 'mouse')
```

```response title=Response
┌─stringJaccardIndex('clickhouse', 'mouse')─┐
│                                       0.4 │
└───────────────────────────────────────────┘
```

## stringJaccardIndexUTF8 {#stringJaccardIndexUTF8}

Впервые представлена в: v23.11

Аналог [`stringJaccardIndex`](#stringJaccardIndex), но для строк в кодировке UTF-8.

**Синтаксис**

```sql
stringJaccardIndexUTF8(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка в кодировке UTF8. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка в кодировке UTF8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает индекс сходства Жаккара между двумя строками UTF8. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringJaccardIndexUTF8('我爱你', '我也爱你')
```

```response title=Response
┌─stringJaccardIndexUTF8('我爱你', '我也爱你')─┐
│                                       0.75 │
└─────────────────────────────────────────────┘
```

## substring {#substring}

Введена в версии v1.1

Возвращает подстроку строки `s`, начинающуюся с указанного байтового индекса `offset`.
Подсчёт байтов начинается с 1 по следующим правилам:

* Если `offset` равен `0`, возвращается пустая строка.
* Если `offset` отрицательный, подстрока начинается на `pos` символов от конца строки, а не от начала.

Необязательный аргумент `length` задаёт максимальное количество байт, которое может содержать возвращаемая подстрока.

**Синтаксис**

```sql
substring(s, offset[, length])
```

**Псевдонимы**: `byteSlice`, `mid`, `substr`

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring) или [`Enum`](/sql-reference/data-types/enum)
* `offset` — Начальная позиция подстроки в `s`. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `length` — Необязательный параметр. Максимальная длина подстроки. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку `s` длиной `length` байт, начиная с индекса `offset`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT 'database' AS db, substr(db, 5), substr(db, 5, 1)
```

```response title=Response
┌─db───────┬─substring('database', 5)─┬─substring('database', 5, 1)─┐
│ database │ base                     │ b                           │
└──────────┴──────────────────────────┴─────────────────────────────┘
```

## substringIndex {#substringIndex}

Впервые появилась в: v23.7

Возвращает подстроку `s`, расположенную перед `count`-м вхождением разделителя `delim`, как в Spark или MySQL.

**Синтаксис**

```sql
substringIndex(s, delim, count)
```

**Псевдонимы**: `SUBSTRING_INDEX`

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string)
* `delim` — Разделитель, по которому выполняется разбиение строки. [`String`](/sql-reference/data-types/string)
* `count` — Количество вхождений разделителя, которые нужно посчитать перед извлечением подстроки. Если `count` положительное, возвращается всё слева от последнего разделителя (считая слева). Если `count` отрицательное, возвращается всё справа от последнего разделителя (считая справа). [`UInt`](/sql-reference/data-types/int-uint) или [`Int`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку строки `s` до `count`-го вхождения `delim`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT substringIndex('www.clickhouse.com', '.', 2)
```

```response title=Response
┌─substringIndex('www.clickhouse.com', '.', 2)─┐
│ www.clickhouse                               │
└──────────────────────────────────────────────┘
```

## substringIndexUTF8 {#substringIndexUTF8}

Появилась в версии: v23.7

Возвращает подстроку `s` до `count`-го вхождения разделителя `delim`, предназначена для работы с Unicode code points.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, и результат не определён.

**Синтаксис**

```sql
substringIndexUTF8(s, delim, count)
```

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string)
* `delim` — Символ, по которому выполняется разбиение. [`String`](/sql-reference/data-types/string)
* `count` — Количество вхождений разделителя, которые нужно учесть перед извлечением подстроки. Если `count` положительно, возвращается всё слева от последнего разделителя (при подсчёте слева). Если `count` отрицательно, возвращается всё справа от последнего разделителя (при подсчёте справа). [`UInt`](/sql-reference/data-types/int-uint) или [`Int`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку `s` до `count` вхождений `delim`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример UTF-8**

```sql title=Query
SELECT substringIndexUTF8('www.straßen-in-europa.de', '.', 2)
```

```response title=Response
www.straßen-in-europa
```

## substringUTF8 {#substringUTF8}

Введено в: v1.1

Возвращает подстроку строки `s`, которая начинается с указанного байтового смещения `offset` по кодовым точкам Unicode.
Отсчёт байтов начинается с `1` по следующей логике:

* Если `offset` равен `0`, возвращается пустая строка.
* Если `offset` отрицателен, подстрока начинается, отступив `pos` символов от конца строки, а не от её начала.

Необязательный аргумент `length` задаёт максимальное количество байт, которое может иметь возвращаемая подстрока.

:::note
Эта функция предполагает, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушается, исключение не выбрасывается, и результат неопределён.
:::

**Синтаксис**

```sql
substringUTF8(s, offset[, length])
```

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring) или [`Enum`](/sql-reference/data-types/enum)
* `offset` — Начальная позиция подстроки в `s`. [`Int`](/sql-reference/data-types/int-uint) или [`UInt`](/sql-reference/data-types/int-uint)
* `length` — Максимальная длина подстроки. Необязательный параметр. [`Int`](/sql-reference/data-types/int-uint) или [`UInt`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку `s` длиной `length` байт, начиная с индекса `offset`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT 'Täglich grüßt das Murmeltier.' AS str, substringUTF8(str, 9), substringUTF8(str, 9, 5)
```

```response title=Response
Täglich grüßt das Murmeltier.    grüßt das Murmeltier.    grüßt
```

## toValidUTF8 {#toValidUTF8}

Добавлено в: v20.1

Преобразует строку в корректную кодировку UTF-8, заменяя любые некорректные символы в кодировке UTF-8 символом замены `�` (U+FFFD).
Если обнаруживается несколько идущих подряд некорректных символов, они заменяются одним символом замены.

**Синтаксис**

```sql
toValidUTF8(s)
```

**Аргументы**

* `s` — Произвольная последовательность байтов, представленная объектом типа данных String. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает корректную строку в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toValidUTF8('\\x61\\xF0\\x80\\x80\\x80b')
```

```response title=Response
c
┌─toValidUTF8('a����b')─┐
│ a�b                   │
└───────────────────────┘
```

## trimBoth {#trimBoth}

Введена в: v20.1

Удаляет указанные символы из начала и конца строки.
По умолчанию удаляет распространённые пробельные символы (ASCII).

**Синтаксис**

```sql
trimBoth(s[, trim_characters])
```

**Псевдонимы**: `trim`

**Аргументы**

* `s` — Строка для обрезки. [`String`](/sql-reference/data-types/string)
* `trim_characters` — Необязательный параметр. Символы для обрезки. Если не указан, удаляются стандартные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, у которой указанные символы обрезаны с начала и конца. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT trimBoth('$$ClickHouse$$', '$')
```

```response title=Response
┌─trimBoth('$$⋯se$$', '$')─┐
│ ClickHouse               │
└──────────────────────────┘
```

## trimLeft {#trimLeft}

Появилась в версии: v20.1

Удаляет указанные символы с начала строки.
По умолчанию удаляет распространённые пробельные символы (ASCII).

**Синтаксис**

```sql
trimLeft(input[, trim_characters])
```

**Псевдонимы**: `ltrim`

**Аргументы**

* `input` — Строка, из которой нужно удалить символы. [`String`](/sql-reference/data-types/string)
* `trim_characters` — Необязательный параметр. Набор символов для удаления. Если не указан, удаляются распространённые пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с указанными символами, удалёнными слева. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT trimLeft('ClickHouse', 'Click');
```

```response title=Response
┌─trimLeft('Cl⋯', 'Click')─┐
│ House                    │
└──────────────────────────┘
```

## trimRight {#trimRight}

Добавлена в версии: v20.1

Удаляет указанные символы с конца строки.
По умолчанию удаляет стандартные пробельные символы (ASCII).

**Синтаксис**

```sql
trimRight(s[, trim_characters])
```

**Псевдонимы**: `rtrim`

**Аргументы**

* `s` — Строка для обрезки. [`String`](/sql-reference/data-types/string)
* `trim_characters` — Необязательные символы для обрезки. Если не указано, удаляются обычные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с указанными символами, удалёнными справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT trimRight('ClickHouse','House');
```

```response title=Response
┌─trimRight('C⋯', 'House')─┐
│ Click                    │
└──────────────────────────┘
```

## tryBase32Decode {#tryBase32Decode}

Впервые представлена в версии v25.6

Принимает строку и декодирует её с использованием схемы кодирования [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6).

**Синтаксис**

```sql
tryBase32Decode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец или константа для декодирования. Если строка не является корректной Base32-строкой, в случае ошибки возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─tryBase32Decode('IVXGG33EMVSA====')─┐
│ Закодировано                        │
└─────────────────────────────────────┘
```

## tryBase58Decode {#tryBase58Decode}

Добавлена в версии v22.10

Аналог [`base58Decode`](#base58Decode), но в случае ошибки возвращает пустую строку.

**Синтаксис**

```sql
tryBase58Decode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец или константа. Если строка не является корректной строкой в кодировке Base58, в случае ошибки возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase58Decode('3dc8KtHrwM') AS res, tryBase58Decode('invalid') AS res_invalid;
```

```response title=Response
┌─res─────┬─res_invalid─┐
│ Закодировано │             │
└─────────┴─────────────┘
```

## tryBase64Decode {#tryBase64Decode}

Появилась в версии: v18.16

Аналогична [`base64Decode`](#base64Decode), но в случае ошибки возвращает пустую строку.

**Синтаксис**

```sql
tryBase64Decode(encoded)
```

**Аргументы**

* `encoded` — столбец или константа типа String для декодирования. Если строка некорректно закодирована в Base64, то в случае ошибки возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Response
┌─tryBase64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                          │
└─────────────────────────────────────┘
```

## tryBase64URLDecode {#tryBase64URLDecode}

Впервые появилось в: v18.16

Аналогично [`base64URLDecode`](#base64URLDecode), но в случае ошибки возвращает пустую строку.

**Синтаксис**

```sql
tryBase64URLDecode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец или константа для декодирования. Если строка не является корректной в кодировке Base64, в случае ошибки возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                               │
└──────────────────────────────────────────────────────┘
```

## tryIdnaEncode {#tryIdnaEncode}

Введена в версии v24.1

Возвращает представление доменного имени в Unicode (UTF-8) по алгоритму ToUnicode в соответствии с механизмом [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
В случае ошибки функция возвращает пустую строку вместо выбрасывания исключения.

**Синтаксис**

```sql
tryIdnaEncode(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает ASCII-представление входной строки в соответствии с механизмом IDNA для входного значения или пустую строку, если входные данные некорректны. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryIdnaEncode('straße.münchen.de')
```

```response title=Response
┌─tryIdnaEncode('straße.münchen.de')──┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```

## tryPunycodeDecode {#tryPunycodeDecode}

Появилась в версии: v24.1

Аналог функции `punycodeDecode`, но возвращает пустую строку, если передана некорректная Punycode-строка.

**Синтаксис**

```sql
tryPunycodeDecode(s)
```

**Аргументы**

* `s` — строка в кодировке Punycode. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает текстовое представление входного значения или пустую строку, если входное значение некорректно. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryPunycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─tryPunycodeDecode('Mnchen-3ya')─┐
│ München                         │
└─────────────────────────────────┘
```

## upper {#upper}

Добавлена в версии: v1.1

Преобразует символы латинского алфавита в кодировке ASCII в строке в верхний регистр.

**Синтаксис**

```sql
upper(s)
```

**Псевдонимы**: `ucase`

**Аргументы**

* `s` — строка для преобразования в верхний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в верхнем регистре, полученную из `s`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT upper('clickhouse')
```

```response title=Response
┌─upper('clickhouse')─┐
│ CLICKHOUSE          │
└─────────────────────┘
```

## upperUTF8 {#upperUTF8}

Введена в версии: v1.1

Преобразует строку в верхний регистр, предполагая, что строка содержит текст в корректной кодировке UTF-8.
Если это предположение не выполняется, исключение не генерируется, а результат не определён.

:::note
Эта функция не определяет язык; например, для турецкого результат может быть не совсем корректным (i/İ vs. i/I).
Если длина последовательности байт UTF-8 различается для верхнего и нижнего регистра одной и той же кодовой точки (например, `ẞ` и `ß`), результат может быть некорректен для этой кодовой точки.
:::

**Синтаксис**

```sql
upperUTF8(s)
```

**Аргументы**

* `s` — тип String (строка). [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Значение типа данных String (строка). [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT upperUTF8('München') AS Upperutf8
```

```response title=Response
┌─Upperutf8─┐
│ MÜNCHEN   │
└───────────┘
```

{/*AUTOGENERATED_END*/ }
