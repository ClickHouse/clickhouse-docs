---
description: 'Справочник по строковым функциям'
sidebar_label: 'Строки'
slug: /sql-reference/functions/string-functions
title: 'Функции для работы со строками'
doc_type: 'reference'
---

import VersionBadge from '@theme/badges/VersionBadge';

# Функции для работы со строками \{#functions-for-working-with-strings\}

Функции [поиска](string-search-functions.md) и [замены](string-replace-functions.md) в строках описаны отдельно.

:::note
Приведённая ниже документация сгенерирована из системной таблицы `system.functions`.
:::

{/* 
  Содержимое тегов ниже на этапе сборки фреймворка документации 
  заменяется документацией, сгенерированной из system.functions. Пожалуйста, не изменяйте и не удаляйте эти теги.
  См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## CRC32 \{#CRC32\}

Добавлена в версии: v20.1

Вычисляет контрольную сумму CRC32 для строки с использованием полинома CRC-32-IEEE 802.3 и начального значения `0xffffffff` (реализация zlib).

**Синтаксис**

```sql
CRC32(s)
```

**Аргументы**

* `s` — строка, для которой вычисляется CRC32. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC32 для строки. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC32('ClickHouse')
```

```response title=Response
┌─CRC32('ClickHouse')─┐
│          1538217360 │
└─────────────────────┘
```

## CRC32IEEE \{#CRC32IEEE\}

Введена в версии: v20.1

Вычисляет контрольную сумму CRC32 для строки с использованием полинома CRC-32-IEEE 802.3.

**Синтаксис**

```sql
CRC32IEEE(s)
```

**Аргументы**

* `s` — строка, для которой вычисляется CRC32. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC32 строки. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC32IEEE('ClickHouse');
```

```response title=Response
┌─CRC32IEEE('ClickHouse')─┐
│              3089448422 │
└─────────────────────────┘
```

## CRC64 \{#CRC64\}

Введена в версии: v20.1

Вычисляет контрольную сумму CRC64 для строки с использованием полинома CRC-64-ECMA.

**Синтаксис**

```sql
CRC64(s)
```

**Аргументы**

* `s` — Строка, для которой необходимо вычислить CRC64. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает контрольную сумму CRC64 строки. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT CRC64('ClickHouse');
```

```response title=Response
┌──CRC64('ClickHouse')─┐
│ 12126588151325169346 │
└──────────────────────┘
```

## appendTrailingCharIfAbsent \{#appendTrailingCharIfAbsent\}

Введена в: v1.1

Добавляет символ `c` к строке `s`, если строка `s` непуста и не оканчивается символом `c`.

**Синтаксис**

```sql
appendTrailingCharIfAbsent(s, c)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `c` — символ, который будет добавлен, если отсутствует. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s` с добавленным символом `c`, если `s` не оканчивается на `c`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT appendTrailingCharIfAbsent('https://example.com', '/');
```

```response title=Response
┌─appendTraili⋯.com', '/')─┐
│ https://example.com/     │
└──────────────────────────┘
```

## ascii \{#ascii\}

Введена в: v22.11

Возвращает кодовую точку ASCII первого символа строки `s` в виде `Int32`.

**Синтаксис**

```sql
ascii(s)
```

**Аргументы**

* `s` — строковый параметр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает кодовую точку ASCII первого символа. Если `s` пустая, результат — `0`. Если первый символ не является символом ASCII или не входит в диапазон Latin-1 Supplement в UTF-16, результат неопределён. [`Int32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT ascii('234')
```

```response title=Response
┌─ascii('234')─┐
│           50 │
└──────────────┘
```

## base32Decode \{#base32Decode\}

Добавлена в: v25.6

Декодирует строку в формате [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6) (RFC 4648).
Если строка не является корректной Base32-кодировкой, генерируется исключение.

**Синтаксис**

```sql
base32Decode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец или константа. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─base32Decode('IVXGG33EMVSA====')─┐
│ Encoded                          │
└──────────────────────────────────┘
```

## base32Encode \{#base32Encode\}

Появилась в версии: v25.6

Кодирует строку с использованием [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6).

**Синтаксис**

```sql
base32Encode(plaintext)
```

**Аргументы**

* `plaintext` — Открытый текст для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base32Encode('Encoded')
```

```response title=Response
┌─base32Encode('Encoded')─┐
│ IVXGG33EMVSA====        │
└─────────────────────────┘
```

## base58Decode \{#base58Decode\}

Введена в версии: v22.7

Декодирует строку в формате [Base58](https://datatracker.ietf.org/doc/html/draft-msporny-base58-03#section-3).
Если строка не является корректной строкой в кодировке Base58, генерируется исключение.

**Синтаксис**

```sql
base58Decode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец (`String`) или константа для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base58Decode('JxF12TrwUP45BMd');
```

```response title=Response
┌─base58Decode⋯rwUP45BMd')─┐
│ Hello World              │
└──────────────────────────┘
```

## base58Encode \{#base58Encode\}

Добавлена в версии: v22.7

Кодирует строку с использованием кодирования в формате [Base58](https://tools.ietf.org/id/draft-msporny-base58-01.html).

**Синтаксис**

```sql
base58Encode(plaintext)
```

**Аргументы**

* `plaintext` — Исходный текст для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base58Encode('ClickHouse');
```

```response title=Response
┌─base58Encode('ClickHouse')─┐
│ 4nhk8K7GHXf6zx             │
└────────────────────────────┘
```

## base64Decode \{#base64Decode\}

Функция появилась в версии v18.16.

Декодирует строку из представления [Base64](https://en.wikipedia.org/wiki/Base64) в соответствии с RFC 4648.
В случае ошибки выбрасывает исключение.

**Синтаксис**

```sql
base64Decode(encoded)
```

**Псевдонимы**: `FROM_BASE64`

**Аргументы**

* `encoded` — строковый столбец или константа для декодирования. Если строка не является корректной строкой в кодировке Base64, выбрасывается исключение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает декодированную строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Response
┌─base64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                       │
└──────────────────────────────────┘
```

## base64Encode \{#base64Encode\}

Введена в версии: v18.16

Кодирует строку в формат [Base64](https://en.wikipedia.org/wiki/Base64) в соответствии с RFC 4648.

**Синтаксис**

```sql
base64Encode(plaintext)
```

**Псевдонимы**: `TO_BASE64`

**Аргументы**

* `plaintext` — текст, столбец или константа для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64Encode('clickhouse')
```

```response title=Response
┌─base64Encode('clickhouse')─┐
│ Y2xpY2tob3VzZQ==           │
└────────────────────────────┘
```

## base64URLDecode \{#base64URLDecode\}

Добавлена в: v24.6

Декодирует строку из представления [Base64](https://en.wikipedia.org/wiki/Base64), используя URL-безопасный алфавит в соответствии с RFC 4648.
В случае ошибки выбрасывает исключение.

**Синтаксис**

```sql
base64URLDecode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец или константа для кодирования. Если строка не является корректной строкой в кодировке Base64, генерируется исключение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                            │
└───────────────────────────────────────────────────┘
```

## base64URLEncode \{#base64URLEncode\}

Добавлена в версии: v18.16

Кодирует строку в представление [Base64](https://datatracker.ietf.org/doc/html/rfc4648#section-4) (RFC 4648) с URL‑безопасным алфавитом.

**Синтаксис**

```sql
base64URLEncode(plaintext)
```

**Аргументы**

* `plaintext` — Столбец или константа с открытым текстом для кодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую закодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT base64URLEncode('https://clickhouse.com')
```

```response title=Response
┌─base64URLEncode('https://clickhouse.com')─┐
│ aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ            │
└───────────────────────────────────────────┘
```

## basename \{#basename\}

Добавлено в версии: v20.1

Извлекает часть строки, расположенную после её последней прямой или обратной косой черты.
Эта функция часто используется для извлечения имени файла из пути.

**Синтаксис**

```sql
basename(expr)
```

**Аргументы**

* `expr` — строковое выражение. Обратные слэши необходимо экранировать. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает часть входной строки после её последнего прямого или обратного слэша. Если входная строка оканчивается прямым или обратным слэшем, функция возвращает пустую строку. Возвращает исходную строку, если в ней нет ни прямых, ни обратных слэшей. [`String`](/sql-reference/data-types/string)

**Примеры**

**Извлечение имени файла из пути в Unix**

```sql title=Query
SELECT 'some/long/path/to/file' AS a, basename(a)
```

```response title=Response
┌─a──────────────────────┬─basename('some/long/path/to/file')─┐
│ some/long/path/to/file │ file                               │
└────────────────────────┴────────────────────────────────────┘
```

**Извлечь имя файла из пути в Windows**

```sql title=Query
SELECT 'some\\long\\path\\to\\file' AS a, basename(a)
```

```response title=Response
┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
```

**Строка без символов‑разделителей пути**

```sql title=Query
SELECT 'some-file-name' AS a, basename(a)
```

```response title=Response
┌─a──────────────┬─basename('some-file-name')─┐
│ some-file-name │ some-file-name             │
└────────────────┴────────────────────────────┘
```

## byteHammingDistance \{#byteHammingDistance\}

Добавлено в версии v23.9

Вычисляет [расстояние Хэмминга](https://en.wikipedia.org/wiki/Hamming_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
byteHammingDistance(s1, s2)
```

**Псевдонимы**: `mismatches`

**Аргументы**

* `s1` — Первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — Вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние Хэмминга между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT byteHammingDistance('karolin', 'kathrin')
```

```response title=Response
┌─byteHammingDistance('karolin', 'kathrin')─┐
│                                         3 │
└───────────────────────────────────────────┘
```

## compareSubstrings \{#compareSubstrings\}

Впервые появилось в: v25.2

Сравнивает две строки в лексикографическом порядке.

**Синтаксис**

```sql
compareSubstrings(s1, s2, s1_offset, s2_offset, num_bytes)
```

**Аргументы**

* `s1` — первая строка для сравнения. [`String`](/sql-reference/data-types/string)
* `s2` — вторая строка для сравнения. [`String`](/sql-reference/data-types/string)
* `s1_offset` — позиция (отсчитываемая с нуля) в `s1`, с которой начинается сравнение. [`UInt*`](/sql-reference/data-types/int-uint)
* `s2_offset` — позиция (отсчитываемая с нуля) в `s2`, с которой начинается сравнение. [`UInt*`](/sql-reference/data-types/int-uint)
* `num_bytes` — максимальное количество байт, сравниваемых в обеих строках. Если `s1_offset` (или `s2_offset`) + `num_bytes` выходит за конец входной строки, `num_bytes` будет соответствующим образом уменьшено. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* `-1`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] &lt; `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
* `0`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] = `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
* `1`, если `s1`[`s1_offset` : `s1_offset` + `num_bytes`] &gt; `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
  [`Int8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT compareSubstrings('Saxony', 'Anglo-Saxon', 0, 6, 5) AS result
```

```response title=Response
┌─result─┐
│      0 │
└────────┘
```

## concat \{#concat\}

Введена в версии: v1.1

Объединяет переданные аргументы.

Аргументы, которые не имеют типов [`String`](../data-types/string.md) или [`FixedString`](../data-types/fixedstring.md), преобразуются в строки с использованием их сериализации по умолчанию.
Поскольку это снижает производительность, не рекомендуется использовать аргументы с типами, отличными от String/FixedString.

**Синтаксис**

```sql
concat([s1, s2, ...])
```

**Аргументы**

* `s1, s2, ...` — Любое количество значений произвольного типа. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает строку (`String`), созданную путём конкатенации аргументов. Если хотя бы один из аргументов равен `NULL`, функция возвращает `NULL`. Если аргументы отсутствуют, возвращается пустая строка. [`Nullable(String)`](/sql-reference/data-types/nullable)

**Примеры**

**Конкатенация строк**

```sql title=Query
SELECT concat('Hello, ', 'World!')
```

```response title=Response
┌─concat('Hello, ', 'World!')─┐
│ Hello, World!               │
└─────────────────────────────┘
```

**Конкатенация чисел**

```sql title=Query
SELECT concat(42, 144)
```

```response title=Response
┌─concat(42, 144)─┐
│ 42144           │
└─────────────────┘
```

## concatAssumeInjective \{#concatAssumeInjective\}

Введена в: v1.1

Аналог функции [`concat`](#concat), но предполагает, что `concat(s1, s2, ...) → sn` является инъективной,
т. е. возвращает разные результаты для разных аргументов.

Может использоваться для оптимизации `GROUP BY`.

**Синтаксис**

```sql
concatAssumeInjective([s1, s2, ...])
```

**Аргументы**

* `s1, s2, ...` — Произвольное количество значений любого типа. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает строку, созданную объединением (конкатенацией) аргументов. Если хотя бы одно из значений аргументов равно `NULL`, функция возвращает `NULL`. Если не передано ни одного аргумента, возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Примеры**

**Оптимизация GROUP BY**

```sql title=Query
SELECT concat(key1, key2), sum(value) FROM key_val GROUP BY concatAssumeInjective(key1, key2)
```

```response title=Response
┌─concat(key1, key2)─┬─sum(value)─┐
│ Hello, World!      │          3 │
│ Hello, World!      │          2 │
│ Hello, World       │          3 │
└────────────────────┴────────────┘
```

## concatWithSeparator \{#concatWithSeparator\}

Добавлена в версии: v22.12

Объединяет переданные строки, разделяя их указанным разделителем.

**Синтаксис**

```sql
concatWithSeparator(sep[, exp1, exp2, ...])
```

**Псевдонимы**: `concat_ws`

**Аргументы**

* `sep` — разделитель. [`const String`](/sql-reference/data-types/string) или [`const FixedString`](/sql-reference/data-types/fixedstring)
* `exp1, exp2, ...` — выражения, которые будут объединены. Аргументы типов, отличных от `String` или `FixedString`, приводятся к строкам с использованием их сериализации по умолчанию. Поскольку это снижает производительность, не рекомендуется использовать аргументы не типа String/FixedString. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает строку, полученную конкатенацией аргументов. Если любое из значений аргументов равно `NULL`, функция возвращает `NULL`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT concatWithSeparator('a', '1', '2', '3', '4')
```

```response title=Response
┌─concatWithSeparator('a', '1', '2', '3', '4')─┐
│ 1a2a3a4                                      │
└──────────────────────────────────────────────┘
```

## concatWithSeparatorAssumeInjective \{#concatWithSeparatorAssumeInjective\}

Введена в версии: v22.12

То же, что [`concatWithSeparator`](#concatWithSeparator), но предполагается, что `concatWithSeparator(sep[,exp1, exp2, ... ]) → result` является инъективной.
Функция считается инъективной, если она возвращает различные результаты для различных аргументов.

Может использоваться для оптимизации `GROUP BY`.

**Синтаксис**

```sql
concatWithSeparatorAssumeInjective(sep[, exp1, exp2, ... ])
```

**Аргументы**

* `sep` — разделитель. [`const String`](/sql-reference/data-types/string) или [`const FixedString`](/sql-reference/data-types/fixedstring)
* `exp1, exp2, ...` — выражения для конкатенации. Аргументы, которые не имеют тип `String` или `FixedString`, преобразуются в строки с использованием их сериализации по умолчанию. Поскольку это снижает производительность, не рекомендуется использовать аргументы типов, отличных от `String`/`FixedString`. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает строку, сформированную конкатенацией аргументов. Если какое-либо из значений аргументов равно `NULL`, функция возвращает `NULL`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
CREATE TABLE user_data (
user_id UInt32,
first_name String,
last_name String,
score UInt32
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO user_data VALUES
(1, 'John', 'Doe', 100),
(2, 'Jane', 'Smith', 150),
(3, 'John', 'Wilson', 120),
(4, 'Jane', 'Smith', 90);

SELECT
    concatWithSeparatorAssumeInjective('-', first_name, last_name) as full_name,
    sum(score) as total_score
FROM user_data
GROUP BY concatWithSeparatorAssumeInjective('-', first_name, last_name);
```

```response title=Response
┌─full_name───┬─total_score─┐
│ Jane-Smith  │         240 │
│ John-Doe    │         100 │
│ John-Wilson │         120 │
└─────────────┴─────────────┘
```

## conv \{#conv\}

Добавлено в версии v1.1

Преобразует числа между разными системами счисления.

Функция преобразует число из одной системы счисления в другую. Поддерживаются системы счисления с основанием от 2 до 36.
Для оснований больше 10 используются буквы A–Z (без учета регистра) для представления цифр 10–35.

Эта функция совместима с функцией CONV() в MySQL.

**Синтаксис**

```sql
conv(number, from_base, to_base)
```

**Аргументы**

* `number` — Число для преобразования. Может быть строкой или числом. - `from_base` — Исходное основание системы счисления (2–36). Должно быть целым числом. - `to_base` — Целевое основание системы счисления (2–36). Должно быть целым числом.

**Возвращаемое значение**

Строковое представление числа в целевой системе счисления.

**Примеры**

**Преобразование десятичного числа в двоичное**

```sql title=Query
SELECT conv('10', 10, 2)
```

```response title=Response
1010
```

**Преобразование шестнадцатеричного значения в десятичное**

```sql title=Query
SELECT conv('FF', 16, 10)
```

```response title=Response
255
```

**Преобразование при отрицательном числе**

```sql title=Query
SELECT conv('-1', 10, 16)
```

```response title=Response
FFFFFFFFFFFFFFFF
```

**Преобразование двоичного числа в восьмеричное**

```sql title=Query
SELECT conv('1010', 2, 8)
```

```response title=Response
12
```

## convertCharset \{#convertCharset\}

Добавлена в версии v1.1

Возвращает строку `s`, преобразованную из кодировки `from` в кодировку `to`.

**Синтаксис**

```sql
convertCharset(s, from, to)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `from` — исходная кодировка. [`String`](/sql-reference/data-types/string)
* `to` — целевая кодировка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s`, преобразованную из кодировки `from` в кодировку `to`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT convertCharset('Café', 'UTF-8', 'ISO-8859-1');
```

```response title=Response
┌─convertChars⋯SO-8859-1')─┐
│ Caf�                     │
└──────────────────────────┘
```

## damerauLevenshteinDistance \{#damerauLevenshteinDistance\}

Добавлено в: v24.1

Вычисляет [расстояние Дамерау — Левенштейна](https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
damerauLevenshteinDistance(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает расстояние Дамерау—Левенштейна между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT damerauLevenshteinDistance('clickhouse', 'mouse')
```

```response title=Response
┌─damerauLevenshteinDistance('clickhouse', 'mouse')─┐
│                                                 6 │
└───────────────────────────────────────────────────┘
```

## decodeHTMLComponent \{#decodeHTMLComponent\}

Появилась в версии: v23.9

Преобразует HTML-сущности в строке в соответствующие символы.

**Синтаксис**

```sql
decodeHTMLComponent(s)
```

**Аргументы**

* `s` — строка, содержащая HTML-сущности для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированными HTML-сущностями. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')
```

```response title=Response
┌─decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')─┐
│ <div>Hello & "World"</div>                                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

## decodeXMLComponent \{#decodeXMLComponent\}

Появилась в версии: v21.2

Преобразует XML‑сущности в строке в соответствующие им символы.

**Синтаксис**

```sql
decodeXMLComponent(s)
```

**Аргументы**

* `s` — строка, содержащая XML-сущности для декодирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает переданную строку с декодированными XML-сущностями. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT decodeXMLComponent('&lt;tag&gt;Hello &amp; World&lt;/tag&gt;')
```

```response title=Response
┌─decodeXMLCom⋯;/tag&gt;')─┐
│ <tag>Hello & World</tag> │
└──────────────────────────┘
```

## editDistance \{#editDistance\}

Добавлена в версии: v23.9

Вычисляет [редакционное расстояние](https://en.wikipedia.org/wiki/Edit_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
editDistance(s1, s2)
```

**Псевдонимы**: `levenshteinDistance`

**Аргументы**

* `s1` — Первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — Вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает редакционное расстояние между двумя строками. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT editDistance('clickhouse', 'mouse')
```

```response title=Response
┌─editDistance('clickhouse', 'mouse')─┐
│                                   6 │
└─────────────────────────────────────┘
```

## editDistanceUTF8 \{#editDistanceUTF8\}

Введена в версии: v24.6

Вычисляет [редакционное расстояние](https://en.wikipedia.org/wiki/Edit_distance) между двумя строками в кодировке UTF-8.

**Синтаксис**

```sql
editDistanceUTF8(s1, s2)
```

**Псевдонимы**: `levenshteinDistanceUTF8`

**Аргументы**

* `s1` — Первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — Вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает редакционное расстояние между двумя строками в кодировке UTF-8. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT editDistanceUTF8('我是谁', '我是我')
```

```response title=Response
┌─editDistanceUTF8('我是谁', '我是我')──┐
│                                   1 │
└─────────────────────────────────────┘
```

## encodeXMLComponent \{#encodeXMLComponent\}

Введена в версии: v21.1

Экранирует символы для помещения строки в текстовый узел или атрибут XML.

**Синтаксис**

```sql
encodeXMLComponent(s)
```

**Аргументы**

* `s` — строка для экранирования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает экранированную строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    '<tag>Hello & "World"</tag>' AS original,
    encodeXMLComponent('<tag>Hello & "World"</tag>') AS xml_encoded;
```

```response title=Response
┌─original───────────────────┬─xml_encoded──────────────────────────────────────────┐
│ <tag>Hello & "World"</tag> │ &lt;tag&gt;Hello &amp; &quot;World&quot;&lt;/tag&gt; │
└────────────────────────────┴──────────────────────────────────────────────────────┘
```

## endsWith \{#endsWith\}

Добавлена в версии: v1.1

Проверяет, оканчивается ли строка указанным суффиксом.

**Синтаксис**

```sql
endsWith(s, suffix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `suffix` — суффикс, на наличие которого нужно проверить строку. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если строка `s` оканчивается на `suffix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWith('ClickHouse', 'House');
```

```response title=Response
┌─endsWith('Cl⋯', 'House')─┐
│                        1 │
└──────────────────────────┘
```

## endsWithCaseInsensitive \{#endsWithCaseInsensitive\}

Добавлено в версии: v25.9

Проверяет, оканчивается ли строка заданным суффиксом без учета регистра.

**Синтаксис**

```sql
endsWithCaseInsensitive(s, suffix)
```

**Аргументы**

* `s` — строка, которую нужно проверить. [`String`](/sql-reference/data-types/string)
* `suffix` — суффикс, который нужно искать без учёта регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` оканчивается на `suffix` без учёта регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithCaseInsensitive('ClickHouse', 'HOUSE');
```

```response title=Response
┌─endsWithCaseInsensitive('Cl⋯', 'HOUSE')─┐
│                                       1 │
└─────────────────────────────────────────┘
```

## endsWithCaseInsensitiveUTF8 \{#endsWithCaseInsensitiveUTF8\}

Впервые представлена в: v25.9

Возвращает, оканчивается ли строка `s` суффиксом `suffix` без учёта регистра.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение не выполняется, исключение не выбрасывается, а результат не определён.

**Синтаксис**

```sql
endsWithCaseInsensitiveUTF8(s, suffix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `suffix` — суффикс, сравнение с которым выполняется без учёта регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` заканчивается на `suffix` без учёта регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithCaseInsensitiveUTF8('данных', 'ых');
```

```response title=Response
┌─endsWithCaseInsensitiveUTF8('данных', 'ых')─┐
│                                           1 │
└─────────────────────────────────────────────┘
```

## endsWithUTF8 \{#endsWithUTF8\}

Введена в: v23.8

Возвращает, оканчивается ли строка `s` суффиксом `suffix`.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, а результат не определён.

**Синтаксис**

```sql
endsWithUTF8(s, suffix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `suffix` — суффикс для проверки. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` заканчивается на `suffix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT endsWithUTF8('данных', 'ых');
```

```response title=Response
┌─endsWithUTF8('данных', 'ых')─┐
│                            1 │
└──────────────────────────────┘
```

## extractTextFromHTML \{#extractTextFromHTML\}

Появилась в v21.3

Извлекает текстовое содержимое из HTML или XHTML.

Эта функция удаляет HTML‑теги, комментарии и элементы script/style, оставляя только текстовое содержимое. Она выполняет:

* Удаление всех HTML/XML‑тегов
* Удаление комментариев (`<!-- -->`)
* Удаление элементов script и style вместе с их содержимым
* Обработку секций CDATA (копируются как есть)
* Корректную обработку и нормализацию пробелов

Примечание: HTML‑сущности не декодируются и при необходимости должны обрабатываться отдельной функцией.

**Синтаксис**

```sql
extractTextFromHTML(html)
```

**Аргументы**

* `html` — строка с HTML-содержимым, из которого нужно извлечь текст. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает извлечённый текст с нормализованными пробельными символами. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT extractTextFromHTML('
<html>
    <head><title>Page Title</title></head>
    <body>
        <p>Hello <b>World</b>!</p>
        <script>alert("test");</script>
        <!-- comment -->
    </body>
</html>
');
```

```response title=Response
┌─extractTextFromHTML('<html><head>...')─┐
│ Page Title Hello World!                │
└────────────────────────────────────────┘
```

## firstLine \{#firstLine\}

Добавлена в: v23.7

Возвращает первую строку многострочной строки.

**Синтаксис**

```sql
firstLine(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает первую строку входной строки или всю строку, если в ней нет разделителей строк. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT firstLine('foo\\nbar\\nbaz')
```

```response title=Response
┌─firstLine('foo\nbar\nbaz')─┐
│ foo                        │
└────────────────────────────┘
```

## idnaDecode \{#idnaDecode\}

Добавлена в версии: v24.1

Возвращает представление доменного имени в Юникоде (UTF-8) в соответствии с алгоритмом ToUnicode и механизмом [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
В случае ошибки (например, при некорректном входном значении) возвращается исходная строка.
Обратите внимание, что повторное применение функций [`idnaEncode()`](#idnaEncode) и [`idnaDecode()`](#idnaDecode) не обязательно возвращает исходную строку из-за нормализации регистра.

**Синтаксис**

```sql
idnaDecode(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает представление входной строки в Юникоде (UTF-8) согласно механизму IDNA для входного значения. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')
```

```response title=Response
┌─idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')─┐
│ straße.münchen.de                             │
└───────────────────────────────────────────────┘
```

## idnaEncode \{#idnaEncode\}

Добавлено в версии: v24.1

Возвращает ASCII-представление (алгоритм ToASCII) доменного имени в соответствии с механизмом [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
Входная строка должна быть в UTF-кодировке и преобразуемой в ASCII-строку, в противном случае генерируется исключение.

:::note
Процент-декодирование (percent decoding) и удаление табуляции, пробелов или управляющих символов не выполняются.
:::

**Синтаксис**

```sql
idnaEncode(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает ASCII-представление входной строки в соответствии с механизмом IDNA для входного значения. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT idnaEncode('straße.münchen.de')
```

```response title=Response
┌─idnaEncode('straße.münchen.de')─────┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```

## initcap \{#initcap\}

Впервые появилась в: v23.7

Преобразует первую букву каждого слова в верхний регистр, а остальные — в нижний.
Слова представляют собой последовательности буквенно-цифровых символов, разделённых небуквенно-цифровыми символами.

:::note
Поскольку `initcap` преобразует в верхний регистр только первую букву каждого слова, вы можете наблюдать неожиданное поведение для слов, содержащих апострофы или заглавные буквы.
Это известная особенность, и в настоящее время нет планов что-либо в ней менять.
:::

**Синтаксис**

```sql
initcap(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s`, в которой первая буква каждого слова преобразована в верхний регистр. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT initcap('building for fast')
```

```response title=Response
┌─initcap('building for fast')─┐
│ Building For Fast            │
└──────────────────────────────┘
```

**Пример известного поведения для слов с апострофами или заглавными буквами**

```sql title=Query
SELECT initcap('John''s cat won''t eat.');
```

```response title=Response
┌─initcap('Joh⋯n\'t eat.')─┐
│ John'S Cat Won'T Eat.    │
└──────────────────────────┘
```

## initcapUTF8 \{#initcapUTF8\}

Добавлено в версии: v23.7

Подобно [`initcap`](#initcap), `initcapUTF8` преобразует первую букву каждого слова в верхний регистр, а остальные — в нижний.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, а результат не определён.

:::note
Эта функция не определяет язык, поэтому, например, для турецкого результат может быть не совсем корректным (i/İ vs. i/I).
Если длина последовательности байт UTF-8 различается для верхнего и нижнего регистра одной и той же кодовой точки, результат для этой кодовой точки может быть некорректным.
:::

**Синтаксис**

```sql
initcapUTF8(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `s`, в которой первая буква каждого слова преобразована в верхний регистр. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT initcapUTF8('не тормозит')
```

```response title=Response
┌─initcapUTF8('не тормозит')─┐
│ Не Тормозит                │
└────────────────────────────┘
```

## isValidASCII \{#isValidASCII\}

Введена в версии: v25.9

Возвращает 1, если входной `String` или `FixedString` содержит только ASCII-байты (0x00–0x7F), в противном случае — 0. Оптимизирована для положительного случая (когда входное значение *является* корректным ASCII).

**Синтаксис**

```sql
isValidASCII(str)
```

**Псевдонимы**: `isASCII`

**Аргументы**

* Нет.

**Возвращаемое значение**

**Примеры**

**isValidASCII**

```sql title=Query
SELECT isValidASCII('hello') AS is_ascii, isValidASCII('你好') AS is_not_ascii
```

```response title=Response
```

## isValidUTF8 \{#isValidUTF8\}

Впервые представлена в: v20.1

Проверяет, представляет ли набор байтов корректный текст в кодировке UTF-8.

**Синтаксис**

```sql
isValidUTF8(s)
```

**Аргументы**

* `s` — строка для проверки на корректность кодировки UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если набор байтов представляет собой корректный текст в кодировке UTF-8, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT isValidUTF8('\\xc3\\xb1') AS valid, isValidUTF8('\\xc3\\x28') AS invalid
```

```response title=Response
┌─valid─┬─invalid─┐
│     1 │       0 │
└───────┴─────────┘
```

## jaroSimilarity \{#jaroSimilarity\}

Введена в версии: v24.1

Вычисляет [сходство по метрике Jaro](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance#Jaro_similarity) между двумя байтовыми строками.

**Синтаксис**

```sql
jaroSimilarity(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает коэффициент сходства Джаро между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT jaroSimilarity('clickhouse', 'click')
```

```response title=Response
┌─jaroSimilarity('clickhouse', 'click')─┐
│                    0.8333333333333333 │
└───────────────────────────────────────┘
```

## jaroWinklerSimilarity \{#jaroWinklerSimilarity\}

Впервые добавлена в версии v24.1

Вычисляет [меру сходства Яро — Винклера](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance) между двумя байтовыми строками.

**Синтаксис**

```sql
jaroWinklerSimilarity(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает значение метрики сходства Джаро–Винклера для двух строк. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT jaroWinklerSimilarity('clickhouse', 'click')
```

```response title=Response
┌─jaroWinklerSimilarity('clickhouse', 'click')─┐
│                           0.8999999999999999 │
└──────────────────────────────────────────────┘
```

## left \{#left\}

Введено в версии v22.1

Возвращает подстроку строки `s` с указанным `offset` от левого края.

**Синтаксис**

```sql
left(s, offset)
```

**Аргументы**

* `s` — Строка, для которой вычисляется подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — Смещение в байтах. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного `offset` — подстроку строки `s` длиной `offset` байт, начиная с левого края строки.
* Для отрицательного `offset` — подстроку строки `s` длиной `length(s) - |offset|` байт, начиная с левого края строки.
* Пустую строку, если `length` равно `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительный offset**

```sql title=Query
SELECT left('Hello World', 5)
```

```response title=Response
Hello
```

**Отрицательное смещение**

```sql title=Query
SELECT left('Hello World', -6)
```

```response title=Response
Hello
```

## leftPad \{#leftPad\}

Добавлено в: v21.8

Дополняет строку слева пробелами или указанной строкой (повторяя её при необходимости) до тех пор, пока длина результирующей строки не достигнет заданного значения `length`.

**Синтаксис**

```sql
leftPad(string, length[, pad_string])
```

**Псевдонимы**: `lpad`

**Аргументы**

* `string` — Входная строка, которую необходимо дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный параметр. Строка, которой дополняется входная строка. Если не задано, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную слева. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT leftPad('abc', 7, '*'), leftPad('def', 7)
```

```response title=Response
┌─leftPad('abc', 7, '*')─┬─leftPad('def', 7)─┐
│ ****abc                │     def           │
└────────────────────────┴───────────────────┘
```

## leftPadUTF8 \{#leftPadUTF8\}

Добавлена в версии: v21.8

Дополняет UTF8‑строку слева пробелами или указанной строкой (при необходимости многократно) до тех пор, пока результирующая строка не достигнет заданной длины.
В отличие от [`leftPad`](#leftPad), который измеряет длину строки в байтах, в этом случае длина строки измеряется в кодовых точках.

**Синтаксис**

```sql
leftPadUTF8(string, length[, pad_string])
```

**Аргументы**

* `string` — Входная строка, которую необходимо дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, то входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный параметр. Строка, которой дополняется входная строка. Если не указан, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную слева. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT leftPadUTF8('абвг', 7, '*'), leftPadUTF8('дежз', 7)
```

```response title=Response
┌─leftPadUTF8('абвг', 7, '*')─┬─leftPadUTF8('дежз', 7)─┐
│ ***абвг                     │    дежз                │
└─────────────────────────────┴────────────────────────┘
```

## leftUTF8 \{#leftUTF8\}

Появилась в версии: v22.1

Возвращает подстроку строки `s` в кодировке UTF‑8 с заданным `offset`, начиная с левого края.

**Синтаксис**

```sql
leftUTF8(s, offset)
```

**Аргументы**

* `s` — строка в кодировке UTF-8, из которой вычисляется подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — количество байт смещения. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного `offset` — подстроку `s` длиной `offset` байт, начиная с левого края строки.\n&quot;
* Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт, начиная с левого края строки.\n&quot;
* Пустую строку, если `length` равно 0.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT leftUTF8('Привет', 4)
```

```response title=Response
Прив
```

**Отрицательное смещение**

```sql title=Query
SELECT leftUTF8('Привет', -4)
```

```response title=Response
Пр
```

## lengthUTF8 \{#lengthUTF8\}

Введена в версии: v1.1

Возвращает длину строки в кодовых точках Unicode, а не в байтах или символах.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, и результат не определён.

**Синтаксис**

```sql
lengthUTF8(s)
```

**Псевдонимы**: `CHARACTER_LENGTH`, `CHAR_LENGTH`

**Аргументы**

* `s` — строка, содержащая допустимый текст в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Длина строки `s` в кодовых точках Unicode. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT lengthUTF8('Здравствуй, мир!')
```

```response title=Response
┌─lengthUTF8('Здравствуй, мир!')─┐
│                             16 │
└────────────────────────────────┘
```

## lower \{#lower\}

Введена в версии: v1.1

Преобразует ASCII-строку в нижний регистр.

**Синтаксис**

```sql
lower(s)
```

**Псевдонимы**: `lcase`

**Аргументы**

* `s` — строка, которую нужно преобразовать в нижний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s` в нижнем регистре. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT lower('CLICKHOUSE')
```

```response title=Response
┌─lower('CLICKHOUSE')─┐
│ clickhouse          │
└─────────────────────┘
```

## lowerUTF8 \{#lowerUTF8\}

Введена в: v1.1

Преобразует строку в нижний регистр, предполагая, что строка содержит корректный текст в кодировке UTF-8. Если это предположение не выполняется, исключение не выбрасывается, а результат остается неопределённым.

**Синтаксис**

```sql
lowerUTF8(input)
```

**Аргументы**

* `input` — входная строка для преобразования в нижний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нижнем регистре. [`String`](/sql-reference/data-types/string)

**Примеры**

**Первый**

```sql title=Query
SELECT lowerUTF8('München') as Lowerutf8;
```

```response title=Response
münchen
```

## normalizeUTF8NFC \{#normalizeUTF8NFC\}

Добавлена в версии: v21.11

Нормализует строку UTF-8 в соответствии с [нормальной формой NFC](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFC(str)
```

**Аргументы**

* `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку UTF-8 в нормализованной форме NFC. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
'é' AS original, -- e + combining acute accent (U+0065 + U+0301)
length(original),
normalizeUTF8NFC('é') AS nfc_normalized, -- é (U+00E9)
length(nfc_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfc_normalized─┬─length(nfc_normalized)─┐
│ é        │                2 │ é              │                      2 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```

## normalizeUTF8NFD \{#normalizeUTF8NFD\}

Добавлена в версии: v21.11

Нормализует строку в кодировке UTF-8 в соответствии с [формой нормализации NFD](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFD(str)
```

**Аргументы**

* `str` — входная строка UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку UTF-8 в нормализованной форме NFD. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    'é' AS original, -- é (U+00E9)
    length(original),
    normalizeUTF8NFD('é') AS nfd_normalized, -- e + combining acute (U+0065 + U+0301)
    length(nfd_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfd_normalized─┬─length(nfd_normalized)─┐
│ é        │                2 │ é              │                      3 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```

## normalizeUTF8NFKC \{#normalizeUTF8NFKC\}

Появилась в версии: v21.11

Нормализует строку в кодировке UTF-8 в соответствии с [нормальной формой NFKC](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFKC(str)
```

**Аргументы**

* `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в кодировке UTF-8, нормализованную в форму NFKC. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    '① ② ③' AS original,                            -- Circled number characters
    normalizeUTF8NFKC('① ② ③') AS nfkc_normalized;  -- Converts to 1 2 3
```

```response title=Response
┌─original─┬─nfkc_normalized─┐
│ ① ② ③  │ 1 2 3           │
└──────────┴─────────────────┘
```

## normalizeUTF8NFKD \{#normalizeUTF8NFKD\}

Добавлена в: v21.11

Нормализует строку в кодировке UTF-8 в соответствии с [формой нормализации NFKD](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).

**Синтаксис**

```sql
normalizeUTF8NFKD(str)
```

**Аргументы**

* `str` — входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку в нормализованной форме NFKD (UTF-8). [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    'H₂O²' AS original,                            -- H + subscript 2 + O + superscript 2
    normalizeUTF8NFKD('H₂O²') AS nfkd_normalized;  -- Converts to H 2 O 2
```

```response title=Response
┌─original─┬─nfkd_normalized─┐
│ H₂O²     │ H2O2            │
└──────────┴─────────────────┘
```

## punycodeDecode \{#punycodeDecode\}

Добавлено в: v24.1

Возвращает исходный текст в кодировке UTF-8 для строки, закодированной в формате [Punycode](https://en.wikipedia.org/wiki/Punycode).
Если передана некорректная строка в формате Punycode, генерируется исключение.

**Синтаксис**

```sql
punycodeDecode(s)
```

**Аргументы**

* `s` — строка в кодировке Punycode. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает обычный текст входного значения. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT punycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─punycodeDecode('Mnchen-3ya')─┐
│ München                      │
└──────────────────────────────┘
```

## punycodeEncode \{#punycodeEncode\}

Впервые представлена в версии: v24.1

Возвращает представление строки в формате [Punycode](https://en.wikipedia.org/wiki/Punycode).
Строка должна быть закодирована в UTF-8, в противном случае поведение не определено.

**Синтаксис**

```sql
punycodeEncode(s)
```

**Аргументы**

* `s` — Входное значение. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает представление входного значения в кодировке Punycode. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT punycodeEncode('München')
```

```response title=Response
┌─punycodeEncode('München')─┐
│ Mnchen-3ya                │
└───────────────────────────┘
```

## regexpExtract \{#regexpExtract\}

Впервые появилась в: v23.2

Извлекает первую подстроку в `haystack`, которая соответствует шаблону регулярного выражения и относится к группе с указанным индексом.

**Синтаксис**

```sql
regexpExtract(haystack, pattern[, index])
```

**Псевдонимы**: `REGEXP_EXTRACT`

**Аргументы**

* `haystack` — Строка, в которой будет производиться поиск по регулярному выражению. [`String`](/sql-reference/data-types/string)
* `pattern` — Строка, регулярное выражение. `pattern` может содержать несколько групп регулярного выражения, `index` указывает, какую группу нужно извлечь. Индекс 0 означает совпадение со всем регулярным выражением. [`const String`](/sql-reference/data-types/string)
* `index` — Необязательный аргумент. Целое число, большее или равное 0, по умолчанию 1. Определяет, какую группу регулярного выражения нужно извлечь. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает строку, соответствующую шаблону. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
    regexpExtract('100-200', '(\\d+)-(\\d+)', 1),
    regexpExtract('100-200', '(\\d+)-(\\d+)', 2),
    regexpExtract('100-200', '(\\d+)-(\\d+)', 0),
    regexpExtract('100-200', '(\\d+)-(\\d+)');
```

```response title=Response
┌─regexpExtract('100-200', '(\\d+)-(\\d+)', 1)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)', 2)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)', 0)─┬─regexpExtract('100-200', '(\\d+)-(\\d+)')─┐
│ 100                                          │ 200                                          │ 100-200                                      │ 100                                       │
└──────────────────────────────────────────────┴──────────────────────────────────────────────┴──────────────────────────────────────────────┴───────────────────────────────────────────┘
```

## repeat \{#repeat\}

Добавлено в: v20.1

Повторяет строку указанное число раз, объединяя результаты в одну строку.

**Синтаксис**

```sql
repeat(s, n)
```

**Аргументы**

* `s` — Строка, которую нужно повторить. [`String`](/sql-reference/data-types/string)
* `n` — Количество повторений строки. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Строка, содержащая строку `s`, повторённую `n` раз. Если `n` — отрицательное число, функция возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT repeat('abc', 10)
```

```response title=Response
┌─repeat('abc', 10)──────────────┐
│ abcabcabcabcabcabcabcabcabcabc │
└────────────────────────────────┘
```

## reverseUTF8 \{#reverseUTF8\}

Добавлено в версии: v1.1

Переворачивает последовательность кодовых точек Unicode в строке.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, и результат не определён.

**Синтаксис**

```sql
reverseUTF8(s)
```

**Аргументы**

* `s` — строка, содержащая корректный текст в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с обращённой последовательностью кодовых точек Unicode. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT reverseUTF8('ClickHouse')
```

```response title=Response
esuoHkcilC
```

## right \{#right\}

Появилась в версии: v22.1

Возвращает подстроку строки `s` с указанным смещением `offset`, отсчитываемым справа.

**Синтаксис**

```sql
right(s, offset)
```

**Аргументы**

* `s` — Строка, из которой вычисляется подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — Количество байт смещения. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного `offset` — подстроку `s` длиной `offset` байт, начиная с конца строки.
* Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт, начиная с конца строки.
* Пустую строку, если `length` равно `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT right('Hello', 3)
```

```response title=Response
llo
```

**Отрицательное смещение**

```sql title=Query
SELECT right('Hello', -3)
```

```response title=Response
lo
```

## rightPad \{#rightPad\}

Введена в версии v21.8

Дополняет строку справа пробелами или указанной строкой (при необходимости многократно) до тех пор, пока результирующая строка не достигнет значения `length`.

**Синтаксис**

```sql
rightPad(string, length[, pad_string])
```

**Псевдонимы**: `rpad`

**Аргументы**

* `string` — Входная строка, которую нужно дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, то входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный аргумент. Строка, которой дополняется входная строка. Если не указана, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT rightPad('abc', 7, '*'), rightPad('abc', 7)
```

```response title=Response
┌─rightPad('abc', 7, '*')─┬─rightPad('abc', 7)─┐
│ abc****                 │ abc                │
└─────────────────────────┴────────────────────┘
```

## rightPadUTF8 \{#rightPadUTF8\}

Введена в: v21.8

Дополняет строку справа пробелами или указанной строкой (при необходимости несколько раз), пока результирующая строка не достигнет заданной длины.
В отличие от [`rightPad`](#rightPad), который измеряет длину строки в байтах, здесь длина строки измеряется в кодовых точках.

**Синтаксис**

```sql
rightPadUTF8(string, length[, pad_string])
```

**Аргументы**

* `string` — Входная строка, которую необходимо дополнить. [`String`](/sql-reference/data-types/string)
* `length` — Длина результирующей строки. Если значение меньше длины входной строки, входная строка укорачивается до `length` символов. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `pad_string` — Необязательный аргумент. Строка, которой дополняется входная строка. Если не задан, входная строка дополняется пробелами. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку заданной длины, дополненную справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT rightPadUTF8('абвг', 7, '*'), rightPadUTF8('абвг', 7)
```

```response title=Response
┌─rightPadUTF8('абвг', 7, '*')─┬─rightPadUTF8('абвг', 7)─┐
│ абвг***                      │ абвг                    │
└──────────────────────────────┴─────────────────────────┘
```

## rightUTF8 \{#rightUTF8\}

Введена в: v22.1

Возвращает подстроку UTF-8-кодированной строки `s` с указанным `offset`, отсчитываемым от конца строки (справа).

**Синтаксис**

```sql
rightUTF8(s, offset)
```

**Аргументы**

* `s` — Строка в кодировке UTF-8, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)
* `offset` — Количество байт смещения. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает:

* Для положительного `offset` — подстроку `s` длиной `offset` байт, начиная с правого края строки.
* Для отрицательного `offset` — подстроку `s` длиной `length(s) - |offset|` байт, начиная с правого края строки.
* Пустую строку, если `length` равно `0`.
  [`String`](/sql-reference/data-types/string)

**Примеры**

**Положительное смещение**

```sql title=Query
SELECT rightUTF8('Привет', 4)
```

```response title=Response
ивет
```

**Отрицательное смещение**

```sql title=Query
SELECT rightUTF8('Привет', -4)
```

```response title=Response
ет
```

## soundex \{#soundex\}

Впервые представлена в: v23.4

Возвращает [код Soundex](https://en.wikipedia.org/wiki/Soundex) для строки.

**Синтаксис**

```sql
soundex(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает код Soundex для входной строки. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT soundex('aksel')
```

```response title=Response
┌─soundex('aksel')─┐
│ A240             │
└──────────────────┘
```

## space \{#space\}

Появилась в версии: v23.5

Повторяет пробел (` `) указанное число раз.

**Синтаксис**

```sql
space(n)
```

**Аргументы**

* `n` — количество повторений пробела. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает строку, содержащую пробел, повторённый `n` раз. Если `n <= 0`, функция возвращает пустую строку. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT space(3) AS res, length(res);
```

```response title=Response
┌─res─┬─length(res)─┐
│     │           3 │
└─────┴─────────────┘
```

## sparseGrams \{#sparseGrams\}

Добавлена в версии: v25.5

Находит все подстроки заданной строки длиной не менее `n`,
для которых хеши (n-1)-грамм на границах подстроки
строго больше, чем хеши любых (n-1)-грамм внутри подстроки.
Использует `CRC32` в качестве хеш-функции.

**Синтаксис**

```sql
sparseGrams(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — Входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — Необязательный параметр. Минимальная длина извлекаемой n-граммы. Минимальное и значение по умолчанию — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — Необязательный параметр. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Не должно быть меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — Необязательный параметр. Если задан, возвращаются только n-граммы с длиной не меньше `min_cutoff_length`. Значение по умолчанию совпадает с `min_ngram_length`. Не должно быть меньше `min_ngram_length` и не должно быть больше `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив выбранных подстрок. [`Array(String)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGrams('alice', 3)
```

```response title=Response
┌─sparseGrams('alice', 3)────────────┐
│ ['ali','lic','lice','ice']         │
└────────────────────────────────────┘
```

## sparseGramsHashes \{#sparseGramsHashes\}

Добавлена в версии v25.5

Находит хэши всех подстрок заданной строки длиной не менее `n`,
для которых хэши (n-1)-грамм на границах подстроки
строго больше хэшей любых (n-1)-грамм внутри подстроки.
Использует `CRC32` в качестве хеш-функции.

**Синтаксис**

```sql
sparseGramsHashes(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — необязательный параметр. Минимальная длина извлекаемых n-грамм. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — необязательный параметр. Максимальная длина извлекаемых n-грамм. Значение по умолчанию — 100. Не должно быть меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — необязательный параметр. Если задан, возвращаются только n-граммы с длиной больше или равной `min_cutoff_length`. Значение по умолчанию совпадает с `min_ngram_length`. Не должно быть меньше `min_ngram_length` и не должно быть больше `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив хешей CRC32 выбранных подстрок. [`Array(UInt32)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGramsHashes('alice', 3)
```

```response title=Response
┌─sparseGramsHashes('alice', 3)──────────────────────┐
│ [1481062250,2450405249,4012725991,1918774096]      │
└────────────────────────────────────────────────────┘
```

## sparseGramsHashesUTF8 \{#sparseGramsHashesUTF8\}

Добавлено в: v25.5

Находит хэши всех подстрок заданной UTF-8-строки длиной не менее `n`, для которых хэши (n-1)-грамм на границах подстроки строго больше хэшей любых (n-1)-грамм внутри подстроки.
Ожидает строку в кодировке UTF-8, выбрасывает исключение в случае некорректной UTF-8-последовательности.
Использует `CRC32` в качестве хеш-функции.

**Синтаксис**

```sql
sparseGramsHashesUTF8(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — необязательный параметр. Минимальная длина извлекаемой n-граммы. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — необязательный параметр. Максимальная длина извлекаемой n-граммы. Значение по умолчанию — 100. Не должно быть меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — необязательный параметр. Если задан, возвращаются только n-граммы длиной не меньше `min_cutoff_length`. Значение по умолчанию совпадает с `min_ngram_length`. Не должен быть меньше `min_ngram_length` и не должен быть больше `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив хэшей CRC32 выбранных подстрок в кодировке UTF-8. [`Array(UInt32)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGramsHashesUTF8('алиса', 3)
```

```response title=Response
┌─sparseGramsHashesUTF8('алиса', 3)─┐
│ [4178533925,3855635300,561830861] │
└───────────────────────────────────┘
```

## sparseGramsUTF8 \{#sparseGramsUTF8\}

Добавлено в: v25.5

Находит все подстроки заданной строки в кодировке UTF-8 длиной не менее `n`, для которых значения хэшей (n-1)-грамм на границах подстроки строго больше, чем значения хэшей любых (n-1)-грамм внутри подстроки.
Ожидает строку в кодировке UTF-8; при некорректной последовательности UTF-8 генерирует исключение.
В качестве хэш-функции используется `CRC32`.

**Синтаксис**

```sql
sparseGramsUTF8(s[, min_ngram_length, max_ngram_length])
```

**Аргументы**

* `s` — Входная строка. [`String`](/sql-reference/data-types/string)
* `min_ngram_length` — Необязательный параметр. Минимальная длина извлекаемых n-грамм. Значение по умолчанию и минимальное значение — 3. [`UInt*`](/sql-reference/data-types/int-uint)
* `max_ngram_length` — Необязательный параметр. Максимальная длина извлекаемых n-грамм. Значение по умолчанию — 100. Не должен быть меньше `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
* `min_cutoff_length` — Необязательный параметр. Если задан, возвращаются только n-граммы длиной не меньше `min_cutoff_length`. Значение по умолчанию совпадает с `min_ngram_length`. Не должен быть меньше `min_ngram_length` и не должен превышать `max_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив отобранных подстрок в кодировке UTF-8. [`Array(String)`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT sparseGramsUTF8('алиса', 3)
```

```response title=Response
┌─sparseGramsUTF8('алиса', 3)─┐
│ ['али','лис','иса']         │
└─────────────────────────────┘
```

## startsWith \{#startsWith\}

Добавлена в: v1.1

Проверяет, начинается ли строка с заданной строки.

**Синтаксис**

```sql
startsWith(s, prefix)
```

**Аргументы**

* `s` — строка, которую нужно проверить. [`String`](/sql-reference/data-types/string)
* `prefix` — префикс, на наличие которого нужно проверить. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если строка `s` начинается с `prefix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWith('ClickHouse', 'Click');
```

```response title=Response
┌─startsWith('⋯', 'Click')─┐
│                        1 │
└──────────────────────────┘
```

## startsWithCaseInsensitive \{#startsWithCaseInsensitive\}

Добавлена в версии: v25.9

Проверяет, начинается ли строка с заданной подстроки без учета регистра.

**Синтаксис**

```sql
startsWithCaseInsensitive(s, prefix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `prefix` — префикс для проверки без учета регистра. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с префикса `prefix` без учета регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWithCaseInsensitive('ClickHouse', 'CLICK');
```

```response title=Response
┌─startsWithCaseInsensitive('⋯', 'CLICK')─┐
│                                       1 │
└─────────────────────────────────────────┘
```

## startsWithCaseInsensitiveUTF8 \{#startsWithCaseInsensitiveUTF8\}

Появилась в: v25.9

Проверяет, начинается ли строка с указанного префикса без учета регистра.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, и результат неопределён.

**Синтаксис**

```sql
startsWithCaseInsensitiveUTF8(s, prefix)
```

**Аргументы**

* `s` — строка для проверки. [`String`](/sql-reference/data-types/string)
* `prefix` — префикс (без учета регистра), который нужно проверить. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с префикса `prefix` без учета регистра, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWithCaseInsensitiveUTF8('приставка', 'при')
```

```response title=Response
┌─startsWithUT⋯ка', 'при')─┐
│                        1 │
└──────────────────────────┘
```

## startsWithUTF8 \{#startsWithUTF8\}

Добавлена в версии: v23.8

Проверяет, начинается ли строка с указанного префикса.
Предполагается, что строка содержит текст в корректной кодировке UTF-8.
Если это предположение нарушено, исключение не генерируется, а результат не определён.

**Синтаксис**

```sql
startsWithUTF8(s, prefix)
```

**Аргументы**

* `s` — строка, которую нужно проверить. [`String`](/sql-reference/data-types/string)
* `prefix` — префикс, который нужно проверить. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `1`, если `s` начинается с `prefix`, иначе `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT startsWithUTF8('приставка', 'при')
```

```response title=Response
┌─startsWithUT⋯ка', 'при')─┐
│                        1 │
└──────────────────────────┘
```

## stringBytesEntropy \{#stringBytesEntropy\}

Появилась в версии v25.6

Вычисляет энтропию Шеннона распределения байтов в строке.

**Синтаксис**

```sql
stringBytesEntropy(s)
```

**Аргументы**

* `s` — строка для анализа. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает энтропию Шеннона распределения байтов в строке. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringBytesEntropy('Hello, world!')
```

```response title=Response
┌─stringBytesEntropy('Hello, world!')─┐
│                         3.07049960  │
└─────────────────────────────────────┘
```

## stringBytesUniq \{#stringBytesUniq\}

Введена в версии: v25.6

Подсчитывает количество уникальных байтов в строке.

**Синтаксис**

```sql
stringBytesUniq(s)
```

**Аргументы**

* `s` — строка для анализа. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает количество различных байт в строке. [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringBytesUniq('Hello')
```

```response title=Response
┌─stringBytesUniq('Hello')─┐
│                        4 │
└──────────────────────────┘
```

## stringJaccardIndex \{#stringJaccardIndex\}

Введена в версии v23.11

Вычисляет [индекс сходства Жаккара](https://en.wikipedia.org/wiki/Jaccard_index) между двумя байтовыми строками.

**Синтаксис**

```sql
stringJaccardIndex(s1, s2)
```

**Аргументы**

* `s1` — первая входная строка. [`String`](/sql-reference/data-types/string)
* `s2` — вторая входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает индекс сходства Жаккара между двумя строками. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringJaccardIndex('clickhouse', 'mouse')
```

```response title=Response
┌─stringJaccardIndex('clickhouse', 'mouse')─┐
│                                       0.4 │
└───────────────────────────────────────────┘
```

## stringJaccardIndexUTF8 \{#stringJaccardIndexUTF8\}

Добавлена в версии: v23.11

Аналог [`stringJaccardIndex`](#stringJaccardIndex), но для строк в кодировке UTF-8.

**Синтаксис**

```sql
stringJaccardIndexUTF8(s1, s2)
```

**Аргументы**

* `s1` — Первая входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)
* `s2` — Вторая входная строка в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает индекс сходства Жаккара между двумя строками в кодировке UTF-8. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Пример использования**

```sql title=Query
SELECT stringJaccardIndexUTF8('我爱你', '我也爱你')
```

```response title=Response
┌─stringJaccardIndexUTF8('我爱你', '我也爱你')─┐
│                                       0.75 │
└─────────────────────────────────────────────┘
```

## substring \{#substring\}

Введена в версии: v1.1

Возвращает подстроку строки `s`, которая начинается с указанного байтового индекса `offset`.
Подсчёт байтов начинается с 1 по следующей логике:

* Если `offset` равен `0`, возвращается пустая строка.
* Если `offset` отрицательный, подстрока начинается за `offset` символов от конца строки, а не от её начала.

Необязательный аргумент `length` указывает максимальное количество байт, которое может иметь возвращаемая подстрока.

**Синтаксис**

```sql
substring(s, offset[, length])
```

**Псевдонимы**: `byteSlice`, `mid`, `substr`

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring) или [`Enum`](/sql-reference/data-types/enum)
* `offset` — Начальная позиция подстроки в `s`. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `length` — Необязательный параметр. Максимальная длина подстроки. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку `s` длиной `length` байт, начиная с индекса `offset`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Базовое использование**

```sql title=Query
SELECT 'database' AS db, substr(db, 5), substr(db, 5, 1)
```

```response title=Response
┌─db───────┬─substring('database', 5)─┬─substring('database', 5, 1)─┐
│ database │ base                     │ b                           │
└──────────┴──────────────────────────┴─────────────────────────────┘
```

## substringIndex \{#substringIndex\}

Введена в версии: v23.7

Возвращает подстроку из `s` до `count`-го вхождения разделителя `delim`, аналогично функциям в Spark или MySQL.

**Синтаксис**

```sql
substringIndex(s, delim, count)
```

**Псевдонимы**: `SUBSTRING_INDEX`

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string)
* `delim` — Символ-разделитель. [`String`](/sql-reference/data-types/string)
* `count` — Количество вхождений разделителя, которые нужно учесть перед извлечением подстроки. Если значение `count` положительное, возвращается всё слева от последнего разделителя (считая слева направо). Если значение `count` отрицательное, возвращается всё справа от последнего разделителя (считая справа налево). [`UInt`](/sql-reference/data-types/int-uint) или [`Int`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку строки `s` до `count`-го вхождения `delim`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT substringIndex('www.clickhouse.com', '.', 2)
```

```response title=Response
┌─substringIndex('www.clickhouse.com', '.', 2)─┐
│ www.clickhouse                               │
└──────────────────────────────────────────────┘
```

## substringIndexUTF8 \{#substringIndexUTF8\}

Впервые появилась в: v23.7

Возвращает подстроку `s` перед `count` вхождениями разделителя `delim`, выполняя обработку на уровне кодовых точек Unicode.
Предполагается, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не выбрасывается, а результат не определяется.

**Синтаксис**

```sql
substringIndexUTF8(s, delim, count)
```

**Аргументы**

* `s` — Строка, из которой извлекается подстрока. [`String`](/sql-reference/data-types/string)
* `delim` — Символ, по которому выполняется разделение. [`String`](/sql-reference/data-types/string)
* `count` — Количество вхождений разделителя, которые нужно посчитать перед извлечением подстроки. Если значение положительное, возвращается всё слева от последнего разделителя (отсчёт слева направо). Если значение отрицательное, возвращается всё справа от последнего разделителя (отсчёт справа налево). [`UInt`](/sql-reference/data-types/int-uint) или [`Int`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку `s` до `count`-го вхождения `delim`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример UTF-8**

```sql title=Query
SELECT substringIndexUTF8('www.straßen-in-europa.de', '.', 2)
```

```response title=Response
www.straßen-in-europa
```

## substringUTF8 \{#substringUTF8\}

Добавлено в: v1.1

Возвращает подстроку строки `s`, которая начинается с указанного индекса по кодовым точкам `offset`.
Подсчёт кодовых точек начинается с `1` по следующей логике:

* Если `offset` равен `0`, возвращается пустая строка.
* Если `offset` отрицательный, подстрока начинается на `offset` кодовых точек от конца строки, а не от начала.

Необязательный аргумент `length` задаёт максимальное количество кодовых точек, которое может иметь возвращаемая подстрока.

:::note
Эта функция предполагает, что строка содержит валидный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не генерируется, и результат является неопределённым.
:::

**Синтаксис**

```sql
substringUTF8(s, offset[, length])
```

**Аргументы**

* `s` — Строка, из которой вычисляется подстрока. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring) или [`Enum`](/sql-reference/data-types/enum)
* `offset` — Начальная позиция подстроки в `s`. [`Int`](/sql-reference/data-types/int-uint) или [`UInt`](/sql-reference/data-types/int-uint)
* `length` — Максимальная длина подстроки. Необязательный аргумент. [`Int`](/sql-reference/data-types/int-uint) или [`UInt`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает подстроку `s` длиной `length` кодовых точек, начиная с индекса кодовой точки `offset`. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT 'Täglich grüßt das Murmeltier.' AS str, substringUTF8(str, 9), substringUTF8(str, 9, 5)
```

```response title=Response
Täglich grüßt das Murmeltier.    grüßt das Murmeltier.    grüßt
```

## toValidUTF8 \{#toValidUTF8\}

Добавлена в: v20.1

Преобразует строку в корректную кодировку UTF-8, заменяя любые некорректные символы UTF-8 символом-заполнителем `�` (U+FFFD).
Если обнаруживается несколько подряд идущих некорректных символов, они заменяются одним символом-заполнителем.

**Синтаксис**

```sql
toValidUTF8(s)
```

**Аргументы**

* `s` — Любой набор байтов, представленный объектом типа данных `String`. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает допустимую строку в кодировке UTF-8. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toValidUTF8('\\x61\\xF0\\x80\\x80\\x80b')
```

```response title=Response
c
┌─toValidUTF8('a����b')─┐
│ a�b                   │
└───────────────────────┘
```

## trimBoth \{#trimBoth\}

Представлена в: v20.1

Удаляет указанные символы с начала и с конца строки.
По умолчанию — распространённые пробельные символы (ASCII).

**Синтаксис**

```sql
trimBoth(s[, trim_characters])
```

**Псевдонимы**: `trim`

**Аргументы**

* `s` — Строка, которую нужно обрезать по краям. [`String`](/sql-reference/data-types/string)
* `trim_characters` — Необязательный параметр. Набор символов, которые нужно обрезать. Если не указан, удаляются стандартные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, у которой указанные символы обрезаны с обеих сторон. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT trimBoth('$$ClickHouse$$', '$')
```

```response title=Response
┌─trimBoth('$$⋯se$$', '$')─┐
│ ClickHouse               │
└──────────────────────────┘
```

## trimLeft \{#trimLeft\}

Добавлена в версии v20.1

Удаляет указанные символы с начала строки.
По умолчанию удаляет распространённые пробельные символы (ASCII).

**Синтаксис**

```sql
trimLeft(input[, trim_characters])
```

**Псевдонимы**: `ltrim`

**Аргументы**

* `input` — Строка для обрезки. [`String`](/sql-reference/data-types/string)
* `trim_characters` — Необязательный параметр. Набор символов для обрезки. Если параметр не указан, удаляются стандартные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с указанными символами, удалёнными слева. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT trimLeft('ClickHouse', 'Click');
```

```response title=Response
┌─trimLeft('Cl⋯', 'Click')─┐
│ House                    │
└──────────────────────────┘
```

## trimRight \{#trimRight\}

Введена в версии v20.1

Удаляет указанные символы с конца строки.
По умолчанию удаляет стандартные пробельные символы (ASCII).

**Синтаксис**

```sql
trimRight(s[, trim_characters])
```

**Псевдонимы**: `rtrim`

**Аргументы**

* `s` — Строка для обрезки. [`String`](/sql-reference/data-types/string)
* `trim_characters` — Необязательный набор символов для обрезки. Если не указан, удаляются обычные пробельные символы. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, в которой указанные символы удалены справа. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT trimRight('ClickHouse','House');
```

```response title=Response
┌─trimRight('C⋯', 'House')─┐
│ Click                    │
└──────────────────────────┘
```

## tryBase32Decode \{#tryBase32Decode\}

Добавлена в: v25.6

Принимает строку и декодирует её, используя кодировку [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6).

**Синтаксис**

```sql
tryBase32Decode(encoded)
```

**Аргументы**

* `encoded` — столбец типа String или константа для декодирования. Если строка не является корректной строкой в кодировке Base32, в случае ошибки возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку с декодированным значением аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─tryBase32Decode('IVXGG33EMVSA====')─┐
│ Encoded                             │
└─────────────────────────────────────┘
```

## tryBase58Decode \{#tryBase58Decode\}

Добавлена в версии v22.10

Аналогична [`base58Decode`](#base58Decode), но в случае ошибки возвращает пустую строку.

**Синтаксис**

```sql
tryBase58Decode(encoded)
```

**Аргументы**

* `encoded` — строковый столбец или константа. Если строка не является корректной Base58-строкой, при ошибке возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase58Decode('3dc8KtHrwM') AS res, tryBase58Decode('invalid') AS res_invalid;
```

```response title=Response
┌─res─────┬─res_invalid─┐
│ Encoded │             │
└─────────┴─────────────┘
```

## tryBase64Decode \{#tryBase64Decode\}

Появилась в версии: v18.16

Аналог [`base64Decode`](#base64Decode), но в случае ошибки возвращает пустую строку.

**Синтаксис**

```sql
tryBase64Decode(encoded)
```

**Аргументы**

* `encoded` — Столбец или константа типа String для декодирования. Если строка не является корректной строкой в кодировке Base64, в случае ошибки возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Response
┌─tryBase64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                          │
└─────────────────────────────────────┘
```

## tryBase64URLDecode \{#tryBase64URLDecode\}

Введена в: v18.16

Аналогична [`base64URLDecode`](#base64URLDecode), но в случае ошибки возвращает пустую строку.

**Синтаксис**

```sql
tryBase64URLDecode(encoded)
```

**Аргументы**

* `encoded` — Строковый столбец или константа для декодирования. Если строка не является корректной строкой в кодировке Base64, в случае ошибки возвращается пустая строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку, содержащую декодированное значение аргумента. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                               │
└──────────────────────────────────────────────────────┘
```

## tryIdnaEncode \{#tryIdnaEncode\}

Добавлена в версии: v24.1

Возвращает представление доменного имени в Unicode (UTF-8) по алгоритму ToUnicode в соответствии с механизмом [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA).
В случае ошибки возвращает пустую строку вместо выбрасывания исключения.

**Синтаксис**

```sql
tryIdnaEncode(s)
```

**Аргументы**

* `s` — входная строка. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает ASCII-представление входной строки в соответствии с механизмом IDNA для входного значения или пустую строку, если входные данные некорректны. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryIdnaEncode('straße.münchen.de')
```

```response title=Response
┌─tryIdnaEncode('straße.münchen.de')──┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```

## tryPunycodeDecode \{#tryPunycodeDecode\}

Добавлена в версии: v24.1

Аналог функции `punycodeDecode`, но возвращает пустую строку, если передана некорректная строка в кодировке Punycode.

**Синтаксис**

```sql
tryPunycodeDecode(s)
```

**Аргументы**

* `s` — строка в кодировке Punycode. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает обычную текстовую строку для входного значения или пустую строку, если входное значение недопустимо. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT tryPunycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─tryPunycodeDecode('Mnchen-3ya')─┐
│ München                         │
└─────────────────────────────────┘
```

## upper \{#upper\}

Добавлена в версии: v1.1

Преобразует латинские символы ASCII в строке в верхний регистр.

**Синтаксис**

```sql
upper(s)
```

**Псевдонимы**: `ucase`

**Аргументы**

* `s` — Строка для преобразования в верхний регистр. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает строку `s` в верхнем регистре. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT upper('clickhouse')
```

```response title=Response
┌─upper('clickhouse')─┐
│ CLICKHOUSE          │
└─────────────────────┘
```

## upperUTF8 \{#upperUTF8\}

Добавлена в: v1.1

Преобразует строку в верхний регистр, предполагая, что строка содержит корректный текст в кодировке UTF-8.
Если это предположение нарушено, исключение не генерируется, а результат не определён.

:::note
Эта функция не определяет язык, поэтому, например, для турецкого результат может быть не совсем корректным (i/İ vs. i/I).
Если длина последовательности байтов UTF-8 различается для верхнего и нижнего регистра одной и той же кодовой точки (например, `ẞ` и `ß`), результат для этой кодовой точки может быть некорректным.
:::

**Синтаксис**

```sql
upperUTF8(s)
```

**Аргументы**

* `s` — строковый тип. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Значение строкового типа данных. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT upperUTF8('München') AS Upperutf8
```

```response title=Response
┌─Upperutf8─┐
│ MÜNCHEN   │
└───────────┘
```

{/*AUTOGENERATED_END*/ }
