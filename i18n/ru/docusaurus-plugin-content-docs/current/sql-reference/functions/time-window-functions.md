---
description: 'Документация по функциям временных окон'
sidebar_label: 'Временное окно'
slug: /sql-reference/functions/time-window-functions
title: 'Функции временных окон'
doc_type: 'reference'
keywords: ['временное окно']
---

import ExperimentalBadge from '@theme/badges/ExperimentalBadge';
import CloudNotSupportedBadge from '@theme/badges/CloudNotSupportedBadge';

# Функции временных окон {#time-window-functions}

<ExperimentalBadge />

<CloudNotSupportedBadge />

Функции временных окон возвращают нижнюю границу соответствующего окна (включительно) и верхнюю границу (исключительно).
Ниже перечислены функции для работы с [WindowView](/sql-reference/statements/create/view#window-view):

{/* 
  Внутреннее содержимое расположенных ниже тегов при сборке фреймворка документации 
  заменяется на документы, сгенерированные на основе system.functions. Пожалуйста, не изменяйте и не удаляйте эти теги.
  См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## hop {#hop}

Введена в: v21.12

Скользящее временное окно имеет фиксированную длительность (`window_interval`) и сдвигается на заданный интервал (`hop_interval`). Если `hop_interval` меньше `window_interval`, скользящие окна перекрываются. Таким образом, записи могут попадать в несколько окон.

Поскольку одна запись может попадать в несколько скользящих окон, функция возвращает только границу первого окна при использовании функции hop без WINDOW VIEW.

**Синтаксис**

```sql
hop(time_attr, hop_interval, window_interval[, timezone])
```

**Аргументы**

* `time_attr` — дата и время. [`DateTime`](/sql-reference/data-types/datetime)
* `hop_interval` — положительный интервал шага окна. [`Interval`](/sql-reference/data-types/int-uint)
* `window_interval` — положительный интервал окна. [`Interval`](/sql-reference/data-types/int-uint)
* `timezone` — необязательный параметр. Название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает нижнюю границу (включительно) и верхнюю границу (не включая) соответствующего скользящего (hopping) окна. [`Tuple(DateTime, DateTime)`](/sql-reference/data-types/tuple)

**Примеры**

**Скользящее (hopping) окно**

```sql title=Query
SELECT hop(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
('2024-07-03 00:00:00','2024-07-05 00:00:00')
```



## hopEnd {#hopEnd}

Introduced in: v22.1


Returns the exclusive upper bound of the corresponding hopping window.

Since one record can be assigned to multiple hop windows, the function only returns the bound of the first window when hop function is used without `WINDOW VIEW`.
    

**Syntax**

```sql
hopEnd(time_attr, hop_interval, window_interval[, timezone])
```

**Arguments**

- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Positive Hop interval. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Positive Window interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the exclusive upper bound of the corresponding hopping window. [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**Hopping window end**

```sql title=Query
SELECT hopEnd(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
2024-07-05 00:00:00
```



## hopStart {#hopStart}

Introduced in: v22.1


Returns the inclusive lower bound of the corresponding hopping window.

Since one record can be assigned to multiple hop windows, the function only returns the bound of the first window when hop function is used without `WINDOW VIEW`.
    

**Syntax**

```sql
hopStart(time_attr, hop_interval, window_interval[, timezone])
```

**Arguments**

- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Positive Hop interval. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Positive Window interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the inclusive lower bound of the corresponding hopping window. [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**Hopping window start**

```sql title=Query
SELECT hopStart(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
2024-07-03 00:00:00
```



## tumble {#tumble}

Introduced in: v21.12


A tumbling time window assigns records to non-overlapping, continuous windows with a fixed duration (`interval`).
    

**Syntax**

```sql
tumble(time_attr, interval[, timezone])
```

**Arguments**

- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Window interval in Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the inclusive lower and exclusive upper bound of the corresponding tumbling window. [`Tuple(DateTime, DateTime)`](/sql-reference/data-types/tuple)

**Examples**

**Tumbling window**

```sql title=Query
SELECT tumble(now(), toIntervalDay('1'))
```

```response title=Response
('2024-07-04 00:00:00','2024-07-05 00:00:00')
```



## tumbleEnd {#tumbleEnd}

Introduced in: v22.1


Returns the exclusive upper bound of the corresponding tumbling window.
    

**Syntax**

```sql
tumbleEnd(time_attr, interval[, timezone])
```

**Arguments**

- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Window interval in Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the exclusive upper bound of the corresponding tumbling window. [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**Tumbling window end**

```sql title=Query
SELECT tumbleEnd(now(), toIntervalDay('1'))
```

```response title=Response
2024-07-05 00:00:00
```



## tumbleStart {#tumbleStart}

Introduced in: v22.1


Returns the inclusive lower bound of the corresponding tumbling window.
    

**Syntax**

```sql
tumbleStart(time_attr, interval[, timezone])
```

**Arguments**

- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Window interval in Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the inclusive lower bound of the corresponding tumbling window. [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**Tumbling window start**

```sql title=Query
SELECT tumbleStart(now(), toIntervalDay('1'))
```

```response title=Response
2024-07-04 00:00:00
```

{/*AUTOGENERATED_END*/ }

## Связанные материалы {#related-content}

- [Руководства по сценариям использования временных рядов](/use-cases/time-series)
