---
description: 'Документация по функциям временных окон'
sidebar_label: 'Временное окно'
slug: /sql-reference/functions/time-window-functions
title: 'Функции временных окон'
doc_type: 'reference'
keywords: ['временное окно']
---

import ExperimentalBadge from '@theme/badges/ExperimentalBadge';
import CloudNotSupportedBadge from '@theme/badges/CloudNotSupportedBadge';


# Функции временных окон

<ExperimentalBadge />
<CloudNotSupportedBadge />

Функции временных окон возвращают включительную нижнюю и исключительную верхнюю границы соответствующего окна.
Ниже перечислены функции для работы с [WindowView](/sql-reference/statements/create/view#window-view):

<!--
The inner content of the tags below are replaced at doc framework build time with
docs generated from system.functions. Please do not modify or remove the tags.
See: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->


<!--AUTOGENERATED_START-->

## hop {#hop}

Introduced in: v21.12

Скользящее временное окно имеет фиксированную длительность (`window_interval`) и сдвигается с заданным интервалом (`hop_interval`). Если `hop_interval` меньше `window_interval`, скользящие окна перекрываются. Таким образом, записи могут попадать в несколько окон.

Поскольку одна запись может попадать в несколько скользящих окон, функция возвращает только границы первого окна при использовании функции hop без WINDOW VIEW.

**Синтаксис**

```sql
hop(time_attr, hop_interval, window_interval[, timezone])
```

**Аргументы**

- `time_attr` — Дата и время. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Положительный интервал сдвига. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Положительный интервал окна. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Необязательный параметр. Название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает включительную нижнюю и исключительную верхнюю границы соответствующего скользящего окна. [`Tuple(DateTime, DateTime)`](/sql-reference/data-types/tuple)

**Примеры**

**Скользящее окно**

```sql title=Query
SELECT hop(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
('2024-07-03 00:00:00','2024-07-05 00:00:00')
```


## hopEnd {#hopEnd}

Введена в версии: v22.1

Возвращает невключающую верхнюю границу соответствующего скользящего окна.

Поскольку одна запись может быть отнесена к нескольким скользящим окнам, функция возвращает только границу первого окна при использовании функции hop без `WINDOW VIEW`.

**Синтаксис**

```sql
hopEnd(time_attr, hop_interval, window_interval[, timezone])
```

**Аргументы**

- `time_attr` — Дата и время. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Положительный интервал скольжения. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Положительный интервал окна. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Необязательный параметр. Название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает невключающую верхнюю границу соответствующего скользящего окна. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Конец скользящего окна**

```sql title=Query
SELECT hopEnd(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
2024-07-05 00:00:00
```


## hopStart {#hopStart}

Введена в версии: v22.1

Возвращает включительную нижнюю границу соответствующего скользящего окна.

Поскольку одна запись может быть отнесена к нескольким скользящим окнам, функция возвращает только границу первого окна при использовании функции hop без `WINDOW VIEW`.

**Синтаксис**

```sql
hopStart(time_attr, hop_interval, window_interval[, timezone])
```

**Аргументы**

- `time_attr` — Дата и время. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Положительный интервал скольжения. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Положительный интервал окна. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Необязательный параметр. Название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает включительную нижнюю границу соответствующего скользящего окна. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Начало скользящего окна**

```sql title=Запрос
SELECT hopStart(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Результат
2024-07-03 00:00:00
```


## tumble {#tumble}

Введено в версии: v21.12

Фиксированное временное окно распределяет записи по неперекрывающимся последовательным окнам с фиксированной длительностью (`interval`).

**Синтаксис**

```sql
tumble(time_attr, interval[, timezone])
```

**Аргументы**

- `time_attr` — Дата и время. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Интервал окна. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Необязательный параметр. Название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает включающую нижнюю и исключающую верхнюю границы соответствующего фиксированного окна. [`Tuple(DateTime, DateTime)`](/sql-reference/data-types/tuple)

**Примеры**

**Фиксированное окно**

```sql title=Query
SELECT tumble(now(), toIntervalDay('1'))
```

```response title=Response
('2024-07-04 00:00:00','2024-07-05 00:00:00')
```


## tumbleEnd {#tumbleEnd}

Введено в версии: v22.1

Возвращает исключающую верхнюю границу соответствующего кувыркающегося окна.

**Синтаксис**

```sql
tumbleEnd(time_attr, interval[, timezone])
```

**Аргументы**

- `time_attr` — Дата и время. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Интервал окна типа Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Необязательный параметр. Название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает исключающую верхнюю границу соответствующего кувыркающегося окна. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Конец кувыркающегося окна**

```sql title=Запрос
SELECT tumbleEnd(now(), toIntervalDay('1'))
```

```response title=Результат
2024-07-05 00:00:00
```


## tumbleStart {#tumbleStart}

Введено в версии: v22.1

Возвращает включительную нижнюю границу соответствующего кувыркающегося окна.

**Синтаксис**

```sql
tumbleStart(time_attr, interval[, timezone])
```

**Аргументы**

- `time_attr` — Дата и время. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Интервал окна типа Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Необязательный параметр. Название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает включительную нижнюю границу соответствующего кувыркающегося окна. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Начало кувыркающегося окна**

```sql title=Запрос
SELECT tumbleStart(now(), toIntervalDay('1'))
```

```response title=Результат
2024-07-04 00:00:00
```

<!--AUTOGENERATED_END-->


## Связанный контент {#related-content}

- [Руководства по использованию временных рядов](/use-cases/time-series)
