---
description: 'Документация по функциям uniqTheta'
sidebar_label: 'uniqTheta'
slug: /sql-reference/functions/uniqtheta-functions
title: 'Функции uniqTheta'
doc_type: 'reference'
---



# Функции uniqTheta

Функции uniqTheta работают с двумя объектами uniqThetaSketch для выполнения вычислений операций над множествами, таких как ∪ / ∩ / × (объединение/пересечение/отрицание), и возвращают новый объект uniqThetaSketch, содержащий результат.

Объект uniqThetaSketch создаётся агрегирующей функцией uniqTheta с суффиксом -State.

UniqThetaSketch — это структура данных для хранения приближённого множества значений.
Для дополнительной информации о RoaringBitmap см.: [Theta Sketch Framework](https://datasketches.apache.org/docs/Theta/ThetaSketchFramework.html).



## uniqThetaUnion

Принимает два объекта uniqThetaSketch и выполняет операцию объединения множеств (∪); результатом является новый uniqThetaSketch.

```sql
uniqThetaUnion(uniqThetaSketch,uniqThetaSketch)
```

**Аргументы**

* `uniqThetaSketch` – объект типа uniqThetaSketch.

**Пример**

```sql
SELECT finalizeAggregation(uniqThetaUnion(a, b)) AS a_union_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[1,2]) AS a, arrayReduce('uniqThetaState',[2,3,4]) AS b );
```

```text
┌─a_union_b─┬─a_cardinality─┬─b_cardinality─┐
│         4 │             2 │             3 │
└───────────┴───────────────┴───────────────┘
```


## uniqThetaIntersect

Выполняет вычисление пересечения (операция над множествами ∩) двух объектов uniqThetaSketch; результатом является новый uniqThetaSketch.

```sql
uniqThetaIntersect(uniqThetaSketch,uniqThetaSketch)
```

**Аргументы**

* `uniqThetaSketch` – объект типа uniqThetaSketch.

**Пример**

```sql
SELECT finalizeAggregation(uniqThetaIntersect(a, b)) AS a_intersect_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[1,2]) AS a, arrayReduce('uniqThetaState',[2,3,4]) AS b );
```

```text
┌─a_intersect_b─┬─a_cardinality─┬─b_cardinality─┐
│             1 │             2 │             3 │
└───────────────┴───────────────┴───────────────┘
```


## uniqThetaNot

Два объекта uniqThetaSketch используются для выполнения операции a&#95;not&#95;b (операция над множествами ×), результатом является новый uniqThetaSketch.

```sql
uniqThetaNot(uniqThetaSketch,uniqThetaSketch)
```

**Аргументы**

* `uniqThetaSketch` – объект типа `uniqThetaSketch`.

**Пример**

```sql
SELECT finalizeAggregation(uniqThetaNot(a, b)) AS a_not_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[2,3,4]) AS a, arrayReduce('uniqThetaState',[1,2]) AS b );
```

```text
┌─a_not_b─┬─a_cardinality─┬─b_cardinality─┐
│       2 │             3 │             2 │
└─────────┴───────────────┴───────────────┘
```

**См. также**

* [uniqThetaSketch](/sql-reference/aggregate-functions/reference/uniqthetasketch)

{/* 
  Содержимое следующих тегов заменяется во время сборки фреймворка документации
  документацией, сгенерированной на основе system.functions. Пожалуйста, не изменяйте и не удаляйте эти теги.
  См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
