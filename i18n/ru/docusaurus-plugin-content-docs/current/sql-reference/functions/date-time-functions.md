---
description: 'Справочная документация по функциям для работы с датами и временем'
sidebar_label: 'Даты и время'
slug: /sql-reference/functions/date-time-functions
title: 'Функции для работы с датами и временем'
doc_type: 'reference'
---

# Функции для работы с датами и временем \{#functions-for-working-with-dates-and-times\}

Большинство функций в этом разделе принимают необязательный аргумент часового пояса, например `Europe/Amsterdam`. В этом случае используется указанный часовой пояс вместо локального (по умолчанию).

**Пример**

```sql
SELECT
    toDateTime('2016-06-15 23:00:00') AS time,
    toDate(time) AS date_local,
    toDate(time, 'Asia/Yekaterinburg') AS date_yekat,
    toString(time, 'US/Samoa') AS time_samoa
```

```text
┌────────────────time─┬─date_local─┬─date_yekat─┬─time_samoa──────────┐
│ 2016-06-15 23:00:00 │ 2016-06-15 │ 2016-06-16 │ 2016-06-15 09:00:00 │
└─────────────────────┴────────────┴────────────┴─────────────────────┘
```

{/* 
  Внутреннее содержимое приведённых ниже тегов во время сборки фреймворка документации
  заменяется документацией, сгенерированной из system.functions. Пожалуйста, не изменяйте и не удаляйте эти теги.
  См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## UTCTimestamp \{#UTCTimestamp\}

Введена в: v22.11

Возвращает текущие дату и время на момент анализа запроса. Функция является константным выражением.

Эта функция возвращает тот же результат, что и `now('UTC')`. Она была добавлена только для поддержки MySQL. Предпочтительно использовать функцию [`now`](#now).

**Синтаксис**

```sql
UTCTimestamp()
```

**Псевдонимы**: `UTC_timestamp`

**Аргументы**

* Отсутствуют.

**Возвращаемое значение**

Возвращает текущие дату и время на момент анализа запроса. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Получение текущей временной метки в UTC**

```sql title=Query
SELECT UTCTimestamp()
```

```response title=Response
┌──────UTCTimestamp()─┐
│ 2024-05-28 08:32:09 │
└─────────────────────┘
```

## YYYYMMDDToDate \{#YYYYMMDDToDate\}

Добавлена в: v23.9

Преобразует число, содержащее год, месяц и день, в тип `Date`.
Эта функция является противоположностью функции [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD).
Результат не определён, если на вход подано значение, не кодирующее корректную дату.

**Синтаксис**

```sql
YYYYMMDDToDate(YYYYMMDD)
```

**Аргументы**

* `YYYYMMDD` — Числовое значение, содержащее год, месяц и день. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает значение типа `Date` из переданного аргумента [`Date`](/sql-reference/data-types/date)

**Примеры**

**Пример**

```sql title=Query
SELECT YYYYMMDDToDate(20230911);
```

```response title=Response
┌─toYYYYMMDD(20230911)─┐
│           2023-09-11 │
└──────────────────────┘
```

## YYYYMMDDToDate32 \{#YYYYMMDDToDate32\}

Появилась в версии v23.9

Преобразует число, содержащее год, месяц и день, в `Date32`.
Эта функция является противоположностью функции [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD).
Результат не определён, если входное значение не кодирует допустимое значение `Date32`.

**Синтаксис**

```sql
YYYYMMDDToDate32(YYYYMMDD)
```

**Аргументы**

* `YYYYMMDD` — число, задающее год, месяц и день. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает значение типа `Date32` на основе переданного аргумента [`Date32`](/sql-reference/data-types/date32)

**Примеры**

**Пример**

```sql title=Query
SELECT YYYYMMDDToDate32(20000507);
```

```response title=Response
┌─YYYYMMDDToDate32(20000507)─┐
│                 2000-05-07 │
└────────────────────────────┘
```

## YYYYMMDDhhmmssToDateTime \{#YYYYMMDDhhmmssToDateTime\}

Введена в версии: v23.9

Преобразует число, содержащее год, месяц, день, час, минуту и секунду, в `DateTime`.
Эта функция является противоположностью функции [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss).
Результат не определён, если входное значение не представляет допустимое значение `DateTime`.

**Синтаксис**

```sql
YYYYMMDDhhmmssToDateTime(YYYYMMDDhhmmss[, timezone])
```

**Аргументы**

* `YYYYMMDDhhmmss` — число, содержащее год, месяц, день, час, минуту и секунду. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `timezone` — название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает значение типа `DateTime` на основе переданных аргументов. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Пример**

```sql title=Query
SELECT YYYYMMDDToDateTime(20230911131415);
```

```response title=Response
┌──────YYYYMMDDhhmmssToDateTime(20230911131415)─┐
│                           2023-09-11 13:14:15 │
└───────────────────────────────────────────────┘
```

## YYYYMMDDhhmmssToDateTime64 \{#YYYYMMDDhhmmssToDateTime64\}

Появилась в: v23.9

Преобразует число, содержащее год, месяц, день, час, минуту и секунду, в `DateTime64`.
Эта функция является противоположностью функции [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss).
Результат не определён, если входное значение не представляет корректное значение `DateTime64`.

**Синтаксис**

```sql
YYYYMMDDhhmmssToDateTime64(YYYYMMDDhhmmss[, precision[, timezone]])
```

**Аргументы**

* `YYYYMMDDhhmmss` — число, содержащее год, месяц, день, час, минуту и секунду. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `precision` — точность дробной части (0–9). [`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — название часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает значение типа [`DateTime64`](/sql-reference/data-types/datetime64) на основе указанных аргументов.

**Примеры**

**Пример**

```sql title=Query
SELECT YYYYMMDDhhmmssToDateTime64(20230911131415, 3, 'Asia/Istanbul');
```

```response title=Response
┌─YYYYMMDDhhmm⋯/Istanbul')─┐
│  2023-09-11 13:14:15.000 │
└──────────────────────────┘
```

## addDate \{#addDate\}

Добавлено в версии: v23.9

Добавляет временной интервал к переданной дате, дате со временем или строковому представлению даты/даты со временем.
Если результат сложения выходит за пределы диапазона типа данных, результат неопределён.

**Синтаксис**

```sql
addDate(datetime, interval)
```

**Аргументы**

* `datetime` — Дата или дата со временем, к которой добавляется `interval`. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `interval` — Интервал, который нужно добавить. [`Interval`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает дату или дату со временем, полученную при добавлении `interval` к `datetime`. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление интервала к дате**

```sql title=Query
SELECT addDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─addDate(toDa⋯valYear(3))─┐
│               2021-01-01 │
└──────────────────────────┘
```

## addDays \{#addDays\}

Появилась в версии: v1.1

Добавляет указанное количество дней к дате, дате со временем или к их строковому представлению.

**Синтаксис**

```sql
addDays(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата и время, к которой нужно добавить указанное количество дней. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество добавляемых дней. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, увеличенное на `num` дней. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление дней к различным типам дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addDays(date, 5) AS add_days_with_date,
    addDays(date_time, 5) AS add_days_with_date_time,
    addDays(date_time_string, 5) AS add_days_with_date_time_string
```

```response title=Response
┌─add_days_with_date─┬─add_days_with_date_time─┬─add_days_with_date_time_string─┐
│         2024-01-06 │     2024-01-06 00:00:00 │        2024-01-06 00:00:00.000 │
└────────────────────┴─────────────────────────┴────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─plus(CAST('1⋯valDay(10))─┐
│               1998-06-26 │
└──────────────────────────┘
```

## addHours \{#addHours\}

Введена в версии: v1.1

Добавляет указанное количество часов к дате, дате и времени или их строковому представлению.

**Синтаксис**

```sql
addHours(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, к которой нужно прибавить указанное количество часов. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество часов, которое нужно прибавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime` плюс `num` часов, результат имеет тип [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление часов к разным типам дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addHours(date, 12) AS add_hours_with_date,
    addHours(date_time, 12) AS add_hours_with_date_time,
    addHours(date_time_string, 12) AS add_hours_with_date_time_string
```

```response title=Response
┌─add_hours_with_date─┬─add_hours_with_date_time─┬─add_hours_with_date_time_string─┐
│ 2024-01-01 12:00:00 │      2024-01-01 12:00:00 │         2024-01-01 12:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─plus(CAST('1⋯alHour(10))─┐
│      1998-06-16 10:00:00 │
└──────────────────────────┘
```

## addInterval \{#addInterval\}

Добавлена в версии: v22.11

Добавляет интервал к другому интервалу или к кортежу интервалов.

:::note
Интервалы одного и того же типа будут объединены в один интервал. Например, если переданы `toIntervalDay(1)` и `toIntervalDay(2)`, то результатом будет `(3)`, а не `(1,1)`.
:::

**Синтаксис**

```sql
addInterval(interval_1, interval_2)
```

**Аргументы**

* `interval_1` — первый интервал или кортеж интервалов. [`Interval`](/sql-reference/data-types/int-uint) или [`Tuple(Interval)`](/sql-reference/data-types/tuple)
* `interval_2` — второй интервал, который добавляется. [`Interval`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает кортеж интервалов [`Tuple(Interval)`](/sql-reference/data-types/tuple)

**Примеры**

**Сложение интервалов**

```sql title=Query
SELECT addInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT addInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT addInterval(INTERVAL 2 DAY, INTERVAL 1 DAY)
```

```response title=Response
┌─addInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,1)                                             │
└───────────────────────────────────────────────────┘
┌─addInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,1)                                                                │
└────────────────────────────────────────────────────────────────────────┘
┌─addInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (3)                                             │
└─────────────────────────────────────────────────┘
```

## addMicroseconds \{#addMicroseconds\}

Добавлена в версии: v22.6

Добавляет указанное количество микросекунд к дате и времени или к строковому представлению даты и времени.

**Синтаксис**

```sql
addMicroseconds(datetime, num)
```

**Аргументы**

* `datetime` — Дата и время, к которым нужно прибавить заданное количество микросекунд. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — Количество микросекунд, которое нужно добавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `date_time`, увеличенное на `num` микросекунд, типа [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление микросекунд к различным типам даты и времени**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMicroseconds(date_time, 1000000) AS add_microseconds_with_date_time,
    addMicroseconds(date_time_string, 1000000) AS add_microseconds_with_date_time_string
```

```response title=Response
┌─add_microseconds_with_date_time─┬─add_microseconds_with_date_time_string─┐
│      2024-01-01 00:00:01.000000 │             2024-01-01 00:00:01.000000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─plus(CAST('19⋯osecond(10))─┐
│ 1998-06-16 00:00:00.000010 │
└────────────────────────────┘
```

## addMilliseconds \{#addMilliseconds\}

Добавлена в версии: v22.6

Добавляет заданное количество миллисекунд к значению даты и времени или к строковому представлению даты и времени.

**Синтаксис**

```sql
addMilliseconds(datetime, num)
```

**Аргументы**

* `datetime` — дата и время, к которым нужно добавить указанное количество миллисекунд. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество миллисекунд, которое нужно добавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime`, увеличенное на `num` миллисекунд. Тип результата — [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление миллисекунд к различным типам даты и времени**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMilliseconds(date_time, 1000) AS add_milliseconds_with_date_time,
    addMilliseconds(date_time_string, 1000) AS add_milliseconds_with_date_time_string
```

```response title=Response
┌─add_milliseconds_with_date_time─┬─add_milliseconds_with_date_time_string─┐
│         2024-01-01 00:00:01.000 │                2024-01-01 00:00:01.000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса для INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─plus(CAST('1⋯second(10))─┐
│  1998-06-16 00:00:00.010 │
└──────────────────────────┘
```

## addMinutes \{#addMinutes\}

Добавлена в версии: v1.1

Добавляет заданное количество минут к дате, дате и времени или их строковому представлению.

**Синтаксис**

```sql
addMinutes(datetime, num)
```

**Аргументы**

* `datetime` — Дата или дата и время, к которой нужно добавить указанное количество минут. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — Количество минут, которое нужно добавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime`, увеличенное на `num` минут, типа [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление минут к различным типам дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMinutes(date, 20) AS add_minutes_with_date,
    addMinutes(date_time, 20) AS add_minutes_with_date_time,
    addMinutes(date_time_string, 20) AS add_minutes_with_date_time_string
```

```response title=Response
┌─add_minutes_with_date─┬─add_minutes_with_date_time─┬─add_minutes_with_date_time_string─┐
│   2024-01-01 00:20:00 │        2024-01-01 00:20:00 │           2024-01-01 00:20:00.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**Использование альтернативного синтаксиса для INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─plus(CAST('1⋯Minute(10))─┐
│      1998-06-16 00:10:00 │
└──────────────────────────┘
```

## addMonths \{#addMonths\}

Добавлена в версии: v1.1

Добавляет заданное количество месяцев к дате, дате и времени или их строковому представлению.

**Синтаксис**

```sql
addMonths(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, к которой нужно прибавить указанное число месяцев. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — число месяцев, которое нужно прибавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, увеличенное на `num` месяцев, типа [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление месяцев к различным типам дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMonths(date, 6) AS add_months_with_date,
    addMonths(date_time, 6) AS add_months_with_date_time,
    addMonths(date_time_string, 6) AS add_months_with_date_time_string
```

```response title=Response
┌─add_months_with_date─┬─add_months_with_date_time─┬─add_months_with_date_time_string─┐
│           2024-07-01 │       2024-07-01 00:00:00 │          2024-07-01 00:00:00.000 │
└──────────────────────┴───────────────────────────┴──────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─plus(CAST('1⋯lMonth(10))─┐
│               1999-04-16 │
└──────────────────────────┘
```

## addNanoseconds \{#addNanoseconds\}

Добавлена в: v22.6

Добавляет указанное количество наносекунд к дате со временем или к строковому представлению даты со временем.

**Синтаксис**

```sql
addNanoseconds(datetime, num)
```

**Аргументы**

* `datetime` — дата и время, к которым нужно добавить указанное количество наносекунд. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество наносекунд, которое нужно добавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime`, увеличенное на `num` наносекунд. Тип результата — [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление наносекунд к значениям разных типов даты и времени**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addNanoseconds(date_time, 1000) AS add_nanoseconds_with_date_time,
    addNanoseconds(date_time_string, 1000) AS add_nanoseconds_with_date_time_string
```

```response title=Response
┌─add_nanoseconds_with_date_time─┬─add_nanoseconds_with_date_time_string─┐
│  2024-01-01 00:00:00.000001000 │         2024-01-01 00:00:00.000001000 │
└────────────────────────────────┴───────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 1000 nanosecond)
```

```response title=Response
┌─plus(CAST('199⋯osecond(1000))─┐
│ 1998-06-16 00:00:00.000001000 │
└───────────────────────────────┘
```

## addQuarters \{#addQuarters\}

Была добавлена в версии: v20.1

Добавляет указанное количество кварталов к дате, дате и времени или к их строковому представлению.

**Синтаксис**

```sql
addQuarters(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, к которой нужно прибавить заданное количество кварталов. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество кварталов, которое нужно прибавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, увеличенное на `num` кварталов, типа [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64).

**Примеры**

**Добавление кварталов к различным типам дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addQuarters(date, 1) AS add_quarters_with_date,
    addQuarters(date_time, 1) AS add_quarters_with_date_time,
    addQuarters(date_time_string, 1) AS add_quarters_with_date_time_string
```

```response title=Response
┌─add_quarters_with_date─┬─add_quarters_with_date_time─┬─add_quarters_with_date_time_string─┐
│             2024-04-01 │         2024-04-01 00:00:00 │            2024-04-01 00:00:00.000 │
└────────────────────────┴─────────────────────────────┴────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─plus(CAST('1⋯uarter(10))─┐
│               2000-12-16 │
└──────────────────────────┘
```

## addSeconds \{#addSeconds\}

Добавлена в: v1.1

Добавляет указанное количество секунд к дате, дате и времени или строковому представлению даты или даты и времени.

**Синтаксис**

```sql
addSeconds(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, к которой нужно добавить указанное количество секунд. [`Date`](/sql-reference/data-types/date), [`Date32`](/sql-reference/data-types/date32), [`DateTime`](/sql-reference/data-types/datetime), [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество секунд, которое нужно добавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, увеличенное на `num` секунд, типа [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление секунд к различным типам даты и времени**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addSeconds(date, 30) AS add_seconds_with_date,
    addSeconds(date_time, 30) AS add_seconds_with_date_time,
    addSeconds(date_time_string, 30) AS add_seconds_with_date_time_string
```

```response title=Response
┌─add_seconds_with_date─┬─add_seconds_with_date_time─┬─add_seconds_with_date_time_string─┐
│   2024-01-01 00:00:30 │        2024-01-01 00:00:30 │           2024-01-01 00:00:30.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─dateAdd('1998-06-16'::Date, INTERVAL 10 second)─┐
│                             1998-06-16 00:00:10 │
└─────────────────────────────────────────────────┘
```

## addTupleOfIntervals \{#addTupleOfIntervals\}

Введена в версии: v22.11

Последовательно добавляет кортеж интервалов к дате или дате со временем.

**Синтаксис**

```sql
addTupleOfIntervals(datetime, intervals)
```

**Аргументы**

* `datetime` — дата или дата со временем, к которой добавляются интервалы. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `intervals` — кортеж интервалов, которые добавляются к `datetime`. [`Tuple(Interval)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает `date` с добавленными `intervals` — [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление кортежа интервалов к дате**

```sql title=Query
WITH toDate('2018-01-01') AS date
SELECT addTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 MONTH, INTERVAL 1 YEAR))
```

```response title=Response
┌─addTupleOfIntervals(date, (toIntervalDay(1), toIntervalMonth(1), toIntervalYear(1)))─┐
│                                                                           2019-02-02 │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## addWeeks \{#addWeeks\}

Добавлена в версии v1.1

Добавляет указанное количество недель к дате, дате и времени или их строковому представлению.

**Синтаксис**

```sql
addWeeks(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, к которой нужно добавить указанное количество недель. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество недель для добавления. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, увеличенное на `num` недель. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление недель к различным типам дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addWeeks(date, 5) AS add_weeks_with_date,
    addWeeks(date_time, 5) AS add_weeks_with_date_time,
    addWeeks(date_time_string, 5) AS add_weeks_with_date_time_string
```

```response title=Response
┌─add_weeks_with_date─┬─add_weeks_with_date_time─┬─add_weeks_with_date_time_string─┐
│          2024-02-05 │      2024-02-05 00:00:00 │         2024-02-05 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─plus(CAST('1⋯alWeek(10))─┐
│               1998-08-25 │
└──────────────────────────┘
```

## addYears \{#addYears\}

Добавлена в версии v1.1

Добавляет указанное количество лет к дате, дате со временем или строке, содержащей дату или дату со временем.

**Синтаксис**

```sql
addYears(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, к которой нужно прибавить указанное количество лет. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество лет, которое нужно добавить. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, увеличенное на `num` лет, типа [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Добавление лет к различным типам дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addYears(date, 1) AS add_years_with_date,
    addYears(date_time, 1) AS add_years_with_date_time,
    addYears(date_time_string, 1) AS add_years_with_date_time_string
```

```response title=Response
┌─add_years_with_date─┬─add_years_with_date_time─┬─add_years_with_date_time_string─┐
│          2025-01-01 │      2025-01-01 00:00:00 │         2025-01-01 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─plus(CAST('1⋯alYear(10))─┐
│               2008-06-16 │
└──────────────────────────┘
```

## age \{#age\}

Введена в версии v23.1

Возвращает компонент разности между `startdate` и `enddate` в соответствующей единице измерения.
Разность вычисляется с точностью до 1 наносекунды.

Например, разность между 2021-12-29 и 2022-01-01 составляет 3 дня для единицы «день»,
0 месяцев для единицы «месяц» и 0 лет для единицы «год».

В качестве альтернативы age смотрите функцию [`dateDiff`](#dateDiff).

**Синтаксис**

```sql
age('unit', startdate, enddate[, timezone])
```

**Аргументы**

* `unit` — Тип единицы измерения результата.

| Unit        | Possible values                          |
| ----------- | ---------------------------------------- |
| nanosecond  | `nanosecond`, `nanoseconds`, `ns`        |
| microsecond | `microsecond`, `microseconds`, `us`, `u` |
| millisecond | `millisecond`, `milliseconds`, `ms`      |
| second      | `second`, `seconds`, `ss`, `s`           |
| minute      | `minute`, `minutes`, `mi`, `n`           |
| hour        | `hour`, `hours`, `hh`, `h`               |
| day         | `day`, `days`, `dd`, `d`                 |
| week        | `week`, `weeks`, `wk`, `ww`              |
| month       | `month`, `months`, `mm`, `m`             |
| quarter     | `quarter`, `quarters`, `qq`, `q`         |
| year        | `year`, `years`, `yyyy`, `yy`            |

* `startdate` — Первое значение времени, которое вычитается (вычитаемое). [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `enddate` — Второе значение времени, из которого производится вычитание (уменьшаемое). [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный параметр. Название часового пояса. Если задан, он применяется как к `startdate`, так и к `enddate`. Если не задан, используются часовые пояса `startdate` и `enddate`. Если они различаются, результат не определён. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает разницу между `enddate` и `startdate`, выраженную в `unit`. [`Int32`](/sql-reference/data-types/int-uint)

**Примеры**

**Вычисление возраста в часах**

```sql title=Query
SELECT age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))
```

```response title=Response
┌─age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))─┐
│                                                                                24 │
└───────────────────────────────────────────────────────────────────────────────────┘
```

**Рассчитать возраст в разных единицах**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    age('day', s, e) AS day_age,
    age('month', s, e) AS month_age,
    age('year', s, e) AS year_age
```

```response title=Response
┌──────────e─┬──────────s─┬─day_age─┬─month_age─┬─year_age─┐
│ 2022-01-01 │ 2021-12-29 │       3 │         0 │        0 │
└────────────┴────────────┴─────────┴───────────┴──────────┘
```

## changeDay \{#changeDay\}

Введена в версии v24.7

Изменяет компонент дня в значении типа Date или DateTime.

**Синтаксис**

```sql
changeDay(date_or_datetime, value)
```

**Аргументы**

* `date_or_datetime` — значение, которое нужно изменить. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — новое значение. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает значение того же типа, что и `date_or_datetime`, с изменённым компонентом дня. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример использования**

```sql title=Query
SELECT changeDay('2024-01-31'::DateTime, 15)
```

```response title=Response
2024-01-15 00:00:00
```

## changeHour \{#changeHour\}

Впервые появилась в версии v24.7

Изменяет часовую часть значения типа Date или DateTime.

**Синтаксис**

```sql
changeHour(date_or_datetime, value)
```

**Аргументы**

* `date_or_datetime` — Значение для изменения. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — Новое значение. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает значение того же типа, что и `date_or_datetime`, но с изменённым значением часа. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример использования**

```sql title=Query
SELECT changeHour('2024-01-01 12:00:00'::DateTime, 5)
```

```response title=Response
2024-01-01 05:00:00
```

## changeMinute \{#changeMinute\}

Добавлена в версии: v24.7

Изменяет компонент минуты у значения типа `date` или `date time`.

**Синтаксис**

```sql
changeMinute(date_or_datetime, value)
```

**Аргументы**

* `date_or_datetime` — значение, которое нужно изменить. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — новое значение. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает значение того же типа, что и `date_or_datetime`, с изменённой минутной компонентой. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример использования**

```sql title=Query
SELECT changeMinute('2024-01-01 12:30:00'::DateTime, 45)
```

```response title=Response
2024-01-01 12:45:00
```

## changeMonth \{#changeMonth\}

Добавлена в версии v24.7

Изменяет компонент месяца в дате или дате-времени.

**Синтаксис**

```sql
changeMonth(date_or_datetime, value)
```

**Аргументы**

* `date_or_datetime` — значение, которое нужно изменить. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — новое значение. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает значение того же типа, что и `date_or_datetime`, с изменённым компонентом месяца. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример использования**

```sql title=Query
SELECT changeMonth('2024-01-01'::DateTime, 12)
```

```response title=Response
2024-12-01 00:00:00
```

## changeSecond \{#changeSecond\}

Добавлена в: v24.7

Изменяет секундную часть даты или даты-времени.

**Синтаксис**

```sql
changeSecond(date_or_datetime, value)
```

**Аргументы**

* `date_or_datetime` — значение, которое нужно изменить. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — новое значение. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает значение того же типа, что и `date_or_datetime`, с изменённой компонентой секунд. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример использования**

```sql title=Query
SELECT changeSecond('2024-01-01 12:30:45'::DateTime, 15)
```

```response title=Response
2024-01-01 12:30:15
```

## changeYear \{#changeYear\}

Добавлена в версии: v24.7

Изменяет компонент года в значении даты или даты и времени.

**Синтаксис**

```sql
changeYear(date_or_datetime, value)
```

**Аргументы**

* `date_or_datetime` — значение для изменения. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `value` — новое значение. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает значение того же типа, что и `date_or_datetime`, с изменённым компонентом года. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример использования**

```sql title=Query
SELECT changeYear('2024-01-01'::DateTime, 2023)
```

```response title=Response
2023-01-01 00:00:00
```

## dateDiff \{#dateDiff\}

Введена в: v23.4

Возвращает количество границ указанной единицы времени `unit`, пересеченных между `startdate` и `enddate`.
Разница вычисляется в относительных единицах. Например, разница между 2021-12-29 и 2022-01-01 составляет 3 дня для единицы day
(см. [`toRelativeDayNum`](#toRelativeDayNum)), 1 месяц для единицы month (см. [`toRelativeMonthNum`](#toRelativeMonthNum)) и 1 год для единицы year
(см. [`toRelativeYearNum`](#toRelativeYearNum)).

Если указана единица `week`, то `dateDiff` предполагает, что неделя начинается в понедельник.
Обратите внимание, что это поведение отличается от функции `toWeek()`, в которой недели по умолчанию начинаются в воскресенье.

В качестве альтернативы `dateDiff` см. функцию [`age`](#age).

**Синтаксис**

```sql
dateDiff(unit, startdate, enddate[, timezone])
```

**Псевдонимы**: `timestampDiff`, `TIMESTAMP_DIFF`, `DATE_DIFF`, `date_diff`, `timestamp_diff`

**Аргументы**

* `unit` — Тип интервала для результата.

| Единица     | Допустимые значения                      |
| ----------- | ---------------------------------------- |
| nanosecond  | `nanosecond`, `nanoseconds`, `ns`        |
| microsecond | `microsecond`, `microseconds`, `us`, `u` |
| millisecond | `millisecond`, `milliseconds`, `ms`      |
| second      | `second`, `seconds`, `ss`, `s`           |
| minute      | `minute`, `minutes`, `mi`, `n`           |
| hour        | `hour`, `hours`, `hh`, `h`               |
| day         | `day`, `days`, `dd`, `d`                 |
| week        | `week`, `weeks`, `wk`, `ww`              |
| month       | `month`, `months`, `mm`, `m`             |
| quarter     | `quarter`, `quarters`, `qq`, `q`         |
| year        | `year`, `years`, `yyyy`, `yy`            |

* `startdate` — Первое значение времени (вычитаемое). [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `enddate` — Второе значение времени, из которого выполняется вычитание (уменьшаемое). [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный параметр. Название часового пояса. Если указано, применяется к `startdate` и `enddate`. Если не указано, используются часовые пояса `startdate` и `enddate`. Если они не совпадают, результат не определён. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает разницу между `enddate` и `startdate`, выраженную в `unit`. [`Int64`](/sql-reference/data-types/int-uint)

**Примеры**

**Вычисление разницы между датами в часах**

```sql title=Query
SELECT dateDiff('hour', toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) AS res
```

```response title=Response
┌─res─┐
│  25 │
└─────┘
```

**Вычисление разницы между датами в разных единицах времени**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    dateDiff('day', s, e) AS day_diff,
    dateDiff('month', s, e) AS month_diff,
    dateDiff('year', s, e) AS year_diff
```

```response title=Response
┌──────────e─┬──────────s─┬─day_diff─┬─month_diff─┬─year_diff─┐
│ 2022-01-01 │ 2021-12-29 │        3 │          1 │         1 │
└────────────┴────────────┴──────────┴────────────┴───────────┘
```


## dateName \{#dateName\}

Появилась в версии: v21.7

Возвращает указанную часть даты.

Возможные значения:

* &#39;year&#39;
* &#39;quarter&#39;
* &#39;month&#39;
* &#39;week&#39;
* &#39;dayofyear&#39;
* &#39;day&#39;
* &#39;weekday&#39;
* &#39;hour&#39;
* &#39;minute&#39;
* &#39;second&#39;

**Синтаксис**

```sql
dateName(date_part, date[, timezone])
```

**Аргументы**

* `date_part` — часть даты, которую нужно извлечь. [`String`](/sql-reference/data-types/string)
* `datetime` — значение даты или даты со временем. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — необязательный. Часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает указанную часть даты. [`String`](/sql-reference/data-types/string)

**Примеры**

**Извлечение различных частей даты**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT
    dateName('year', date_value),
    dateName('month', date_value),
    dateName('day', date_value)
```

```response title=Response
┌─dateName('year', date_value)─┬─dateName('month', date_value)─┬─dateName('day', date_value)─┐
│ 2021                         │ April                         │ 14                          │
└──────────────────────────────┴───────────────────────────────┴─────────────────────────────┘
```

## dateTrunc \{#dateTrunc\}

Добавлена в версии: v20.8

Усекает значение даты и времени до указанной части.

**Синтаксис**

```sql
dateTrunc(unit, datetime[, timezone])
```

**Псевдонимы**: `DATE_TRUNC`

**Аргументы**

* `unit` —
  Тип интервала, до которого будет усечён результат. Аргумент `unit` нечувствителен к регистру.
  | Unit                                         | Совместимость                 |
  | -------------------------------------------- | ----------------------------- |
  | `nanosecond`                                 | Совместим только с DateTime64 |
  | `microsecond`                                | Совместим только с DateTime64 |
  | `millisecond`                                | Совместим только с DateTime64 |
  | `second`                                     |                               |
  | `minute`                                     |                               |
  | `hour`                                       |                               |
  | `day`                                        |                               |
  | `week`                                       |                               |
  | `month`                                      |                               |
  | `quarter`                                    |                               |
  | `year`                                       |                               |
  | [`String`](/sql-reference/data-types/string) |                               |
* `datetime` — Дата и время. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный параметр. Имя часового пояса для возвращаемого значения datetime. Если не указано, функция использует часовой пояс параметра `datetime`. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает усечённое значение даты и времени.

| Аргумент Unit              | Аргумент `datetime`                                 | Возвращаемый тип                                                                        |
| -------------------------- | --------------------------------------------------- | --------------------------------------------------------------------------------------- |
| Year, Quarter, Month, Week | `Date32` или `DateTime64` или `Date` или `DateTime` | [`Date32`](../data-types/date32.md) или [`Date`](../data-types/date.md)                 |
| Day, Hour, Minute, Second  | `Date32`, `DateTime64`, `Date` или `DateTime`       | [`DateTime64`](../data-types/datetime64.md) или [`DateTime`](../data-types/datetime.md) |
| Millisecond, Microsecond,  | Любой                                               | [`DateTime64`](../data-types/datetime64.md)                                             |
| Nanosecond                 |                                                     | с масштабом 3, 6 или 9                                                                  |

**Примеры**

**Усечение без указания часового пояса**

```sql title=Query
SELECT now(), dateTrunc('hour', now());
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now())──┐
│ 2020-09-28 10:40:45 │       2020-09-28 10:00:00 │
└─────────────────────┴───────────────────────────┘
```

**Усечение с указанным часовым поясом**

```sql title=Query
SELECT now(), dateTrunc('hour', now(), 'Asia/Istanbul');
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now(), 'Asia/Istanbul')──┐
│ 2020-09-28 10:46:26 │                        2020-09-28 13:00:00 │
└─────────────────────┴────────────────────────────────────────────┘
```

## formatDateTime \{#formatDateTime\}

Введена в версии v1.1

Форматирует дату или дату со временем в соответствии с заданной строкой формата. `format` — это константное выражение, поэтому вы не можете использовать несколько форматов для одного результирующего столбца.

`formatDateTime` использует стиль формата datetime MySQL, см. [документацию MySQL](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format).

Обратной операцией для этой функции является [`parseDateTime`](/sql-reference/functions/type-conversion-functions#parseDateTime).

Используя подстановочные поля, вы можете задать шаблон для результирующей строки.
Пример столбца в таблице ниже показывает результат форматирования для `2018-01-02 22:33:44`.

**Подстановочные поля:**

| Placeholder | Описание                                                     | Пример     |
| ----------- | ------------------------------------------------------------ | ---------- |
| %a          | сокращённое название дня недели (Mon-Sun)                    | Mon        |
| %b          | сокращённое название месяца (Jan-Dec)                        | Jan        |
| %c          | месяц в виде целого числа (01-12)                            | 01         |
| %C          | год, делённый на 100 и усечённый до целого (00-99)           | 20         |
| %d          | день месяца с ведущим нулём (01-31)                          | 02         |
| %D          | короткий формат даты MM/DD/YY, эквивалентен %m/%d/%y         | 01/02/18   |
| %e          | день месяца с ведущим пробелом (1-31)                        | 2          |
| %f          | дробная часть секунды                                        | 123456     |
| %F          | короткий формат даты YYYY-MM-DD, эквивалентен %Y-%m-%d       | 2018-01-02 |
| %g          | двухзначный формат года, выровненный по ISO 8601             | 18         |
| %G          | четырёхзначный формат года для номера недели ISO             | 2018       |
| %h          | час в 12-часовом формате (01-12)                             | 09         |
| %H          | час в 24-часовом формате (00-23)                             | 22         |
| %i          | минута (00-59)                                               | 33         |
| %I          | час в 12-часовом формате (01-12)                             | 10         |
| %j          | день года (001-366)                                          | 002        |
| %k          | час в 24-часовом формате (00-23)                             | 14         |
| %l          | час в 12-часовом формате (01-12)                             | 09         |
| %m          | месяц в виде целого числа (01-12)                            | 01         |
| %M          | полное название месяца (January-December)                    | January    |
| %n          | символ новой строки                                          |            |
| %p          | обозначение AM или PM                                        | PM         |
| %Q          | квартал (1-4)                                                | 1          |
| %r          | 12-часовой формат времени HH:MM AM/PM, эквивалентен %h:%i %p | 10:30 PM   |
| %R          | 24-часовой формат времени HH:MM, эквивалентен %H:%i          | 22:33      |
| %s          | секунда (00-59)                                              | 44         |
| %S          | секунда (00-59)                                              | 44         |
| %t          | символ горизонтальной табуляции                              |            |
| %T          | формат времени ISO 8601 (HH:MM:SS), эквивалентен %H:%i:%S    | 22:33:44   |
| %u          | день недели ISO 8601 как число, где понедельник = 1 (1-7)    | 2          |
| %V          | номер недели ISO 8601 (01-53)                                | 01         |
| %w          | день недели как целое число, где воскресенье = 0 (0-6)       | 2          |
| %W          | полное название дня недели (Monday-Sunday)                   | Monday     |
| %y          | год, две последние цифры (00-99)                             | 18         |
| %Y          | год                                                          | 2018       |
| %z          | смещение времени от UTC в формате +HHMM или -HHMM            | -0500      |
| %%          | знак %                                                       | %          |

* В версиях ClickHouse ранее v23.4 `%f` выводит один ноль (0), если форматируемое значение имеет тип Date, Date32 или DateTime (у которых нет дробных секунд), или DateTime64 с точностью 0.
* В версиях ClickHouse ранее v25.1 `%f` выводит столько цифр, сколько задано масштабом DateTime64, вместо фиксированных 6 цифр.
* В версиях ClickHouse ранее v23.4 `%M` выводит минуту (00-59) вместо полного названия месяца (January-December).

**Синтаксис**

```sql
formatDateTime(datetime, format[, timezone])
```

**Синонимы**: `DATE_FORMAT`

**Аргументы**


* `datetime` — Дата или дата и время для форматирования. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — Строка формата со строками подстановки. [`String`](/sql-reference/data-types/string)
* `timezone` — Необязательный параметр. Название часового пояса для форматируемого времени. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает значения даты и времени в соответствии с заданным форматом. [`String`](/sql-reference/data-types/string)

**Примеры**

**Форматирование даты со спецификатором года**

```sql title=Query
SELECT formatDateTime(toDate('2010-01-04'), '%g')
```

```response title=Response
┌─formatDateTime(toDate('2010-01-04'), '%g')─┐
│ 10                                         │
└────────────────────────────────────────────┘
```

**Форматирование DateTime64 с дробной частью секунды**

```sql title=Query
SELECT formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')
```

```response title=Response
┌─formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')─┐
│ 1234560                                                             │
└─────────────────────────────────────────────────────────────────────┘
```

**Формат с часовым поясом**

```sql title=Query
SELECT
    now() AS ts,
    time_zone,
    formatDateTime(ts, '%T', time_zone) AS str_tz_time
FROM system.time_zones
WHERE time_zone LIKE 'Europe%'
LIMIT 10
```

```response title=Response
┌──────────────────ts─┬─time_zone─────────┬─str_tz_time─┐
│ 2023-09-08 19:13:40 │ Europe/Amsterdam  │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Andorra    │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Astrakhan  │ 23:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Athens     │ 22:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belfast    │ 20:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belgrade   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Berlin     │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bratislava │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Brussels   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bucharest  │ 22:13:40    │
└─────────────────────┴───────────────────┴─────────────┘
```

## formatDateTimeInJodaSyntax \{#formatDateTimeInJodaSyntax\}

Введена в версии v20.1

Аналогична `formatDateTime`, за исключением того, что форматирует дату и время в стиле Joda вместо стиля MySQL. См. [документацию Joda Time](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html).

Обратная операция для этой функции — [`parseDateTimeInJodaSyntax`](/sql-reference/functions/type-conversion-functions#parseDateTimeInJodaSyntax).

Используя поля подстановки, вы можете задать шаблон для результирующей строки.

**Поля подстановки:**

| Placeholder | Описание                                                   | Представление | Примеры                    |
| ----------- | ---------------------------------------------------------- | ------------- | -------------------------- |
| G           | эра                                                        | текст         | AD                         |
| C           | столетие эпохи (&gt;=0)                                    | число         | 20                         |
| Y           | год эпохи (&gt;=0)                                         | год           | 1996                       |
| x           | год для недельного счёта (пока не поддерживается)          | год           | 1996                       |
| w           | неделя в году по недельному счёту (пока не поддерживается) | число         | 27                         |
| e           | день недели                                                | число         | 2                          |
| E           | день недели                                                | текст         | Tuesday; Tue               |
| y           | год                                                        | год           | 1996                       |
| D           | день года                                                  | число         | 189                        |
| M           | месяц года                                                 | месяц         | July; Jul; 07              |
| d           | день месяца                                                | число         | 10                         |
| a           | половина суток                                             | текст         | PM                         |
| K           | час половины суток (0~11)                                  | число         | 0                          |
| h           | час половины суток (1~12)                                  | число         | 12                         |
| H           | час дня (0~23)                                             | число         | 0                          |
| k           | час дня (1~24)                                             | число         | 24                         |
| m           | минута часа                                                | число         | 30                         |
| s           | секунда минуты                                             | число         | 55                         |
| S           | доля секунды                                               | число         | 978                        |
| z           | часовой пояс                                               | текст         | Eastern Standard Time; EST |
| Z           | смещение часового пояса                                    | зона          | -0800; -0812               |
| &#39;       | экранирование текста                                       | разделитель   |                            |
| &#39;&#39;  | одинарная кавычка                                          | литерал       | &#39;                      |

**Синтаксис**

```sql
formatDateTimeInJodaSyntax(datetime, format[, timezone])
```

**Аргументы**

* `datetime` — дата или дата-время для форматирования. [`DateTime`](/sql-reference/data-types/datetime) или [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — строка формата с полями подстановки в стиле Joda. [`String`](/sql-reference/data-types/string)
* `timezone` — необязательный параметр. Название часового пояса, используемого при форматировании времени. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает значения даты и времени в соответствии с заданным форматом. [`String`](/sql-reference/data-types/string)

**Примеры**

**Форматирование datetime с использованием синтаксиса Joda**

```sql title=Query
SELECT formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')
```

```response title=Response
┌─formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')─┐
│ 2010-01-04 12:34:56                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```


## fromDaysSinceYearZero \{#fromDaysSinceYearZero\}

Добавлена в: v23.11

Для заданного количества дней, прошедших с [1 января 0000 года](https://en.wikipedia.org/wiki/Year_zero), возвращает соответствующую дату в [пролептическом григорианском календаре, определённом стандартом ISO 8601](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar).

Вычисление выполняется так же, как в функции MySQL `FROM_DAYS()`. Результат не определён, если его невозможно представить в пределах типа [Date](../data-types/date.md).

**Синтаксис**

```sql
fromDaysSinceYearZero(days)
```

**Псевдонимы**: `FROM_DAYS`

**Аргументы**

* `days` — количество дней, прошедших с нулевого года. [`UInt32`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает дату, соответствующую количеству дней, прошедших с нулевого года. [`Date`](/sql-reference/data-types/date)

**Примеры**

**Преобразование количества дней с нулевого года в даты**

```sql title=Query
SELECT
fromDaysSinceYearZero(739136) AS date1,
fromDaysSinceYearZero(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```

## fromDaysSinceYearZero32 \{#fromDaysSinceYearZero32\}

Появилась в версии: v23.11

Для заданного количества дней, прошедших с [1 января 0000 года](https://en.wikipedia.org/wiki/Year_zero), возвращает соответствующую дату в [пролептическом григорианском календаре, определённом стандартом ISO 8601](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar).
Вычисление выполняется так же, как в функции MySQL `FROM_DAYS()`. Результат не определён, если его невозможно представить в пределах типа [`Date32`](../data-types/date32.md).

**Синтаксис**

```sql
fromDaysSinceYearZero32(days)
```

**Аргументы**

* `days` — количество дней, прошедших с нулевого года. [`UInt32`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает дату, соответствующую количеству дней, прошедших с нулевого года. [`Date32`](/sql-reference/data-types/date32)

**Примеры**

**Преобразование количества дней, прошедших с нулевого года, в даты**

```sql title=Query
SELECT
fromDaysSinceYearZero32(739136) AS date1,
fromDaysSinceYearZero32(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```

## fromModifiedJulianDay \{#fromModifiedJulianDay\}

Впервые представлена в: v21.1

Преобразует число [модифицированного юлианского дня](https://en.wikipedia.org/wiki/Julian_day#Variants) в дату в [пролептическом григорианском календаре](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar) в текстовом формате `YYYY-MM-DD`. Эта функция поддерживает значения дней от `-678941` до `2973483` (которые соответствуют 0000-01-01 и 9999-12-31 соответственно). Она вызывает исключение, если номер дня выходит за пределы поддерживаемого диапазона.

**Синтаксис**

```sql
fromModifiedJulianDay(day)
```

**Аргументы**

* `day` — номер модифицированного юлианского дня. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает дату в текстовом формате. [`String`](/sql-reference/data-types/string)

**Примеры**

**Преобразование модифицированного юлианского дня в дату**

```sql title=Query
SELECT fromModifiedJulianDay(58849)
```

```response title=Response
┌─fromModifiedJulianDay(58849)─┐
│ 2020-01-01                   │
└──────────────────────────────┘
```

## fromModifiedJulianDayOrNull \{#fromModifiedJulianDayOrNull\}

Добавлена в: v21.1

Аналогична [`fromModifiedJulianDay()`](#fromModifiedJulianDay), но вместо выброса исключений возвращает `NULL`.

**Синтаксис**

```sql
fromModifiedJulianDayOrNull(day)
```

**Аргументы**

* `day` — номер модифицированного юлианского дня (Modified Julian Day). [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает дату в текстовом формате для допустимого аргумента `day`, в противном случае — `null`. [`Nullable(String)`](/sql-reference/data-types/nullable)

**Примеры**

**Преобразование Modified Julian Day в дату с обработкой null**

```sql title=Query
SELECT fromModifiedJulianDayOrNull(58849);
SELECT fromModifiedJulianDayOrNull(60000000); -- некорректный аргумент, возвращает NULL
```

```response title=Response
┌─fromModified⋯Null(58849)─┐
│ 2020-01-01               │
└──────────────────────────┘
┌─fromModified⋯l(60000000)─┐
│ ᴺᵁᴸᴸ                     │
└──────────────────────────┘
```

## fromUTCTimestamp \{#fromUTCTimestamp\}

Добавлена в версии: v22.1

Преобразует значение типа дата или дата со временем из часового пояса UTC в значение типа дата или дата со временем в указанном часовом поясе. Эта функция в основном добавлена для совместимости с Apache Spark и аналогичными фреймворками.

**Синтаксис**

```sql
fromUTCTimestamp(datetime, time_zone)
```

**Псевдонимы**: `from_utc_timestamp`

**Аргументы**

* `datetime` — константное значение даты или даты и времени либо выражение. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — константное строковое значение или выражение, задающее часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает DateTime/DateTime64 в указанном часовом поясе. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Преобразование часового пояса UTC в указанный часовой пояс**

```sql title=Query
SELECT fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00', 3), 'Asia/Shanghai')
```

```response title=Response
┌─fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00',3), 'Asia/Shanghai')─┐
│                                                 2023-03-16 18:00:00.000 │
└─────────────────────────────────────────────────────────────────────────┘
```

## fromUnixTimestamp \{#fromUnixTimestamp\}

Введена в версии: v20.8

Эта функция преобразует Unix-временную метку в календарную дату и время суток.

Её можно вызывать двумя способами:

* Если передан один аргумент типа [`Integer`](../data-types/int-uint.md), функция возвращает значение типа [`DateTime`](../data-types/datetime.md), т.е. ведёт себя так же, как [`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#toDateTime).
* Если переданы два или три аргумента, где первый аргумент — значение типа [`Integer`](../data-types/int-uint.md), [`Date`](../data-types/date.md), [`Date32`](../data-types/date32.md), [`DateTime`](../data-types/datetime.md) или [`DateTime64`](../data-types/datetime64.md), второй аргумент — строка формата-константа, а третий аргумент — необязательная строка часового пояса-константа, функция возвращает значение типа [`String`](../data-types/string.md), т.е. ведёт себя так же, как [`formatDateTime`](#formatDateTime).
  В этом случае используется [стиль форматирования даты и времени MySQL](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format).

**Синтаксис**

```sql
fromUnixTimestamp(timestamp)
fromUnixTimestamp(timestamp[, format[, timezone]])
```

**Псевдонимы**: `FROM_UNIXTIME`

**Аргументы**

* `timestamp` — Unix-метка времени или значение типа дата/дата и время. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — Необязательный параметр. Константная строка формата вывода. [`String`](/sql-reference/data-types/string)
* `timezone` — Необязательный параметр. Константная строка часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает `DateTime` для метки времени при вызове с одним аргументом или `String` при вызове с двумя или тремя аргументами. [`DateTime`](/sql-reference/data-types/datetime) или [`String`](/sql-reference/data-types/string)

**Примеры**

**Преобразование Unix-метки времени в DateTime**

```sql title=Query
SELECT fromUnixTimestamp(423543535)
```

```response title=Response
┌─fromUnixTimestamp(423543535)─┐
│          1983-06-04 10:58:55 │
└──────────────────────────────┘
```

**Преобразование Unix‑метки времени в заданном формате**

```sql title=Query
SELECT fromUnixTimestamp(1234334543, '%Y-%m-%d %R:%S') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 14:42:23 │
└─────────────────────┘
```


## fromUnixTimestampInJodaSyntax \{#fromUnixTimestampInJodaSyntax\}

Введена в версии v23.1

Эта функция преобразует Unix-временную метку в календарную дату и время суток.

Функцию можно вызывать двумя способами:

Если передан один аргумент типа [`Integer`](../data-types/int-uint.md), возвращается значение типа [`DateTime`](../data-types/datetime.md), т.е. функция ведёт себя как [`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#toDateTime).

Если переданы два или три аргумента, где первый аргумент — значение типа [`Integer`](../data-types/int-uint.md), [`Date`](../data-types/date.md), [`Date32`](../data-types/date32.md), [`DateTime`](../data-types/datetime.md) или [`DateTime64`](../data-types/datetime64.md), второй аргумент — константная строка формата, а третий аргумент — необязательная константная строка часового пояса, функция возвращает значение типа [`String`](../data-types/string.md), т.е. ведёт себя как [`formatDateTimeInJodaSyntax`](#formatDateTimeInJodaSyntax). В этом случае используется [стиль формата даты и времени Joda](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html).

**Синтаксис**

```sql
fromUnixTimestampInJodaSyntax(timestamp)
fromUnixTimestampInJodaSyntax(timestamp, format[, timezone])
```

**Аргументы**

* `timestamp` — Unix-метка времени или значение даты/времени. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `format` — Необязательный параметр. Константная строка формата, использующая синтаксис Joda для форматирования вывода. [`String`](/sql-reference/data-types/string)
* `timezone` — Необязательный параметр. Константная строка часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает дату и время при вызове с одним аргументом или строку при вызове с двумя или тремя аргументами. [`DateTime`](/sql-reference/data-types/datetime) или [`String`](/sql-reference/data-types/string)

**Примеры**

**Преобразование Unix-метки времени с использованием формата Joda**

```sql title=Query
SELECT fromUnixTimestampInJodaSyntax(1234334543, 'yyyy-MM-dd HH:mm:ss', 'UTC') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 06:42:23 │
└─────────────────────┘
```


## makeDate \{#makeDate\}

Впервые представлена в версии v22.6

Создаёт значение типа `Date` из одного из следующих наборов аргументов:

* год, месяц и день
* год и порядковый номер дня в году

**Синтаксис**

```sql
makeDate(year, month, day)
makeDate(year, day_of_year)
```

**Аргументы**

* `year` — Год. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `month` — Месяц (1–12). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `day` — День месяца (1–31). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `day_of_year` — Порядковый номер дня в году (1–365). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает значение типа [`Date`](/sql-reference/data-types/date), построенное из переданных аргументов.

**Примеры**

**Дата из года, месяца и дня**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**Дата по году и номеру дня в году**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```

## makeDate32 \{#makeDate32\}

Появилась в версии: v22.6

Создаёт значение типа `Date32` на основе одного из вариантов:

* год, месяц и день
* год и порядковый номер дня в году

**Синтаксис**

```sql
makeDate32(year, month, day)
makeDate32(year, day_of_year)
```

**Аргументы**

* `year` — Год. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `month` — Месяц (1–12). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `day` — День месяца (1–31). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `day_of_year` — День года (1–365). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает значение `Date32`, построенное из переданных аргументов [`Date32`](/sql-reference/data-types/date32)

**Примеры**

**Date32 из года, месяца, дня**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**Date32 из года и номера дня в году**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```

## makeDateTime \{#makeDateTime\}

Добавлена в версии: v22.6

Создаёт значение типа `DateTime` из года, месяца, дня, часа, минуты и секунды с необязательным часовым поясом.

**Синтаксис**

```sql
makeDateTime(year, month, day, hour, minute, second[, timezone])
```

**Аргументы**

* `year` — Год. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `month` — Месяц (1-12). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `day` — День месяца (1-31). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `hour` — Час (0-23). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `minute` — Минута (0-59). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `second` — Секунда (0-59). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `timezone` — Имя часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает значение [`DateTime`](/sql-reference/data-types/datetime), сконструированное из переданных аргументов.

**Примеры**

**DateTime из года, месяца, дня, часа, минуты и секунды**

```sql title=Query
SELECT makeDateTime(2023, 2, 28, 17, 12, 33) AS DateTime;
```

```response title=Response
┌────────────DateTime─┐
│ 2023-02-28 17:12:33 │
└─────────────────────┘
```

## makeDateTime64 \{#makeDateTime64\}

Добавлено в: v22.6

Создаёт значение типа `DateTime64` из года, месяца, дня, часа, минуты, секунды с необязательной долей секунды, точностью и часовым поясом.

**Синтаксис**

```sql
makeDateTime64(year, month, day, hour, minute, second[, fraction[, precision[, timezone]]])
```

**Аргументы**

* `year` — Год. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `month` — Месяц (1–12). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `day` — День месяца (1–31). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `hour` — Час (0–23). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `minute` — Минута (0–59). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `second` — Секунда (0–59). [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `fraction` — Дробная часть секунды. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)
* `precision` — Точность дробной части (0–9). [`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — Имя часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает значение `DateTime64`, сформированное из переданных аргументов. [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**DateTime64 из года, месяца, дня, часа, минуты и секунды**

```sql title=Query
SELECT makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5);
```

```response title=Response
┌─makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5)─┐
│                       2023-05-15 10:30:45.00779 │
└─────────────────────────────────────────────────┘
```

## monthName \{#monthName\}

Впервые представлена в версии: v22.1

Возвращает название месяца в виде строки из значения типа дата или дата и время.

**Синтаксис**

```sql
monthName(datetime)
```

**Аргументы**

* `datetime` — дата или дата со временем. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает название месяца. [`String`](/sql-reference/data-types/string)

**Примеры**

**Получение названия месяца из даты**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT monthName(date_value)
```

```response title=Response
┌─monthName(date_value)─┐
│ April                 │
└───────────────────────┘
```

## now \{#now\}

Введена в версии v1.1

Возвращает текущие дату и время на момент анализа запроса. Функция является константным выражением.

**Синтаксис**

```sql
now([timezone])
```

**Псевдонимы**: `current_timestamp`

**Аргументы**

* `timezone` — Необязательный параметр. Название часового пояса для возвращаемого значения. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает текущие дату и время. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Запрос без часового пояса**

```sql title=Query
SELECT now()
```

```response title=Response
┌───────────────now()─┐
│ 2020-10-17 07:42:09 │
└─────────────────────┘
```

**Запрос с заданным часовым поясом**

```sql title=Query
SELECT now('Asia/Istanbul')
```

```response title=Response
┌─now('Asia/Istanbul')─┐
│  2020-10-17 10:42:23 │
└──────────────────────┘
```

## now64 \{#now64\}

Добавлена в версии: v20.1

Возвращает текущие дату и время с точностью до долей секунды на момент анализа запроса. Функция является константным выражением.

**Синтаксис**

```sql
now64([scale[, timezone]])
```

**Аргументы**

* `scale` — Необязательный аргумент. Шаг дискретизации (точность): 10^-precision секунд. Допустимый диапазон: [0 : 9]. Как правило, используются значения 3 (по умолчанию) (миллисекунды), 6 (микросекунды), 9 (наносекунды). [`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — Необязательный аргумент. Имя часового пояса для возвращаемого значения. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает текущие дату и время с точностью до долей секунды. [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Запрос с точностью по умолчанию и пользовательской точностью**

```sql title=Query
SELECT now64(), now64(9, 'Asia/Istanbul')
```

```response title=Response
┌─────────────────now64()─┬─────now64(9, 'Asia/Istanbul')─┐
│ 2022-08-21 19:34:26.196 │ 2022-08-21 22:34:26.196542766 │
└─────────────────────────┴───────────────────────────────┘
```

## nowInBlock \{#nowInBlock\}

Появилась в версии: v22.8

Возвращает текущие дату и время на момент обработки каждого блока данных. В отличие от функции [`now`](#now), не является константным выражением, и для длительных запросов возвращаемое значение будет различаться в разных блоках.

Эту функцию имеет смысл использовать для генерации текущего времени в длительных запросах `INSERT SELECT`.

**Синтаксис**

```sql
nowInBlock([timezone])
```

**Аргументы**

* `timezone` — Необязательный параметр. Имя часового пояса для возвращаемого значения. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает текущие дату и время на момент обработки каждого блока данных. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Отличие от функции now()**

```sql title=Query
SELECT
    now(),
    nowInBlock(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌───────────────now()─┬────────nowInBlock()─┬─sleep(1)─┐
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:19 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:20 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:21 │        0 │
└─────────────────────┴─────────────────────┴──────────┘
```

## nowInBlock64 \{#nowInBlock64\}

Добавлено в: v25.8

Возвращает текущие дату и время на момент обработки каждого блока данных, в миллисекундах. В отличие от функции [now64](#now64), это выражение не является константным, и возвращаемое значение будет различаться в разных блоках для длительных запросов.

Эту функцию имеет смысл использовать для генерации текущего времени в длительно выполняющихся запросах INSERT SELECT.

**Синтаксис**

```sql
nowInBlock([scale[, timezone]])
```

**Аргументы**

* `scale` — Необязательный параметр. Размер тика (точность): 10^-scale секунд. Допустимый диапазон: [0 : 9]. Обычно используются значения: 3 (по умолчанию, миллисекунды), 6 (микросекунды), 9 (наносекунды). [`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — Необязательный параметр. Название часового пояса для возвращаемого значения. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает текущие дату и время в момент обработки каждого блока данных с субсекундной точностью. [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Отличие от функции now64()**

```sql title=Query
SELECT
    now64(),
    nowInBlock64(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌─────────────────now64()─┬──────────nowInBlock64()─┬─sleep(1)─┐
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:29.534 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:30.535 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:31.535 │        0 │
└─────────────────────────┴─────────────────────────┴──────────┘
```

## serverTimezone \{#serverTimezone\}

Добавлено в: v23.6

Возвращает часовой пояс сервера, т. е. значение настройки [`timezone`](/operations/server-configuration-parameters/settings#timezone).
Если функция выполняется в контексте distributed таблицы, она возвращает обычный столбец со значениями, соответствующими каждому сегменту. В противном случае возвращается константное значение.

**Синтаксис**

```sql
serverTimeZone()
```

**Псевдонимы**: `serverTimeZone`

**Аргументы**

* Нет.

**Возвращаемое значение**

Возвращает часовой пояс сервера в виде [`String`](/sql-reference/data-types/string).

**Примеры**

**Пример использования**

```sql title=Query
SELECT serverTimeZone()
```

```response title=Response
┌─serverTimeZone()─┐
│ UTC              │
└──────────────────┘
```

## subDate \{#subDate\}

Появилась в версии: v23.9

Функция вычитает временной интервал из переданной даты, даты со временем или их строкового представления.
Если в результате вычитания значение выходит за допустимые пределы типа данных, результат не определён.

**Синтаксис**

```sql
subDate(datetime, interval)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой вычитается `interval`. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `interval` — интервал, который вычитается. [`Interval`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает дату или дату со временем, полученную вычитанием `interval` из `datetime`. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычесть интервал из даты**

```sql title=Query
SELECT subDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─subDate(toDate('2018-01-01'), toIntervalYear(3))─┐
│                                       2015-01-01 │
└──────────────────────────────────────────────────┘
```

## subtractDays \{#subtractDays\}

Введена в: v1.1

Вычитает указанное количество дней из даты, даты и времени или строкового представления даты или даты и времени.

**Синтаксис**

```sql
subtractDays(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, от которой вычитается указанное количество дней. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество дней, на которое нужно уменьшить дату. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime` минус `num` дней — значение типа [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание дней из различных типов дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractDays(date, 31) AS subtract_days_with_date,
    subtractDays(date_time, 31) AS subtract_days_with_date_time,
    subtractDays(date_time_string, 31) AS subtract_days_with_date_time_string
```

```response title=Response
┌─subtract_days_with_date─┬─subtract_days_with_date_time─┬─subtract_days_with_date_time_string─┐
│              2023-12-01 │          2023-12-01 00:00:00 │             2023-12-01 00:00:00.000 │
└─────────────────────────┴──────────────────────────────┴─────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─minus(CAST('⋯valDay(10))─┐
│               1998-06-06 │
└──────────────────────────┘
```

## subtractHours \{#subtractHours\}

Добавлено в: v1.1

Вычитает указанное количество часов из даты, даты и времени или даты/даты и времени, представленных в виде строки.

**Синтаксис**

```sql
subtractHours(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой нужно вычесть указанное количество часов. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество часов, которое нужно вычесть. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime` за вычетом `num` часов — [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание часов из значений разных типов даты**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractHours(date, 12) AS subtract_hours_with_date,
    subtractHours(date_time, 12) AS subtract_hours_with_date_time,
    subtractHours(date_time_string, 12) AS subtract_hours_with_date_time_string
```

```response title=Response
┌─subtract_hours_with_date─┬─subtract_hours_with_date_time─┬─subtract_hours_with_date_time_string─┐
│      2023-12-31 12:00:00 │           2023-12-31 12:00:00 │              2023-12-31 12:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─minus(CAST('⋯alHour(10))─┐
│      1998-06-15 14:00:00 │
└──────────────────────────┘
```

## subtractInterval \{#subtractInterval\}

Введена в версии: v22.11

Добавляет отрицательный интервал к другому интервалу или к кортежу интервалов.

Примечание: интервалы одного и того же типа будут объединены в один интервал. Например, если переданы `toIntervalDay(2)` и `toIntervalDay(1)`,
то результатом будет `(1)`, а не `(2,1)`.

**Синтаксис**

```sql
subtractInterval(interval_1, interval_2)
```

**Аргументы**

* `interval_1` — Первый интервал или кортеж интервалов. [`Interval`](/sql-reference/data-types/int-uint) или [`Tuple(Interval)`](/sql-reference/data-types/tuple)
* `interval_2` — Второй интервал, который нужно обратить по знаку. [`Interval`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает кортеж интервалов [`Tuple(T)`](/sql-reference/data-types/tuple)

**Примеры**

**Вычитание интервалов**

```sql title=Query
SELECT subtractInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT subtractInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT subtractInterval(INTERVAL 2 DAY, INTERVAL 1 DAY);
```

```response title=Response
┌─subtractInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,-1)                                                 │
└────────────────────────────────────────────────────────┘
┌─subtractInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,-1)                                                                    │
└─────────────────────────────────────────────────────────────────────────────┘
┌─subtractInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (1)                                                  │
└──────────────────────────────────────────────────────┘
```

## subtractMicroseconds \{#subtractMicroseconds\}

Появилась в версии: v22.6

Вычитает указанное количество микросекунд из даты и времени или строкового представления даты и времени.

**Синтаксис**

```sql
subtractMicroseconds(datetime, num)
```

**Аргументы**

* `datetime` — дата и время, из которых нужно вычесть указанное количество микросекунд. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество микросекунд, которое нужно вычесть. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime` минус `num` микросекунд, результат типа [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание микросекунд из значений различных типов даты и времени**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMicroseconds(date_time, 1000000) AS subtract_microseconds_with_date_time,
    subtractMicroseconds(date_time_string, 1000000) AS subtract_microseconds_with_date_time_string
```

```response title=Response
┌─subtract_microseconds_with_date_time─┬─subtract_microseconds_with_date_time_string─┐
│           2023-12-31 23:59:59.000000 │                  2023-12-31 23:59:59.000000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─minus(CAST('1⋯osecond(10))─┐
│ 1998-06-15 23:59:59.999990 │
└────────────────────────────┘
```

## subtractMilliseconds \{#subtractMilliseconds\}

Добавлена в версии: v22.6

Вычитает указанное количество миллисекунд из даты и времени или строкового представления даты и времени.

**Синтаксис**

```sql
subtractMilliseconds(datetime, num)
```

**Аргументы**

* `datetime` — дата и время, из которых нужно вычесть указанное количество миллисекунд. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество миллисекунд, на которое нужно уменьшить значение. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime` минус `num` миллисекунд типа [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание миллисекунд из различных типов даты и времени**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMilliseconds(date_time, 1000) AS subtract_milliseconds_with_date_time,
    subtractMilliseconds(date_time_string, 1000) AS subtract_milliseconds_with_date_time_string
```

```response title=Response
┌─subtract_milliseconds_with_date_time─┬─subtract_milliseconds_with_date_time_string─┐
│              2023-12-31 23:59:59.000 │                     2023-12-31 23:59:59.000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─minus(CAST('⋯second(10))─┐
│  1998-06-15 23:59:59.990 │
└──────────────────────────┘
```

## subtractMinutes \{#subtractMinutes\}

Добавлена в версии: v1.1

Вычитает указанное количество минут из даты, даты и времени или их строкового представления.

**Синтаксис**

```sql
subtractMinutes(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой нужно вычесть указанное количество минут. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество минут, которое нужно вычесть. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime` за вычетом `num` минут типа [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание минут из значений разных типов даты**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMinutes(date, 30) AS subtract_minutes_with_date,
    subtractMinutes(date_time, 30) AS subtract_minutes_with_date_time,
    subtractMinutes(date_time_string, 30) AS subtract_minutes_with_date_time_string
```

```response title=Response
┌─subtract_minutes_with_date─┬─subtract_minutes_with_date_time─┬─subtract_minutes_with_date_time_string─┐
│        2023-12-31 23:30:00 │             2023-12-31 23:30:00 │                2023-12-31 23:30:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса для INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─minus(CAST('⋯Minute(10))─┐
│      1998-06-15 23:50:00 │
└──────────────────────────┘
```

## subtractMonths \{#subtractMonths\}

Введена в версии v1.1

Вычитает заданное количество месяцев из даты, даты и времени или их строкового представления.

**Синтаксис**

```sql
subtractMonths(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой нужно вычесть указанное количество месяцев. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество месяцев, на которое уменьшается значение `datetime`. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, уменьшенное на `num` месяцев. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание месяцев для разных типов дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMonths(date, 1) AS subtract_months_with_date,
    subtractMonths(date_time, 1) AS subtract_months_with_date_time,
    subtractMonths(date_time_string, 1) AS subtract_months_with_date_time_string
```

```response title=Response
┌─subtract_months_with_date─┬─subtract_months_with_date_time─┬─subtract_months_with_date_time_string─┐
│                2023-12-01 │            2023-12-01 00:00:00 │               2023-12-01 00:00:00.000 │
└───────────────────────────┴────────────────────────────────┴───────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─minus(CAST('⋯lMonth(10))─┐
│               1997-08-16 │
└──────────────────────────┘
```

## subtractNanoseconds \{#subtractNanoseconds\}

Появилась в версии: v20.1

Вычитает заданное количество наносекунд из значения даты и времени или из его строкового представления.

**Синтаксис**

```sql
subtractNanoseconds(datetime, num)
```

**Аргументы**

* `datetime` — дата и время, из которых нужно вычесть заданное количество наносекунд. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество наносекунд, которые нужно вычесть. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime` минус `num` наносекунд в формате [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание наносекунд из значений разных типов даты и времени**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractNanoseconds(date_time, 1000) AS subtract_nanoseconds_with_date_time,
    subtractNanoseconds(date_time_string, 1000) AS subtract_nanoseconds_with_date_time_string
```

```response title=Response
┌─subtract_nanoseconds_with_date_time─┬─subtract_nanoseconds_with_date_time_string─┐
│       2023-12-31 23:59:59.999999000 │              2023-12-31 23:59:59.999999000 │
└─────────────────────────────────────┴────────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 nanosecond)
```

```response title=Response
┌─minus(CAST('19⋯anosecond(10))─┐
│ 1998-06-15 23:59:59.999999990 │
└───────────────────────────────┘
```

## subtractQuarters \{#subtractQuarters\}

Добавлена в: v20.1

Вычитает заданное количество кварталов из даты, даты со временем или их строкового представления.

**Синтаксис**

```sql
subtractQuarters(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой вычитается указанное количество кварталов. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество кварталов, которое нужно вычесть. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, уменьшенное на `num` кварталов. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание кварталов из значений разных типов дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractQuarters(date, 1) AS subtract_quarters_with_date,
    subtractQuarters(date_time, 1) AS subtract_quarters_with_date_time,
    subtractQuarters(date_time_string, 1) AS subtract_quarters_with_date_time_string
```

```response title=Response
┌─subtract_quarters_with_date─┬─subtract_quarters_with_date_time─┬─subtract_quarters_with_date_time_string─┐
│                  2023-10-01 │              2023-10-01 00:00:00 │                 2023-10-01 00:00:00.000 │
└─────────────────────────────┴──────────────────────────────────┴─────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─minus(CAST('1⋯Quarter(10))─┐
│                1996-09-16 │
└───────────────────────────┘
```

## subtractSeconds \{#subtractSeconds\}

Введена в версии: v1.1

Вычитает указанное количество секунд из даты, даты со временем или их строкового представления.

**Синтаксис**

```sql
subtractSeconds(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой вычитается указанное количество секунд. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество секунд, на которое нужно уменьшить значение `datetime`. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime`, уменьшенное на `num` секунд, типа [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64(3)`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание секунд из разных типов дат**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractSeconds(date, 60) AS subtract_seconds_with_date,
    subtractSeconds(date_time, 60) AS subtract_seconds_with_date_time,
    subtractSeconds(date_time_string, 60) AS subtract_seconds_with_date_time_string
```

```response title=Response
┌─subtract_seconds_with_date─┬─subtract_seconds_with_date_time─┬─subtract_seconds_with_date_time_string─┐
│        2023-12-31 23:59:00 │             2023-12-31 23:59:00 │                2023-12-31 23:59:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**Использование альтернативного синтаксиса для INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─minus(CAST('⋯Second(10))─┐
│      1998-06-15 23:59:50 │
└──────────────────────────┘
```

## subtractTupleOfIntervals \{#subtractTupleOfIntervals\}

Появилась в версии: v22.11

Последовательно вычитает кортеж интервалов из даты или даты со временем.

**Синтаксис**

```sql
subtractTupleOfIntervals(datetime, intervals)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой нужно вычесть интервалы. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `intervals` — кортеж интервалов, которые нужно вычесть из `datetime`. [`Tuple(Interval)`](/sql-reference/data-types/tuple)

**Возвращаемое значение**

Возвращает `date` с вычтенными `intervals`. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание кортежа интервалов из даты**

```sql title=Query
WITH toDate('2018-01-01') AS date SELECT subtractTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 YEAR))
```

```response title=Response
┌─subtractTupl⋯alYear(1)))─┐
│               2016-12-31 │
└──────────────────────────┘
```

## subtractWeeks \{#subtractWeeks\}

Появилась в версии: v1.1

Вычитает указанное количество недель из даты, даты и времени или их строкового представления.

**Синтаксис**

```sql
subtractWeeks(datetime, num)
```

**Аргументы**

* `datetime` — Дата или дата со временем, из которой вычитается заданное количество недель. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — Количество недель, на которое нужно уменьшить значение `datetime`. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает значение `datetime`, уменьшенное на `num` недель. Тип результата: [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Вычитание недель из значений разных типов даты**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractWeeks(date, 1) AS subtract_weeks_with_date,
    subtractWeeks(date_time, 1) AS subtract_weeks_with_date_time,
    subtractWeeks(date_time_string, 1) AS subtract_weeks_with_date_time_string
```

```response title=Response
┌─subtract_weeks_with_date─┬─subtract_weeks_with_date_time─┬─subtract_weeks_with_date_time_string─┐
│               2023-12-25 │           2023-12-25 00:00:00 │              2023-12-25 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─minus(CAST('⋯alWeek(10))─┐
│               1998-04-07 │
└──────────────────────────┘
```

## subtractYears \{#subtractYears\}

Добавлена в: v1.1

Вычитает указанное количество лет из даты, даты и времени или их строкового представления.

**Синтаксис**

```sql
subtractYears(datetime, num)
```

**Аргументы**

* `datetime` — дата или дата со временем, из которой вычитается заданное количество лет. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `num` — количество лет, которое нужно вычесть. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает `datetime` минус `num` лет — значение типа [`Date`](/sql-reference/data-types/date), [`Date32`](/sql-reference/data-types/date32), [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64).

**Примеры**

**Вычитание лет из значений разных типов даты**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractYears(date, 1) AS subtract_years_with_date,
    subtractYears(date_time, 1) AS subtract_years_with_date_time,
    subtractYears(date_time_string, 1) AS subtract_years_with_date_time_string
```

```response title=Response
┌─subtract_years_with_date─┬─subtract_years_with_date_time─┬─subtract_years_with_date_time_string─┐
│               2023-01-01 │           2023-01-01 00:00:00 │              2023-01-01 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**Использование альтернативного синтаксиса INTERVAL**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─minus(CAST('⋯alYear(10))─┐
│               1988-06-16 │
└──────────────────────────┘
```

## timeDiff \{#timeDiff\}

Добавлена в версии: v23.4

Возвращает разницу в секундах между двумя датами или датами со значениями времени.
Разница вычисляется как `enddate` - `startdate`.

Эта функция эквивалентна `dateDiff('second', startdate, enddate)`.

Для вычисления разницы во времени в других единицах (часах, днях, месяцах и т. д.) используйте функцию [`dateDiff`](#dateDiff).

**Синтаксис**

```sql
timeDiff(startdate, enddate)
```

**Аргументы**

* `startdate` — Первое значение времени, вычитаемое из второго (вычитаемое). [`Date`](/sql-reference/data-types/date), [`Date32`](/sql-reference/data-types/date32), [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `enddate` — Второе значение времени, из которого выполняется вычитание (уменьшаемое). [`Date`](/sql-reference/data-types/date), [`Date32`](/sql-reference/data-types/date32), [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает разницу между `enddate` и `startdate`, выраженную в секундах. [`Int64`](/sql-reference/data-types/int-uint)

**Примеры**

**Вычисление разницы во времени в секундах**

```sql title=Query
SELECT timeDiff(toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) AS res
```

```response title=Response
┌───res─┐
│ 90000 │
└───────┘
```

**Вычислить разницу во времени и перевести её в часы**

```sql title=Query
SELECT timeDiff(toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) / 3600 AS hours
```

```response title=Response
┌─hours─┐
│    25 │
└───────┘
```

**Эквивалент dateDiff в секундах**

```sql title=Query
SELECT
    timeDiff(toDateTime('2021-12-29'), toDateTime('2022-01-01')) AS time_diff_result,
    dateDiff('second', toDateTime('2021-12-29'), toDateTime('2022-01-01')) AS date_diff_result
```

```response title=Response
┌─time_diff_result─┬─date_diff_result─┐
│           259200 │           259200 │
└──────────────────┴──────────────────┘
```

## timeSlot \{#timeSlot\}

Добавлено в: v1.1

Округляет время до начала получасового интервала.

:::note
Хотя эта функция может принимать значения расширенных типов `Date32` и `DateTime64` в качестве аргумента,
передача времени вне нормального диапазона (с 1970 по 2149 год для `Date` / 2106 для `DateTime`) приведёт к некорректным результатам.
:::

**Синтаксис**

```sql
timeSlot(time[, time_zone])
```

**Аргументы**

* `time` — Время, которое нужно округлить до начала интервала длительностью полчаса. [`DateTime`](/sql-reference/data-types/datetime) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — Необязательный аргумент. Константное значение типа String или выражение, задающее часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает время, округлённое до начала интервала длительностью полчаса. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Округление времени до получасового интервала**

```sql title=Query
SELECT timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))
```

```response title=Response
┌─timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))─┐
│                                2000-01-02 03:00:00 │
└────────────────────────────────────────────────────┘
```

## timeSlots \{#timeSlots\}

Появилась в версии v1.1

Для временного интервала, начинающегося в `StartTime` и продолжающегося `Duration` секунд, функция возвращает массив моментов времени — точки внутри этого интервала, округлённые вниз до шага `Size` в секундах. Параметр `Size` является необязательным и по умолчанию равен 1800 (30 минут).

Это нужно, например, при поиске просмотров страниц в соответствующей сессии.

Для `DateTime64` масштаб (scale) возвращаемого значения может отличаться от масштаба `StartTime`. Берётся наибольший масштаб среди всех переданных аргументов.

**Синтаксис**

```sql
timeSlots(StartTime, Duration[, Size])
```

**Аргументы**

* `StartTime` — начальное время интервала. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `Duration` — длительность интервала в секундах. [`UInt32`](/sql-reference/data-types/int-uint) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `Size` — необязательный параметр. Размер временных слотов в секундах. Значение по умолчанию — 1800 (30 минут). [`UInt32`](/sql-reference/data-types/int-uint) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает массив DateTime/DateTime64 (тип возвращаемого значения соответствует типу `StartTime`). Для DateTime64 масштаб возвращаемого значения может отличаться от масштаба `StartTime` — берётся максимальный масштаб среди всех переданных аргументов. [`Array(DateTime)`](/sql-reference/data-types/array) или [`Array(DateTime64)`](/sql-reference/data-types/array)

**Примеры**

**Создание временных слотов для интервала**

```sql title=Query
SELECT timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600));
SELECT timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299);
SELECT timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))
```

```response title=Response
┌─timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600))─┐
│ ['2012-01-01 12:00:00','2012-01-01 12:30:00']               │
└─────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299)─┐
│ ['1980-12-12 20:56:13','1980-12-12 21:01:12','1980-12-12 21:06:11']     │
└─────────────────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))─┐
│ ['1980-12-12 20:56:13.0000','1980-12-12 21:01:12.0000','1980-12-12 21:06:11.0000']                        │
└───────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## timestamp \{#timestamp\}

Введена в версии: v23.9

Преобразует первый аргумент `expr` в тип [`DateTime64(6)`](/sql-reference/data-types/datetime64).
Если указан второй аргумент `expr_time`, добавляет заданное время к преобразованному значению.

**Синтаксис**

```sql
timestamp(expr[, expr_time])
```

**Аргументы**

* `expr` — дата или дата и время. [`String`](/sql-reference/data-types/string)
* `expr_time` — необязательный параметр. Время, добавляемое к приведённому значению. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает приведённое значение `expr` или `expr` с добавленным временем типа [`DateTime64(6)`](/sql-reference/data-types/datetime64)

**Примеры**

**Преобразование строкового значения даты в DateTime64(6)**

```sql title=Query
SELECT timestamp('2023-12-31') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2023-12-31 00:00:00.000000 │
└────────────────────────────┘
```

**Добавить время к строке даты**

```sql title=Query
SELECT timestamp('2023-12-31 12:00:00', '12:00:00.11') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2024-01-01 00:00:00.110000 │
└────────────────────────────┘
```

## timezone \{#timezone\}

Добавлено в версии: v21.4

Возвращает имя часового пояса текущей сессии или преобразует смещение часового пояса
или имя часового пояса в каноническое имя часового пояса.

**Синтаксис**

```sql
timezone()
```

**Псевдонимы**: `timeZone`

**Аргументы**

* Отсутствуют.

**Возвращаемое значение**

Возвращает каноническое имя часового пояса в виде типа [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT timezone()
```

```response title=Response
┌─timezone()───────┐
│ Europe/Amsterdam │
└──────────────────┘
```

## timezoneOf \{#timezoneOf\}

Впервые появилась в: v21.4

Возвращает название часового пояса для значения [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64).

**Синтаксис**

```sql
timeZoneOf(datetime)
```

**Псевдонимы**: `timeZoneOf`

**Аргументы**

* `datetime` — значение типа [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — необязательный параметр. Имя часового пояса, в который нужно преобразовать часовой пояс значения `datetime`. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает имя часового пояса для `datetime` в формате [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT timezoneOf(now());
```

```response title=Response
┌─timezoneOf(now())─┐
│ Europe/Amsterdam  │
└───────────────────┘
```

## timezoneOffset \{#timezoneOffset\}

Введена в версии v21.6

Возвращает смещение часового пояса в секундах от [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time).
Функция учитывает переход на летнее время и исторические изменения часовых поясов для указанной даты и времени.

**Синтаксис**

```sql
timeZoneOffset(datetime)
```

**Псевдонимы**: `timeZoneOffset`

**Аргументы**

* `datetime` — значение типа `DateTime`, для которого нужно получить смещение часового пояса: [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает смещение относительно UTC в секундах [`Int32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toDateTime('2021-04-21 10:20:30', 'America/New_York') AS Time,
toTypeName(Time) AS Type,
timeZoneOffset(Time) AS Offset_in_seconds,
(Offset_in_seconds / 3600) AS Offset_in_hours;
```

```response title=Response
┌────────────────Time─┬─Type─────────────────────────┬─Offset_in_seconds─┬─Offset_in_hours─┐
│ 2021-04-21 10:20:30 │ DateTime('America/New_York') │            -14400 │              -4 │
└─────────────────────┴──────────────────────────────┴───────────────────┴─────────────────┘
```

## toDayOfMonth \{#toDayOfMonth\}

Появилась в версии v1.1

Возвращает день месяца (1–31) для значения типа `Date` или `DateTime`.

**Синтаксис**

```sql
toDayOfMonth(datetime)
```

**Псевдонимы**: `DAY`, `DAYOFMONTH`

**Аргументы**

* `datetime` — дата или дата и время, из которых нужно получить день месяца. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает номер дня месяца для заданной даты/времени [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                              21 │
└─────────────────────────────────────────────────┘
```

## toDayOfWeek \{#toDayOfWeek\}

Впервые появилась в: v1.1

Возвращает номер дня недели для значения типа `Date` или `DateTime`.

Двухаргументная форма функции `toDayOfWeek()` позволяет указать, начинается ли неделя с понедельника или воскресенья,
а также должно ли возвращаемое значение находиться в диапазоне от 0 до 6 или от 1 до 7.

| Mode | Первый день недели | Диапазон                                       |
| ---- | ------------------ | ---------------------------------------------- |
| 0    | Monday             | 1-7: Monday = 1, Tuesday = 2, ..., Sunday = 7  |
| 1    | Monday             | 0-6: Monday = 0, Tuesday = 1, ..., Sunday = 6  |
| 2    | Sunday             | 0-6: Sunday = 0, Monday = 1, ..., Saturday = 6 |
| 3    | Sunday             | 1-7: Sunday = 1, Monday = 2, ..., Saturday = 7 |

**Синтаксис**

```sql
toDayOfWeek(datetime[, mode[, timezone]])
```

**Псевдонимы**: `DAYOFWEEK`

**Аргументы**

* `datetime` — дата или дата со временем, для которой нужно получить день недели. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `mode` — необязательный параметр. Целое число, задающее режим недели (0–3). По умолчанию — 0, если параметр не указан. [`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — необязательный параметр. Часовой пояс, используемый для преобразования. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает день недели для заданных `Date` или `DateTime` в виде значения типа [`UInt8`](/sql-reference/data-types/int-uint).

**Примеры**

**Пример использования**

```sql title=Query
-- Следующая дата — 21 апреля 2023 года, это была пятница:
SELECT
    toDayOfWeek(toDateTime('2023-04-21')),
    toDayOfWeek(toDateTime('2023-04-21'), 1)
```

```response title=Response
┌─toDayOfWeek(toDateTime('2023-04-21'))─┬─toDayOfWeek(toDateTime('2023-04-21'), 1)─┐
│                                     5 │                                        4 │
└───────────────────────────────────────┴──────────────────────────────────────────┘
```

## toDayOfYear \{#toDayOfYear\}

Появилась в версии: v18.4

Возвращает порядковый номер дня в году (1–366) для значения типа `Date` или `DateTime`.

**Синтаксис**

```sql
toDayOfYear(datetime)
```

**Псевдонимы**: `DAYOFYEAR`

**Аргументы**

* `datetime` — дата или дата и время, для которой требуется получить порядковый номер дня года. [`Date`](/sql-reference/data-types/date), [`Date32`](/sql-reference/data-types/date32), [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает порядковый номер дня года для заданного значения типа Date или DateTime в виде [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toDayOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                            111 │
└────────────────────────────────────────────────┘
```

## toDaysSinceYearZero \{#toDaysSinceYearZero\}

Добавлено в версии: v23.9

Для заданной даты возвращает количество дней, прошедших с [1 января 0000](https://en.wikipedia.org/wiki/Year_zero) в
[пролептическом григорианском календаре, определённом стандартом ISO 8601](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar).

Вычисление совпадает с функцией [`TO_DAYS`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_to-days) в MySQL.

**Синтаксис**

```sql
toDaysSinceYearZero(date[, time_zone])
```

**Псевдонимы**: `TO_DAYS`

**Аргументы**

* `date` — Дата или дата со временем, для которой нужно вычислить количество дней, прошедших с нулевого года. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — Часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает количество дней, прошедших с даты `0000-01-01`. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Вычисление количества дней с нулевого года**

```sql title=Query
SELECT toDaysSinceYearZero(toDate('2023-09-08'))
```

```response title=Response
┌─toDaysSinceYearZero(toDate('2023-09-08')))─┐
│                                     713569 │
└────────────────────────────────────────────┘
```

## toHour \{#toHour\}

Добавлена в версии: v1.1

Возвращает часовую часть (0–23) значения `DateTime` или `DateTime64`.

**Синтаксис**

```sql
toHour(datetime)
```

**Псевдонимы**: `HOUR`

**Аргументы**

* `datetime` — Дата и время, из которых нужно получить час. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает час (0–23) из `datetime`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toHour(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toHour(toDateTime('2023-04-21 10:20:30'))─┐
│                                        10 │
└───────────────────────────────────────────┘
```

## toISOWeek \{#toISOWeek\}

Введена в версии: v20.1

Возвращает номер недели по ISO для даты или даты со временем.

Это функция совместимости, эквивалентная `toWeek(date, 3)`.
ISO‑недели начинаются с понедельника, а первая неделя года — это неделя, содержащая 4 января.
Согласно ISO 8601, номера недель находятся в диапазоне от 1 до 53.

Обратите внимание, что даты вблизи начала или конца года могут возвращать номер недели из предыдущего или следующего года. Например,
29 декабря 2025 года относится к 1‑й неделе, потому что эта дата попадает в первую неделю, которая содержит 4 января 2026 года.

**Синтаксис**

```sql
toISOWeek(datetime[, timezone])
```

**Аргументы**

* `datetime` — дата или дата и время, из которой нужно получить номер ISO‑недели. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — необязательный параметр. Часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает номер ISO‑недели в соответствии со стандартом ISO 8601. Возвращает число от 1 до 53. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение номеров ISO‑недель**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toISOWeek(date) AS isoWeek
```

```response title=Response
┌───────date─┬─isoWeek─┐
│ 2016-12-27 │      52 │
└────────────┴─────────┘
```

**ISO‑неделя может приходиться на другой год**

```sql title=Query
SELECT toDate('2025-12-29') AS date, toISOWeek(date) AS isoWeek, toYear(date) AS year
```

```response title=Response
┌───────date─┬─isoWeek─┬─year─┐
│ 2025-12-29 │       1 │ 2025 │
└────────────┴─────────┴──────┘
```


## toISOYear \{#toISOYear\}

Введена в версии: v18.4

Преобразует дату или дату со временем в номер года по стандарту ISO.

**Синтаксис**

```sql
toISOYear(datetime)
```

**Аргументы**

* `datetime` — Значение с датой или датой и временем. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает исходное значение, преобразованное в номер года по ISO. [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение номера года по ISO из значений даты**

```sql title=Query
SELECT
toISOYear(toDate('2024/10/02')) as year1,
toISOYear(toDateTime('2024-10-02 01:30:00')) as year2
```

```response title=Response
┌─week1─┬─week2─┐
│    40 │    40 │
└───────┴───────┘
```

## toLastDayOfMonth \{#toLastDayOfMonth\}

Впервые представлена в: v1.1

Округляет дату или дату со временем до последнего дня месяца.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toLastDayOfMonth(value)
```

**Псевдонимы**: `LAST_DAY`

**Аргументы**

* `value` — дата или дата со временем, которую необходимо округлить вверх до последнего дня месяца. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает дату последнего дня месяца для заданной даты или даты со временем. [`Date`](/sql-reference/data-types/date)

**Примеры**

**Округление до последнего дня месяца**

```sql title=Query
SELECT toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-30 │
└─────────────────────────────────────────────────────┘
```

## toLastDayOfWeek \{#toLastDayOfWeek\}

Введена в версии: v23.5

Округляет дату или дату со временем до ближайшей субботы или воскресенья.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toLastDayOfWeek(datetime[, mode[, timezone]])
```

**Аргументы**

* `datetime` — дата или дата со временем для преобразования. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `mode` — определяет первый день недели, как описано в функции `toWeek()`. По умолчанию `0`. [`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — необязательный параметр. Часовой пояс, используемый для преобразования. Если не указан, используется часовой пояс сервера. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает дату ближайшей субботы или воскресенья, начиная с указанной даты (включительно), в зависимости от режима. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Округление вверх до ближайшей субботы или воскресенья**

```sql title=Query
SELECT
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')), /* пятница */
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* пятница */
    toLastDayOfWeek(toDate('2023-04-23')), /* воскресенье */
    toLastDayOfWeek(toDate('2023-04-23'), 1) /* воскресенье */
FORMAT Vertical
```

```response title=Response
Строка 1:
──────
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-23
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-22
toLastDayOfWeek(toDate('2023-04-23')):                   2023-04-23
toLastDayOfWeek(toDate('2023-04-23'), 1):                2023-04-23
```

## toMillisecond \{#toMillisecond\}

Добавлена в: v24.2

Возвращает миллисекундную часть (0-999) значения типа `DateTime` или `DateTime64`.

**Синтаксис**

```sql
toMillisecond(datetime)
```

**Псевдонимы**: `MILLISECOND`

**Аргументы**

* `datetime` — дата и время, из которых нужно получить миллисекунду. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает миллисекунду в минуте (0–59) из `datetime`. [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3));
```

```response title=Response
┌──toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3))─┐
│                                                        456 │
└────────────────────────────────────────────────────────────┘
```

## toMinute \{#toMinute\}

Впервые представлен в: v1.1

Возвращает минутную часть (0–59) значения `Date` или `DateTime`.

**Синтаксис**

```sql
toMinute(datetime)
```

**Псевдонимы**: `MINUTE`

**Аргументы**

* `datetime` — значение даты и времени, из которого нужно получить минуту. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает минуту часа (0–59) из `datetime`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toMinute(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMinute(toDateTime('2023-04-21 10:20:30'))─┐
│                                          20 │
└─────────────────────────────────────────────┘
```

## toModifiedJulianDay \{#toModifiedJulianDay\}

Появилась в версии v21.1

Преобразует дату в пролептическом григорианском календаре ([Proleptic Gregorian calendar](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar)) в текстовом формате `YYYY-MM-DD` в число [Modified Julian Day](https://en.wikipedia.org/wiki/Julian_day#Variants) типа `Int32`. Эта функция поддерживает даты от `0000-01-01` до `9999-12-31`. Выбрасывает исключение, если аргумент не удаётся интерпретировать как дату или дата недопустима.

**Синтаксис**

```sql
toModifiedJulianDay(date)
```

**Аргументы**

* `date` — Дата в виде строки. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает число модифицированного юлианского дня. [`Int32`](/sql-reference/data-types/int-uint)

**Примеры**

**Преобразование даты в число модифицированного юлианского дня**

```sql title=Query
SELECT toModifiedJulianDay('2020-01-01')
```

```response title=Response
┌─toModifiedJulianDay('2020-01-01')─┐
│                             58849 │
└───────────────────────────────────┘
```

## toModifiedJulianDayOrNull \{#toModifiedJulianDayOrNull\}

Введена в: v21.1

Аналогична [`toModifiedJulianDay()`](#toModifiedJulianDay), но вместо выброса исключений возвращает `NULL`.

**Синтаксис**

```sql
toModifiedJulianDayOrNull(date)
```

**Аргументы**

* `date` — Дата в текстовом формате. [`String`](/sql-reference/data-types/string) или [`FixedString`](/sql-reference/data-types/fixedstring)

**Возвращаемое значение**

Возвращает номер модифицированного юлианского дня для корректной даты `date`, в противном случае — `null`. [`Nullable(Int32)`](/sql-reference/data-types/nullable)

**Примеры**

**Преобразование даты в модифицированный юлианский день с обработкой значений null**

```sql title=Query
SELECT toModifiedJulianDayOrNull('2020-01-01');
SELECT toModifiedJulianDayOrNull('0000-00-00'); -- недопустимая дата, возвращает NULL
```

```response title=Response
┌─toModifiedJu⋯020-01-01')─┐
│                    58849 │
└──────────────────────────┘
┌─toModifiedJu⋯000-00-00')─┐
│                     ᴺᵁᴸᴸ │
└──────────────────────────┘
```

## toMonday \{#toMonday\}

Добавлена в: v1.1

Округляет дату или дату и время вниз до понедельника той же недели. Возвращает дату.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toMonday(value)
```

**Аргументы**

* `value` — Дата или дата со временем, которую нужно округлить в меньшую сторону до понедельника недели. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает дату понедельника той же недели для указанной даты или даты со временем. [`Date`](/sql-reference/data-types/date)

**Примеры**

**Округление даты в меньшую сторону до понедельника недели**

```sql title=Query
SELECT
toMonday(toDateTime('2023-04-21 10:20:30')), -- Пятница
toMonday(toDate('2023-04-24'));              -- Уже понедельник
```

```response title=Response
┌─toMonday(toDateTime('2023-04-21 10:20:30'))─┬─toMonday(toDate('2023-04-24'))─┐
│                                  2023-04-17 │                     2023-04-24 │
└─────────────────────────────────────────────┴────────────────────────────────┘
```

## toMonth \{#toMonth\}

Добавлена в версии: v1.1

Возвращает номер месяца (1–12) из значения типа `Date` или `DateTime`.

**Синтаксис**

```sql
toMonth(datetime)
```

**Псевдонимы**: `MONTH`

**Аргументы**

* `datetime` — Дата или дата и время, из которой нужно получить месяц. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает месяц из указанной даты/времени в виде значения типа [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          4 │
└────────────────────────────────────────────┘
```

## toMonthNumSinceEpoch \{#toMonthNumSinceEpoch\}

Добавлено в: v25.3

Возвращает количество месяцев, прошедших с 1970 года.

**Синтаксис**

```sql
toMonthNumSinceEpoch(date)
```

**Аргументы**

* `date` — дата или дата и время. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Положительное целое число

**Примеры**

**Пример**

```sql title=Query
SELECT toMonthNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
657
```

## toQuarter \{#toQuarter\}

Появилась в версии: v1.1

Возвращает квартал года (1–4) для заданного значения `Date` или `DateTime`.

**Синтаксис**

```sql
toQuarter(datetime)
```

**Синонимы**: `QUARTER`

**Аргументы**

* `datetime` — дата или дата и время, для которой определяется квартал года. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает квартал года для указанной даты/времени в виде значения типа [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                            2 │
└──────────────────────────────────────────────┘
```

## toRelativeDayNum \{#toRelativeDayNum\}

Появилась в: v1.1

Преобразует дату или дату со временем в количество дней, прошедших с некоторого фиксированного момента в прошлом.
Точная точка отсчёта является деталью реализации, поэтому эта функция не предназначена для самостоятельного использования.
Основное назначение функции — вычисление разницы в днях между двумя датами или датами со временем, например, `toRelativeDayNum(dt1) - toRelativeDayNum(dt2)`.

**Синтаксис**

```sql
toRelativeDayNum(date)
```

**Аргументы**

* `date` — дата или дата со временем. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает количество дней от фиксированной точки отсчёта в прошлом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительных номеров дней**

```sql title=Query
SELECT toRelativeDayNum(toDate('2023-04-01')) - toRelativeDayNum(toDate('2023-01-01'))
```

```response title=Response
┌─minus(toRela⋯3-01-01')))─┐
│                       90 │
└──────────────────────────┘
```

## toRelativeHourNum \{#toRelativeHourNum\}

Введена в версии v1.1

Преобразует дату или дату со временем в количество часов, прошедших с некоторого фиксированного момента в прошлом.
Точная точка во времени является деталью реализации, поэтому эту функцию не предполагается использовать самостоятельно.
Основное назначение функции — вычислять разницу в часах между двумя датами или датами со временем, например, `toRelativeHourNum(dt1) - toRelativeHourNum(dt2)`.

**Синтаксис**

```sql
toRelativeHourNum(date)
```

**Аргументы**

* `date` — Дата или дата и время. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает количество часов, прошедших с фиксированной точки в прошлом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительных значений часа**

```sql title=Query
SELECT toRelativeHourNum(toDateTime('2023-01-01 12:00:00')) - toRelativeHourNum(toDateTime('2023-01-01 00:00:00')) AS hours_difference
```

```response title=Response
┌─hours_difference─┐
│               12 │
└──────────────────┘
```

## toRelativeMinuteNum \{#toRelativeMinuteNum\}

Введена в версии: v1.1

Преобразует дату или дату со временем в количество минут, прошедших с некоторого фиксированного момента в прошлом.
Точный момент времени является деталью реализации, поэтому эту функцию не предполагается использовать самостоятельно, в отрыве от других.
Основное назначение функции — вычисление разницы в минутах между двумя датами или датами со временем, например, `toRelativeMinuteNum(dt1) - toRelativeMinuteNum(dt2)`.

**Синтаксис**

```sql
toRelativeMinuteNum(date)
```

**Аргументы**

* `date` — дата или дата со временем. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает количество минут, прошедших с фиксированной точки отсчёта в прошлом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительных номеров минут**

```sql title=Query
SELECT toRelativeMinuteNum(toDateTime('2023-01-01 00:30:00')) - toRelativeMinuteNum(toDateTime('2023-01-01 00:00:00')) AS minutes_difference
```

```response title=Response
┌─minutes_difference─┐
│                 30 │
└────────────────────┘
```

## toRelativeMonthNum \{#toRelativeMonthNum\}

Появилась в версии: v1.1

Преобразует дату или дату со временем в количество месяцев, прошедших с некоторого фиксированного момента в прошлом.
Точный момент времени является деталью реализации, поэтому эта функция не предназначена для самостоятельного использования.
Основное назначение функции — вычислять разницу в месяцах между двумя датами или датами со временем, например, `toRelativeMonthNum(dt1) - toRelativeMonthNum(dt2)`.

**Синтаксис**

```sql
toRelativeMonthNum(date)
```

**Аргументы**

* `date` — дата или дата со временем. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает количество месяцев от фиксированной точки отсчёта в прошлом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительных номеров месяцев**

```sql title=Query
SELECT toRelativeMonthNum(toDate('2023-04-01')) - toRelativeMonthNum(toDate('2023-01-01')) AS months_difference
```

```response title=Response
┌─months_difference─┐
│                 3 │
└───────────────────┘
```

## toRelativeQuarterNum \{#toRelativeQuarterNum\}

Введена в: v1.1

Преобразует дату или дату со временем в количество кварталов, прошедших с некоторого фиксированного момента в прошлом.
Точная точка во времени является деталью реализации, поэтому эта функция не предназначена для использования сама по себе.
Основное назначение функции — вычислять разницу в кварталах между двумя датами или датами со временем, например, `toRelativeQuarterNum(dt1) - toRelativeQuarterNum(dt2)`.

**Синтаксис**

```sql
toRelativeQuarterNum(date)
```

**Аргументы**

* `date` — дата или дата со временем. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает число кварталов, прошедших с фиксированной точки отсчёта в прошлом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительных номеров кварталов**

```sql title=Query
SELECT toRelativeQuarterNum(toDate('2023-04-01')) - toRelativeQuarterNum(toDate('2023-01-01')) AS quarters_difference
```

```response title=Response
┌─quarters_difference─┐
│                   1 │
└─────────────────────┘
```

## toRelativeSecondNum \{#toRelativeSecondNum\}

Добавлена в версии v1.1

Преобразует дату или дату со временем в количество секунд, прошедших с некоторого фиксированного момента в прошлом.
Точная точка во времени является деталью реализации, поэтому эта функция не предназначена для самостоятельного использования.
Основное назначение функции — вычислять разницу в секундах между двумя датами или датами со временем, например, `toRelativeSecondNum(dt1) - toRelativeSecondNum(dt2)`.

**Синтаксис**

```sql
toRelativeSecondNum(date)
```

**Аргументы**

* `date` — дата или дата со временем. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает количество секунд, прошедших от фиксированной точки отсчёта в прошлом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительных значений секунд**

```sql title=Query
SELECT toRelativeSecondNum(toDateTime('2023-01-01 00:01:00')) - toRelativeSecondNum(toDateTime('2023-01-01 00:00:00')) AS seconds_difference
```

```response title=Response
┌─seconds_difference─┐
│                 60 │
└────────────────────┘
```

## toRelativeWeekNum \{#toRelativeWeekNum\}

Добавлена в: v1.1

Преобразует дату или дату со временем в количество недель, прошедших с некоторого фиксированного момента в прошлом.
Точный момент времени относится к деталям реализации, поэтому эта функция не предназначена для самостоятельного применения.
Основное назначение функции — вычислять разницу в неделях между двумя датами или датами со временем, например, `toRelativeWeekNum(dt1) - toRelativeWeekNum(dt2)`.

**Синтаксис**

```sql
toRelativeWeekNum(date)
```

**Аргументы**

* `date` — дата или дата со временем. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает количество недель, прошедших с фиксированной точки отсчёта в прошлом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительных номеров недель**

```sql title=Query
SELECT toRelativeWeekNum(toDate('2023-01-08')) - toRelativeWeekNum(toDate('2023-01-01')) AS weeks_difference
```

```response title=Response
┌─weeks_difference─┐
│                1 │
└──────────────────┘
```

## toRelativeYearNum \{#toRelativeYearNum\}

Введена в версии: v1.1

Преобразует дату или дату со временем в количество лет, прошедших с некоторого фиксированного момента в прошлом.
Точный момент времени является деталью реализации, поэтому эту функцию не следует использовать
самостоятельно. Основное назначение функции — вычисление разницы в годах между двумя датами или датами со временем, например: `toRelativeYearNum(dt1) - toRelativeYearNum(dt2)`.

**Синтаксис**

```sql
toRelativeYearNum(date)
```

**Аргументы**

* `date` — Дата или дата и время. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает число лет, прошедших с фиксированной точки отсчёта в прошлом. [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение относительного номера года**

```sql title=Query
SELECT toRelativeYearNum('2010-10-01'::DateTime) - toRelativeYearNum('2000-01-01'::DateTime)
```

```response title=Response
┌─minus(toRela⋯ateTime')))─┐
│                       10 │
└──────────────────────────┘
```

## toSecond \{#toSecond\}

Появилась в версии: v1.1

Возвращает компонент секунд (0–59) значения типа `DateTime` или `DateTime64`.

**Синтаксис**

```sql
toSecond(datetime)
```

**Псевдонимы**: `SECOND`

**Аргументы**

* `datetime` — дата и время, из которых нужно получить секунду. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает секунду в минуте (0–59) из `datetime`. [`UInt8`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toSecond(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toSecond(toDateTime('2023-04-21 10:20:30'))─┐
│                                          30 │
└─────────────────────────────────────────────┘
```

## toStartOfDay \{#toStartOfDay\}

Добавлена в версии v1.1

Округляет дату со временем до начала дня.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfDay(datetime)
```

**Аргументы**

* `datetime` — дата или дата со временем, которую нужно округлить. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Возвращаемое значение**

Возвращает дату со временем, округлённую вниз до начала дня. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Округление вниз до начала дня**

```sql title=Query
SELECT toStartOfDay(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfDay(toDateTime('2023-04-21 10:20:30'))─┐
│                             2023-04-21 00:00:00 │
└─────────────────────────────────────────────────┘
```

## toStartOfFifteenMinutes \{#toStartOfFifteenMinutes\}

Добавлена в версии v1.1

Округляет дату и время вниз до начала пятнадцатиминутного интервала.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfFifteenMinutes(datetime)
```

**Аргументы**

* `datetime` — дата или дата со временем для округления. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает дату со временем, округлённую до начала ближайшего пятнадцатиминутного интервала [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример**

```sql title=Query
SELECT
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Строка 1:
──────
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:15:00
```

## toStartOfFiveMinutes \{#toStartOfFiveMinutes\}

Функция появилась в версии: v22.6

Округляет дату и время вниз до начала ближайшего пятиминутного интервала.

:::note
Тип возвращаемого значения можно настроить с помощью настройки [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfFiveMinutes(datetime)
```

**Псевдонимы**: `toStartOfFiveMinute`

**Аргументы**

* `datetime` — дата и время, которые нужно округлить. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает дату и время, округлённые до начала ближайшего пятиминутного интервала — [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример**

```sql title=Query
SELECT
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Строка 1:
──────
toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```

## toStartOfHour \{#toStartOfHour\}

Добавлена в: v1.1

Округляет дату и время вниз до начала часа.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfHour(datetime)
```

**Аргументы**

* `datetime` — Дата и время для округления. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает дату и время, округлённые в меньшую сторону до начала часа. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Округление в меньшую сторону до начала часа**

```sql title=Query
SELECT
    toStartOfHour(toDateTime('2023-04-21 10:20:30'));
```

```response title=Response
┌─────────────────res─┬─toTypeName(res)─┐
│ 2023-04-21 10:00:00 │ DateTime        │
└─────────────────────┴─────────────────┘
```

## toStartOfISOYear \{#toStartOfISOYear\}

Впервые представлена в: v1.1

Округляет дату или дату со временем вниз до первого дня ISO-года, который может отличаться от календарного года. См. [ISO week date](https://en.wikipedia.org/wiki/ISO_week_date).

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfISOYear(value)
```

**Аргументы**

* `value` — дата или дата и время, которые нужно округлить вниз до первого дня ISO‑года. [`Date`](/sql-reference/data-types/date), [`Date32`](/sql-reference/data-types/date32), [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает первый день ISO‑года для указанной даты или даты и времени. [`Date`](/sql-reference/data-types/date)

**Примеры**

**Округление вниз до первого дня ISO‑года**

```sql title=Query
SELECT toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-01-02 │
└─────────────────────────────────────────────────────┘
```

## toStartOfInterval \{#toStartOfInterval\}

Введена в версии: v20.1

Эта функция обобщает другие функции семейства `toStartOf*()` с синтаксисом `toStartOfInterval(date_or_date_with_time, INTERVAL x unit [, time_zone])`.

Например,

* `toStartOfInterval(t, INTERVAL 1 YEAR)` возвращает то же самое, что и `toStartOfYear(t)`,
* `toStartOfInterval(t, INTERVAL 1 MONTH)` возвращает то же самое, что и `toStartOfMonth(t)`,
* `toStartOfInterval(t, INTERVAL 1 DAY)` возвращает то же самое, что и `toStartOfDay(t)`,
* `toStartOfInterval(t, INTERVAL 15 MINUTE)` возвращает то же самое, что и `toStartOfFifteenMinutes(t)`.

Вычисление выполняется относительно определённых опорных моментов времени:

| Interval                                                                                                                                             | Start                  |
| ---------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| YEAR                                                                                                                                                 | year 0                 |
| QUARTER                                                                                                                                              | 1900 Q1                |
| MONTH                                                                                                                                                | 1900 January           |
| WEEK                                                                                                                                                 | 1970, 1st week (01-05) |
| DAY                                                                                                                                                  | 1970-01-01             |
| HOUR                                                                                                                                                 | (*)                    |
| MINUTE                                                                                                                                               | 1970-01-01 00:00:00    |
| SECOND                                                                                                                                               | 1970-01-01 00:00:00    |
| MILLISECOND                                                                                                                                          | 1970-01-01 00:00:00    |
| MICROSECOND                                                                                                                                          | 1970-01-01 00:00:00    |
| NANOSECOND                                                                                                                                           | 1970-01-01 00:00:00    |
| (*) интервалы по часам являются особым случаем: вычисление всегда выполняется относительно 00:00:00 (полуночи) текущих суток. Поэтому полезны только |                        |
| значения часов в диапазоне от 1 до 23.                                                                                                               |                        |

Если указана единица `WEEK`, `toStartOfInterval` предполагает, что недели начинаются с понедельника. Обратите внимание, что такое поведение отличается от поведения функции `toStartOfWeek`, в которой недели по умолчанию начинаются с воскресенья.

Вторая перегрузка эмулирует функцию TimescaleDB `time_bucket()`, а также функцию PostgreSQL `date_bin()`.

**Синтаксис**

```sql
toStartOfInterval(value, INTERVAL x unit[, time_zone])
toStartOfInterval(value, INTERVAL x unit[, origin[, time_zone]])
```

**Псевдонимы**: `time_bucket`, `date_bin`

**Аргументы**

* `value` — Значение даты или даты и времени для округления вниз. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `x` — Числовое значение длины интервала. - `unit` — Единица интервала: YEAR, QUARTER, MONTH, WEEK, DAY, HOUR, MINUTE, SECOND, MILLISECOND, MICROSECOND, NANOSECOND. - `time_zone` — Необязательный параметр. Название часового пояса в виде строки. - `origin` — Необязательный параметр. Начальная точка отсчёта для вычисления (только для второй перегрузки).

**Возвращаемое значение**

Возвращает начало интервала, содержащего исходное значение. [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Базовое округление по интервалам**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-15 14:30:00'), INTERVAL 1 MONTH)
```

```response title=Response
┌─toStartOfInt⋯alMonth(1))─┐
│               2023-01-01 │
└──────────────────────────┘
```

**Использование отправной точки**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-01 14:45:00'), INTERVAL 1 MINUTE, toDateTime('2023-01-01 14:35:30'))
```

```response title=Response
┌─toStartOfInt⋯14:35:30'))─┐
│      2023-01-01 14:44:30 │
└──────────────────────────┘
```

## toStartOfMicrosecond \{#toStartOfMicrosecond\}

Появилась в версии: v22.6

Округляет дату и время вниз до начала микросекунды.

**Синтаксис**

```sql
toStartOfMicrosecond(datetime[, timezone])
```

**Аргументы**

* `datetime` — дата и время. [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — необязательный. Часовой пояс для возвращаемого значения. Если не указан, функция использует часовой пояс параметра `value`. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Исходное значение в формате [`DateTime64`](/sql-reference/data-types/datetime64) с точностью до субмикросекунд

**Примеры**

**Запрос без указания часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64);
```

```response title=Response
┌────toStartOfMicrosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999000 │
└───────────────────────────────┘
```

**Запрос с указанием часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMicrosecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999999000 │
└─────────────────────────────────────────────┘
```

## toStartOfMillisecond \{#toStartOfMillisecond\}

Введена в версии: v22.6

Округляет дату и время вниз до начала миллисекунды.

**Синтаксис**

```sql
toStartOfMillisecond(datetime[, timezone])
```

**Аргументы**

* `datetime` — Дата и время. [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный параметр. Часовой пояс для возвращаемого значения. Если не указан, функция использует часовой пояс параметра `value`. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Исходное значение с субмиллисекундной точностью. [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Запрос без часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64);
```

```response title=Response
┌────toStartOfMillisecond(dt64)─┐
│ 2020-01-01 10:20:30.999000000 │
└───────────────────────────────┘
```

**Запрос с учётом часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMillisecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999000000 │
└─────────────────────────────────────────────┘
```

## toStartOfMinute \{#toStartOfMinute\}

Добавлена в версии: v1.1

Округляет дату и время вниз до начала минуты.

:::note
Тип возвращаемого значения можно настроить с помощью настройки [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfMinute(datetime)
```

**Аргументы**

* `datetime` — Дата и время, которые нужно округлить. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает дату и время, округлённые вниз до начала минуты. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Округление вниз до начала минуты**

```sql title=Query
SELECT
    toStartOfMinute(toDateTime('2023-04-21 10:20:30')),
    toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8))
FORMAT Vertical
```

```response title=Response
Строка 1:
──────
toStartOfMinute(toDateTime('2023-04-21 10:20:30')):           2023-04-21 10:20:00
toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8)): 2023-04-21 10:20:00
```

## toStartOfMonth \{#toStartOfMonth\}

Впервые представлена в: v1.1

Округляет дату или дату‑время вниз до первого дня месяца.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfMonth(value)
```

**Аргументы**

* `value` — дата или дата со временем, которую нужно округлить вниз до первого дня месяца. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает первый день месяца для указанной даты или даты со временем. [`Date`](/sql-reference/data-types/date)

**Примеры**

**Округление вниз до первого дня месяца**

```sql title=Query
SELECT toStartOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                        2023-04-01 │
└───────────────────────────────────────────────────┘
```

## toStartOfNanosecond \{#toStartOfNanosecond\}

Впервые представлена в версии v22.6

Округляет дату и время вниз до начала наносекунды.

**Синтаксис**

```sql
toStartOfNanosecond(datetime[, timezone])
```

**Аргументы**

* `datetime` — Дата и время. [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный параметр. Часовой пояс для возвращаемого значения. Если не указан, функция использует часовой пояс параметра `value`. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Входное значение с наносекундной точностью. [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Запрос без часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64);
```

```response title=Response
┌─────toStartOfNanosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999999 │
└───────────────────────────────┘
```

**Запрос с учётом часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfNanosecond(dt64, 'Asia/Istanbul')─┐
│              2020-01-01 12:20:30.999999999 │
└────────────────────────────────────────────┘
```

## toStartOfQuarter \{#toStartOfQuarter\}

Добавлено в: v1.1

Округляет дату или дату со временем вниз до первого дня квартала. Первым днём квартала является 1 января, 1 апреля, 1 июля или 1 октября.

:::note
Тип возвращаемого значения можно настроить установкой параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfQuarter(value)
```

**Аргументы**

* `value` — Дата или дата со временем, которую нужно округлить вниз до первого дня квартала. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает первый день квартала для заданной даты или даты со временем. [`Date`](/sql-reference/data-types/date)

**Примеры**

**Округление вниз до первого дня квартала**

```sql title=Query
SELECT toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-01 │
└─────────────────────────────────────────────────────┘
```

## toStartOfSecond \{#toStartOfSecond\}

Функция введена в версии: v20.5

Округляет значение даты и времени до начала секунды.

**Синтаксис**

```sql
toStartOfSecond(datetime[, timezone])
```

**Аргументы**

* `datetime` — Дата и время, из которых нужно отбросить доли секунды. [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный параметр. Часовой пояс для возвращаемого значения. Если не указан, функция использует часовой пояс, указанный в параметре `value`. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает исходное значение без долей секунды. [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Запрос без часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64);
```

```response title=Response
┌───toStartOfSecond(dt64)─┐
│ 2020-01-01 10:20:30.000 │
└─────────────────────────┘
```

**Запрос с учётом часового пояса**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfSecond(dt64, 'Asia/Istanbul')─┐
│                2020-01-01 13:20:30.000 │
└────────────────────────────────────────┘
```

## toStartOfTenMinutes \{#toStartOfTenMinutes\}

Появилась в версии: v20.1

Округляет значение даты и времени вниз до начала ближайшего десятиминутного интервала.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfTenMinutes(datetime)
```

**Аргументы**

* `datetime` — дата и время, значение типа [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает дату и время, округлённые до начала ближайшего десятиминутного интервала, в виде значения типа [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример**

```sql title=Query
SELECT
    toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Строка 1:
──────
toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:10:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```

## toStartOfWeek \{#toStartOfWeek\}

Добавлена в версии v20.1

Округляет дату или дату со временем вниз до ближайшего воскресенья или понедельника.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfWeek(datetime[, mode[, timezone]])
```

**Аргументы**

* `datetime` — Дата или дата со временем для преобразования. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `mode` — Определяет первый день недели, как описано в функции `toWeek()`. По умолчанию — `0`. [`UInt8`](/sql-reference/data-types/int-uint)
* `timezone` — Часовой пояс, используемый для преобразования. Если не указан, используется часовой пояс сервера. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает дату ближайшего воскресенья или понедельника, приходящуюся на указанную дату или предшествующую ей, в зависимости от режима [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Округление вниз до ближайшего воскресенья или понедельника**

```sql title=Query
SELECT
        toStartOfWeek(toDateTime('2023-04-21 10:20:30')), /* пятница */
        toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* пятница */
        toStartOfWeek(toDate('2023-04-24')), /* понедельник */
        toStartOfWeek(toDate('2023-04-24'), 1) /* понедельник */
    FORMAT Vertical
```

```response title=Response
Строка 1:
    ──────
    toStartOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-17
    toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-17
    toStartOfWeek(toDate('2023-04-24')):                   2023-04-24
    toStartOfWeek(toDate('2023-04-24'), 1):                2023-04-24
```

## toStartOfYear \{#toStartOfYear\}

Добавлена в: v1.1

Округляет дату или дату со временем вниз до первого дня года. Возвращает дату как объект типа `Date`.

:::note
Тип возвращаемого значения можно настроить с помощью параметра [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::

**Синтаксис**

```sql
toStartOfYear(value)
```

**Аргументы**

* `value` — Дата или дата со временем, которую нужно округлить вниз. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает первый день года для заданной даты/времени в формате [`Date`](/sql-reference/data-types/date)

**Примеры**

**Округление вниз до первого дня года**

```sql title=Query
SELECT toStartOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                       2023-01-01 │
└──────────────────────────────────────────────────┘
```

## toTimeWithFixedDate \{#toTimeWithFixedDate\}

Введена в версии: v1.1

Извлекает временную компоненту из даты или даты со временем.
Возвращаемый результат представляет собой смещение от фиксированной точки во времени, в данный момент `1970-01-02`,
но конкретная точка во времени является деталью реализации и может измениться в будущем.

Поэтому `toTime` не следует использовать самостоятельно.
Основное назначение функции — вычислять разницу во времени между двумя датами или датами со временем, например, `toTime(dt1) - toTime(dt2)`.

**Синтаксис**

```sql
toTime(date[, timezone])
```

**Аргументы**

* `date` — Дата, которую нужно преобразовать во время. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный аргумент. Часовой пояс для возвращаемого значения. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает временную составляющую даты или даты со временем в виде смещения от фиксированной точки во времени (на данный момент выбрана 1970-01-02). [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Вычисление разницы во времени между двумя датами**

```sql title=Query
SELECT toTime('2025-06-15 12:00:00'::DateTime) - toTime('2024-05-10 11:00:00'::DateTime) AS result, toTypeName(result)
```

```response title=Response
┌─result─┬─toTypeName(result)─┐
│   3600 │ Int32              │
└────────┴────────────────────┘
```

## toTimezone \{#toTimezone\}

Добавлена в: v1.1

Преобразует `DateTime` или `DateTime64` в указанную часовую зону.
Внутреннее значение данных (количество секунд Unix) не изменяется.
Изменяются только атрибут часовой зоны значения и его строковое представление.

**Синтаксис**

```sql
toTimeZone(datetime, timezone)
```

**Псевдонимы**: `toTimeZone`

**Аргументы**

* `date` — значение для преобразования. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — имя целевого часового пояса. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает ту же временную метку, что и на входе, но с указанным часовым поясом. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toDateTime('2019-01-01 00:00:00', 'UTC') AS time_utc,
toTypeName(time_utc) AS type_utc,
toInt32(time_utc) AS int32utc,
toTimeZone(time_utc, 'Asia/Yekaterinburg') AS time_yekat,
toTypeName(time_yekat) AS type_yekat,
toInt32(time_yekat) AS int32yekat,
toTimeZone(time_utc, 'US/Samoa') AS time_samoa,
toTypeName(time_samoa) AS type_samoa,
toInt32(time_samoa) AS int32samoa
FORMAT Vertical;
```

```response title=Response
Строка 1:
──────
time_utc:   2019-01-01 00:00:00
type_utc:   DateTime('UTC')
int32utc:   1546300800
time_yekat: 2019-01-01 05:00:00
type_yekat: DateTime('Asia/Yekaterinburg')
int32yekat: 1546300800
time_samoa: 2018-12-31 13:00:00
type_samoa: DateTime('US/Samoa')
int32samoa: 1546300800
```

## toUTCTimestamp \{#toUTCTimestamp\}

Добавлена в: v23.8

Преобразует значение даты или даты и времени из одного часового пояса во временную метку в часовом поясе UTC. Эта функция в основном включена для совместимости с Apache Spark и аналогичными фреймворками.

**Синтаксис**

```sql
toUTCTimestamp(datetime, time_zone)
```

**Псевдонимы**: `to_utc_timestamp`

**Аргументы**

* `datetime` — Константное значение или выражение типа дата или дата и время. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `time_zone` — Константное значение или выражение строкового типа, представляющее часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает дату или дату и время в часовом поясе UTC. [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Примеры**

**Преобразование часового пояса в UTC**

```sql title=Query
SELECT toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')
```

```response title=Response
┌─toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')─┐
│                                     2023-03-15 16:00:00 │
└─────────────────────────────────────────────────────────┘
```

## toUnixTimestamp \{#toUnixTimestamp\}

Добавлено в версии: v1.1

Преобразует `String`, `Date` или `DateTime` в метку времени Unix (количество секунд с `1970-01-01 00:00:00 UTC`) типа `UInt32`.

**Синтаксис**

```sql
toUnixTimestamp(date[, timezone])
```

**Аргументы**

* `date` — значение для преобразования. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64) или [`String`](/sql-reference/data-types/string)
* `timezone` — необязательный параметр. Часовой пояс, используемый для преобразования. Если не указан, используется часовой пояс сервера. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает метку времени Unix. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT
'2017-11-05 08:07:47' AS dt_str,
toUnixTimestamp(dt_str) AS from_str,
toUnixTimestamp(dt_str, 'Asia/Tokyo') AS from_str_tokyo,
toUnixTimestamp(toDateTime(dt_str)) AS from_datetime,
toUnixTimestamp(toDateTime64(dt_str, 0)) AS from_datetime64,
toUnixTimestamp(toDate(dt_str)) AS from_date,
toUnixTimestamp(toDate32(dt_str)) AS from_date32
FORMAT Vertical;
```

```response title=Response
Строка 1:
──────
dt_str:          2017-11-05 08:07:47
from_str:        1509869267
from_str_tokyo:  1509836867
from_datetime:   1509869267
from_datetime64: 1509869267
from_date:       1509840000
from_date32:     1509840000
```

## toWeek \{#toWeek\}

Добавлена в версии: v20.1

Эта функция возвращает номер недели для значения типа `date` или `datetime`. Двухаргументная форма `toWeek()` позволяет указать, начинается ли неделя
в воскресенье или в понедельник, а также должен ли возвращаемый результат находиться в диапазоне от `0` до `53` или от `1` до `53`.

Функция совместимости [`toISOWeek()`](#toWeek) эквивалентна вызову `toWeek(date,3)`.

В следующей таблице описано, как работает аргумент `mode`.

| Mode | Первый день недели | Диапазон | Неделя 1 — это первая неделя ... |
| ---- | ------------------ | -------- | -------------------------------- |
| 0    | Sunday             | 0-53     | с воскресеньем в этом году       |
| 1    | Monday             | 0-53     | с 4 или более днями в этом году  |
| 2    | Sunday             | 1-53     | с воскресеньем в этом году       |
| 3    | Monday             | 1-53     | с 4 или более днями в этом году  |
| 4    | Sunday             | 0-53     | с 4 или более днями в этом году  |
| 5    | Monday             | 0-53     | с понедельником в этом году      |
| 6    | Sunday             | 1-53     | с 4 или более днями в этом году  |
| 7    | Monday             | 1-53     | с понедельником в этом году      |
| 8    | Sunday             | 1-53     | содержащая 1 января              |
| 9    | Monday             | 1-53     | содержащая 1 января              |

Для значений `mode` со смыслом «с 4 или более днями в этом году» недели нумеруются в соответствии с ISO 8601:1988:

* Если неделя, содержащая 1 января, имеет 4 или более дней в новом году, это неделя 1.
* В противном случае это последняя неделя предыдущего года, а следующая неделя — неделя 1.

Для значений `mode` со смыслом «содержит 1 января» неделя, содержащая 1 января, является неделей 1.
Не имеет значения, сколько дней нового года приходится на эту неделю, даже если это был всего один день.
Т. е. если последняя неделя декабря содержит 1 января следующего года, она будет неделей 1 следующего года.

Первый аргумент также может быть задан как [`String`](../data-types/string.md) в формате, поддерживаемом функцией [`parseDateTime64BestEffort()`](type-conversion-functions.md#parseDateTime64BestEffort). Поддержка строковых аргументов существует только по причинам совместимости с MySQL, на которую рассчитывают некоторые сторонние инструменты. Поскольку в будущем поддержка строковых аргументов может быть сделана зависимой от новых настроек совместимости с MySQL и так как разбор строк в целом является медленной операцией, рекомендуется не использовать его.

**Синтаксис**

```sql
toWeek(datetime[, mode[, time_zone]])
```

**Псевдонимы**: `week`

**Аргументы**

* `datetime` — дата или дата со временем, из которой нужно получить номер недели. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)
* `mode` — необязательный параметр. Режим `0`–`9` определяет первый день недели и диапазон номера недели. Значение по умолчанию — `0`.
* `time_zone` — необязательный параметр. Часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает номер недели в соответствии с указанным режимом. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение номеров недель с разными режимами**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toWeek(date) AS week0, toWeek(date,1) AS week1, toWeek(date,9) AS week9
```

```response title=Response
┌───────date─┬─week0─┬─week1─┬─week9─┐
│ 2016-12-27 │    52 │    52 │     1 │
└────────────┴───────┴───────┴───────┘
```


## toYYYYMM \{#toYYYYMM\}

Добавлено в: v1.1

Преобразует дату или дату со временем в число типа `UInt32`, содержащее год и номер месяца (YYYY * 100 + MM).
Принимает второй необязательный аргумент — часовой пояс. Если он указан, часовой пояс должен быть строковой константой.

Эта функция является обратной к функции `YYYYMMDDToDate()`.

**Синтаксис**

```sql
toYYYYMM(datetime[, timezone])
```

**Аргументы**

* `datetime` — дата или дата со временем для преобразования. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — необязательный аргумент. Часовой пояс для преобразования. Если указан, часовой пояс должен быть строковой константой. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает число типа UInt32, содержащее год и номер месяца (YYYY * 100 + MM). [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Преобразование текущей даты в формат YYYYMM**

```sql title=Query
SELECT toYYYYMM(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMM(now(), 'US/Eastern')─┐
│                        202303 │
└───────────────────────────────┘
```

## toYYYYMMDD \{#toYYYYMMDD\}

Добавлена в версии: v1.1

Преобразует дату или дату со временем в число типа `UInt32`, содержащее год, месяц и день (YYYY * 10000 + MM * 100 + DD). Принимает второй необязательный аргумент — часовой пояс. Если он указан, часовой пояс должен быть строковой константой.

**Синтаксис**

```sql
toYYYYMMDD(datetime[, timezone])
```

**Аргументы**

* `datetime` — Дата или дата со временем для преобразования. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — Необязательный параметр. Часовой пояс, используемый для преобразования. Если указан, часовой пояс должен быть строковой константой. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает число типа `UInt32`, содержащее год, месяц и день (YYYY * 10000 + MM * 100 + DD). [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Преобразование текущей даты в формат YYYYMMDD**

```sql title=Query
SELECT toYYYYMMDD(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDD(now(), 'US/Eastern')─┐
│                        20230302 │
└─────────────────────────────────┘
```

## toYYYYMMDDhhmmss \{#toYYYYMMDDhhmmss\}

Введена в: v1.1

Преобразует дату или дату со временем в число типа `UInt64`, содержащее год и номер месяца (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss).
Принимает второй необязательный аргумент — часовой пояс. Если он указан, часовой пояс должен быть строковой константой.

**Синтаксис**

```sql
toYYYYMMDDhhmmss(datetime[, timezone])
```

**Аргументы**

* `datetime` — дата или дата со временем для преобразования. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)
* `timezone` — необязательный параметр. Часовой пояс, используемый при преобразовании. Если он указан, часовой пояс должен быть строковой константой. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает число типа `UInt64`, содержащее год, месяц, день, час, минуту и секунду (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss). [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Преобразование текущей даты и времени в формат YYYYMMDDhhmmss**

```sql title=Query
SELECT toYYYYMMDDhhmmss(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDDhhmmss(now(), 'US/Eastern')─┐
│                        20230302112209 │
└───────────────────────────────────────┘
```

## toYear \{#toYear\}

Добавлена в версии v1.1

Возвращает компонент года (н. э.) значения типа `Date` или `DateTime`.

**Синтаксис**

```sql
toYear(datetime)
```

**Псевдонимы**: `YEAR`

**Аргументы**

* `datetime` — дата или дата и время, из которых нужно получить год. [`Date`](/sql-reference/data-types/date) или [`Date32`](/sql-reference/data-types/date32), или [`DateTime`](/sql-reference/data-types/datetime), или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Возвращает год для заданного значения типов Date или DateTime в виде [`UInt16`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT toYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                     2023  │
└───────────────────────────────────────────┘
```

## toYearNumSinceEpoch \{#toYearNumSinceEpoch\}

Добавлена в версии: v25.3

Возвращает количество лет, прошедших с 1970 года.

**Синтаксис**

```sql
toYearNumSinceEpoch(date)
```

**Аргументы**

* `date` — Дата или дата и время для преобразования. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`DateTime64`](/sql-reference/data-types/datetime64)

**Возвращаемое значение**

Целое положительное число

**Примеры**

**Пример**

```sql title=Query
SELECT toYearNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
54
```

## toYearWeek \{#toYearWeek\}

Введена в: v20.1

Возвращает год и номер недели для даты. Год в результате может отличаться от года в аргументе даты для первой и последней недели года.

Аргумент `mode` работает так же, как аргумент `mode` у функции [`toWeek()`](/sql-reference/functions/date-time-functions#toWeek).

Предупреждение: номер недели, возвращаемый `toYearWeek()`, может отличаться от номера, который возвращает `toWeek()`. Функция `toWeek()` всегда возвращает номер недели в контексте указанного года, и если `toWeek()` возвращает `0`, `toYearWeek()` возвращает значение, соответствующее последней неделе предыдущего года. См. `prev_yearWeek` в примере ниже.

Первый аргумент также может быть передан как [`String`](../data-types/string.md) в формате, поддерживаемом [`parseDateTime64BestEffort()`](type-conversion-functions.md#parseDateTime64BestEffort). Поддержка строковых аргументов существует только по причинам совместимости с MySQL, которой ожидают некоторые сторонние инструменты. Поскольку в будущем поддержка строковых аргументов может быть сделана зависящей от новых настроек совместимости с MySQL, а разбор строк в целом является медленным, рекомендуется не использовать его.

**Синтаксис**

```sql
toYearWeek(datetime[, mode[, timezone]])
```

**Псевдонимы**: `yearweek`

**Аргументы**

* `datetime` — дата или дата и время, для которой нужно получить год и номер недели. [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)
* `mode` — необязательный параметр. Режим `0`–`9` определяет первый день недели и диапазон номеров недель. По умолчанию `0`.
* `timezone` — необязательный параметр. Часовой пояс. [`String`](/sql-reference/data-types/string)

**Возвращаемое значение**

Возвращает год и номер недели в виде одного целочисленного значения. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Получение комбинаций год-неделя с различными режимами**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toYearWeek(date) AS yearWeek0, toYearWeek(date,1) AS yearWeek1, toYearWeek(date,9) AS yearWeek9, toYearWeek(toDate('2022-01-01')) AS prev_yearWeek
```

```response title=Response
┌───────date─┬─yearWeek0─┬─yearWeek1─┬─yearWeek9─┬─prev_yearWeek─┐
│ 2016-12-27 │    201652 │    201652 │    201701 │        202152 │
└────────────┴───────────┴───────────┴───────────┴───────────────┘
```


## today \{#today\}

Добавлена в v1.1

Возвращает текущую дату на момент анализа запроса. То же, что `toDate(now())`.

**Синтаксис**

```sql
today()
```

**Псевдонимы**: `curdate`, `current_date`

**Аргументы**

* Отсутствуют.

**Возвращаемое значение**

Возвращает текущую дату [`Date`](/sql-reference/data-types/date)

**Примеры**

**Пример использования**

```sql title=Query
SELECT today() AS today, curdate() AS curdate, current_date() AS current_date FORMAT Pretty
```

```response title=Response
┏━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━┓
┃      today ┃    curdate ┃ current_date ┃
┡━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━┩
│ 2025-03-03 │ 2025-03-03 │   2025-03-03 │
└────────────┴────────────┴──────────────┘
```

## yesterday \{#yesterday\}

Введена в: v1.1

Не принимает аргументов и возвращает вчерашнюю дату на одном из этапов анализа запроса.

**Синтаксис**

```sql
yesterday()
```

**Аргументы**

* Нет.

**Возвращаемое значение**

Возвращает дату за вчерашний день. [`Date`](/sql-reference/data-types/date)

**Примеры**

**Получение вчерашней даты**

```sql title=Query
SELECT yesterday();
SELECT today() - 1;
```

```response title=Response
┌─yesterday()─┐
│  2025-06-09 │
└─────────────┘
┌─minus(today(), 1)─┐
│        2025-06-09 │
└───────────────────┘
```

{/*AUTOGENERATED_END*/ }
