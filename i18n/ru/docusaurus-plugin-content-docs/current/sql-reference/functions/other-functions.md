---
description: 'Документация по категории функций «Прочие»'
sidebar_label: 'Прочие'
slug: /sql-reference/functions/other-functions
title: 'Прочие функции'
doc_type: 'reference'
---

import ExperimentalBadge from '@theme/badges/ExperimentalBadge';
import CloudNotSupportedBadge from '@theme/badges/CloudNotSupportedBadge';
import DeprecatedBadge from '@theme/badges/DeprecatedBadge';

# Другие функции {#other-functions}

:::note
Приведённая ниже документация по функциям сгенерирована из системной таблицы `system.functions`.
:::

{/* 
  Внутреннее содержимое приведённых ниже тегов заменяется на этапе сборки фреймворка документации
  документацией, сгенерированной на основе system.functions. Пожалуйста, не изменяйте и не удаляйте эти теги.
  См.: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

## FQDN {#FQDN}

Введена в версии: v20.1

Возвращает полное доменное имя сервера ClickHouse.

**Синтаксис**

```sql
fqdn()
```

**Псевдонимы**: `fullHostName`

**Аргументы**

* Нет.

**Возвращаемое значение**

Возвращает полное доменное имя (FQDN) сервера ClickHouse. [`String`](/sql-reference/data-types/string)

**Примеры**

**Пример использования**

```sql title=Query
SELECT fqdn()
```

```response title=Response
┌─FQDN()──────────────────────────┐
│ clickhouse.us-east-2.internal │
└─────────────────────────────────┘
```



## MACNumToString {#MACNumToString}

Introduced in: v1.1


Interprets a [`UInt64`](/sql-reference/data-types/int-uint) number as a MAC address in big endian format.
Returns the corresponding MAC address in format `AA:BB:CC:DD:EE:FF` (colon-separated numbers in hexadecimal form) as string.
    

**Syntax**

```sql
MACNumToString(num)
```

**Arguments**

- `num` — UInt64 number. [`UInt64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns a MAC address in format AA:BB:CC:DD:EE:FF. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT MACNumToString(149809441867716) AS mac_address;
```

```response title=Response
┌─mac_address───────┐
│ 88:00:11:22:33:44 │
└───────────────────┘
```



## MACStringToNum {#MACStringToNum}

Introduced in: v1.1


The inverse function of MACNumToString. If the MAC address has an invalid format, it returns 0.


**Syntax**

```sql
MACStringToNum(s)
```

**Arguments**

- `s` — MAC address string. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns a UInt64 number. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT MACStringToNum('01:02:03:04:05:06') AS mac_numeric;
```

```response title=Response
1108152157446
```



## MACStringToOUI {#MACStringToOUI}

Introduced in: v1.1


Given a MAC address in format AA:BB:CC:DD:EE:FF (colon-separated numbers in hexadecimal form), returns the first three octets as a UInt64 number. If the MAC address has an invalid format, it returns 0.
    

**Syntax**

```sql
MACStringToOUI(s)
```

**Arguments**

- `s` — MAC address string. [`String`](/sql-reference/data-types/string)


**Returned value**

First three octets as UInt64 number. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT MACStringToOUI('00:50:56:12:34:56') AS oui;
```

```response title=Response
20566
```



## __applyFilter {#__applyFilter}

Introduced in: v25.10

Special function for JOIN runtime filtering.

**Syntax**

```sql
__applyFilter(filter_name, key)
```

**Arguments**

- `filter_name` — Internal name of runtime filter. It is built by BuildRuntimeFilterStep. [`String`](/sql-reference/data-types/string)
- `key` — Value of any type that is checked to be present in the filter 

**Returned value**

False if the key should be filtered [`Bool`](/sql-reference/data-types/boolean)

**Examples**

**Example**

```sql title=Query
Эта функция не предназначена для использования в пользовательских запросах. Она может быть добавлена в план запроса на этапе оптимизации.
```

```response title=Response
```



## __patchPartitionID {#__patchPartitionID}

Introduced in: v25.5


Internal function. Receives the name of a part and a hash of patch part's column names. Returns the name of partition of patch part. The argument must be a correct name of part, the behaviour is undefined otherwise.
        

**Syntax**

```sql
```

**Arguments**

- None.

**Returned value**



**Examples**



## authenticatedUser {#authenticatedUser}

Introduced in: v25.11


If the session user has been switched using the EXECUTE AS command, this function returns the name of the original user that was used for authentication and creating the session.
Alias: authUser()
        

**Syntax**

```sql
authenticatedUser()
```

**Aliases**: `authUser`

**Arguments**

- None.

**Returned value**

The name of the authenticated user. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
EXECUTE as u1;
            SELECT currentUser(), authenticatedUser();
```

```response title=Response
┌─currentUser()─┬─authenticatedUser()─┐
│ u1            │ default             │
└───────────────┴─────────────────────┘
```



## bar {#bar}

Introduced in: v1.1


Builds a bar chart.
Draws a band with width proportional to (x - min) and equal to width characters when x = max.
The band is drawn with accuracy to one eighth of a symbol.


**Syntax**

```sql
bar(x, min, max[, width])
```

**Arguments**

- `x` — Size to display. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `min` — The minimum value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `max` — The maximum value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `width` — Optional. The width of the bar in characters. The default is `80`. [`const (U)Int*`](/sql-reference/data-types/int-uint) or [`const Float*`](/sql-reference/data-types/float) or [`const Decimal`](/sql-reference/data-types/decimal)


**Returned value**

Returns a unicode-art bar string. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT
toHour(EventTime) AS h,
count() AS c,
bar(c, 0, 600000, 20) AS bar
FROM test.hits
GROUP BY h
ORDER BY h ASC
```

```response title=Response
┌──h─┬──────c─┬─bar────────────────┐
│  0 │ 292907 │ █████████▋         │
│  1 │ 180563 │ ██████             │
│  2 │ 114861 │ ███▋               │
│  3 │  85069 │ ██▋                │
│  4 │  68543 │ ██▎                │
│  5 │  78116 │ ██▌                │
│  6 │ 113474 │ ███▋               │
│  7 │ 170678 │ █████▋             │
│  8 │ 278380 │ █████████▎         │
│  9 │ 391053 │ █████████████      │
│ 10 │ 457681 │ ███████████████▎   │
│ 11 │ 493667 │ ████████████████▍  │
│ 12 │ 509641 │ ████████████████▊  │
│ 13 │ 522947 │ █████████████████▍ │
│ 14 │ 539954 │ █████████████████▊ │
│ 15 │ 528460 │ █████████████████▌ │
│ 16 │ 539201 │ █████████████████▊ │
│ 17 │ 523539 │ █████████████████▍ │
│ 18 │ 506467 │ ████████████████▊  │
│ 19 │ 520915 │ █████████████████▎ │
│ 20 │ 521665 │ █████████████████▍ │
│ 21 │ 542078 │ ██████████████████ │
│ 22 │ 493642 │ ████████████████▍  │
│ 23 │ 400397 │ █████████████▎     │
└────┴────────┴────────────────────┘
```



## blockNumber {#blockNumber}

Introduced in: v1.1


Returns a monotonically increasing sequence number of the [block](../../development/architecture.md#block) containing the row.
The returned block number is updated on a best-effort basis, i.e. it may not be fully accurate.
    

**Syntax**

```sql
blockNumber()
```

**Arguments**

- None.

**Returned value**

Sequence number of the data block where the row is located. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Basic usage**

```sql title=Query
SELECT blockNumber()
FROM
(
    SELECT *
    FROM system.numbers
    LIMIT 10
) SETTINGS max_block_size = 2
```

```response title=Response
┌─blockNumber()─┐
│             7 │
│             7 │
└───────────────┘
┌─blockNumber()─┐
│             8 │
│             8 │
└───────────────┘
┌─blockNumber()─┐
│             9 │
│             9 │
└───────────────┘
┌─blockNumber()─┐
│            10 │
│            10 │
└───────────────┘
┌─blockNumber()─┐
│            11 │
│            11 │
└───────────────┘
```



## blockSerializedSize {#blockSerializedSize}

Introduced in: v20.3


Returns the uncompressed size in bytes of a block of values on disk.


**Syntax**

```sql
blockSerializedSize(x1[, x2[, ...]])
```

**Arguments**

- `x1[, x2, ...]` — Any number of values for which to get the uncompressed size of the block. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the number of bytes that will be written to disk for a block of values without compression. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT blockSerializedSize(maxState(1)) AS x;
```

```response title=Response
┌─x─┐
│ 2 │
└───┘
```



## blockSize {#blockSize}

Introduced in: v1.1


In ClickHouse, queries are processed in [blocks](/development/architecture#block) (chunks).
This function returns the size (row count) of the block the function is called on.
    

**Syntax**

```sql
blockSize()
```

**Arguments**

- None.

**Returned value**

Returns the number of rows in the current block. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT blockSize()
FROM system.numbers LIMIT 5
```

```response title=Response
┌─blockSize()─┐
│           5 │
│           5 │
│           5 │
│           5 │
│           5 │
└─────────────┘
```



## byteSize {#byteSize}

Introduced in: v21.1


Returns an estimation of the uncompressed byte size of its arguments in memory.
For `String` arguments, the function returns the string length + 8 (length).
If the function has multiple arguments, the function accumulates their byte sizes.
    

**Syntax**

```sql
buildId()
```

**Arguments**

- `arg1[, arg2, ...]` — Values of any data type for which to estimate the uncompressed byte size. [`Any`](/sql-reference/data-types)


**Returned value**

Returns an estimation of the byte size of the arguments in memory. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT buildId()
```

```response title=Response
┌─buildId()────────────────────────────────┐
│ AB668BEF095FAA6BD26537F197AC2AF48A927FB4 │
└──────────────────────────────────────────┘
```

**Multiple arguments**

```sql
byteSize(arg1[, arg2, ...])
```

```sql title=Query
SELECT byteSize('string')
```



## catboostEvaluate {#catboostEvaluate}

Introduced in: v22.9


Evaluate an external catboost model. [CatBoost](https://catboost.ai) is an open-source gradient boosting library developed by Yandex for machine learning.
Accepts a path to a catboost model and model arguments (features).

**Prerequisites**

1. Build the catboost evaluation library

Before evaluating catboost models, the `libcatboostmodel.<so|dylib>` library must be made available. See [CatBoost documentation](https://catboost.ai/docs/concepts/c-plus-plus-api_dynamic-c-pluplus-wrapper.html) how to compile it.

Next, specify the path to `libcatboostmodel.<so|dylib>` in the clickhouse configuration:

```response title=Response
┌─byteSize('string')─┐
│                 15 │
└────────────────────┘
```

For security and isolation reasons, the model evaluation does not run in the server process but in the clickhouse-library-bridge process.
At the first execution of `catboostEvaluate()`, the server starts the library bridge process if it is not running already. Both processes
communicate using a HTTP interface. By default, port `9012` is used. A different port can be specified as follows - this is useful if port
`9012` is already assigned to a different service.

```sql title=Query
SELECT byteSize(NULL, 1, 0.3, '')
```

2. Train a catboost model using libcatboost

See [Training and applying models](https://catboost.ai/docs/features/training.html#training) for how to train catboost models from a training data set.


**Syntax**

```response title=Response
┌─byteSize(NULL, 1, 0.3, '')─┐
│                         19 │
└────────────────────────────┘
```

**Arguments**

- `path_to_model` — Path to catboost model. [`const String`](/sql-reference/data-types/string)
- `feature` — One or more model features/arguments. [`Float*`](/sql-reference/data-types/float)


**Returned value**

Returns the model evaluation result. [`Float64`](/sql-reference/data-types/float)

**Examples**

**catboostEvaluate**

```xml
<clickhouse>
...
    <catboost_lib_path>/path/to/libcatboostmodel.so</catboost_lib_path>
...
</clickhouse>
```

```xml
<library_bridge>
    <port>9019</port>
</library_bridge>
```



## colorOKLCHToSRGB {#colorOKLCHToSRGB}

Introduced in: v25.7


Converts a colour from the **OKLCH** perceptual colour space to the familiar **sRGB** colour space.

If `L` is outside the range `[0...1]`, `C` is negative, or `H` is outside the range `[0...360]`, the result is implementation-defined.

:::note
**OKLCH** is a cylindrical version of the OKLab colour space.
It's three coordinates are `L` (the lightness in the range `[0...1]`), `C` (chroma `>= 0`) and `H` (hue in degrees  from `[0...360]`)**.
OKLab/OKLCH is designed to be perceptually uniform while remaining cheap to compute.
:::

The conversion is the inverse of [`colorSRGBToOKLCH`](#colorSRGBToOKLCH):

1) OKLCH to OKLab.
2) OKLab to Linear sRGB
3) Linear sRGB to sRGB

The second argument gamma is used at the last stage.

For references of colors in OKLCH space, and how they correspond to sRGB colors please see [https://oklch.com/](https://oklch.com/).
    

**Syntax**

```sql
catboostEvaluate(path_to_model, feature_1[, feature_2, ..., feature_n])
```

**Arguments**

- `tuple` — A tuple of three numeric values `L`, `C`, `H`, where `L` is in the range `[0...1]`, `C >= 0` and `H` is in the range `[0...360]`. [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)
- `gamma` — Optional. The exponent that is used to transform linear sRGB back to sRGB by applying `(x ^ (1 / gamma)) * 255` for each channel `x`. Defaults to `2.2`. [`Float64`](/sql-reference/data-types/float)


**Returned value**

Returns a tuple (R, G, B) representing sRGB color values. [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)

**Examples**

**Convert OKLCH to sRGB**

```sql title=Query
SELECT catboostEvaluate('/root/occupy.bin', Temperature, Humidity, Light, CO2, HumidityRatio) AS prediction FROM occupancy LIMIT 1
```

```response title=Response
4.695691092573497
```



## colorSRGBToOKLCH {#colorSRGBToOKLCH}

Introduced in: v25.7


Converts a colour encoded in the **sRGB** colour space to the perceptually uniform **OKLCH** colour space.

If any input channel is outside `[0...255]` or the gamma value is non-positive, the behaviour is implementation-defined.

:::note
**OKLCH** is a cylindrical version of the OKLab colour space.
It's three coordinates are `L` (the lightness in the range `[0...1]`), `C` (chroma `>= 0`) and `H` (the hue in degrees from `[0...360]`).
OKLab/OKLCH is designed to be perceptually uniform while remaining cheap to compute.
:::

The conversion consists of three stages:
1) sRGB to Linear sRGB
2) Linear sRGB to OKLab
3) OKLab to OKLCH.


For references of colors in the OKLCH space, and how they correspond to sRGB colors, please see [https://OKLCH.com/](https://OKLCH.com/).
    

**Syntax**

```sql
colorOKLCHToSRGB(tuple [, gamma])
```

**Arguments**

- `tuple` — Tuple of three values R, G, B in the range `[0...255]`. [`Tuple(UInt8, UInt8, UInt8)`](/sql-reference/data-types/tuple)
- `gamma` — Optional. Exponent that is used to linearize sRGB by applying `(x / 255)^gamma` to each channel `x`. Defaults to `2.2`. [`Float64`](/sql-reference/data-types/float)


**Returned value**

Returns a tuple (L, C, H) representing the OKLCH color space values. [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)

**Examples**

**Convert sRGB to OKLCH**

```sql title=Query
SELECT colorOKLCHToSRGB((0.4466, 0.0991, 45.44), 2.2) AS rgb
WITH colorOKLCHToSRGB((0.7, 0.1, 54)) as t SELECT tuple(toUInt8(t.1), toUInt8(t.2), toUInt8(t.3)) AS RGB
```

```response title=Response
┌─rgb──────────────────────────────────────────────────────┐
│ (127.03349738778945,66.06672044472008,37.11802592155851) │
└──────────────────────────────────────────────────────────┘
┌─RGB──────────┐
│ (205,139,97) │
└──────────────┘
```



## connectionId {#connectionId}

Introduced in: v21.3


Returns the connection ID of the client that submitted the current query.
This function is most useful in debugging scenarios.
It was created for compatibility with MySQL's `CONNECTION_ID` function.
It is not typically used in production queries.


**Syntax**

```sql
colorSRGBToOKLCH(tuple[, gamma])
```

**Arguments**

- None.

**Returned value**

Returns the connection ID of the current client. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT colorSRGBToOKLCH((128, 64, 32), 2.2) AS lch
```

```response title=Response
┌─lch─────────────────────────────────────────────────────────┐
│ (0.4436238384931984,0.10442699545678624,45.907345481930236) │
└─────────────────────────────────────────────────────────────┘
```



## countDigits {#countDigits}

Introduced in: v20.8


Returns the number of decimal digits needed to represent a value.

:::note
This function takes into account the scales of decimal values i.e., it calculates the result over the underlying integer type which is `(value * scale)`.

For example:
- `countDigits(42) = 2`
- `countDigits(42.000) = 5`
- `countDigits(0.04200) = 4`
:::

:::tip
You can check decimal overflow for `Decimal64` with `countDigits(x) > 18`,
although it is slower than [`isDecimalOverflow`](#isDecimalOverflow).
:::


**Syntax**

```sql
connectionId()
```

**Arguments**

- `x` — An integer or decimal value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal)


**Returned value**

Returns the number of digits needed to represent `x`. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT connectionId();
```

```response title=Response
┌─connectionId()─┐
│              0 │
└────────────────┘
```



## currentDatabase {#currentDatabase}

Introduced in: v1.1


Returns the name of the current database.
Useful in table engine parameters of `CREATE TABLE` queries where you need to specify the database.

Also see the [`SET` statement](/sql-reference/statements/use).
    

**Syntax**

```sql
countDigits(x)
```

**Aliases**: `current_database`, `SCHEMA`, `DATABASE`

**Arguments**

- None.

**Returned value**

Returns the current database name. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT countDigits(toDecimal32(1, 9)), countDigits(toDecimal32(-1, 9)),
       countDigits(toDecimal64(1, 18)), countDigits(toDecimal64(-1, 18)),
       countDigits(toDecimal128(1, 38)), countDigits(toDecimal128(-1, 38));
```

```response title=Response
┌─countDigits(toDecimal32(1, 9))─┬─countDigits(toDecimal32(-1, 9))─┬─countDigits(toDecimal64(1, 18))─┬─countDigits(toDecimal64(-1, 18))─┬─countDigits(toDecimal128(1, 38))─┬─countDigits(toDecimal128(-1, 38))─┐
│                             10 │                              10 │                              19 │                               19 │                               39 │                                39 │
└────────────────────────────────┴─────────────────────────────────┴─────────────────────────────────┴──────────────────────────────────┴──────────────────────────────────┴───────────────────────────────────┘
```



## currentProfiles {#currentProfiles}

Introduced in: v21.9


Returns an array of the setting profiles for the current user.


**Syntax**

```sql
currentDatabase()
```

**Arguments**

- None.

**Returned value**

Returns an array of setting profiles for the current user. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT currentDatabase()
```

```response title=Response
┌─currentDatabase()─┐
│ default           │
└───────────────────┘
```



## currentQueryID {#currentQueryID}

Introduced in: v


Returns current Query id.


**Syntax**

```sql
currentProfiles()
```

**Aliases**: `current_query_id`

**Arguments**

- None.

**Returned value**



**Examples**

**Example**

```sql title=Query
SELECT currentProfiles();
```

```response title=Response
┌─currentProfiles()─────────────────────────────┐
│ ['default', 'readonly_user', 'web_analytics'] │
└───────────────────────────────────────────────┘
```



## currentRoles {#currentRoles}

Introduced in: v21.9


Returns an array of the roles which are assigned to the current user.
    

**Syntax**

```sql
currentQueryID()
```

**Arguments**

- None.

**Returned value**

Returns an array of the roles which are assigned to the current user. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT currentQueryID();
```

```response title=Response
┌─currentQueryID()─────────────────────┐
│ 1280d0e8-1a08-4524-be6e-77975bb68e7d │
└──────────────────────────────────────┘
```



## currentSchemas {#currentSchemas}

Introduced in: v23.7


Same as function [`currentDatabase`](#currentDatabase) but
- accepts a boolean argument which is ignored
- returns the database name as an array with a single value.

Function `currentSchemas` only exists for compatibility with PostgreSQL.
Please use `currentDatabase` instead.

Also see the [`SET` statement](/sql-reference/statements/use).
    

**Syntax**

```sql
currentRoles()
```

**Aliases**: `current_schemas`

**Arguments**

- `bool` — A boolean value, which is ignored. [`Bool`](/sql-reference/data-types/boolean)


**Returned value**

Returns a single-element array with the name of the current database. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT currentRoles();
```

```response title=Response
┌─currentRoles()─────────────────────────────────┐
│ ['sql-console-role:jane.smith@clickhouse.com'] │
└────────────────────────────────────────────────┘
```



## currentUser {#currentUser}

Introduced in: v20.1


Returns the name of the current user.
In case of a distributed query, the name of the user who initiated the query is returned.
    

**Syntax**

```sql
currentSchemas(bool)
```

**Aliases**: `current_user`, `user`

**Arguments**

- None.

**Returned value**

Returns the name of the current user, otherwise the login of the user who initiated the query. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT currentSchemas(true)
```

```response title=Response
┌─currentSchemas(true)─┐
│ ['default']          │
└──────────────────────┘
```



## defaultProfiles {#defaultProfiles}

Introduced in: v21.9


Returns an array of default setting profile names for the current user.


**Syntax**

```sql
currentUser()
```

**Arguments**

- None.

**Returned value**

Returns an array of default setting profile names for the current user. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT currentUser()
```

```response title=Response
┌─currentUser()─┐
│ default       │
└───────────────┘
```



## defaultRoles {#defaultRoles}

Introduced in: v21.9


Returns an array of default roles for the current user.
    

**Syntax**

```sql
defaultProfiles()
```

**Arguments**

- None.

**Returned value**

Returns an array of default roles for the current user. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT defaultProfiles();
```

```response title=Response
┌─defaultProfiles()─┐
│ ['default']       │
└───────────────────┘
```



## defaultValueOfArgumentType {#defaultValueOfArgumentType}

Introduced in: v1.1


Returns the default value for a given data type.
Does not include default values for custom columns set by the user.


**Syntax**

```sql
defaultRoles()
```

**Arguments**

- `expression` — Arbitrary type of value or an expression that results in a value of an arbitrary type. [`Any`](/sql-reference/data-types)


**Returned value**

Returns `0` for numbers, an empty string for strings or `NULL` for Nullable types. [`UInt8`](/sql-reference/data-types/int-uint) or [`String`](/sql-reference/data-types/string) or [`NULL`](/sql-reference/syntax#null)

**Examples**

**Usage example**

```sql title=Query
SELECT defaultRoles();
```

```response title=Response
┌─defaultRoles()─────────────────────────────────┐
│ ['sql-console-role:jane.smith@clickhouse.com'] │
└────────────────────────────────────────────────┘
```

**Nullable example**

```sql
defaultValueOfArgumentType(expression)
```

```sql title=Query
SELECT defaultValueOfArgumentType(CAST(1 AS Int8));
```



## defaultValueOfTypeName {#defaultValueOfTypeName}

Introduced in: v1.1


Returns the default value for the given type name.
    

**Syntax**

```response title=Response
┌─defaultValueOfArgumentType(CAST(1, 'Int8'))─┐
│                                           0 │
└─────────────────────────────────────────────┘
```

**Arguments**

- `type` — A string representing a type name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the default value for the given type name: `0` for numbers, an empty string for strings, or `NULL` for Nullable [`UInt8`](/sql-reference/data-types/int-uint) or [`String`](/sql-reference/data-types/string) or [`NULL`](/sql-reference/syntax#null)

**Examples**

**Usage example**

```sql title=Query
SELECT defaultValueOfArgumentType(CAST(1 AS Nullable(Int8)));
```

```response title=Response
┌─defaultValueOfArgumentType(CAST(1, 'Nullable(Int8)'))─┐
│                                                  ᴺᵁᴸᴸ │
└───────────────────────────────────────────────────────┘
```

**Nullable example**

```sql
defaultValueOfTypeName(type)
```

```sql title=Query
SELECT defaultValueOfTypeName('Int8');
```



## displayName {#displayName}

Introduced in: v22.11


Returns the value of `display_name` from [config](/operations/configuration-files) or the server's Fully Qualified Domain Name (FQDN) if not set.


**Syntax**

```response title=Response
┌─defaultValueOfTypeName('Int8')─┐
│                              0 │
└────────────────────────────────┘
```

**Arguments**

- None.

**Returned value**

Returns the value of `display_name` from config or server FQDN if not set. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT defaultValueOfTypeName('Nullable(Int8)');
```

```response title=Response
┌─defaultValueOfTypeName('Nullable(Int8)')─┐
│                                     ᴺᵁᴸᴸ │
└──────────────────────────────────────────┘
```



## dumpColumnStructure {#dumpColumnStructure}

Introduced in: v1.1


Outputs a detailed description of the internal structure of a column and its data type.


**Syntax**

```sql
displayName()
```

**Arguments**

- `x` — Value for which to get the description of. [`Any`](/sql-reference/data-types)


**Returned value**

Returns a description of the column structure used for representing the value. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT displayName();
```

```response title=Response
┌─displayName()─┐
│ production    │
└───────────────┘
```



## enabledProfiles {#enabledProfiles}

Introduced in: v21.9


Returns an array of setting profile names which are enabled for the current user.


**Syntax**

```sql
dumpColumnStructure(x)
```

**Arguments**

- None.

**Returned value**

Returns an array of setting profile names which are enabled for the current user. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT dumpColumnStructure(CAST('2018-01-01 01:02:03', 'DateTime'));
```

```response title=Response
┌─dumpColumnStructure(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime, Const(size = 1, UInt32(size = 1))                  │
└──────────────────────────────────────────────────────────────┘
```



## enabledRoles {#enabledRoles}

Introduced in: v21.9


Returns an array of the roles which are enabled for the current user.
    

**Syntax**

```sql
enabledProfiles()
```

**Arguments**

- None.

**Returned value**

Returns an array of role names which are enabled for the current user. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**Usage example**

```sql title=Query
SELECT enabledProfiles();
```

```response title=Response
┌─enabledProfiles()─────────────────────────────────────────────────┐
│ ['default', 'readonly_user', 'web_analytics', 'batch_processing'] │
└───────────────────────────────────────────────────────────────────┘
```



## errorCodeToName {#errorCodeToName}

Introduced in: v20.12


Returns the textual name of a numeric ClickHouse error code.
The mapping from numeric error codes to error names is available [here](https://github.com/ClickHouse/ClickHouse/blob/master/src/Common/ErrorCodes.cpp).


**Syntax**

```sql
enabledRoles()
```

**Arguments**

- `error_code` — ClickHouse error code. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)


**Returned value**

Returns the textual name of `error_code`. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT enabledRoles();
```

```response title=Response
┌─enabledRoles()─────────────────────────────────────────────────┐
│ ['general_data', 'sql-console-role:jane.smith@clickhouse.com'] │
└────────────────────────────────────────────────────────────────┘
```



## file {#file}

Introduced in: v21.3


Reads a file as a string and loads the data into the specified column.
The file content is not interpreted.

Also see the [`file`](../table-functions/file.md) table function.
        

**Syntax**

```sql
errorCodeToName(error_code)
```

**Arguments**

- `path` — The path of the file relative to the `user_files_path`. Supports wildcards `*`, `**`, `?`, `{abc,def}` and `{N..M}` where `N`, `M` are numbers and `'abc', 'def'` are strings. [`String`](/sql-reference/data-types/string)
- `default` — The value returned if the file does not exist or cannot be accessed. [`String`](/sql-reference/data-types/string) or [`NULL`](/sql-reference/syntax#null)


**Returned value**

Returns the file content as a string. [`String`](/sql-reference/data-types/string)

**Examples**

**Insert files into a table**

```sql title=Query
SELECT errorCodeToName(252);
```

```response title=Response
┌─errorCodeToName(252)─┐
│ TOO_MANY_PARTS       │
└──────────────────────┘
```



## filesystemAvailable {#filesystemAvailable}

Introduced in: v20.1


Returns the amount of free space in the filesystem hosting the database persistence.
The returned value is always smaller than the total free space ([`filesystemUnreserved`](../../sql-reference/functions/other-functions.md#filesystemUnreserved)) because some space is reserved for the operating system.
    

**Syntax**

```sql
file(path[, default])
```

**Arguments**

- `disk_name` — Optional. The disk name to find the amount of free space for. If omitted, uses the default disk. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)


**Returned value**

Returns the amount of remaining space available in bytes. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
INSERT INTO table SELECT file('a.txt'), file('b.txt');
```

```response title=Response
```



## filesystemCapacity {#filesystemCapacity}

Introduced in: v20.1


Returns the capacity of the filesystem in bytes.
Needs the [path](../../operations/server-configuration-parameters/settings.md#path) to the data directory to be configured.


**Syntax**

```sql
filesystemAvailable([disk_name])
```

**Arguments**

- `disk_name` — Optional. The disk name to get the capacity for. If omitted, uses the default disk. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)


**Returned value**

Returns the capacity of the filesystem in bytes. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT formatReadableSize(filesystemAvailable()) AS "Доступное место";
```

```response title=Response
┌─Доступное пространство─┐
│ 30.75 GiB               │
└─────────────────────────┘
```



## filesystemUnreserved {#filesystemUnreserved}

Introduced in: v22.12


Returns the total amount of free space on the filesystem hosting the database persistence (previously `filesystemFree`).
See also [`filesystemAvailable`](#filesystemAvailable).


**Syntax**

```sql
filesystemCapacity([disk_name])
```

**Arguments**

- `disk_name` — Optional. The disk name for which to find the total amount of free space. If omitted, uses the default disk. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)


**Returned value**

Returns the amount of free space in bytes. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT formatReadableSize(filesystemCapacity()) AS "Capacity";
```

```response title=Response
┌─Capacity──┐
│ 39.32 GiB │
└───────────┘
```



## finalizeAggregation {#finalizeAggregation}

Introduced in: v1.1


Given an aggregation state, this function returns the result of aggregation (or the finalized state when using a [-State](../../sql-reference/aggregate-functions/combinators.md#-state) combinator).


**Syntax**

```sql
filesystemUnreserved([disk_name])
```

**Arguments**

- `state` — State of aggregation. [`AggregateFunction`](/sql-reference/data-types/aggregatefunction)


**Returned value**

Returns the finalized result of aggregation. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT formatReadableSize(filesystemUnreserved()) AS "Свободное место";
```

```response title=Response
┌─Свободное место─┐
│ 32.39 GiB       │
└─────────────────┘
```

**Combined with initializeAggregation**

```sql
finalizeAggregation(state)
```

```sql title=Query
SELECT finalizeAggregation(arrayReduce('maxState', [1, 2, 3]));
```



## flipCoordinates {#flipCoordinates}

Introduced in: v25.10

Flips the coordinates of a Point, Ring, Polygon, or MultiPolygon. For a Point, it swaps the coordinates. For arrays, it recursively applies the same transformation for each coordinate pair.

**Syntax**

```response title=Response
┌─finalizeAggregation(arrayReduce('maxState', [1, 2, 3]))─┐
│                                                       3 │
└─────────────────────────────────────────────────────────┘
```

**Arguments**

- `geometry` — The geometry to transform. Supported types: Point (Tuple(Float64, Float64)), Ring (Array(Point)), Polygon (Array(Ring)), MultiPolygon (Array(Polygon)). 

**Returned value**

The geometry with flipped coordinates. The type is the same as the input. [`Point`](/sql-reference/data-types/geo#point) or [`Ring`](/sql-reference/data-types/geo#ring) or [`Polygon`](/sql-reference/data-types/geo#polygon) or [`MultiPolygon`](/sql-reference/data-types/geo#multipolygon)

**Examples**

**basic_point**

```sql title=Query
WITH initializeAggregation('sumState', number) AS one_row_sum_state
SELECT
    number,
    finalizeAggregation(one_row_sum_state) AS one_row_sum,
    runningAccumulate(one_row_sum_state) AS cumulative_sum
FROM numbers(5);
```

```response title=Response
┌─number─┬─one_row_sum─┬─cumulative_sum─┐
│      0 │           0 │              0 │
│      1 │           1 │              1 │
│      2 │           2 │              3 │
│      3 │           3 │              6 │
│      4 │           4 │             10 │
└────────┴─────────────┴────────────────┘
```

**ring**

```sql
flipCoordinates(geometry)
```

```sql title=Query
SELECT flipCoordinates((1.0, 2.0));
```

**polygon**

```response title=Response
(2.0, 1.0)
```

```sql title=Query
SELECT flipCoordinates([(1.0, 2.0), (3.0, 4.0)]);
```



## formatQuery {#formatQuery}

Introduced in: v

Returns a formatted, possibly multi-line, version of the given SQL query. Throws in case of a parsing error.
[example:multiline]

**Syntax**

```response title=Response
[(2.0, 1.0), (4.0, 3.0)]
```

**Arguments**

- `query` — The SQL query to be formatted. [String](../../sql-reference/data-types/string.md) 

**Returned value**

The formatted query [`String`](/sql-reference/data-types/string)

**Examples**

**multiline**

```sql title=Query
SELECT flipCoordinates([[(1.0, 2.0), (3.0, 4.0)], [(5.0, 6.0), (7.0, 8.0)]]);
```

```response title=Response
[[(2.0, 1.0), (4.0, 3.0)], [(6.0, 5.0), (8.0, 7.0)]]
```



## formatQueryOrNull {#formatQueryOrNull}

Introduced in: v

Returns a formatted, possibly multi-line, version of the given SQL query. Returns NULL in case of a parsing error.
[example:multiline]

**Syntax**

```sql
formatQuery(query)
```

**Arguments**

- `query` — The SQL query to be formatted. [String](../../sql-reference/data-types/string.md) 

**Returned value**

The formatted query [`String`](/sql-reference/data-types/string)

**Examples**

**multiline**

```sql title=Query
SELECT formatQuery('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT
    a,
    b
FROM tab
WHERE (a > 3) AND (b < 3)
```



## formatQuerySingleLine {#formatQuerySingleLine}

Introduced in: v

Like formatQuery() but the returned formatted string contains no line breaks. Throws in case of a parsing error.
[example:multiline]

**Syntax**

```sql
formatQueryOrNull(query)
```

**Arguments**

- `query` — The SQL query to be formatted. [String](../../sql-reference/data-types/string.md) 

**Returned value**

The formatted query [`String`](/sql-reference/data-types/string)

**Examples**

**multiline**

```sql title=Query
SELECT formatQuery('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT
    a,
    b
FROM tab
WHERE (a > 3) AND (b < 3)
```



## formatQuerySingleLineOrNull {#formatQuerySingleLineOrNull}

Introduced in: v

Like formatQuery() but the returned formatted string contains no line breaks. Returns NULL in case of a parsing error.
[example:multiline]

**Syntax**

```sql
formatQuerySingleLine(query)
```

**Arguments**

- `query` — The SQL query to be formatted. [`String`](/sql-reference/data-types/string)


**Returned value**

The formatted query [`String`](/sql-reference/data-types/string)

**Examples**

**multiline**

```sql title=Query
SELECT formatQuerySingleLine('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT a, b FROM tab WHERE (a > 3) AND (b < 3)
```



## formatReadableDecimalSize {#formatReadableDecimalSize}

Introduced in: v22.11


Given a size (number of bytes), this function returns a readable, rounded size with suffix (KB, MB, etc.) as a string.

The opposite operations of this function are [`parseReadableSize`](#parseReadableSize).
    

**Syntax**

```sql
formatQuerySingleLineOrNull(query)
```

**Arguments**

- `x` — Size in bytes. [`UInt64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns a readable, rounded size with suffix as a string. [`String`](/sql-reference/data-types/string)

**Examples**

**Format file sizes**

```sql title=Query
SELECT formatQuerySingleLine('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT a, b FROM tab WHERE (a > 3) AND (b < 3)
```



## formatReadableQuantity {#formatReadableQuantity}

Introduced in: v20.10


Given a number, this function returns a rounded number with suffix (thousand, million, billion, etc.) as a string.

This function accepts any numeric type as input, but internally it casts them to `Float64`.
Results might be suboptimal with large values.
    

**Syntax**

```sql
formatReadableDecimalSize(x)
```

**Arguments**

- `x` — A number to format. [`UInt64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns a rounded number with suffix as a string. [`String`](/sql-reference/data-types/string)

**Examples**

**Format numbers with suffixes**

```sql title=Query
SELECT
    arrayJoin([1, 1024, 1024*1024, 192851925]) AS filesize_bytes,
    formatReadableDecimalSize(filesize_bytes) AS filesize
```

```response title=Response
┌─filesize_bytes─┬─filesize───┐
│              1 │ 1.00 B     │
│           1024 │ 1.02 KB    │
│        1048576 │ 1.05 MB    │
│      192851925 │ 192.85 MB  │
└────────────────┴────────────┘
```



## formatReadableSize {#formatReadableSize}

Introduced in: v1.1


Given a size (number of bytes), this function returns a readable, rounded size with suffix (KiB, MiB, etc.) as string.

The opposite operations of this function are [`parseReadableSize`](#parseReadableSize), [`parseReadableSizeOrZero`](#parseReadableSizeOrZero), and [`parseReadableSizeOrNull`](#parseReadableSizeOrNull).
This function accepts any numeric type as input, but internally it casts them to `Float64`. Results might be suboptimal with large values.
    

**Syntax**

```sql
formatReadableQuantity(x)
```

**Aliases**: `FORMAT_BYTES`

**Arguments**

- `x` — Size in bytes. [`UInt64`](/sql-reference/data-types/int-uint)


**Returned value**

Returns a readable, rounded size with suffix as a string. [`String`](/sql-reference/data-types/string)

**Examples**

**Format file sizes**

```sql title=Query
SELECT
    arrayJoin([1024, 1234 * 1000, (4567 * 1000) * 1000, 98765432101234]) AS number,
    formatReadableQuantity(number) AS number_for_humans
```

```response title=Response
┌─────────number─┬─number_for_humans─┐
│           1024 │ 1.02 тыс.         │
│        1234000 │ 1.23 млн          │
│     4567000000 │ 4.57 млрд         │
│ 98765432101234 │ 98.77 трлн        │
└────────────────┴───────────────────┘
```



## formatReadableTimeDelta {#formatReadableTimeDelta}

Introduced in: v20.12


Given a time interval (delta) in seconds, this function returns a time delta with year/month/day/hour/minute/second/millisecond/microsecond/nanosecond as a string.

This function accepts any numeric type as input, but internally it casts them to `Float64`. Results might be suboptimal with large values.
    

**Syntax**

```sql
formatReadableSize(x)
```

**Arguments**

- `column` — A column with a numeric time delta. [`Float64`](/sql-reference/data-types/float)
- `maximum_unit` — Optional. Maximum unit to show. Acceptable values: `nanoseconds`, `microseconds`, `milliseconds`, `seconds`, `minutes`, `hours`, `days`, `months`, `years`. Default value: `years`. [`const String`](/sql-reference/data-types/string)
- `minimum_unit` — Optional. Minimum unit to show. All smaller units are truncated. Acceptable values: `nanoseconds`, `microseconds`, `milliseconds`, `seconds`, `minutes`, `hours`, `days`, `months`, `years`. If explicitly specified value is bigger than `maximum_unit`, an exception will be thrown. Default value: `seconds` if `maximum_unit` is `seconds` or bigger, `nanoseconds` otherwise. [`const String`](/sql-reference/data-types/string)


**Returned value**

Returns a time delta as a string. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT
    arrayJoin([1, 1024, 1024*1024, 192851925]) AS filesize_bytes,
    formatReadableSize(filesize_bytes) AS filesize
```

```response title=Response
┌─filesize_bytes─┬─filesize───┐
│              1 │ 1.00 B     │
│           1024 │ 1.00 KiB   │
│        1048576 │ 1.00 MiB   │
│      192851925 │ 183.92 MiB │
└────────────────┴────────────┘
```

**With maximum unit**

```sql
formatReadableTimeDelta(column[, maximum_unit, minimum_unit])
```

```sql title=Query
SELECT
    arrayJoin([100, 12345, 432546534]) AS elapsed,
    formatReadableTimeDelta(elapsed) AS time_delta
```



## generateRandomStructure {#generateRandomStructure}

Introduced in: v23.5


Generates random table structure in the format `column1_name column1_type, column2_name column2_type, ...`.


**Syntax**

```response title=Response
┌────elapsed─┬─time_delta─────────────────────────────────────────────────────┐
│        100 │ 1 минута 40 секунд                                             │
│      12345 │ 3 часа 25 минут 45 секунд                                      │
│  432546534 │ 13 лет 8 месяцев 17 дней 7 часов 48 минут 54 секунды          │
└────────────┴────────────────────────────────────────────────────────────────┘
```

**Arguments**

- `number_of_columns` — The desired number of columns in the resultant table structure. If set to 0 or `Null`, the number of columns will be random from 1 to 128. Default value: `Null`. [`UInt64`](/sql-reference/data-types/int-uint)
- `seed` — Random seed to produce stable results. If seed is not specified or set to `Null`, it is randomly generated. [`UInt64`](/sql-reference/data-types/int-uint)


**Returned value**

Randomly generated table structure. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT
    arrayJoin([100, 12345, 432546534]) AS elapsed,
    formatReadableTimeDelta(elapsed, 'minutes') AS time_delta
```

```response title=Response
┌────elapsed─┬─time_delta─────────────────────────────────────────────────────┐
│        100 │ 1 минута и 40 секунд                                            │
│      12345 │ 205 минут и 45 секунд                                           │
│  432546534 │ 7209108 минут и 54 секунды                                      │
└────────────┴─────────────────────────────────────────────────────────────────┘
```

**with specified number of columns**

```sql
generateRandomStructure([number_of_columns, seed])
```

```sql title=Query
SELECT generateRandomStructure()
```

**with specified seed**

```response title=Response
c1 Decimal32(5), c2 Date, c3 Tuple(LowCardinality(String), Int128, UInt64, UInt16, UInt8, IPv6), c4 Array(UInt128), c5 UInt32, c6 IPv4, c7 Decimal256(64), c8 Decimal128(3), c9 UInt256, c10 UInt64, c11 DateTime
```

```sql title=Query
SELECT generateRandomStructure(1)
```



## generateSerialID {#generateSerialID}

Introduced in: v25.1


Generates and returns sequential numbers starting from the previous counter value.
This function takes a string argument - a series identifier, and an optional starting value.
The server should be configured with Keeper.
The series are stored in Keeper nodes under the path, which can be configured in [`series_keeper_path`](/operations/server-configuration-parameters/settings#series_keeper_path) in the server configuration.
    

**Syntax**

```response title=Response
c1 Map(UInt256, UInt16)
```

**Arguments**

- `series_identifier` — Series identifier [`const String`](/sql-reference/data-types/string)
- `start_value` — Optional. Starting value for the counter. Defaults to 0. Note: this value is only used when creating a new series and is ignored if the series already exists [`UInt*`](/sql-reference/data-types/int-uint)


**Returned value**

Returns sequential numbers starting from the previous counter value. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**first call**

```sql title=Query
SELECT generateRandomStructure(NULL, 33)
```

```response title=Response
c1 DateTime, c2 Enum8('c2V0' = 0, 'c2V1' = 1, 'c2V2' = 2, 'c2V3' = 3), c3 LowCardinality(Nullable(FixedString(30))), c4 Int16, c5 Enum8('c5V0' = 0, 'c5V1' = 1, 'c5V2' = 2, 'c5V3' = 3), c6 Nullable(UInt8), c7 String, c8 Nested(e1 IPv4, e2 UInt8, e3 UInt16, e4 UInt16, e5 Int32, e6 Map(Date, Decimal256(70)))
```

**second call**

```sql
generateSerialID(series_identifier[, start_value])
```

```sql title=Query
SELECT generateSerialID('id1')
```

**column call**

```response title=Response
┌─generateSerialID('id1')──┐
│                        1 │
└──────────────────────────┘
```

```sql title=Query
SELECT generateSerialID('id1')
```

**with start value**

```response title=Response
┌─generateSerialID('id1')──┐
│                        2 │
└──────────────────────────┘
```

```sql title=Query
SELECT *, generateSerialID('id1') FROM test_table
```

**with start value second call**

```response title=Response
┌─CounterID─┬─UserID─┬─ver─┬─generateSerialID('id1')──┐
│         1 │      3 │   3 │                        3 │
│         1 │      1 │   1 │                        4 │
│         1 │      2 │   2 │                        5 │
│         1 │      5 │   5 │                        6 │
│         1 │      4 │   4 │                        7 │
└───────────┴────────┴─────┴──────────────────────────┘
```

```sql title=Query
SELECT generateSerialID('id2', 100)
```



## getClientHTTPHeader {#getClientHTTPHeader}

Introduced in: v24.5


Gets the value of an HTTP header.
If there is no such header or the current request is not performed via the HTTP interface, the function returns an empty string.
Certain HTTP headers (e.g., `Authentication` and `X-ClickHouse-*`) are restricted.

:::note Setting `allow_get_client_http_header` is required
The function requires the setting `allow_get_client_http_header` to be enabled.
The setting is not enabled by default for security reasons, because some headers, such as `Cookie`, could contain sensitive info.
:::

HTTP headers are case sensitive for this function.
If the function is used in the context of a distributed query, it returns non-empty result only on the initiator node.


**Syntax**

```response title=Response
┌─generateSerialID('id2', 100)──┐
│                           100 │
└───────────────────────────────┘
```

**Arguments**

- `name` — The HTTP header name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the value of the header. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT generateSerialID('id2', 100)
```

```response title=Response
┌─generateSerialID('id2', 100)──┐
│                           101 │
└───────────────────────────────┘
```



## getMacro {#getMacro}

Introduced in: v20.1


Returns the value of a macro from the server configuration file.
Macros are defined in the [`<macros>`](/operations/server-configuration-parameters/settings#macros) section of the configuration file and can be used to distinguish servers by convenient names even if they have complicated hostnames.
If the function is executed in the context of a distributed table, it generates a normal column with values relevant to each shard.


**Syntax**

```sql
getClientHTTPHeader(name)
```

**Arguments**

- `name` — The name of the macro to retrieve. [`const String`](/sql-reference/data-types/string)


**Returned value**

Returns the value of the specified macro. [`String`](/sql-reference/data-types/string)

**Examples**

**Basic usage**

```sql title=Query
SELECT getClientHTTPHeader('Content-Type');
```

```response title=Response
┌─getClientHTTPHeader('Content-Type')─┐
│ application/x-www-form-urlencoded   │
└─────────────────────────────────────┘
```



## getMaxTableNameLengthForDatabase {#getMaxTableNameLengthForDatabase}

Introduced in: v

Returns the maximum table name length in a specified database.

**Syntax**

```sql
getMacro(name)
```

**Arguments**

- `database_name` — The name of the specified database. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the length of the maximum table name, an Integer

**Examples**

**typical**

```sql title=Query
SELECT getMacro('test');
```

```response title=Response
┌─getMacro('test')─┐
│ Value            │
└──────────────────┘
```



## getMergeTreeSetting {#getMergeTreeSetting}

Introduced in: v25.6


Returns the current value of a MergeTree setting.


**Syntax**

```sql
getMaxTableNameLengthForDatabase(database_name)
```

**Arguments**

- `setting_name` — The setting name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the merge tree setting's current value.

**Examples**

**Usage example**

```sql title=Query
SELECT getMaxTableNameLengthForDatabase('default');
```

```response title=Response
┌─getMaxTableNameLengthForDatabase('default')─┐
            │                                         206 │
            └─────────────────────────────────────────────┘
```



## getOSKernelVersion {#getOSKernelVersion}

Introduced in: v21.11


Returns a string with the OS kernel version.


**Syntax**

```sql
getMergeTreeSetting(setting_name)
```

**Arguments**

- None.

**Returned value**

Returns the current OS kernel version. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT getMergeTreeSetting('index_granularity');
```

```response title=Response
┌─getMergeTreeSetting('index_granularity')─┐
│                                     8192 │
└──────────────────────────────────────────┘
```



## getServerPort {#getServerPort}

Introduced in: v21.10


Returns the server's port number for a given protocol.
    

**Syntax**

```sql
getOSKernelVersion()
```

**Arguments**

- `port_name` — The name of the port. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the server port number. [`UInt16`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT getOSKernelVersion();
```

```response title=Response
┌─getOSKernelVersion()────┐
│ Linux 4.15.0-55-generic │
└─────────────────────────┘
```



## getServerSetting {#getServerSetting}

Introduced in: v25.6


Returns the currently set value, given a server setting name.
    

**Syntax**

```sql
getServerPort(port_name)
```

**Arguments**

- `setting_name` — The server setting name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the server setting's current value. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT getServerPort('tcp_port');
```

```response title=Response
┌─getServerPort('tcp_port')─┐
│                      9000 │
└───────────────────────────┘
```



## getSetting {#getSetting}

Introduced in: v20.7


Returns the current value of a setting.


**Syntax**

```sql
getServerSetting(setting_name')
```

**Arguments**

- `setting_Name` — The setting name. [`const String`](/sql-reference/data-types/string)


**Returned value**

Returns the setting's current value. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT getServerSetting('allow_use_jemalloc_memory');
```

```response title=Response
┌─getServerSetting('allow_use_jemalloc_memory')─┐
│ true                                          │
└───────────────────────────────────────────────┘
```



## getSettingOrDefault {#getSettingOrDefault}

Introduced in: v24.10


Returns the current value of a setting or returns the default value specified in the second argument if the setting is not set in the current profile.


**Syntax**

```sql
getSetting(setting_name)
```

**Arguments**

- `setting_name` — The setting name. [`String`](/sql-reference/data-types/string)
- `default_value` — Value to return if custom_setting is not set. Value may be of any data type or Null. 

**Returned value**

Returns the current value of the specified setting or `default_value` if the setting is not set.

**Examples**

**Usage example**

```sql title=Query
SELECT getSetting('enable_analyzer');
SET enable_analyzer = false;
SELECT getSetting('enable_analyzer');
```

```response title=Response
┌─getSetting('⋯_analyzer')─┐
│ true                     │
└──────────────────────────┘
┌─getSetting('⋯_analyzer')─┐
│ false                    │
└──────────────────────────┘
```



## getSizeOfEnumType {#getSizeOfEnumType}

Introduced in: v1.1


Returns the number of fields in the given [`Enum`](../../sql-reference/data-types/enum.md).


**Syntax**

```sql
getSettingOrDefault(setting_name, default_value)
```

**Arguments**

- `x` — Value of type `Enum`. [`Enum`](/sql-reference/data-types/enum)


**Returned value**

Returns the number of fields with `Enum` input values. [`UInt8/16`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT getSettingOrDefault('custom_undef1', 'my_value');
SELECT getSettingOrDefault('custom_undef2', 100);
SELECT getSettingOrDefault('custom_undef3', NULL);
```

```response title=Response
my_value
100
NULL
```



## getSubcolumn {#getSubcolumn}

Introduced in: v


Receives the expression or identifier and constant string with the name of subcolumn.

Returns requested subcolumn extracted from the expression.


**Syntax**

```sql
getSizeOfEnumType(x)
```

**Arguments**

- None.

**Returned value**



**Examples**

**getSubcolumn**

```sql title=Query
SELECT getSizeOfEnumType(CAST('a' AS Enum8('a' = 1, 'b' = 2))) AS x;
```

```response title=Response
┌─x─┐
│ 2 │
└───┘
```



## getTypeSerializationStreams {#getTypeSerializationStreams}

Introduced in: v22.6


Enumerates stream paths of a data type.
This function is intended for developmental use.
    

**Syntax**

```sql
```

**Arguments**

- `col` — Column or string representation of a data-type from which the data type will be detected. [`Any`](/sql-reference/data-types)


**Returned value**

Returns an array with all the serialization sub-stream paths. [`Array(String)`](/sql-reference/data-types/array)

**Examples**

**tuple**

```sql title=Query
SELECT getSubcolumn(array_col, 'size0'), getSubcolumn(tuple_col, 'elem_name')
```

```response title=Response
```

**map**

```sql
getTypeSerializationStreams(col)
```

```sql title=Query
SELECT getTypeSerializationStreams(tuple('a', 1, 'b', 2))
```



## globalVariable {#globalVariable}

Introduced in: v20.5


Takes a constant string argument and returns the value of the global variable with that name. This function is intended for compatibility with MySQL and not needed or useful for normal operation of ClickHouse. Only few dummy global variables are defined.
    

**Syntax**

```response title=Response
['{TupleElement(1), Regular}','{TupleElement(2), Regular}','{TupleElement(3), Regular}','{TupleElement(4), Regular}']
```

**Arguments**

- `name` — Global variable name. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the value of variable `name`. [`Any`](/sql-reference/data-types)

**Examples**

**globalVariable**

```sql title=Query
SELECT getTypeSerializationStreams('Map(String, Int64)')
```

```response title=Response
['{ArraySizes}','{ArrayElements, TupleElement(keys), Regular}','{ArrayElements, TupleElement(values), Regular}']
```



## hasColumnInTable {#hasColumnInTable}

Introduced in: v1.1


Checks if a specific column exists in a database table.
For elements in a nested data structure, the function checks for the existence of a column.
For the nested data structure itself, the function returns `0`.
    

**Syntax**

```sql
globalVariable(name)
```

**Arguments**

- `database` — Name of the database. [`const String`](/sql-reference/data-types/string)
- `table` — Name of the table. [`const String`](/sql-reference/data-types/string)
- `column` — Name of the column. [`const String`](/sql-reference/data-types/string)
- `hostname` — Optional. Remote server name to perform the check on. [`const String`](/sql-reference/data-types/string)
- `username` — Optional. Username for remote server. [`const String`](/sql-reference/data-types/string)
- `password` — Optional. Password for remote server. [`const String`](/sql-reference/data-types/string)


**Returned value**

Returns `1` if the given column exists, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Check an existing column**

```sql title=Query
SELECT globalVariable('max_allowed_packet')
```

```response title=Response
67108864
```

**Check a non-existing column**

```sql
hasColumnInTable([hostname[, username[, password]],]database, table, column)
```

```sql title=Query
SELECT hasColumnInTable('system','metrics','metric')
```



## hasThreadFuzzer {#hasThreadFuzzer}

Introduced in: v20.6


Returns whether the thread fuzzer is enabled.
THis function is only useful for testing and debugging.
    

**Syntax**

```response title=Response
1
```

**Arguments**

- None.

**Returned value**

Returns whether Thread Fuzzer is effective. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Check Thread Fuzzer status**

```sql title=Query
SELECT hasColumnInTable('system','metrics','non-existing_column')
```

```response title=Response
0
```



## hostName {#hostName}

Introduced in: v20.5


Returns the name of the host on which this function was executed.
If the function executes on a remote server (distributed processing), the remote server name is returned.
If the function executes in the context of a distributed table, it generates a normal column with values relevant to each shard.
Otherwise it produces a constant value.
    

**Syntax**

```sql
hasThreadFuzzer()
```

**Aliases**: `hostname`

**Arguments**

- None.

**Returned value**

Returns the host name. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT hasThreadFuzzer()
```

```response title=Response
┌─hasThreadFuzzer()─┐
│                 0 │
└───────────────────┘
```



## icebergBucket {#icebergBucket}

Introduced in: v25.5

Implements logic for the [iceberg bucket transform](https://iceberg.apache.org/spec/#bucket-transform-details.)

**Syntax**

```sql
hostName()
```

**Arguments**

- `N` — The number of buckets, modulo. [`const (U)Int*`](/sql-reference/data-types/int-uint)
- `value` — The source value to transform. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Bool`](/sql-reference/data-types/boolean) or [`Decimal`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`UUID`](/sql-reference/data-types/uuid) or [`Date`](/sql-reference/data-types/date) or [`Time`](/sql-reference/data-types/time) or [`DateTime`](/sql-reference/data-types/datetime)


**Returned value**

Returns a 32-bit hash of the source value. [`Int32`](/sql-reference/data-types/int-uint)

**Examples**

**Example**

```sql title=Query
SELECT hostName()
```

```response title=Response
┌─hostName()─┐
│ clickhouse │
└────────────┘
```



## icebergTruncate {#icebergTruncate}

Introduced in: v25.3

Implements logic of iceberg truncate transform: https://iceberg.apache.org/spec/#truncate-transform-details.

**Syntax**

```sql
icebergBucket(N, value)
```

**Arguments**

- `value` — The value to transform. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal)


**Returned value**

The same type as the argument

**Examples**

**Example**

```sql title=Query
SELECT icebergBucket(5, 1.0 :: Float32)
```

```response title=Response
4
```



## identity {#identity}

Introduced in: v1.1


This function returns the argument you pass to it, which is useful for debugging and testing. It lets you bypass index usage to see full scan performance instead. The query analyzer ignores anything inside identity functions when looking for indexes to use, and it also disables constant folding.


**Syntax**

```sql
icebergTruncate(N, value)
```

**Arguments**

- `x` — Input value. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the input value unchanged. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT icebergTruncate(3, 'iceberg')
```

```response title=Response
ice
```



## ignore {#ignore}

Introduced in: v1.1


Accepts arbitrary arguments and unconditionally returns `0`.
    

**Syntax**

```sql
identity(x)
```

**Arguments**

- `x` — An input value which is unused and passed only so as to avoid a syntax error. [`Any`](/sql-reference/data-types)


**Returned value**

Always returns `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT identity(42)
```

```response title=Response
42
```



## indexHint {#indexHint}

Introduced in: v1.1


This function is intended for debugging and introspection.
It ignores its argument and always returns 1.
The arguments are not evaluated.

But during index analysis, the argument of this function is assumed to be not wrapped in `indexHint`.
This allows to select data in index ranges by the corresponding condition but without further filtering by this condition.
The index in ClickHouse is sparse and using `indexHint` will yield more data than specifying the same condition directly.
    

**Syntax**

```sql
ignore(x)
```

**Arguments**

- `expression` — Any expression for index range selection. [`Expression`](/sql-reference/data-types/special-data-types/expression)


**Returned value**

Returns `1` in all cases. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example with date filtering**

```sql title=Query
SELECT ignore(0, 'ClickHouse', NULL)
```

```response title=Response
┌─ignore(0, 'ClickHouse', NULL)─┐
│                             0 │
└───────────────────────────────┘
```



## initialQueryID {#initialQueryID}

Introduced in: v1.1


Returns the ID of the initial current query.
Other parameters of a query can be extracted from field `initial_query_id` in [`system.query_log`](../../operations/system-tables/query_log.md).

In contrast to [`queryID`](/sql-reference/functions/other-functions#queryID) function, `initialQueryID` returns the same results on different shards.


**Syntax**

```sql
indexHint(expression)
```

**Aliases**: `initial_query_id`

**Arguments**

- None.

**Returned value**

Returns the ID of the initial current query. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT FlightDate AS k, count() FROM ontime WHERE indexHint(k = '2025-09-15') GROUP BY k ORDER BY k ASC;
```

```response title=Response
┌──────────k─┬─count()─┐
│ 2025-09-14 │    7071 │
│ 2025-09-15 │   16428 │
│ 2025-09-16 │    1077 │
│ 2025-09-30 │    8167 │
└────────────┴─────────┘
```



## initialQueryStartTime {#initialQueryStartTime}

Introduced in: v25.4


Returns the start time of the initial current query.
`initialQueryStartTime` returns the same results on different shards.


**Syntax**

```sql
initialQueryID()
```

**Aliases**: `initial_query_start_time`

**Arguments**

- None.

**Returned value**

Returns the start time of the initial current query. [`DateTime`](/sql-reference/data-types/datetime)

**Examples**

**Usage example**

```sql title=Query
CREATE TABLE tmp (str String) ENGINE = Log;
INSERT INTO tmp (*) VALUES ('a');
SELECT count(DISTINCT t) FROM (SELECT initialQueryID() AS t FROM remote('127.0.0.{1..3}', currentDatabase(), 'tmp') GROUP BY queryID());
```

```response title=Response
┌─count(DISTINCT t)─┐
│                 1 │
└───────────────────┘
```



## initializeAggregation {#initializeAggregation}

Introduced in: v20.6


Calculates the result of an aggregate function based on a single value.
This function can be used to initialize aggregate functions with combinator [-State](../../sql-reference/aggregate-functions/combinators.md#-state).
You can create states of aggregate functions and insert them to columns of type [`AggregateFunction`](../../sql-reference/data-types/aggregatefunction.md) or use initialized aggregates as default values.
    

**Syntax**

```sql
initialQueryStartTime()
```

**Arguments**

- `aggregate_function` — Name of the aggregation function to initialize. [`String`](/sql-reference/data-types/string)
- `arg1[, arg2, ...]` — Arguments of the aggregate function. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the result of aggregation for every row passed to the function. The return type is the same as the return type of the function that `initializeAggregation` takes as a first argument. [`Any`](/sql-reference/data-types)

**Examples**

**Basic usage with uniqState**

```sql title=Query
CREATE TABLE tmp (str String) ENGINE = Log;
INSERT INTO tmp (*) VALUES ('a');
SELECT count(DISTINCT t) FROM (SELECT initialQueryStartTime() AS t FROM remote('127.0.0.{1..3}', currentDatabase(), 'tmp') GROUP BY queryID());
```

```response title=Response
┌─count(DISTINCT t)─┐
│                 1 │
└───────────────────┘
```

**Usage with sumState and finalizeAggregation**

```sql
initializeAggregation(aggregate_function, arg1[, arg2, ...])
```

```sql title=Query
SELECT uniqMerge(state) FROM (SELECT initializeAggregation('uniqState', number % 3) AS state FROM numbers(10000));
```



## isConstant {#isConstant}

Introduced in: v20.3


Returns whether the argument is a constant expression.
A constant expression is an expression whose result is known during query analysis, i.e. before execution.
For example, expressions over [literals](/sql-reference/syntax#literals) are constant expressions.
This function is mostly intended for development, debugging and demonstration.
    

**Syntax**

```response title=Response
┌─uniqMerge(state)─┐
│                3 │
└──────────────────┘
```

**Arguments**

- `x` — An expression to check. [`Any`](/sql-reference/data-types)


**Returned value**

Returns `1` if `x` is constant, `0` if `x` is non-constant. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Constant expression**

```sql title=Query
SELECT finalizeAggregation(state), toTypeName(state) FROM (SELECT initializeAggregation('sumState', number % 3) AS state FROM numbers(5));
```

```response title=Response
┌─finalizeAggregation(state)─┬─toTypeName(state)─────────────┐
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
│                          2 │ AggregateFunction(sum, UInt8) │
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
└────────────────────────────┴───────────────────────────────┘
```

**Constant with function**

```sql
isConstant(x)
```

```sql title=Query
SELECT isConstant(x + 1)
FROM (SELECT 43 AS x)
```

**Non-constant expression**

```response title=Response
┌─isConstant(plus(x, 1))─┐
│                      1 │
└────────────────────────┘
```

```sql title=Query
WITH 3.14 AS pi
SELECT isConstant(cos(pi))
```

**Behavior of the now() function**

```response title=Response
┌─isConstant(cos(pi))─┐
│                   1 │
└─────────────────────┘
```

```sql title=Query
SELECT isConstant(number)
FROM numbers(1)
```



## isDecimalOverflow {#isDecimalOverflow}

Introduced in: v20.8


Checks if a decimal number has too many digits to fit properly in a Decimal data type with given precision.
    

**Syntax**

```response title=Response
┌─isConstant(number)─┐
│                  0 │
└────────────────────┘
```

**Arguments**

- `value` — Decimal value to check. [`Decimal`](/sql-reference/data-types/decimal)
- `precision` — Optional. The precision of the Decimal type. If omitted, the initial precision of the first argument is used. [`UInt8`](/sql-reference/data-types/int-uint)


**Returned value**

Returns `1` if the decimal value has more digits than allowed by its precision, `0` if the decimal value satisfies the specified precision. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT isConstant(now())
```

```response title=Response
┌─isConstant(now())─┐
│                 1 │
└───────────────────┘
```



## joinGet {#joinGet}

Introduced in: v18.16


Allows you to extract data from a table the same way as from a dictionary.
Gets data from Join tables using the specified join key.

:::note
Only supports tables created with the `ENGINE = Join(ANY, LEFT, <join_keys>)` [statement](/engines/table-engines/special/join).
:::


**Syntax**

```sql
isDecimalOverflow(value[, precision])
```

**Arguments**

- `join_storage_table_name` — An identifier which indicates where to perform the search. The identifier is searched in the default database (see parameter `default_database` in the config file). To override the default database, use the `USE database_name` query or specify the database and the table through a dot, like `database_name.table_name`. [`String`](/sql-reference/data-types/string)
- `value_column` — The name of the column of the table that contains required data. [`const String`](/sql-reference/data-types/string)
- `join_keys` — A list of join keys. [`Any`](/sql-reference/data-types)


**Returned value**

Returns list of values corresponded to list of keys. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT isDecimalOverflow(toDecimal32(1000000000, 0), 9),
       isDecimalOverflow(toDecimal32(1000000000, 0)),
       isDecimalOverflow(toDecimal32(-1000000000, 0), 9),
       isDecimalOverflow(toDecimal32(-1000000000, 0));
```

```response title=Response
┌─isDecimalOverflow(toDecimal32(1000000000, 0), 9)─┬─isDecimalOverflow(toDecimal32(1000000000, 0))─┬─isDecimalOverflow(toDecimal32(-1000000000, 0), 9)─┬─isDecimalOverflow(toDecimal32(-1000000000, 0))─┐
│                                                1 │                                             1 │                                                 1 │                                              1 │
└──────────────────────────────────────────────────┴───────────────────────────────────────────────┴───────────────────────────────────────────────────┴────────────────────────────────────────────────┘
```

**Usage with table from current database**

```sql
joinGet(join_storage_table_name, value_column, join_keys)
```

```sql title=Query
CREATE TABLE db_test.id_val(`id` UInt32, `val` UInt32) ENGINE = Join(ANY, LEFT, id);
INSERT INTO db_test.id_val VALUES (1,11)(2,12)(4,13);

SELECT joinGet(db_test.id_val, 'val', toUInt32(1));
```

**Using arrays as join keys**

```response title=Response
┌─joinGet(db_test.id_val, 'val', toUInt32(1))─┐
│                                          11 │
└─────────────────────────────────────────────┘
```

```sql title=Query
USE db_test;
SELECT joinGet(id_val, 'val', toUInt32(2));
```



## joinGetOrNull {#joinGetOrNull}

Introduced in: v20.4


Allows you to extract data from a table the same way as from a dictionary.
Gets data from Join tables using the specified join key.
Unlike [`joinGet`](#joinGet) it returns `NULL` when the key is missing.

:::note
Only supports tables created with the `ENGINE = Join(ANY, LEFT, <join_keys>)` [statement](/engines/table-engines/special/join).
:::


**Syntax**

```response title=Response
┌─joinGet(id_val, 'val', toUInt32(2))─┐
│                                  12 │
└─────────────────────────────────────┘
```

**Arguments**

- `join_storage_table_name` — An identifier which indicates where to perform the search. The identifier is searched in the default database (see parameter default_database in the config file). To override the default database, use the `USE database_name` query or specify the database and the table through a dot, like `database_name.table_name`. [`String`](/sql-reference/data-types/string)
- `value_column` — The name of the column of the table that contains required data. [`const String`](/sql-reference/data-types/string)
- `join_keys` — A list of join keys. [`Any`](/sql-reference/data-types)


**Returned value**

Returns a list of values corresponding to the list of keys, or `NULL` if a key is not found. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
CREATE TABLE some_table (id1 UInt32, id2 UInt32, name String) ENGINE = Join(ANY, LEFT, id1, id2);
INSERT INTO some_table VALUES (1, 11, 'a') (2, 12, 'b') (3, 13, 'c');

SELECT joinGet(some_table, 'name', 1, 11);
```

```response title=Response
┌─joinGet(some_table, 'name', 1, 11)─┐
│ a                                  │
└────────────────────────────────────┘
```



## lowCardinalityIndices {#lowCardinalityIndices}

Introduced in: v18.12


Returns the position of a value in the dictionary of a [LowCardinality](../data-types/lowcardinality.md) column. Positions start at 1. Since LowCardinality have per-part dictionaries, this function may return different positions for the same value in different parts.
    

**Syntax**

```sql
joinGetOrNull(join_storage_table_name, value_column, join_keys)
```

**Arguments**

- `col` — A low cardinality column. [`LowCardinality`](/sql-reference/data-types/lowcardinality)


**Returned value**

The position of the value in the dictionary of the current part. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage examples**

```sql title=Query
CREATE TABLE db_test.id_val(`id` UInt32, `val` UInt32) ENGINE = Join(ANY, LEFT, id);
INSERT INTO db_test.id_val VALUES (1,11)(2,12)(4,13);

SELECT joinGetOrNull(db_test.id_val, 'val', toUInt32(1)), joinGetOrNull(db_test.id_val, 'val', toUInt32(999));
```

```response title=Response
┌─joinGetOrNull(db_test.id_val, 'val', toUInt32(1))─┬─joinGetOrNull(db_test.id_val, 'val', toUInt32(999))─┐
│                                                11 │                                                ᴺᵁᴸᴸ │
└───────────────────────────────────────────────────┴─────────────────────────────────────────────────────┘
```



## lowCardinalityKeys {#lowCardinalityKeys}

Introduced in: v18.12


Returns the dictionary values of a [LowCardinality](../data-types/lowcardinality.md) column.
If the block is smaller or larger than the dictionary size, the result will be truncated or extended with default values.
Since LowCardinality have per-part dictionaries, this function may return different dictionary values in different parts.
    

**Syntax**

```sql
lowCardinalityIndices(col)
```

**Arguments**

- `col` — A low cardinality column. [`LowCardinality`](/sql-reference/data-types/lowcardinality)


**Returned value**

Returns the dictionary keys. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**lowCardinalityKeys**

```sql title=Query
DROP TABLE IF EXISTS test;
CREATE TABLE test (s LowCardinality(String)) ENGINE = Memory;

-- создать две части:

INSERT INTO test VALUES ('ab'), ('cd'), ('ab'), ('ab'), ('df');
INSERT INTO test VALUES ('ef'), ('cd'), ('ab'), ('cd'), ('ef');

SELECT s, lowCardinalityIndices(s) FROM test;
```

```response title=Response
┌─s──┬─lowCardinalityIndices(s)─┐
│ ab │                        1 │
│ cd │                        2 │
│ ab │                        1 │
│ ab │                        1 │
│ df │                        3 │
└────┴──────────────────────────┘
┌─s──┬─lowCardinalityIndices(s)─┐
│ ef │                        1 │
│ cd │                        2 │
│ ab │                        3 │
│ cd │                        2 │
│ ef │                        1 │
└────┴──────────────────────────┘
```



## materialize {#materialize}

Introduced in: v1.1


Turns a constant into a full column containing a single value.
Full columns and constants are represented differently in memory.
Functions usually execute different code for normal and constant arguments, although the result should typically be the same.
This function can be used to debug this behavior.


**Syntax**

```sql
lowCardinalityKeys(col)
```

**Arguments**

- `x` — A constant. [`Any`](/sql-reference/data-types)


**Returned value**

Returns a full column containing the constant value. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
DROP TABLE IF EXISTS test;
CREATE TABLE test (s LowCardinality(String)) ENGINE = Memory;

-- создаём две части:

INSERT INTO test VALUES ('ab'), ('cd'), ('ab'), ('ab'), ('df');
INSERT INTO test VALUES ('ef'), ('cd'), ('ab'), ('cd'), ('ef');

SELECT s, lowCardinalityKeys(s) FROM test;
```

```response title=Response
┌─s──┬─lowCardinalityKeys(s)─┐
│ ef │                       │
│ cd │ ef                    │
│ ab │ cd                    │
│ cd │ ab                    │
│ ef │                       │
└────┴───────────────────────┘
┌─s──┬─lowCardinalityKeys(s)─┐
│ ab │                       │
│ cd │ ab                    │
│ ab │ cd                    │
│ ab │ df                    │
│ df │                       │
└────┴───────────────────────┘
```



## minSampleSizeContinuous {#minSampleSizeContinuous}

Introduced in: v23.10


Calculates the minimum required sample size for an A/B test comparing means of a continuous metric in two samples.

Uses the formula described in [this article](https://towardsdatascience.com/required-sample-size-for-a-b-testing-6f6608dd330a).
Assumes equal sizes of treatment and control groups.
Returns the required sample size for one group (i.e. the sample size required for the whole experiment is twice the returned value).
Also assumes equal variance of the test metric in treatment and control groups.


**Syntax**

```sql
materialize(x)
```

**Aliases**: `minSampleSizeContinous`

**Arguments**

- `baseline` — Baseline value of a metric. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `sigma` — Baseline standard deviation of a metric. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `mde` — Minimum detectable effect (MDE) as percentage of the baseline value (e.g. for a baseline value 112.25 the MDE 0.03 means an expected change to 112.25 ± 112.25*0.03). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `power` — Required statistical power of a test (1 - probability of Type II error). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `alpha` — Required significance level of a test (probability of Type I error). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)


**Returned value**

Returns a named Tuple with 3 elements: `minimum_sample_size`, `detect_range_lower` and  `detect_range_upper`. These are respectively: the required sample size, the lower bound of the range of values not detectable with the returned required sample size, calculated as `baseline * (1 - mde)`, and the upper bound of the range of values not detectable with the returned required sample size, calculated as `baseline * (1 + mde)` (Float64). [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)

**Examples**

**minSampleSizeContinuous**

```sql title=Query
-- В примере ниже функция `countMatches` ожидает константу в качестве второго аргумента.
-- Это поведение можно отладить с помощью функции `materialize`, которая преобразует константу в полноценный столбец,
-- что позволяет убедиться, что функция выдаёт ошибку при передаче неконстантного аргумента.

SELECT countMatches('foobarfoo', 'foo');
SELECT countMatches('foobarfoo', materialize('foo'));
```

```response title=Response
2
Code: 44. DB::Exception: Received from localhost:9000. DB::Exception: Illegal type of argument #2 'pattern' of function countMatches, expected constant String, got String
```



## minSampleSizeConversion {#minSampleSizeConversion}

Introduced in: v22.6


Calculates minimum required sample size for an A/B test comparing conversions (proportions) in two samples.

Uses the formula described in [this article](https://towardsdatascience.com/required-sample-size-for-a-b-testing-6f6608dd330a). Assumes equal sizes of treatment and control groups. Returns the sample size required for one group (i.e. the sample size required for the whole experiment is twice the returned value).


**Syntax**

```sql
minSampleSizeContinuous(baseline, sigma, mde, power, alpha)
```

**Arguments**

- `baseline` — Baseline conversion. [`Float*`](/sql-reference/data-types/float)
- `mde` — Minimum detectable effect (MDE) as percentage points (e.g. for a baseline conversion 0.25 the MDE 0.03 means an expected change to 0.25 ± 0.03). [`Float*`](/sql-reference/data-types/float)
- `power` — Required statistical power of a test (1 - probability of Type II error). [`Float*`](/sql-reference/data-types/float)
- `alpha` — Required significance level of a test (probability of Type I error). [`Float*`](/sql-reference/data-types/float)


**Returned value**

Returns a named Tuple with 3 elements: `minimum_sample_size`, `detect_range_lower`, `detect_range_upper`. These are, respectively: the required sample size, the lower bound of the range of values not detectable with the returned required sample size, calculated as `baseline - mde`, the upper bound of the range of values not detectable with the returned required sample size, calculated as `baseline + mde`. [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)

**Examples**

**minSampleSizeConversion**

```sql title=Query
SELECT minSampleSizeContinuous(112.25, 21.1, 0.03, 0.80, 0.05) AS sample_size
```

```response title=Response
(616.2931945826209,108.8825,115.6175)
```



## neighbor {#neighbor}

Introduced in: v20.1


Returns a value from a column at a specified offset from the current row.
This function is deprecated and error-prone because it operates on the physical order of data blocks which may not correspond to the logical order expected by users.
Consider using proper window functions instead.

The function can be enabled by setting `allow_deprecated_error_prone_window_functions = 1`.


**Syntax**

```sql
minSampleSizeConversion(baseline, mde, power, alpha)
```

**Arguments**

- `column` — The source column. [`Any`](/sql-reference/data-types)
- `offset` — The offset from the current row. Positive values look forward, negative values look backward. [`Integer`](/sql-reference/data-types/int-uint)
- `default_value` — Optional. The value to return if the offset goes beyond the data bounds. If not specified, uses the default value for the column type. [`Any`](/sql-reference/data-types)


**Returned value**

Returns a value from the specified offset, or default if out of bounds. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT minSampleSizeConversion(0.25, 0.03, 0.80, 0.05) AS sample_size
```

```response title=Response
(3396.077603219163,0.22,0.28)
```

**With default value**

```sql
neighbor(column, offset[, default_value])
```

```sql title=Query
SELECT number, neighbor(number, 2) FROM system.numbers LIMIT 10;
```



## nested {#nested}

Introduced in: v


This is a function used internally by the ClickHouse engine and not meant to be used directly.

Returns the array of tuples from multiple arrays.

The first argument must be a constant array of Strings determining the names of the resulting Tuple.
The other arguments must be arrays of the same size.


**Syntax**

```response title=Response
┌─number─┬─neighbor(number, 2)─┐
│      0 │                   2 │
│      1 │                   3 │
│      2 │                   4 │
│      3 │                   5 │
│      4 │                   6 │
│      5 │                   7 │
│      6 │                   8 │
│      7 │                   9 │
│      8 │                   0 │
│      9 │                   0 │
└────────┴─────────────────────┘
```

**Arguments**

- None.

**Returned value**



**Examples**

**nested**

```sql title=Query
SELECT number, neighbor(number, 2, 999) FROM system.numbers LIMIT 10;
```

```response title=Response
┌─number─┬─neighbor(number, 2, 999)─┐
│      0 │                        2 │
│      1 │                        3 │
│      2 │                        4 │
│      3 │                        5 │
│      4 │                        6 │
│      5 │                        7 │
│      6 │                        8 │
│      7 │                        9 │
│      8 │                      999 │
│      9 │                      999 │
└────────┴──────────────────────────┘
```



## normalizeQuery {#normalizeQuery}

Introduced in: v20.8


Replaces literals, sequences of literals and complex aliases (containing whitespace, more than two digits or at least 36 bytes long such as UUIDs) with placeholder `?`.
    

**Syntax**

```sql
```

**Arguments**

- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the given sequence of characters with placeholders. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT nested(['keys', 'values'], ['key_1', 'key_2'], ['value_1','value_2'])
```

```response title=Response
```



## normalizeQueryKeepNames {#normalizeQueryKeepNames}

Introduced in: v21.2


Replaces literals and sequences of literals with placeholder `?` but does not replace complex aliases (containing whitespace, more than two digits or at least 36 bytes long such as UUIDs).
This helps better analyze complex query logs.
    

**Syntax**

```sql
normalizeQuery(x)
```

**Arguments**

- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the given sequence of characters with placeholders. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT normalizeQuery('[1, 2, 3, x]') AS query
```

```response title=Response
┌─query────┐
│ [?.., x] │
└──────────┘
```



## normalizedQueryHash {#normalizedQueryHash}

Introduced in: v20.8


Returns identical 64 bit hash values without the values of literals for similar queries.
Can be helpful in analyzing query logs.
    

**Syntax**

```sql
normalizeQueryKeepNames(x)
```

**Arguments**

- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns a 64 bit hash value. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT normalizeQuery('SELECT 1 AS aComplexName123'), normalizeQueryKeepNames('SELECT 1 AS aComplexName123')
```

```response title=Response
┌─normalizeQuery('SELECT 1 AS aComplexName123')─┬─normalizeQueryKeepNames('SELECT 1 AS aComplexName123')─┐
│ SELECT ? AS `?`                               │ SELECT ? AS aComplexName123                            │
└───────────────────────────────────────────────┴────────────────────────────────────────────────────────┘
```



## normalizedQueryHashKeepNames {#normalizedQueryHashKeepNames}

Introduced in: v21.2


Like [`normalizedQueryHash`](#normalizedQueryHash) it returns identical 64 bit hash values without the values of literals for similar queries, but it does not replace complex aliases (containing whitespace, more than two digits or at least 36 bytes long such as UUIDs) with a placeholder before hashing.
Can be helpful in analyzing query logs.
    

**Syntax**

```sql
normalizedQueryHash(x)
```

**Arguments**

- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns a 64 bit hash value. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT normalizedQueryHash('SELECT 1 AS `xyz`') != normalizedQueryHash('SELECT 1 AS `abc`') AS res
```

```response title=Response
┌─res─┐
│   1 │
└─────┘
```



## parseReadableSize {#parseReadableSize}

Introduced in: v24.6


Given a string containing a byte size and `B`, `KiB`, `KB`, `MiB`, `MB`, etc. as a unit (i.e. [ISO/IEC 80000-13](https://en.wikipedia.org/wiki/ISO/IEC_80000) or decimal byte unit), this function returns the corresponding number of bytes.
If the function is unable to parse the input value, it throws an exception.

The inverse operations of this function are [`formatReadableSize`](#formatReadableSize) and [`formatReadableDecimalSize`](#formatReadableDecimalSize).


**Syntax**

```sql
normalizedQueryHashKeepNames(x)
```

**Arguments**

- `x` — Readable size with ISO/IEC 80000-13 or decimal byte unit. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the number of bytes, rounded up to the nearest integer. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT normalizedQueryHash('SELECT 1 AS `xyz123`') != normalizedQueryHash('SELECT 1 AS `abc123`') AS normalizedQueryHash;
SELECT normalizedQueryHashKeepNames('SELECT 1 AS `xyz123`') != normalizedQueryHashKeepNames('SELECT 1 AS `abc123`') AS normalizedQueryHashKeepNames;
```

```response title=Response
┌─normalizedQueryHash─┐
│                   0 │
└─────────────────────┘
┌─normalizedQueryHashKeepNames─┐
│                            1 │
└──────────────────────────────┘
```



## parseReadableSizeOrNull {#parseReadableSizeOrNull}

Introduced in: v24.6


Given a string containing a byte size and `B`, `KiB`, `KB`, `MiB`, `MB`, etc. as a unit (i.e. [ISO/IEC 80000-13](https://en.wikipedia.org/wiki/ISO/IEC_80000) or decimal byte unit), this function returns the corresponding number of bytes.
If the function is unable to parse the input value, it returns `NULL`.

The inverse operations of this function are [`formatReadableSize`](#formatReadableSize) and [`formatReadableDecimalSize`](#formatReadableDecimalSize).


**Syntax**

```sql
parseReadableSize(x)
```

**Arguments**

- `x` — Readable size with ISO/IEC 80000-13 or decimal byte unit. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the number of bytes, rounded up to the nearest integer, or `NULL` if unable to parse the input [`Nullable(UInt64)`](/sql-reference/data-types/nullable)

**Examples**

**Usage example**

```sql title=Query
SELECT arrayJoin(['1 B', '1 KiB', '3 MB', '5.314 KiB']) AS readable_sizes, parseReadableSize(readable_sizes) AS sizes;
```

```response title=Response
┌─readable_sizes─┬───sizes─┐
│ 1 B            │       1 │
│ 1 KiB          │    1024 │
│ 3 MB           │ 3000000 │
│ 5.314 KiB      │    5442 │
└────────────────┴─────────┘
```



## parseReadableSizeOrZero {#parseReadableSizeOrZero}

Introduced in: v24.6


Given a string containing a byte size and `B`, `KiB`, `KB`, `MiB`, `MB`, etc. as a unit (i.e. [ISO/IEC 80000-13](https://en.wikipedia.org/wiki/ISO/IEC_80000) or decimal byte unit), this function returns the corresponding number of bytes.
If the function is unable to parse the input value, it returns `0`.

The inverse operations of this function are [`formatReadableSize`](#formatReadableSize) and [`formatReadableDecimalSize`](#formatReadableDecimalSize).


**Syntax**

```sql
parseReadableSizeOrNull(x)
```

**Arguments**

- `x` — Readable size with ISO/IEC 80000-13 or decimal byte unit. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns the number of bytes, rounded up to the nearest integer, or `0` if unable to parse the input. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT arrayJoin(['1 B', '1 KiB', '3 MB', '5.314 KiB', 'invalid']) AS readable_sizes, parseReadableSizeOrNull(readable_sizes) AS sizes;
```

```response title=Response
┌─readable_sizes─┬───sizes─┐
│ 1 B            │       1 │
│ 1 KiB          │    1024 │
│ 3 MB           │ 3000000 │
│ 5.314 KiB      │    5442 │
│ invalid        │    ᴺᵁᴸᴸ │
└────────────────┴─────────┘
```



## parseTimeDelta {#parseTimeDelta}

Introduced in: v22.7


Parse a sequence of numbers followed by something resembling a time unit.

The time delta string uses these time unit specifications:
- `years`, `year`, `yr`, `y`
- `months`, `month`, `mo`
- `weeks`, `week`, `w`
- `days`, `day`, `d`
- `hours`, `hour`, `hr`, `h`
- `minutes`, `minute`, `min`, `m`
- `seconds`, `second`, `sec`, `s`
- `milliseconds`, `millisecond`, `millisec`, `ms`
- `microseconds`, `microsecond`, `microsec`, `μs`, `µs`, `us`
- `nanoseconds`, `nanosecond`, `nanosec`, `ns`

Multiple time units can be combined with separators (space, `;`, `-`, `+`, `,`, `:`).

The length of years and months are approximations: year is 365 days, month is 30.5 days.
    

**Syntax**

```sql
parseReadableSizeOrZero(x)
```

**Arguments**

- `timestr` — A sequence of numbers followed by something resembling a time unit. [`String`](/sql-reference/data-types/string)


**Returned value**

The number of seconds. [`Float64`](/sql-reference/data-types/float)

**Examples**

**Usage example**

```sql title=Query
SELECT arrayJoin(['1 B', '1 KiB', '3 MB', '5.314 KiB', 'invalid']) AS readable_sizes, parseReadableSizeOrZero(readable_sizes) AS sizes;
```

```response title=Response
┌─readable_sizes─┬───sizes─┐
│ 1 B            │       1 │
│ 1 KiB          │    1024 │
│ 3 MB           │ 3000000 │
│ 5.314 KiB      │    5442 │
│ invalid        │       0 │
└────────────────┴─────────┘
```

**Complex time units**

```sql
parseTimeDelta(timestr)
```

```sql title=Query
SELECT parseTimeDelta('11s+22min')
```



## partitionId {#partitionId}

Introduced in: v21.4


Computes the [partition ID](../../engines/table-engines/mergetree-family/custom-partitioning-key.md).

:::note
This function is slow and should not be called for large numbers of rows.
:::


**Syntax**

```response title=Response
┌─parseTimeDelta('11s+22min')─┐
│                        1331 │
└─────────────────────────────┘
```

**Aliases**: `partitionID`

**Arguments**

- `column1, column2, ...` — Column for which to return the partition ID. 

**Returned value**

Returns the partition ID that the row belongs to. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT parseTimeDelta('1yr2mo')
```

```response title=Response
┌─parseTimeDelta('1yr2mo')─┐
│                 36806400 │
└──────────────────────────┘
```



## queryID {#queryID}

Introduced in: v21.9


Returns the ID of the current query.
Other parameters of a query can be extracted from field `query_id` in the [`system.query_log`](../../operations/system-tables/query_log.md) table.

In contrast to [`initialQueryID`](#initialQueryID) function, `queryID` can return different results on different shards.


**Syntax**

```sql
partitionId(column1[, column2, ...])
```

**Aliases**: `query_id`

**Arguments**

- None.

**Returned value**

Returns the ID of the current query. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
DROP TABLE IF EXISTS tab;

CREATE TABLE tab
(
  i int,
  j int
)
ENGINE = MergeTree
PARTITION BY i
ORDER BY tuple();

INSERT INTO tab VALUES (1, 1), (1, 2), (1, 3), (2, 4), (2, 5), (2, 6);

SELECT i, j, partitionId(i), _partition_id FROM tab ORDER BY i, j;
```

```response title=Response
┌─i─┬─j─┬─partitionId(i)─┬─_partition_id─┐
│ 1 │ 1 │ 1              │ 1             │
│ 1 │ 2 │ 1              │ 1             │
│ 1 │ 3 │ 1              │ 1             │
│ 2 │ 4 │ 2              │ 2             │
│ 2 │ 5 │ 2              │ 2             │
│ 2 │ 6 │ 2              │ 2             │
└───┴───┴────────────────┴───────────────┘
```



## revision {#revision}

Introduced in: v22.7


Returns the current ClickHouse server revision.
    

**Syntax**

```sql
queryID()
```

**Arguments**

- None.

**Returned value**

Returns the current ClickHouse server revision. [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
CREATE TABLE tmp (str String) ENGINE = Log;
INSERT INTO tmp (*) VALUES ('a');
SELECT count(DISTINCT t) FROM (SELECT queryID() AS t FROM remote('127.0.0.{1..3}', currentDatabase(), 'tmp') GROUP BY queryID());
```

```response title=Response
┌─count(DISTINCT t)─┐
│                 3 │
└───────────────────┘
```



## rowNumberInAllBlocks {#rowNumberInAllBlocks}

Introduced in: v1.1


Returns a unique row number for each row processed.
    

**Syntax**

```sql
revision()
```

**Arguments**

- None.

**Returned value**

Returns the ordinal number of the row in the data block starting from `0`. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT revision()
```

```response title=Response
┌─revision()─┐
│      54485 │
└────────────┘
```



## rowNumberInBlock {#rowNumberInBlock}

Introduced in: v1.1


For each [block](../../development/architecture.md#block) processed by `rowNumberInBlock`, returns the number of the current row.

The returned number starts from 0 for each block.
    

**Syntax**

```sql
rowNumberInAllBlocks()
```

**Arguments**

- None.

**Returned value**

Returns the ordinal number of the row in the data block starting from `0`. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT rowNumberInAllBlocks()
FROM
(
    SELECT *
    FROM system.numbers_mt
    LIMIT 10
)
SETTINGS max_block_size = 2
```

```response title=Response
┌─rowNumberInAllBlocks()─┐
│                      0 │
│                      1 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      4 │
│                      5 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      2 │
│                      3 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      6 │
│                      7 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      8 │
│                      9 │
└────────────────────────┘
```



## runningAccumulate {#runningAccumulate}

Introduced in: v1.1


Accumulates the states of an aggregate function for each row of a data block.

:::warning Deprecated
The state is reset for each new block of data.
Due to this error-prone behavior the function has been deprecated, and you are advised to use [window functions](/sql-reference/window-functions) instead.
You can use setting [`allow_deprecated_error_prone_window_functions`](/operations/settings/settings#allow_deprecated_error_prone_window_functions) to allow usage of this function.
:::


**Syntax**

```sql
rowNumberInBlock()
```

**Arguments**

- `agg_state` — State of the aggregate function. [`AggregateFunction`](/sql-reference/data-types/aggregatefunction)
- `grouping` — Optional. Grouping key. The state of the function is reset if the `grouping` value is changed. It can be any of the supported data types for which the equality operator is defined. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the accumulated result for each row. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example with initializeAggregation**

```sql title=Query
SELECT rowNumberInBlock()
FROM
(
    SELECT *
    FROM system.numbers_mt
    LIMIT 10
) SETTINGS max_block_size = 2
```

```response title=Response
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
```



## runningConcurrency {#runningConcurrency}

Introduced in: v21.3


Calculates the number of concurrent events.
Each event has a start time and an end time.
The start time is included in the event, while the end time is excluded.
Columns with a start time and an end time must be of the same data type.
The function calculates the total number of active (concurrent) events for each event start time.

:::tip Requirements
Events must be ordered by the start time in ascending order.
If this requirement is violated the function raises an exception.
Every data block is processed separately.
If events from different data blocks overlap then they can not be processed correctly.
:::

:::warning Deprecated
It is advised to use [window functions](/sql-reference/window-functions) instead.
:::


**Syntax**

```sql
runningAccumulate(agg_state[, grouping])
```

**Arguments**

- `start` — A column with the start time of events. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `end` — A column with the end time of events. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)


**Returned value**

Returns the number of concurrent events at each event start time. [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
WITH initializeAggregation('sumState', number) AS one_row_sum_state
SELECT
    number,
    finalizeAggregation(one_row_sum_state) AS one_row_sum,
    runningAccumulate(one_row_sum_state) AS cumulative_sum
FROM numbers(5);
```

```response title=Response
┌─number─┬─one_row_sum─┬─cumulative_sum─┐
│      0 │           0 │              0 │
│      1 │           1 │              1 │
│      2 │           2 │              3 │
│      3 │           3 │              6 │
│      4 │           4 │             10 │
└────────┴─────────────┴────────────────┘
```



## runningDifference {#runningDifference}

Introduced in: v1.1


Calculates the difference between two consecutive row values in the data block.
Returns `0` for the first row, and for subsequent rows the difference to the previous row.

:::warning Deprecated
Only returns differences inside the currently processed data block.
Because of this error-prone behavior, the function is deprecated.
It is advised to use [window functions](/sql-reference/window-functions) instead.

You can use setting [`allow_deprecated_error_prone_window_functions`](/operations/settings/settings#allow_deprecated_error_prone_window_functions) to allow usage of this function.
:::

The result of the function depends on the affected data blocks and the order of data in the block.
The order of rows during calculation of `runningDifference()` can differ from the order of rows returned to the user.
To prevent that you can create a subquery with [`ORDER BY`](../../sql-reference/statements/select/order-by.md) and call the function from outside the subquery.
Please note that the block size affects the result.
The internal state of `runningDifference` state is reset for each new block.


**Syntax**

```sql
runningConcurrency(start, end)
```

**Arguments**

- `x` — Column for which to calculate the running difference. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the difference between consecutive values, with 0 for the first row.

**Examples**

**Usage example**

```sql title=Query
SELECT start, runningConcurrency(start, end) FROM example_table;
```

```response title=Response
┌──────start─┬─runningConcurrency(start, end)─┐
│ 2025-03-03 │                              1 │
│ 2025-03-06 │                              2 │
│ 2025-03-07 │                              3 │
│ 2025-03-11 │                              2 │
└────────────┴────────────────────────────────┘
```

**Block size impact example**

```sql
runningDifference(x)
```

```sql title=Query
SELECT
    EventID,
    EventTime,
    runningDifference(EventTime) AS delta
FROM
(
    SELECT
        EventID,
        EventTime
    FROM events
    WHERE EventDate = '2025-11-24'
    ORDER BY EventTime ASC
    LIMIT 5
);
```



## runningDifferenceStartingWithFirstValue {#runningDifferenceStartingWithFirstValue}

Introduced in: v1.1


Calculates the difference between consecutive row values in a data block, but unlike [`runningDifference`](#runningDifference), it returns the actual value of the first row instead of `0`.

:::warning Deprecated
Only returns differences inside the currently processed data block.
Because of this error-prone behavior, the function is deprecated.
It is advised to use [window functions](/sql-reference/window-functions) instead.

You can use setting `allow_deprecated_error_prone_window_functions` to allow usage of this function.
:::


**Syntax**

```response title=Response
┌─EventID─┬───────────EventTime─┬─delta─┐
│    1106 │ 2025-11-24 00:00:04 │     0 │
│    1107 │ 2025-11-24 00:00:05 │     1 │
│    1108 │ 2025-11-24 00:00:05 │     0 │
│    1109 │ 2025-11-24 00:00:09 │     4 │
│    1110 │ 2025-11-24 00:00:10 │     1 │
└─────────┴─────────────────────┴───────┘
```

**Arguments**

- `x` — Column for which to calculate the running difference. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the difference between consecutive values, with the first row's value for the first row. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT
    number,
    runningDifference(number + 1) AS diff
FROM numbers(100000)
WHERE diff != 1;
```

```response title=Response
┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
┌─number─┬─diff─┐
│  65536 │    0 │
└────────┴──────┘
```



## serverUUID {#serverUUID}

Introduced in: v20.1


Returns the random and unique UUID (v4) generated when the server is first started.
The UUID is persisted, i.e. the second, third, etc. server start return the same UUID.
    

**Syntax**

```sql
runningDifferenceStartingWithFirstValue(x)
```

**Arguments**

- None.

**Returned value**

Returns the random UUID of the server. [`UUID`](/sql-reference/data-types/uuid)

**Examples**

**Usage example**

```sql title=Query
SELECT
    number,
    runningDifferenceStartingWithFirstValue(number) AS diff
FROM numbers(5);
```

```response title=Response
┌─number─┬─diff─┐
│      0 │    0 │
│      1 │    1 │
│      2 │    1 │
│      3 │    1 │
│      4 │    1 │
└────────┴──────┘
```



## shardCount {#shardCount}

Introduced in: v21.9


Returns the total number of shards for a distributed query.
If a query is not distributed then constant value `0` is returned.


**Syntax**

```sql
serverUUID()
```

**Arguments**

- None.

**Returned value**

Returns the total number of shards or `0`. [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT serverUUID();
```

```response title=Response
┌─serverUUID()─────────────────────────────┐
│ 7ccc9260-000d-4d5c-a843-5459abaabb5f     │
└──────────────────────────────────────────┘
```



## shardNum {#shardNum}

Introduced in: v21.9


Returns the index of a shard which processes a part of data in a distributed query.
Indices begin from `1`.
If a query is not distributed then a constant value `0` is returned.


**Syntax**

```sql
shardCount()
```

**Arguments**

- None.

**Returned value**

Returns the shard index or a constant `0`. [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
-- См. пример shardNum() выше, который также демонстрирует shardCount()
CREATE TABLE shard_count_example (dummy UInt8)
ENGINE=Distributed(test_cluster_two_shards_localhost, system, one, dummy);
SELECT shardCount() FROM shard_count_example;
```

```response title=Response
┌─shardCount()─┐
│            2 │
│            2 │
└──────────────┘
```



## showCertificate {#showCertificate}

Introduced in: v22.6


Shows information about the current server's Secure Sockets Layer (SSL) certificate if it has been configured.
See [Configuring SSL-TLS](/guides/sre/configuring-ssl) for more information on how to configure ClickHouse to use OpenSSL certificates to validate connections.
    

**Syntax**

```sql
shardNum()
```

**Arguments**

- None.

**Returned value**

Returns map of key-value pairs relating to the configured SSL certificate. [`Map(String, String)`](/sql-reference/data-types/map)

**Examples**

**Usage example**

```sql title=Query
CREATE TABLE shard_num_example (dummy UInt8)
ENGINE=Distributed(test_cluster_two_shards_localhost, system, one, dummy);
SELECT dummy, shardNum(), shardCount() FROM shard_num_example;
```

```response title=Response
┌─dummy─┬─shardNum()─┬─shardCount()─┐
│     0 │          1 │            2 │
│     0 │          2 │            2 │
└───────┴────────────┴──────────────┘
```



## sleep {#sleep}

Introduced in: v1.1


Pauses the execution of a query by the specified number of seconds.
The function is primarily used for testing and debugging purposes.

The `sleep()` function should generally not be used in production environments, as it can negatively impact query performance and system responsiveness.
However, it can be useful in the following scenarios:

1. **Testing**: When testing or benchmarking ClickHouse, you may want to simulate delays or introduce pauses to observe how the system behaves under certain conditions.
2. **Debugging**: If you need to examine the state of the system or the execution of a query at a specific point in time, you can use `sleep()` to introduce a pause, allowing you to inspect or collect relevant information.
3. **Simulation**: In some cases, you may want to simulate real-world scenarios where delays or pauses occur, such as network latency or external system dependencies.

:::warning
It's important to use the `sleep()` function judiciously and only when necessary, as it can potentially impact the overall performance and responsiveness of your ClickHouse system.
:::

For security reasons, the function can only be executed in the default user profile (with `allow_sleep` enabled).


**Syntax**

```sql
showCertificate()
```

**Arguments**

- `seconds` — The number of seconds to pause the query execution to a maximum of 3 seconds. It can be a floating-point value to specify fractional seconds. [`const UInt*`](/sql-reference/data-types/int-uint) or [`const Float*`](/sql-reference/data-types/float)


**Returned value**

Returns `0`. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT showCertificate() FORMAT LineAsString;
```

```response title=Response
{'version':'1','serial_number':'2D9071D64530052D48308473922C7ADAFA85D6C5','signature_algo':'sha256WithRSAEncryption','issuer':'/CN=marsnet.local CA','not_before':'May  7 17:01:21 2024 GMT','not_after':'May  7 17:01:21 2025 GMT','subject':'/CN=chnode1','pkey_algo':'rsaEncryption'}
```



## sleepEachRow {#sleepEachRow}

Introduced in: v1.1


Pauses the execution of a query for a specified number of seconds for each row in the result set.

The `sleepEachRow()` function is primarily used for testing and debugging purposes, similar to the [`sleep()`](#sleep) function.
It allows you to simulate delays or introduce pauses in the processing of each row, which can be useful in scenarios such as:

1. **Testing**: When testing or benchmarking ClickHouse's performance under specific conditions, you can use `sleepEachRow()` to simulate delays or introduce pauses for each row processed.
2. **Debugging**: If you need to examine the state of the system or the execution of a query for each row processed, you can use `sleepEachRow()` to introduce pauses, allowing you to inspect or collect relevant information.
3. **Simulation**: In some cases, you may want to simulate real-world scenarios where delays or pauses occur for each row processed, such as when dealing with external systems or network latencies.

:::warning
Like the `sleep()` function, it's important to use `sleepEachRow()` judiciously and only when necessary, as it can significantly impact the overall performance and responsiveness of your ClickHouse system, especially when dealing with large result sets.
:::


**Syntax**

```sql
sleep(seconds)
```

**Arguments**

- `seconds` — The number of seconds to pause the query execution for each row in the result set to a maximum of 3 seconds. It can be a floating-point value to specify fractional seconds. [`const UInt*`](/sql-reference/data-types/int-uint) or [`const Float*`](/sql-reference/data-types/float)


**Returned value**

Returns `0` for each row. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
-- Этот запрос будет приостановлен на 2 секунды перед завершением.
-- В течение этого времени результаты не будут возвращены, и запрос будет выглядеть зависшим или не отвечающим.
SELECT sleep(2);
```

```response title=Response
┌─sleep(2)─┐
│        0 │
└──────────┘
Получена 1 строка. Прошло: 2.012 сек.
```



## structureToCapnProtoSchema {#structureToCapnProtoSchema}

Introduced in: v


Function that converts ClickHouse table structure to CapnProto format schema


**Syntax**

```sql
sleepEachRow(seconds)
```

**Arguments**

- None.

**Returned value**



**Examples**

**random**

```sql title=Query
-- Вывод будет задержан с паузой 0,5 секунды между каждой строкой.
SELECT number, sleepEachRow(0.5) FROM system.numbers LIMIT 5;
```

```response title=Response
┌─number─┬─sleepEachRow(0.5)─┐
│      0 │                 0 │
│      1 │                 0 │
│      2 │                 0 │
│      3 │                 0 │
│      4 │                 0 │
└────────┴───────────────────┘
```



## structureToProtobufSchema {#structureToProtobufSchema}

Introduced in: v23.8


Converts a ClickHouse table structure to Protobuf format schema.

This function takes a ClickHouse table structure definition and converts it into a Protocol Buffers (Protobuf)
schema definition in proto3 syntax. This is useful for generating Protobuf schemas that match your ClickHouse
table structures for data interchange.
    

**Syntax**

```sql
```

**Arguments**

- `structure` — ClickHouse table structure definition as a string (e.g., 'column1 Type1, column2 Type2'). [`String`](/sql-reference/data-types/string)
- `message_name` — Name for the Protobuf message type in the generated schema. [`String`](/sql-reference/data-types/string)


**Returned value**

Returns a Protobuf schema definition in proto3 syntax that corresponds to the input ClickHouse structure. [`String`](/sql-reference/data-types/string)

**Examples**

**Converting ClickHouse structure to Protobuf schema**

```sql title=Query
SELECT structureToCapnProtoSchema('s String, x UInt32', 'MessageName') format TSVRaw
```

```response title=Response
struct MessageName
{
    s @0 : Data;
    x @1 : UInt32;
}
```



## tcpPort {#tcpPort}

Introduced in: v20.12


Returns the [native interface](../../interfaces/tcp.md) TCP port number listened to by the server.
If executed in the context of a distributed table, this function generates a normal column with values relevant to each shard.
Otherwise it produces a constant value.
    

**Syntax**

```sql
structureToProtobufSchema(structure, message_name)
```

**Arguments**

- None.

**Returned value**

Returns the TCP port number. [`UInt16`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT structureToProtobufSchema('s String, x UInt32', 'MessageName') FORMAT TSVRaw;
```

```response title=Response
syntax = "proto3";

message MessageName
{
    bytes s = 1;
    uint32 x = 2;
}
```



## throwIf {#throwIf}

Introduced in: v1.1


Throw an exception if argument x is true.
To use the `error_code` argument, configuration parameter `allow_custom_error_code_in_throw` must be enabled.


**Syntax**

```sql
tcpPort()
```

**Arguments**

- `x` — The condition to check. [`Any`](/sql-reference/data-types)
- `message` — Optional. Custom error message. [`const String`](/sql-reference/data-types/string)
- `error_code` — Optional. Custom error code. [`const Int8/16/32`](/sql-reference/data-types/int-uint)


**Returned value**

Returns `0` if the condition is false, throws an exception if the condition is true. [`UInt8`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT tcpPort()
```

```response title=Response
┌─tcpPort()─┐
│      9000 │
└───────────┘
```



## toColumnTypeName {#toColumnTypeName}

Introduced in: v1.1


Returns the internal name of the data type of the given value.
Unlike function [`toTypeName`](#toTypeName), the returned data type potentially includes internal wrapper columns like `Const` and `LowCardinality`.


**Syntax**

```sql
throwIf(x[, message[, error_code]])
```

**Arguments**

- `value` — Value for which to return the internal data type. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the internal data type used to represent the value. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT throwIf(number = 3, 'Слишком много') FROM numbers(10);
```

```response title=Response
↙ Прогресс: 0.00 строк, 0.00 B (0.00 строк/с., 0.00 B/с.) Получено исключение от сервера (версия 19.14.1):
Code: 395. DB::Exception: Received from localhost:9000. DB::Exception: Too many.
```



## toTypeName {#toTypeName}

Introduced in: v1.1


Returns the type name of the passed argument.
If `NULL` is passed, the function returns type `Nullable(Nothing)`, which corresponds to ClickHouse's internal `NULL` representation.
    

**Syntax**

```sql
toColumnTypeName(value)
```

**Arguments**

- `x` — A value of arbitrary type. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the data type name of the input value. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
SELECT toColumnTypeName(CAST('2025-01-01 01:02:03' AS DateTime));
```

```response title=Response
┌─toColumnTypeName(CAST('2025-01-01 01:02:03', 'DateTime'))─┐
│ Const(UInt32)                                             │
└───────────────────────────────────────────────────────────┘
```



## transactionID {#transactionID}

Introduced in: v22.6


<ExperimentalBadge/>
<CloudNotSupportedBadge/>

Returns the ID of a transaction.

:::note
This function is part of an experimental feature set.
Enable experimental transaction support by adding this setting to your [configuration](/operations/configuration-files):

```sql
toTypeName(x)
```

For more information see the page [Transactional (ACID) support](/guides/developer/transactional#transactions-commit-and-rollback).
:::
    

**Syntax**

```sql title=Query
SELECT toTypeName(123)
```

**Arguments**

- None.

**Returned value**

Returns a tuple consisting of `start_csn`, `local_tid` and `host_id`.
- `start_csn`: Global sequential number, the newest commit timestamp that was seen when this transaction began.
- `local_tid`: Local sequential number that is unique for each transaction started by this host within a specific start_csn.
- `host_id`: UUID of the host that has started this transaction.
     [`Tuple(UInt64, UInt64, UUID)`](/sql-reference/data-types/tuple)

**Examples**

**Usage example**

```response title=Response
┌─toTypeName(123)─┐
│ UInt8           │
└─────────────────┘
```

```xml
<clickhouse>
    <allow_experimental_transactions>1</allow_experimental_transactions>
</clickhouse>
```



## transactionLatestSnapshot {#transactionLatestSnapshot}

Introduced in: v22.6


<ExperimentalBadge/>
<CloudNotSupportedBadge/>

Returns the newest snapshot (Commit Sequence Number) of a [transaction](/guides/developer/transactional#transactions-commit-and-rollback) that is available for reading.

:::note
This function is part of an experimental feature set. Enable experimental transaction support by adding this setting to your configuration:

```sql
transactionID()
```

For more information see the page [Transactional (ACID) support](/guides/developer/transactional#transactions-commit-and-rollback).
:::
    

**Syntax**

```sql title=Query
BEGIN TRANSACTION;
SELECT transactionID();
ROLLBACK;
```

**Arguments**

- None.

**Returned value**

Returns the latest snapshot (CSN) of a transaction. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```response title=Response
┌─transactionID()────────────────────────────────┐
│ (32,34,'0ee8b069-f2bb-4748-9eae-069c85b5252b') │
└────────────────────────────────────────────────┘
```

```xml
<clickhouse>
    <allow_experimental_transactions>1</allow_experimental_transactions>
</clickhouse>
```



## transactionOldestSnapshot {#transactionOldestSnapshot}

Introduced in: v22.6


<ExperimentalBadge/>
<CloudNotSupportedBadge/>

Returns the oldest snapshot (Commit Sequence Number) that is visible for some running [transaction](/guides/developer/transactional#transactions-commit-and-rollback).

:::note
This function is part of an experimental feature set. Enable experimental transaction support by adding this setting to your configuration:

```sql
transactionLatestSnapshot()
```

For more information see the page [Transactional (ACID) support](/guides/developer/transactional#transactions-commit-and-rollback).
:::


**Syntax**

```sql title=Query
BEGIN TRANSACTION;
SELECT transactionLatestSnapshot();
ROLLBACK;
```

**Arguments**

- None.

**Returned value**

Returns the oldest snapshot (CSN) of a transaction. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```response title=Response
┌─transactionLatestSnapshot()─┐
│                          32 │
└─────────────────────────────┘
```

```xml
<clickhouse>
    <allow_experimental_transactions>1</allow_experimental_transactions>
</clickhouse>
```



## transform {#transform}

Introduced in: v1.1


Transforms a value according to the explicitly defined mapping of some elements to other elements.

There are two variations of this function:
- `transform(x, array_from, array_to, default)` - transforms `x` using mapping arrays with a default value for unmatched elements
- `transform(x, array_from, array_to)` - same transformation but returns the original `x` if no match is found

The function searches for `x` in `array_from` and returns the corresponding element from `array_to` at the same index.
If `x` is not found in `array_from`, it returns either the `default` value (4-parameter version) or the original `x` (3-parameter version).
If multiple matching elements exist in `array_from`, it returns the element corresponding to the first match.

Requirements:
- `array_from` and `array_to` must have the same number of elements
- For 4-parameter version: `transform(T, Array(T), Array(U), U) -> U` where `T` and `U` can be different compatible types
- For 3-parameter version: `transform(T, Array(T), Array(T)) -> T` where all types must be the same


**Syntax**

```sql
transactionOldestSnapshot()
```

**Arguments**

- `x` — Value to transform. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
- `array_from` — Constant array of values to search for matches. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Decimal)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array) or [`Array(String)`](/sql-reference/data-types/array) or [`Array(Date)`](/sql-reference/data-types/array) or [`Array(DateTime)`](/sql-reference/data-types/array)
- `array_to` — Constant array of values to return for corresponding matches in `array_from`. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Decimal)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array) or [`Array(String)`](/sql-reference/data-types/array) or [`Array(Date)`](/sql-reference/data-types/array) or [`Array(DateTime)`](/sql-reference/data-types/array)
- `default` — Optional. Value to return if `x` is not found in `array_from`. If omitted, returns x unchanged. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)


**Returned value**

Returns the corresponding value from `array_to` if x matches an element in `array_from`, otherwise returns default (if provided) or x (if default not provided). [`Any`](/sql-reference/data-types)

**Examples**

**transform(T, Array(T), Array(U), U) -> U**

```sql title=Query
BEGIN TRANSACTION;
SELECT transactionOldestSnapshot();
ROLLBACK;
```

```response title=Response
┌─transactionOldestSnapshot()─┐
│                          32 │
└─────────────────────────────┘
```

**transform(T, Array(T), Array(T)) -> T**

```sql
transform(x, array_from, array_to[, default])
```

```sql title=Query
SELECT
transform(SearchEngineID, [2, 3], ['Яндекс', 'Google'], 'Другое') AS title,
count() AS c
FROM test.hits
WHERE SearchEngineID != 0
GROUP BY title
ORDER BY c DESC
```



## uniqThetaIntersect {#uniqThetaIntersect}

Introduced in: v22.9


Two uniqThetaSketch objects to do intersect calculation(set operation ∩), the result is a new uniqThetaSketch.
    

**Syntax**

```response title=Response
┌─title─────┬──────c─┐
│ Yandex    │ 498635 │
│ Google    │ 229872 │
│ Другое    │ 104472 │
└───────────┴────────┘
```

**Arguments**

- `uniqThetaSketch` — uniqThetaSketch object. [`Tuple`](/sql-reference/data-types/tuple) or [`Array`](/sql-reference/data-types/array) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)


**Returned value**

A new uniqThetaSketch containing the intersect result. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT
transform(domain(Referer), ['yandex.ru', 'google.ru', 'vkontakte.ru'], ['www.yandex', 'example.com', 'vk.com']) AS s, count() AS c
FROM test.hits
GROUP BY domain(Referer)
ORDER BY count() DESC
LIMIT 10
```

```response title=Response
┌─s──────────────┬───────c─┐
│                │ 2906259 │
│ www.yandex     │  867767 │
│ ███████.ru     │  313599 │
│ mail.yandex.ru │  107147 │
│ ██████.ru      │  100355 │
│ █████████.ru   │   65040 │
│ news.yandex.ru │   64515 │
│ ██████.net     │   59141 │
│ example.com    │   57316 │
└────────────────┴─────────┘
```



## uniqThetaNot {#uniqThetaNot}

Introduced in: v22.9


Two uniqThetaSketch objects to do a_not_b calculation(set operation ×), the result is a new uniqThetaSketch.
    

**Syntax**

```sql
uniqThetaIntersect(uniqThetaSketch,uniqThetaSketch)
```

**Arguments**

- `uniqThetaSketch` — uniqThetaSketch object. [`Tuple`](/sql-reference/data-types/tuple) or [`Array`](/sql-reference/data-types/array) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)


**Returned value**

Returns a new uniqThetaSketch containing the a_not_b result. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT finalizeAggregation(uniqThetaIntersect(a, b)) AS a_intersect_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState', [1, 2]) AS a, arrayReduce('uniqThetaState', [2, 3, 4]) AS b);
```

```response title=Response
┌─a_intersect_b─┬─a_cardinality─┬─b_cardinality─┐
│             1 │             2 │             3 │
└───────────────┴───────────────┴───────────────┘
```



## uniqThetaUnion {#uniqThetaUnion}

Introduced in: v22.9


Two uniqThetaSketch objects to do union calculation(set operation ∪), the result is a new uniqThetaSketch.
    

**Syntax**

```sql
uniqThetaNot(uniqThetaSketch,uniqThetaSketch)
```

**Arguments**

- `uniqThetaSketch` — uniqThetaSketch object. [`Tuple`](/sql-reference/data-types/tuple) or [`Array`](/sql-reference/data-types/array) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)


**Returned value**

Returns a new uniqThetaSketch containing the union result. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT finalizeAggregation(uniqThetaNot(a, b)) AS a_not_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState', [2, 3, 4]) AS a, arrayReduce('uniqThetaState', [1, 2]) AS b);
```

```response title=Response
┌─a_not_b─┬─a_cardinality─┬─b_cardinality─┐
│       2 │             3 │             2 │
└─────────┴───────────────┴───────────────┘
```



## uptime {#uptime}

Introduced in: v1.1


Returns the server's uptime in seconds.
If executed in the context of a distributed table, this function generates a normal column with values relevant to each shard.
Otherwise it produces a constant value.
    

**Syntax**

```sql
uniqThetaUnion(uniqThetaSketch,uniqThetaSketch)
```

**Arguments**

- None.

**Returned value**

Returns the server uptime in seconds. [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT finalizeAggregation(uniqThetaUnion(a, b)) AS a_union_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState', [1, 2]) AS a, arrayReduce('uniqThetaState', [2, 3, 4]) AS b);
```

```response title=Response
┌─a_union_b─┬─a_cardinality─┬─b_cardinality─┐
│         4 │             2 │             3 │
└───────────┴───────────────┴───────────────┘
```



## variantElement {#variantElement}

Introduced in: v25.2


Extracts a column with specified type from a `Variant` column.


**Syntax**

```sql
uptime()
```

**Arguments**

- `variant` — Variant column. [`Variant`](/sql-reference/data-types/variant)
- `type_name` — The name of the variant type to extract. [`String`](/sql-reference/data-types/string)
- `default_value` — The default value that will be used if variant doesn't have variant with specified type. Can be any type. Optional. [`Any`](/sql-reference/data-types)


**Returned value**

Returns a column with the specified variant type extracted from the Variant column. [`Any`](/sql-reference/data-types)

**Examples**

**Usage example**

```sql title=Query
SELECT uptime() AS Uptime
```

```response title=Response
┌─Uptime─┐
│  55867 │
└────────┘
```



## variantType {#variantType}

Introduced in: v24.2


Returns the variant type name for each row of `Variant` column. If row contains NULL, it returns 'None' for it.


**Syntax**

```sql
variantElement(variant, type_name[, default_value])
```

**Arguments**

- `variant` — Variant column. [`Variant`](/sql-reference/data-types/variant)


**Returned value**

Returns an Enum column with variant type name for each row. [`Enum`](/sql-reference/data-types/enum)

**Examples**

**Usage example**

```sql title=Query
CREATE TABLE test (v Variant(UInt64, String, Array(UInt64))) ENGINE = Memory;
INSERT INTO test VALUES (NULL), (42), ('Hello, World!'), ([1, 2, 3]);
SELECT v, variantElement(v, 'String'), variantElement(v, 'UInt64'), variantElement(v, 'Array(UInt64)') FROM test;
```

```response title=Response
┌─v─────────────┬─variantElement(v, 'String')─┬─variantElement(v, 'UInt64')─┬─variantElement(v, 'Array(UInt64)')─┐
│ ᴺᵁᴸᴸ          │ ᴺᵁᴸᴸ                        │                        ᴺᵁᴸᴸ │ []                                 │
│ 42            │ ᴺᵁᴸᴸ                        │                          42 │ []                                 │
│ Hello, World! │ Hello, World!               │                        ᴺᵁᴸᴸ │ []                                 │
│ [1,2,3]       │ ᴺᵁᴸᴸ                        │                        ᴺᵁᴸᴸ │ [1,2,3]                            │
└───────────────┴─────────────────────────────┴─────────────────────────────┴────────────────────────────────────┘
```



## version {#version}

Introduced in: v1.1


Returns the current version of ClickHouse as a string in the form: `major_version.minor_version.patch_version.number_of_commits_since_the_previous_stable_release`.
If executed in the context of a distributed table, this function generates a normal column with values relevant to each shard.
Otherwise, it produces a constant value.
    

**Syntax**

```sql
variantType(variant)
```

**Arguments**

- None.

**Returned value**

Returns the current version of ClickHouse. [`String`](/sql-reference/data-types/string)

**Examples**

**Usage example**

```sql title=Query
CREATE TABLE test (v Variant(UInt64, String, Array(UInt64))) ENGINE = Memory;
INSERT INTO test VALUES (NULL), (42), ('Hello, World!'), ([1, 2, 3]);
SELECT variantType(v) FROM test;
```

```response title=Response
┌─variantType(v)─┐
│ None           │
│ UInt64         │
│ String         │
│ Array(UInt64)  │
└────────────────┘
```



## visibleWidth {#visibleWidth}

Introduced in: v1.1


Calculates the approximate width when outputting values to the console in text format (tab-separated).
This function is used by the system to implement Pretty formats.
`NULL` is represented as a string corresponding to `NULL` in Pretty formats.
    

**Syntax**

```sql
version()
```

**Arguments**

- `x` — A value of any data type. [`Any`](/sql-reference/data-types)


**Returned value**

Returns the approximate width of the value when displayed in text format. [`UInt64`](/sql-reference/data-types/int-uint)

**Examples**

**Calculate visible width of NULL**

```sql title=Query
SELECT version()
```

```response title=Response
┌─version()─┐
│ 24.2.1.1  │
└───────────┘
```



## zookeeperSessionUptime {#zookeeperSessionUptime}

Introduced in: v21.11


Returns the uptime of the current ZooKeeper session in seconds.


**Syntax**

```sql
visibleWidth(x)
```

**Arguments**

- None.

**Returned value**

Returns the uptime of the current ZooKeeper session in seconds. [`UInt32`](/sql-reference/data-types/int-uint)

**Examples**

**Usage example**

```sql title=Query
SELECT visibleWidth(NULL)
```

```response title=Response
┌─visibleWidth(NULL)─┐
│                  4 │
└────────────────────┘
```

## zookeeperSessionUptime {#zookeeperSessionUptime}

Появился в версии: v21.11

Возвращает время работы текущей сессии ZooKeeper в секундах.

**Синтаксис**

```sql
zookeeperSessionUptime()
```

**Аргументы**

* Отсутствуют.

**Возвращаемое значение**

Возвращает время работы текущего сеанса ZooKeeper в секундах. [`UInt32`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
SELECT zookeeperSessionUptime();
```

```response title=Response
┌─zookeeperSessionUptime()─┐
│                      286 │
└──────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
