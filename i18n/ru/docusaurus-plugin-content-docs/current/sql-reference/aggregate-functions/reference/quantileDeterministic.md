---
description: 'Вычисляет приближённый квантиль последовательности числовых данных.'
slug: /sql-reference/aggregate-functions/reference/quantiledeterministic
title: 'quantileDeterministic'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantileDeterministic \{#quantileDeterministic\}

Введена в: v1.1

Вычисляет приближенный [квантиль](https://en.wikipedia.org/wiki/Quantile) числовой последовательности данных.

Эта функция применяет [выборку из резервуара](https://en.wikipedia.org/wiki/Reservoir_sampling) с размером резервуара до 8192 и детерминированным алгоритмом выборки.
Результат детерминирован.
Чтобы получить точный квантиль, используйте функцию [`quantileExact`](/sql-reference/aggregate-functions/reference/quantileexact#quantileexact).

При использовании нескольких функций `quantile*` с разными уровнями в запросе их внутренние состояния не объединяются (то есть запрос работает менее эффективно, чем мог бы).
В этом случае используйте функцию [`quantiles`](/sql-reference/aggregate-functions/reference/quantiles#quantiles).

**Синтаксис**

```sql
quantileDeterministic(level)(expr, determinator)
```

**Псевдонимы**: `medianDeterministic`

**Параметры**

* `level` — Необязательный параметр. Уровень квантиля. Константное число с плавающей запятой от 0 до 1. Рекомендуем использовать значение `level` в диапазоне `[0.01, 0.99]`. Значение по умолчанию: 0.5. При `level=0.5` функция вычисляет медиану. [`Float*`](/sql-reference/data-types/float)

**Аргументы**

* `expr` — Выражение над значениями столбца, результатом которого является числовой тип данных, Date или DateTime. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal*`](/sql-reference/data-types/decimal) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)
* `determinator` — Число, хэш которого используется вместо генератора случайных чисел в алгоритме резервуарной выборки, чтобы сделать результат выборки детерминированным. В качестве детерминатора можно использовать любое детерминированное положительное число, например id пользователя или id события. Если одно и то же значение детерминатора встречается слишком часто, функция работает некорректно. [`(U)Int*`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает приближённый квантиль указанного уровня. [`Float64`](/sql-reference/data-types/float) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Вычисление детерминированного квантиля**

```sql title=Query
CREATE TABLE t (val UInt32) ENGINE = Memory;
INSERT INTO t VALUES (1), (1), (2), (3);

SELECT quantileDeterministic(val, 1) FROM t;
```

```response title=Response
┌─quantileDeterministic(val, 1)─┐
│                           1.5 │
└───────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**См. также**

* [median](/sql-reference/aggregate-functions/reference/median)
* [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md)
