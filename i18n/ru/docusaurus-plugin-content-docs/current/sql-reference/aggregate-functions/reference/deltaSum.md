---
description: 'Суммирует арифметическую разность между соседними строками.'
slug: /sql-reference/aggregate-functions/reference/deltasum
title: 'deltaSum'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## deltaSum \{#deltaSum\}

Появилась в версии v21.3

Складывает арифметические разности между последовательными строками.
Если разность отрицательная, она игнорируется.

:::tip
Чтобы эта функция работала корректно, исходные данные должны быть отсортированы.
Если вы хотите использовать эту функцию в [materialized view](/sql-reference/statements/create/view#materialized-view), скорее всего вам лучше использовать вместо нее функцию [`deltaSumTimestamp`](/sql-reference/aggregate-functions/reference/deltasumtimestamp).
:::

См. также:

* [`runningDifference`](/sql-reference/functions/other-functions#runningDifference)

**Синтаксис**

```sql
deltaSum(x1[, x2, ...])
```

**Аргументы**

* `x1[, x2, ...]` — одно или несколько входных значений. [`Integer`](/sql-reference/data-types/int-uint) или [`Float`](/sql-reference/data-types/float)

**Возвращаемое значение**

Возвращает суммарную арифметическую разность входных значений. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование для положительных разностей**

```sql title=Query
SELECT deltaSum(arrayJoin([1, 2, 3]))
```

```response title=Response
┌─deltaSum(arrayJoin([1, 2, 3]))─┐
│                              2 │
└────────────────────────────────┘
```

**Смешанные значения, при этом отрицательные дельты игнорируются**

```sql title=Query
SELECT deltaSum(arrayJoin([1, 2, 3, 0, 3, 4, 2, 3]))
```

```response title=Response
┌─deltaSum(arrayJoin([1, 2, 3, 0, 3, 4, 2, 3]))─┐
│                                             7 │
└───────────────────────────────────────────────┘
```

**Числа с плавающей запятой**

```sql title=Query
SELECT deltaSum(arrayJoin([2.25, 3, 4.5]))
```

```response title=Response
┌─deltaSum(arrayJoin([2.25, 3, 4.5]))─┐
│                                2.25 │
└─────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**Смотрите также**

* [`runningDifference`](/sql-reference/functions/other-functions#runningDifference)
