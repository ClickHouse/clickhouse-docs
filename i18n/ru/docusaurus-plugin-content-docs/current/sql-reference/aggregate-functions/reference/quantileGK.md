---
description: 'Вычисляет квантиль последовательности числовых данных с использованием
  алгоритма Гринвальда–Ханны.'
slug: /sql-reference/aggregate-functions/reference/quantileGK
title: 'quantileGK'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantileGK \{#quantileGK\}

Введена в: v23.4

Вычисляет [квантиль](https://en.wikipedia.org/wiki/Quantile) числовой последовательности данных с использованием алгоритма [Гринвальда–Ханны](http://infolab.stanford.edu/~datar/courses/cs361a/papers/quantiles.pdf) (Greenwald-Khanna). Алгоритм Гринвальда–Ханны используется для высокоэффективного вычисления квантилей на потоке данных. Он был предложен Майклом Гринвальдом (Michael Greenwald) и Сандживом Ханной (Sanjeev Khanna) в 2001 году. Широко используется в базах данных и системах обработки больших данных, где необходимо вычислять точные значения квантилей на большом потоке данных в режиме реального времени. Алгоритм очень эффективен, требуя лишь O(log n) памяти и O(log log n) времени на элемент (где n — размер входных данных). Он также обладает высокой точностью, обеспечивая приближённое значение квантиля с высокой вероятностью.

`quantileGK` отличается от других функций вычисления квантилей в ClickHouse, поскольку позволяет пользователю управлять точностью приблизительного результата квантиля.

**Синтаксис**

```sql
quantileGK(accuracy, level)(expr)
```

**Псевдонимы**: `medianGK`

**Параметры**

* `accuracy` — Точность квантиля. Константное положительное целое число. Чем больше значение, тем меньше погрешность. Например, если аргумент `accuracy` равен 100, вычисленный квантиль с высокой вероятностью будет иметь погрешность не более 1%. Существует компромисс между точностью вычисляемых квантилей и вычислительной сложностью алгоритма. Более высокая точность требует больше памяти и вычислительных ресурсов, тогда как меньшая точность позволяет выполнять вычисления быстрее и с меньшим потреблением памяти, но с несколько меньшей точностью. [`UInt*`](/sql-reference/data-types/int-uint)
* `level` — Необязательный параметр. Уровень квантиля. Константное число с плавающей запятой от 0 до 1. Значение по умолчанию: 0.5. При `level=0.5` функция вычисляет медиану. [`Float*`](/sql-reference/data-types/float)

**Аргументы**

* `expr` — Выражение над значениями столбца, результатом которого являются числовые типы данных, Date или DateTime. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal*`](/sql-reference/data-types/decimal) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Возвращаемое значение**

Возвращает квантиль указанного уровня и точности. [`Float64`](/sql-reference/data-types/float) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Примеры**

**Вычисление квантиля с разными уровнями точности**

```sql title=Query
SELECT quantileGK(1, 0.25)(number + 1) FROM numbers(1000);
```

```response title=Response
┌─quantileGK(1, 0.25)(plus(number, 1))─┐
│                                    1 │
└──────────────────────────────────────┘
```

**Квантиль с более высокой точностью**

```sql title=Query
SELECT quantileGK(100, 0.25)(number + 1) FROM numbers(1000);
```

```response title=Response
┌─quantileGK(100, 0.25)(plus(number, 1))─┐
│                                    251 │
└────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**См. также**

* [median](../../../sql-reference/aggregate-functions/reference/median.md)
* [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md)
