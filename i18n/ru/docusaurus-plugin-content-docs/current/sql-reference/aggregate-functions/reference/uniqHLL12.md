---
description: 'Вычисляет приблизительное количество различных значений аргумента с использованием алгоритма HyperLogLog.'
slug: /sql-reference/aggregate-functions/reference/uniqhll12
title: 'uniqHLL12'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## uniqHLL12 \{#uniqHLL12\}

Добавлена в версии: v1.1

Вычисляет приблизительное количество различных значений аргументов с использованием алгоритма [HyperLogLog](https://en.wikipedia.org/wiki/HyperLogLog).

:::warning
Мы не рекомендуем использовать эту функцию. В большинстве случаев используйте функцию [uniq](https://clickhouse.com/docs/sql-reference/aggregate-functions/reference/uniq) или [uniqCombined](https://clickhouse.com/docs/sql-reference/aggregate-functions/reference/uniqcombined).
:::

<details>
  <summary>Подробности реализации</summary>
  Эта функция вычисляет хеш для всех аргументов агрегатной функции, а затем использует его в вычислениях.
  Она использует алгоритм HyperLogLog для приближённого вычисления количества различных значений аргументов.

  Используются 2^12 ячеек по 5 бит.
  Размер состояния немного больше 2,5 КБ.
  Результат не очень точен (ошибка до ~10 %) для небольших наборов данных (&lt;10K элементов).
  Однако результат достаточно точен для наборов данных с высокой кардинальностью (10K–100M), с максимальной ошибкой до ~1,6 %.
  Начиная с 100M ошибка оценки увеличивается, и функция будет возвращать очень неточные результаты для наборов данных с чрезвычайно высокой кардинальностью (1B+ элементов).

  Обеспечивает детерминированный результат (он не зависит от порядка обработки запроса).
</details>

**Синтаксис**

```sql
uniqHLL12(x[, ...])
```

**Аргументы**

* `x` — Функция принимает произвольное количество параметров. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`String`](/sql-reference/data-types/string) или [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает число типа UInt64, представляющее приблизительное количество различных значений аргументов. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Базовое использование**

```sql title=Query
CREATE TABLE example_hll
(
    id UInt32,
    category String
)
ENGINE = Memory;

INSERT INTO example_hll VALUES
(1, 'A'), (2, 'B'), (3, 'A'), (4, 'C'), (5, 'B'), (6, 'A');

SELECT uniqHLL12(category) AS hll_unique_categories
FROM example_hll;
```

```response title=Response
┌─hll_unique_categories─┐
│                     3 │
└───────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**См. также**

* [uniq](/sql-reference/aggregate-functions/reference/uniq)
* [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
* [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
* [uniqTheta](/sql-reference/aggregate-functions/reference/uniqthetasketch)
