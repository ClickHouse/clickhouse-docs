---
description: 'Вычисляет скользящую сумму по входным значениям.'
slug: /sql-reference/aggregate-functions/reference/grouparraymovingsum
title: 'groupArrayMovingSum'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## groupArrayMovingSum \{#groupArrayMovingSum\}

Появилась в версии: v20.1

Вычисляет скользящую сумму входных значений.

Функция может принимать размер окна в качестве параметра. Если он не указан, функция использует размер окна, равный числу строк в столбце.

**Синтаксис**

```sql
groupArrayMovingSum(numbers_for_summing)
groupArrayMovingSum(window_size)(numbers_for_summing)
```

**Параметры**

* `window_size` — Размер окна вычислений. Если параметр не указан, функция использует размер окна, равный количеству строк в столбце. [`UInt64`](/sql-reference/data-types/int-uint)

**Аргументы**

* `numbers_for_summing` — выражение, результатом которого является значение числового типа данных. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает массив того же размера и типа, что и входные данные. [`Array`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
CREATE TABLE t
(
    `int` UInt8,
    `float` Float32,
    `dec` Decimal32(2)
)
ENGINE = Memory;

INSERT INTO t VALUES (1, 1.1, 1.10), (2, 2.2, 2.20), (4, 4.4, 4.40), (7, 7.77, 7.77);

SELECT
    groupArrayMovingSum(int) AS I,
    groupArrayMovingSum(float) AS F,
    groupArrayMovingSum(dec) AS D
FROM t;
```

```response title=Response
┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,7,14] │ [1.1,3.3000002,7.7000003,15.47] │ [1.10,3.30,7.70,15.47] │
└────────────┴─────────────────────────────────┴────────────────────────┘
```

**С заданным размером окна**

```sql title=Query
SELECT
    groupArrayMovingSum(2)(int) AS I,
    groupArrayMovingSum(2)(float) AS F,
    groupArrayMovingSum(2)(dec) AS D
FROM t;
```

```response title=Response
┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,6,11] │ [1.1,3.3000002,6.6000004,12.17] │ [1.10,3.30,6.60,12.17] │
└────────────┴─────────────────────────────────┴────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
