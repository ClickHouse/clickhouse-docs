---
description: 'quantiles, quantilesExactExclusive, quantilesExactInclusive, quantilesGK'
slug: /sql-reference/aggregate-functions/reference/quantiles
title: 'Функции quantiles'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantiles \{#quantiles\}

Введено в: v1.1

Вычисляет несколько приближённых [квантилей](https://en.wikipedia.org/wiki/Quantile) числовой последовательности данных на разных уровнях одновременно.

Эта функция применяет [reservoir sampling](https://en.wikipedia.org/wiki/Reservoir_sampling) с размером резервуара до 8192 и генератором случайных чисел для выборки.
Результат недетерминирован.

Использование `quantiles` более эффективно, чем вызов нескольких отдельных функций `quantile`, когда вам нужно несколько значений квантилей, так как все квантили вычисляются за один проход по данным.

**Синтаксис**

```sql
quantiles(level1, level2, ...)(expr)
```

**Параметры**

* `level` — уровни квантилей. Одно или несколько константных чисел с плавающей запятой от 0 до 1. Рекомендуется использовать значения `level` в диапазоне `[0.01, 0.99]`. [`Float*`](/sql-reference/data-types/float)

**Аргументы**

* `expr` — выражение над значениями столбца, результатом которого являются числовые типы данных, Date или DateTime. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal*`](/sql-reference/data-types/decimal) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Возвращаемое значение**

Массив приблизительных квантилей заданных уровней в том же порядке, в котором уровни были указаны. [`Array(Float64)`](/sql-reference/data-types/array) или [`Array(Date)`](/sql-reference/data-types/array) или [`Array(DateTime)`](/sql-reference/data-types/array)

**Примеры**

**Эффективное вычисление нескольких квантилей**

```sql title=Query
CREATE TABLE t (val UInt32) ENGINE = Memory;
INSERT INTO t VALUES (1), (1), (2), (3), (4), (5), (6), (7), (8), (9), (10);

SELECT quantiles(0.25, 0.5, 0.75, 0.9)(val) FROM t;
```

```response title=Response
┌─quantiles(0.25, 0.5, 0.75, 0.9)(val)─┐
│ [3, 5.5, 8, 9.5]                     │
└──────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
