---
description: 'Точно вычисляет квантили последовательности числовых данных.'
slug: /sql-reference/aggregate-functions/reference/quantilesExactExclusive
title: 'quantilesExactExclusive'
doc_type: 'reference'
---

## quantilesExactExclusive {#quantilesexactexclusive}

Точно вычисляет [квантили](https://en.wikipedia.org/wiki/Quantile) числовой последовательности данных.

Для получения точного значения все переданные значения объединяются в массив, который затем частично сортируется. Поэтому функция требует `O(n)` памяти, где `n` — количество переданных значений. Однако при небольшом числе значений функция работает очень эффективно.

Эта функция эквивалентна функции Excel [PERCENTILE.EXC](https://support.microsoft.com/en-us/office/percentile-exc-function-bbaa7204-e9e1-4010-85bf-c31dc5dce4ba) ([тип R6](https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample)).

Работает более эффективно с наборами уровней, чем [quantileExactExclusive](../../../sql-reference/aggregate-functions/reference/quantileExactExclusive.md).

**Синтаксис**

```sql
quantilesExactExclusive(level1, level2, ...)(expr)
```

**Аргументы**

* `expr` — Выражение над значениями столбца, результатом которого являются числовые [типы данных](/sql-reference/data-types), [Date](../../../sql-reference/data-types/date.md) или [DateTime](../../../sql-reference/data-types/datetime.md).

**Параметры**

* `level` — Уровни квантилей. Возможные значения: (0, 1) — границы не включены. [Float](../../../sql-reference/data-types/float.md).

**Возвращаемое значение**

* [Array](../../../sql-reference/data-types/array.md) квантилей для заданных уровней.

Тип значений массива:

* [Float64](../../../sql-reference/data-types/float.md), если на вход подаётся числовой тип данных.
* [Date](../../../sql-reference/data-types/date.md), если входные значения имеют тип `Date`.
* [DateTime](../../../sql-reference/data-types/datetime.md), если входные значения имеют тип `DateTime`.

**Пример**

Запрос:

```sql
CREATE TABLE num AS numbers(1000);

SELECT quantilesExactExclusive(0.25, 0.5, 0.75, 0.9, 0.95, 0.99, 0.999)(x) FROM (SELECT number AS x FROM num);
```

Результат:

```text
┌─quantilesExactExclusive(0.25, 0.5, 0.75, 0.9, 0.95, 0.99, 0.999)(x)─┐
│ [249.25,499.5,749.75,899.9,949.9499999999999,989.99,998.999]        │
└─────────────────────────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
