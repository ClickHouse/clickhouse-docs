---
description: 'Точно вычисляет квантили последовательности числовых данных.'
slug: /sql-reference/aggregate-functions/reference/quantilesExactExclusive
title: 'quantilesExactExclusive'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantilesExactExclusive \{#quantilesExactExclusive\}

Введена в версии v20.1

Точно вычисляет несколько [квантилей](https://en.wikipedia.org/wiki/Quantile) последовательности числовых данных на разных уровнях одновременно, используя эксклюзивный метод.

Эта функция эквивалентна [`quantileExactExclusive`](/sql-reference/aggregate-functions/reference/quantileExactExclusive), но позволяет вычислять несколько уровней квантилей за один проход, что более эффективно, чем вызов отдельных функций квантилей.

Эта функция использует эксклюзивный метод вычисления квантилей, описанный в [методе R-6](https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample).
Она эквивалентна функции Excel [PERCENTILE.EXC](https://support.microsoft.com/en-us/office/percentile-exc-function-bbaa7204-e9e1-4010-85bf-c31dc5dce4ba).

Для получения точных значений все переданные значения объединяются в массив, который затем частично сортируется.
Сложность алгоритма сортировки составляет `O(N·log(N))`, где `N = std::distance(first, last)` сравнений.

**Синтаксис**

```sql
quantilesExactExclusive(level1, level2, ...)(expr)
```

**Параметры**

* `level` — уровни квантилей. Константы с плавающей запятой от 0 до 1 (не включительно). Рекомендуется использовать значения `level` в диапазоне `(0.01, 0.99)`. [`Float*`](/sql-reference/data-types/float)

**Аргументы**

* `expr` — выражение над значениями столбца, результатом которого могут быть числовые типы данных, Date или DateTime. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal*`](/sql-reference/data-types/decimal) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Возвращаемое значение**

Массив квантилей для указанных уровней в том же порядке, в котором были заданы уровни. [`Array(Float64)`](/sql-reference/data-types/array)

**Примеры**

**Вычисление нескольких точных эксклюзивных квантилей**

```sql title=Query
CREATE TABLE num AS numbers(1000);
SELECT quantilesExactExclusive(0.25, 0.5, 0.75, 0.9, 0.95, 0.99, 0.999)(number) FROM num;
```

```response title=Response
┌─quantilesExactExclusive(0.25, 0.5, 0.75, 0.9, 0.95, 0.99, 0.999)(number)─┐
│ [249.25,499.5,749.75,899.9,949.95,989.99,998.999]                        │
└──────────────────────────────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
