---
description: 'Вычисляет приблизительное число различных значений аргумента с использованием фреймворка Theta Sketch.'
slug: /sql-reference/aggregate-functions/reference/uniqthetasketch
title: 'uniqTheta'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## uniqTheta \{#uniqTheta\}

Добавлено в версии v21.6

Вычисляет приблизительное количество различных значений аргумента, используя [Theta Sketch Framework](https://datasketches.apache.org/docs/Theta/ThetaSketches.html#theta-sketch-framework).

<details>
  <summary>Подробности реализации</summary>

  Эта функция вычисляет хеш для всех аргументов в агрегате, затем использует его в вычислениях.
  Для аппроксимации числа различных значений аргумента используется алгоритм [KMV](https://datasketches.apache.org/docs/Theta/InverseEstimate.html).

  Используются 4096 (2^12) 64-разрядных скетчей (sketch).
  Размер состояния составляет примерно 41 KB.

  Относительная ошибка составляет 3,125% (при 95%-м уровне доверия), подробности см. в [таблице относительных ошибок](https://datasketches.apache.org/docs/Theta/ThetaErrorTable.html).
</details>

**Синтаксис**

```sql
uniqTheta(x[, ...])
```

**Аргументы**

* `x` — функция принимает переменное число аргументов. [`Tuple(T)`](/sql-reference/data-types/tuple) или [`Array(T)`](/sql-reference/data-types/array) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime) или [`String`](/sql-reference/data-types/string) или [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает число типа UInt64, которое представляет собой приблизительную оценку количества различных значений аргументов. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Базовое использование**

```sql title=Query
CREATE TABLE example_theta
(
    id UInt32,
    category String
)
ENGINE = Memory;

INSERT INTO example_theta VALUES
(1, 'A'), (2, 'B'), (3, 'A'), (4, 'C'), (5, 'B'), (6, 'A');

SELECT uniqTheta(category) as theta_unique_categories
FROM example_theta;
```

```response title=Response
┌─theta_unique_categories─┐
│                       3 │
└─────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**См. также**

* [uniq](/sql-reference/aggregate-functions/reference/uniq)
* [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
* [uniqCombined64](/sql-reference/aggregate-functions/reference/uniqcombined64)
* [uniqHLL12](/sql-reference/aggregate-functions/reference/uniqhll12)
* [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
