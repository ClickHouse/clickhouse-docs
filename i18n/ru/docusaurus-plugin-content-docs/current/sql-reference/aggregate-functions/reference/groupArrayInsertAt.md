---
description: 'Вставляет значение в массив в заданную позицию.'
slug: /sql-reference/aggregate-functions/reference/grouparrayinsertat
title: 'groupArrayInsertAt'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## groupArrayInsertAt \{#groupArrayInsertAt\}

Появилось в: v1.1

Вставляет значение в массив в указанную позицию.

Если в одном запросе в одну и ту же позицию вставляется несколько значений, функция ведёт себя следующим образом:

* Если запрос выполняется в одном потоке, используется первое из вставленных значений.
* Если запрос выполняется в нескольких потоках, результирующим значением становится одно из вставленных значений, выбранное неопределённым образом.

**Синтаксис**

```sql
groupArrayInsertAt(default_x, size)([x, pos])
```

**Параметры**

* `default_x` — Необязательный параметр. Значение по умолчанию для подстановки в пустые позиции. [`Any`](/sql-reference/data-types)
* `size` — Необязательный параметр. Длина результирующего массива. При использовании этого параметра необходимо указать значение по умолчанию `default_x`. [`UInt32`](/sql-reference/data-types/int-uint)

**Аргументы**

* `x` — Вставляемое значение. [`Any`](/sql-reference/data-types)
* `pos` — Позиция, в которую необходимо вставить указанный элемент `x`. Нумерация элементов в массиве начинается с нуля. [`UInt32`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив со вставленными значениями. [`Array`](/sql-reference/data-types/array)

**Примеры**

**Базовое использование без параметров**

```sql title=Query
SELECT groupArrayInsertAt(toString(number), number * 2) FROM numbers(5);
```

```response title=Response
┌─groupArrayInsertAt(toString(number), multiply(number, 2))─┐
│ ['0','','1','','2','','3','','4']                         │
└───────────────────────────────────────────────────────────┘
```

**Использование параметра значения по умолчанию**

```sql title=Query
SELECT groupArrayInsertAt('-')(toString(number), number * 2) FROM numbers(5);
```

```response title=Response
┌─groupArrayInsertAt('-')(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2','-','3','-','4']                          │
└────────────────────────────────────────────────────────────────┘
```

**Использование с параметрами значения и размера по умолчанию**

```sql title=Query
SELECT groupArrayInsertAt('-', 5)(toString(number), number * 2) FROM numbers(5);
```

```response title=Response
┌─groupArrayInsertAt('-', 5)(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2']                                             │
└───────────────────────────────────────────────────────────────────┘
```

**Многопоточная вставка в одну позицию**

```sql title=Query
SELECT groupArrayInsertAt(number, 0) FROM numbers_mt(10) SETTINGS max_block_size = 1;
```

```response title=Response
┌─groupArrayInsertAt(number, 0)─┐
│ [7]                           │
└───────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
