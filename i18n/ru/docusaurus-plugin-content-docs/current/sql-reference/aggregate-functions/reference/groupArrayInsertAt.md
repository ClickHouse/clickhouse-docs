---
description: 'Вставляет значение в массив в заданную позицию.'
slug: /sql-reference/aggregate-functions/reference/grouparrayinsertat
title: 'groupArrayInsertAt'
doc_type: 'reference'
---

# groupArrayInsertAt \{#grouparrayinsertat\}

Вставляет значение в массив на указанную позицию.

**Синтаксис**

```sql
groupArrayInsertAt(default_x, size)(x, pos)
```

Если в одном запросе несколько значений вставляются в одну и ту же позицию, функция ведёт себя следующим образом:

* Если запрос выполняется в одном потоке, используется первое из вставленных значений.
* Если запрос выполняется в нескольких потоках, результирующим значением будет одно из вставленных значений, выбираемое недетерминированным образом.

**Аргументы**

* `x` — значение для вставки. [Выражение](/sql-reference/syntax#expressions), приводящее к одному из [поддерживаемых типов данных](../../../sql-reference/data-types/index.md).
* `pos` — позиция, в которую должно быть вставлено указанное значение `x`. Нумерация индексов в массиве начинается с нуля. [UInt32](/sql-reference/data-types/int-uint#integer-ranges).
* `default_x` — значение по умолчанию для подстановки в пустые позиции. Необязательный параметр. [Выражение](/sql-reference/syntax#expressions), приводящее к тому же типу данных, что и параметр `x`. Если `default_x` не задан, используются [значения по умолчанию](/sql-reference/statements/create/table).
* `size` — длина результирующего массива. Необязательный параметр. При использовании этого параметра должно быть указано значение по умолчанию `default_x`. [UInt32](/sql-reference/data-types/int-uint#integer-ranges).

**Возвращаемое значение**

* Массив со вставленными значениями.

Тип: [Array](/sql-reference/data-types/array).

**Пример**

Запрос:

```sql
SELECT groupArrayInsertAt(toString(number), number * 2) FROM numbers(5);
```

Результат:

```text
┌─groupArrayInsertAt(toString(number), multiply(number, 2))─┐
│ ['0','','1','','2','','3','','4']                         │
└───────────────────────────────────────────────────────────┘
```

Запрос:

```sql
SELECT groupArrayInsertAt('-')(toString(number), number * 2) FROM numbers(5);
```

Результат:

```text
┌─groupArrayInsertAt('-')(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2','-','3','-','4']                          │
└────────────────────────────────────────────────────────────────┘
```

Запрос:

```sql
SELECT groupArrayInsertAt('-', 5)(toString(number), number * 2) FROM numbers(5);
```

Результат:

```text
┌─groupArrayInsertAt('-', 5)(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2']                                             │
└───────────────────────────────────────────────────────────────────┘
```

Многопоточная вставка элементов в одну и ту же позицию.

Запрос:

```sql
SELECT groupArrayInsertAt(number, 0) FROM numbers_mt(10) SETTINGS max_block_size = 1;
```

В результате выполнения этого запроса вы получите случайное целое число в диапазоне `[0, 9]`. Например:

```text
┌─groupArrayInsertAt(number, 0)─┐
│ [7]                           │
└───────────────────────────────┘
```

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
