---
description: 'Вычисляет AND над битмап-столбцом и возвращает мощность множества типа
  UInt64. Если добавить суффикс -State, возвращается объект битмапа.'
slug: /sql-reference/aggregate-functions/reference/groupbitmapand
title: 'groupBitmapAnd'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## groupBitmapAnd \{#groupBitmapAnd\}

Впервые появилась в: v20.1

Вычисляет AND над битмап-столбцом и возвращает его мощность множества.
Если добавить суффикс-комбинатор [`-State`](/sql-reference/aggregate-functions/combinators#-state), возвращается объект битмапа.

**Синтаксис**

```sql
groupBitmapAnd(expr)
groupBitmapAndState(expr)
```

**Аргументы**

* `expr` — выражение, результатом которого является значение типа `AggregateFunction(groupBitmap, UInt*)`. [`AggregateFunction(groupBitmap, UInt*)`](/sql-reference/data-types/aggregatefunction)

**Возвращаемое значение**

Возвращает значение-счётчик типа `UInt64` или объект битмапа при использовании суффикса `-State`. [`UInt64`](/sql-reference/data-types/int-uint)

**Примеры**

**Пример использования**

```sql title=Query
CREATE TABLE bitmap_column_expr_test2
(
    tag_id String,
    z AggregateFunction(groupBitmap, UInt32)
)
ENGINE = MergeTree
ORDER BY tag_id;

INSERT INTO bitmap_column_expr_test2 VALUES ('tag1', bitmapBuild(cast([1,2,3,4,5,6,7,8,9,10] AS Array(UInt32))));
INSERT INTO bitmap_column_expr_test2 VALUES ('tag2', bitmapBuild(cast([6,7,8,9,10,11,12,13,14,15] AS Array(UInt32))));
INSERT INTO bitmap_column_expr_test2 VALUES ('tag3', bitmapBuild(cast([2,4,6,8,10,12] AS Array(UInt32))));

SELECT groupBitmapAnd(z) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%');
```

```response title=Response
┌─groupBitmapAnd(z)─┐
│               3   │
└───────────────────┘
```

**Использование комбинатора -State**

```sql title=Query
SELECT arraySort(bitmapToArray(groupBitmapAndState(z))) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%');
```

```response title=Response
┌─arraySort(bitmapToArray(groupBitmapAndState(z)))─┐
│ [6,8,10]                                         │
└──────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
