---
slug: /sql-reference/aggregate-functions/reference/quantiletiming
sidebar_position: 180
title: 'quantileTiming'
description: 'С заданной точностью вычисляет квартиль числовой последовательности данных.'
---


# quantileTiming

С заданной точностью вычисляет [квартиль](https://en.wikipedia.org/wiki/Quantile) числовой последовательности данных.

Результат детерминированный (не зависит от порядка обработки запроса). Функция оптимизирована для работы с последовательностями, которые описывают распределения, такие как время загрузки веб-страниц или время отклика бэкенда.

При использовании нескольких функций `quantile*` с различными уровнями в запросе внутренние состояния не объединяются (это означает, что запрос работает менее эффективно, чем мог бы). В этом случае используйте функцию [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md#quantiles).

**Синтаксис**

``` sql
quantileTiming(level)(expr)
```

Псевдоним: `medianTiming`.

**Аргументы**

- `level` — Уровень квартиля. Необязательный параметр. Константное число с плавающей запятой от 0 до 1. Рекомендуем использовать значение `level` в диапазоне `[0.01, 0.99]`. Значение по умолчанию: 0.5. При `level=0.5` функция вычисляет [медиану](https://en.wikipedia.org/wiki/Median).

- `expr` — [Выражение](/sql-reference/syntax#expressions) по значениям колонки, возвращающее число типа [Float\*](../../../sql-reference/data-types/float.md).

    - Если функции передаются отрицательные значения, поведение неопределено.
    - Если значение больше 30 000 (время загрузки страницы более 30 секунд), предполагается, что оно равно 30 000.

**Точность**

Расчет точен, если:

- Общее количество значений не превышает 5670.
- Общее количество значений превышает 5670, но время загрузки страницы меньше 1024 мс.

В противном случае результат вычисления округляется до ближайшего кратного 16 мс.

:::note    
Для вычисления квартилей времени загрузки страниц эта функция более эффективна и точна, чем [quantile](/sql-reference/aggregate-functions/reference/quantile).
:::

**Возвращаемое значение**

- Квартиль указанного уровня.

Тип: `Float32`.

:::note    
Если функции не передаются значения (при использовании `quantileTimingIf`), возвращается [NaN](/sql-reference/data-types/float#nan-and-inf). Это сделано для того, чтобы отличать эти случаи от случаев, которые приводят к нулю. См. [ORDER BY clause](/sql-reference/statements/select/order-by) для примечаний о сортировке значений `NaN`.
:::

**Пример**

Входная таблица:

``` text
┌─response_time─┐
│            72 │
│           112 │
│           126 │
│           145 │
│           104 │
│           242 │
│           313 │
│           168 │
│           108 │
└───────────────┘
```

Запрос:

``` sql
SELECT quantileTiming(response_time) FROM t
```

Результат:

``` text
┌─quantileTiming(response_time)─┐
│                           126 │
└───────────────────────────────┘
```

**Смотрите также**

- [медиана](/sql-reference/aggregate-functions/reference/median)
- [квартиль](Arrays and Statistics.cs)
