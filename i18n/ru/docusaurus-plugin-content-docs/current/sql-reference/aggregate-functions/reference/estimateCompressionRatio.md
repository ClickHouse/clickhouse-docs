---
description: 'Оценивает степень сжатия заданного столбца без выполнения его сжатия.'
slug: /sql-reference/aggregate-functions/reference/estimateCompressionRatio
title: 'estimateCompressionRatio'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## estimateCompressionRatio \{#estimateCompressionRatio\}

Добавлено в версии v25.4

Оценивает коэффициент сжатия заданного столбца без фактического сжатия.

:::note
В примерах ниже результат будет отличаться в зависимости от кодека сжатия по умолчанию, используемого сервером.
См. [Column Compression Codecs](/sql-reference/statements/create/table#column_compression_codec).
:::

**Синтаксис**

```sql
estimateCompressionRatio([codec, block_size_bytes])(column)
```

**Параметры**

* `codec` — Строка, содержащая кодек сжатия или несколько кодеков, разделённых запятыми, в одной строке. [`String`](/sql-reference/data-types/string)
* `block_size_bytes` — Размер блока сжатых данных. Эквивалентно одновременному заданию [`max_compress_block_size`](../../../operations/settings/merge-tree-settings.md#max_compress_block_size) и [`min_compress_block_size`](../../../operations/settings/merge-tree-settings.md#min_compress_block_size). Значение по умолчанию — 1 MiB (1048576 байт). [`UInt64`](/sql-reference/data-types/int-uint)

**Аргументы**

* `column` — Столбец любого типа. [`Any`](/sql-reference/data-types)

**Возвращаемое значение**

Возвращает приблизительный коэффициент сжатия для заданного столбца. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Базовое использование с кодеком по умолчанию**

```sql title=Query
CREATE TABLE compression_estimate_example
(
    `number` UInt64
)
ENGINE = MergeTree()
ORDER BY number
SETTINGS min_bytes_for_wide_part = 0;

INSERT INTO compression_estimate_example
SELECT number FROM system.numbers LIMIT 100_000;

SELECT estimateCompressionRatio(number) AS estimate FROM compression_estimate_example
```

```response title=Response
┌───────────estimate─┐
│ 1.9988506608699999 │
└────────────────────┘
```

**Использование определённого кодека**

```sql title=Query
SELECT estimateCompressionRatio('T64')(number) AS estimate FROM compression_estimate_example
```

```response title=Response
┌──────────estimate─┐
│ 3.762758101688538 │
└───────────────────┘
```

**Использование нескольких кодировщиков**

```sql title=Query
SELECT estimateCompressionRatio('T64, ZSTD')(number) AS estimate FROM compression_estimate_example
```

```response title=Response
┌───────────estimate─┐
│ 143.60078980434392 │
└────────────────────┘
```

{/*AUTOGENERATED_END*/ }
