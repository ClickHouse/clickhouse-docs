---
description: 'Точно вычисляет квантили числовой последовательности данных.'
slug: /sql-reference/aggregate-functions/reference/quantilesExactInclusive
title: 'quantilesExactInclusive'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantilesExactInclusive \{#quantilesExactInclusive\}

Введена в версии: v20.1

Точно вычисляет несколько [квантилей](https://en.wikipedia.org/wiki/Quantile) числовой последовательности на разных уровнях одновременно с использованием инклюзивного метода.

Эта функция эквивалентна [`quantileExactInclusive`](/sql-reference/aggregate-functions/reference/quantileexactinclusive), но позволяет вычислять несколько уровней квантилей за один проход, что эффективнее, чем вызывать отдельные функции квантилей.

Эта функция использует инклюзивный метод вычисления квантилей, как описано в [методе R-7](https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample).
Она эквивалентна функции Excel [PERCENTILE.INC](https://support.microsoft.com/en-us/office/percentile-inc-function-680f9539-45eb-410b-9a5e-c1355e5fe2ed).

Для получения точных значений все переданные значения объединяются в массив, который затем частично сортируется.
Сложность алгоритма сортировки — `O(N·log(N))`, где `N = std::distance(first, last)` сравнений.

**Синтаксис**

```sql
quantilesExactInclusive(level1, level2, ...)(expr)
```

**Параметры**

* `level` — уровни квантилей. Константные числа с плавающей запятой от 0 до 1 (включительно). Рекомендуется использовать значения `level` в диапазоне `[0.01, 0.99]`. [`Float*`](/sql-reference/data-types/float)

**Аргументы**

* `expr` — выражение над значениями столбца, результатом которого являются числовые типы данных, Date или DateTime. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal*`](/sql-reference/data-types/decimal) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Возвращаемое значение**

Массив квантилей для указанных уровней в том же порядке, в котором они были заданы. [`Array(Float64)`](/sql-reference/data-types/array)

**Примеры**

**Вычисление нескольких точных квантилей с включающими границами**

```sql title=Query
CREATE TABLE num AS numbers(1000);
SELECT quantilesExactInclusive(0.25, 0.5, 0.75, 0.9, 0.95, 0.99, 0.999)(number) FROM num;
```

```response title=Response
┌─quantilesExactInclusive(0.25, 0.5, 0.75, 0.9, 0.95, 0.99, 0.999)(number)─┐
│ [249.75,499.5,749.25,899.1,949.05,989.01,998.001]                        │
└──────────────────────────────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
