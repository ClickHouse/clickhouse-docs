---
description: 'Точно вычисляет квантиль последовательности числовых данных.'
slug: /sql-reference/aggregate-functions/reference/quantileExactInclusive
title: 'quantileExactInclusive'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantileExactInclusive \{#quantileExactInclusive\}

Добавлена в: v20.1

Подобно функции [`quantileExact`](/sql-reference/aggregate-functions/reference/quantileexact), эта функция вычисляет точный [квантиль](https://en.wikipedia.org/wiki/Quantile) числовой последовательности данных.

Эта функция эквивалентна [`quantileExact`](/sql-reference/aggregate-functions/reference/quantileexact), но использует инклюзивный метод вычисления квантилей, как описано в [методе R-7](https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample).

При использовании этой функции квантиль вычисляется так, что интерполяционная формула для заданного квантили p имеет вид: `x[floor((n-1)*p)] + ((n-1)*p - floor((n-1)*p)) * (x[floor((n-1)*p)+1] - x[floor((n-1)*p)])`, где x — отсортированный массив.

Для получения точного значения все переданные значения объединяются в массив, который затем полностью сортируется.
Сложность алгоритма сортировки — `O(N·log(N))`, при этом выполняется `N = std::distance(first, last)` сравнений.

При использовании нескольких функций `quantile*` с различными уровнями в одном запросе их внутренние состояния не объединяются (то есть запрос работает менее эффективно, чем мог бы).
В этом случае используйте функцию [quantiles](/sql-reference/aggregate-functions/reference/quantiles).

**Синтаксис**

```sql
quantileExactInclusive(level)(expr)
```

**Параметры**

* `level` — Уровень квантиля. Константа с плавающей запятой от 0 до 1 (включительно). Рекомендуется использовать значение `level` в диапазоне `[0.01, 0.99]`. [`Float*`](/sql-reference/data-types/float)

**Аргументы**

* `expr` — Выражение над значениями столбца, результатом которого является один из следующих типов данных: числовые типы, Date или DateTime. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal*`](/sql-reference/data-types/decimal) или [`Date`](/sql-reference/data-types/date) или [`DateTime`](/sql-reference/data-types/datetime)

**Возвращаемое значение**

Возвращает квантиль указанного уровня. [`Float64`](/sql-reference/data-types/float)

**Примеры**

**Вычисление точного включающего квантиля**

```sql title=Query
SELECT quantileExactInclusive(0.25)(number) FROM numbers(5);
```

```response title=Response
┌─quantileExactInclusive(0.25)(number)─┐
│                                    1 │
└──────────────────────────────────────┘
```

**Вычисление квантилей для нескольких уровней**

```sql title=Query
SELECT quantileExactInclusive(0.1)(number), quantileExactInclusive(0.9)(number) FROM numbers(10);
```

```response title=Response
┌─quantileExactInclusive(0.1)(number)─┬─quantileExactInclusive(0.9)(number)─┐
│                                 0.9 │                                 8.1 │
└─────────────────────────────────────┴─────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
