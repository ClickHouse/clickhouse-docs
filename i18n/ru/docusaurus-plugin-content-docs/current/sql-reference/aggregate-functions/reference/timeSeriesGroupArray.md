---
description: 'Сортирует временные ряды по возрастанию метки времени.'
slug: /sql-reference/aggregate-functions/reference/timeSeriesGroupArray
title: 'timeSeriesGroupArray'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## timeSeriesGroupArray \{#timeSeriesGroupArray\}

Введена в версии v25.9

Сортирует данные временных рядов по метке времени в порядке возрастания.

:::note
Эта функция является экспериментальной; включите её, установив `allow_experimental_ts_to_grid_aggregate_function=true`.
:::

**Синтаксис**

```sql
timeSeriesGroupArray(timestamp, value)
```

**Аргументы**

* `timestamp` — Метка времени отсчёта. [`DateTime`](/sql-reference/data-types/datetime) или [`UInt32`](/sql-reference/data-types/int-uint) или [`UInt64`](/sql-reference/data-types/int-uint)
* `value` — Значение временного ряда, соответствующее метке времени. [`(U)Int*`](/sql-reference/data-types/int-uint) или [`Float*`](/sql-reference/data-types/float) или [`Decimal`](/sql-reference/data-types/decimal)

**Возвращаемое значение**

Возвращает массив кортежей `(timestamp, value)`, отсортированных по метке времени в порядке возрастания. Если для одной и той же метки времени есть несколько значений, функция выбирает наибольшее из них. [`Array(Tuple(T1, T2))`](/sql-reference/data-types/array)

**Примеры**

**Базовое использование с отдельными значениями**

```sql title=Query
WITH
    [110, 120, 130, 140, 140, 100]::Array(UInt32) AS timestamps,
    [1, 6, 8, 17, 19, 5]::Array(Float32) AS values
SELECT timeSeriesGroupArray(timestamp, value)
FROM
(
    SELECT
        arrayJoin(arrayZip(timestamps, values)) AS ts_and_val,
        ts_and_val.1 AS timestamp,
        ts_and_val.2 AS value
);
```

```response title=Response
┌─timeSeriesGroupArray(timestamp, value)───────────────┐
│ [(100, 5), (110, 1), (120, 6), (130, 8), (140, 19)]  │
└──────────────────────────────────────────────────────┘
```

**Передача нескольких наборов меток времени и значений в виде массивов одинаковой длины**

```sql title=Query
WITH
    [110, 120, 130, 140, 140, 100]::Array(UInt32) AS timestamps,
    [1, 6, 8, 17, 19, 5]::Array(Float32) AS values
SELECT timeSeriesGroupArray(timestamps, values);
```

```response title=Response
┌─timeSeriesGroupArray(timestamps, values)──────────────┐
│ [(100, 5), (110, 1), (120, 6), (130, 8), (140, 19)]   │
└───────────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
