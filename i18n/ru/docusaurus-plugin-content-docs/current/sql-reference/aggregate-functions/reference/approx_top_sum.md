---
description: 'Возвращает массив значений, приблизительно наиболее часто встречающихся, и их количеств в указанном столбце.'
slug: /sql-reference/aggregate-functions/reference/approxtopsum
title: 'approx_top_sum'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## approx_top_sum \{#approx_top_sum\}

Введена в версии v1.1

Возвращает массив приблизительно самых частых значений и их количеств в указанном столбце.
Полученный массив отсортирован в порядке убывания приблизительной частоты значений (не по самим значениям).
Дополнительно учитывается вес значения.

Эта функция не гарантирует точный результат.
В некоторых ситуациях могут возникать ошибки, и она может вернуть часто встречающиеся значения, которые не являются самыми частыми.

**См. также**

* [topK](../../../sql-reference/aggregate-functions/reference/topK.md)
* [topKWeighted](../../../sql-reference/aggregate-functions/reference/topKWeighted.md)
* [approx&#95;top&#95;k](../../../sql-reference/aggregate-functions/reference/approx_top_k.md)

**Синтаксис**

```sql
approx_top_sum(N[, reserved])(column, weight)
```

**Параметры**

* `N` — Количество элементов, которые нужно вернуть. Необязательный параметр. Значение по умолчанию: 10. [`UInt64`](/sql-reference/data-types/int-uint)
* `reserved` — Необязательный параметр. Определяет, сколько ячеек зарезервировано для значений. Если `uniq(column) > reserved`, результат функции topK будет приблизительным. Значение по умолчанию: `N * 3`. Максимальное значение `N = 65536`. [`UInt64`](/sql-reference/data-types/int-uint)

**Аргументы**

* `column` — Имя столбца, для которого нужно найти наиболее часто встречающиеся значения. [`String`](/sql-reference/data-types/string)
* `weight` — Вес. Каждое значение учитывается `weight` раз при расчете частоты. [`UInt64`](/sql-reference/data-types/int-uint)

**Возвращаемое значение**

Возвращает массив приблизительно самых частых значений и соответствующих им количеств вхождений, отсортированный в порядке убывания приблизительной частоты. [`Array`](/sql-reference/data-types/array)

**Примеры**

**Пример использования**

```sql title=Query
SELECT approx_top_sum(2)(k, w)
FROM VALUES('k Char, w UInt64', ('y', 1), ('y', 1), ('x', 5), ('y', 1), ('z', 10));
```

```response title=Response
┌─approx_top_sum(2)(k, w)─┐
│ [('z',10,0),('x',5,0)]  │
└─────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**Смотрите также**

* [topK](../../../sql-reference/aggregate-functions/reference/topK.md)
* [topKWeighted](../../../sql-reference/aggregate-functions/reference/topKWeighted.md)
* [approx&#95;top&#95;k](../../../sql-reference/aggregate-functions/reference/approx_top_k.md)
