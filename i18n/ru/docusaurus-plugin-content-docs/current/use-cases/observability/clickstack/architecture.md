---
'slug': '/use-cases/observability/clickstack/architecture'
'pagination_prev': null
'pagination_next': null
'description': 'Архитектура ClickStack - Стек мониторинга ClickHouse'
'title': 'Архитектура'
'doc_type': 'reference'
---
import Image from '@theme/IdealImage';
import architecture from '@site/static/images/use-cases/observability/clickstack-architecture.png';

Архитектура ClickStack основана на трех основных компонентах: **ClickHouse**, **HyperDX** и **коллектор OpenTelemetry (OTel)**. Экземпляр **MongoDB** обеспечивает хранение состояния приложения. Вместе они представляют собой высокопроизводительный стек наблюдаемости с открытым исходным кодом, оптимизированный для логов, метрик и трассировок.

## Обзор архитектуры {#architecture-overview}

<Image img={architecture} alt="Архитектура" size="lg"/>

## ClickHouse: движок базы данных {#clickhouse}

В сердце ClickStack находится ClickHouse, столбцовая база данных, разработанная для аналитики в реальном времени в масштабах. Он обеспечивает прием и запросы данных наблюдаемости, позволяя:

- Поиск за доли секунды по терабайтам событий
- Прием миллиардов записей с высокой кардинальностью в день
- Высокие коэффициенты сжатия не менее 10 раз для данных наблюдаемости
- Нативную поддержку полуструктурированных данных JSON, позволяющую динамическую эволюцию схемы
- Мощный SQL-движок с сотнями встроенных аналитических функций

ClickHouse обрабатывает данные наблюдаемости как широкие события, что позволяет глубоко коррелировать логи, метрики и трассировки в единой унифицированной структуре.

## Коллектор OpenTelemetry: прием данных {#open-telemetry-collector}

ClickStack включает преднастроенный коллектор OpenTelemetry (OTel) для приема телеметрии в открытом, стандартизированном формате. Пользователи могут отправлять данные, используя протокол OTLP через:

- gRPC (порт `4317`)
- HTTP (порт `4318`)

Коллектор экспортирует телеметрию в ClickHouse эффективными пакетами. Он поддерживает оптимизированные схемы таблиц для каждого источника данных, обеспечивая масштабируемую производительность для всех типов сигналов.

## HyperDX: интерфейс {#hyperdx}

HyperDX является пользовательским интерфейсом для ClickStack. Он предлагает:

- Поиск на естественном языке и по стилю Lucene
- Живое отслеживание для отладки в реальном времени
- Унифицированные представления логов, метрик и трассировок
- Воспроизведение сессий для наблюдаемости фронтенда
- Создание панелей мониторинга и конфигурацию оповещений
- Интерфейс SQL-запросов для продвинутого анализа

Специально разработанный для ClickHouse, HyperDX сочетает мощный поиск с интуитивно понятными рабочими процессами, позволяя пользователям быстро обнаруживать аномалии, исследовать проблемы и получать инсайты.

## MongoDB: состояние приложения {#mongo}

ClickStack использует MongoDB для хранения состояния на уровне приложения, включая:

- Панели мониторинга
- Оповещения
- Профили пользователей
- Сохраненные визуализации

Это разделение состояния от данных событий обеспечивает производительность и масштабируемость, упрощая резервное копирование и конфигурацию.

Эта модульная архитектура позволяет ClickStack предоставлять готовую платформу наблюдаемости, которая является быстрой, гибкой и с открытым исходным кодом.