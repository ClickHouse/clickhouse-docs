---
slug: /use-cases/observability/clickstack/architecture
pagination_prev: null
pagination_next: null
description: 'Архитектура ClickStack — стека наблюдаемости ClickHouse'
title: 'Архитектура'
doc_type: 'reference'
keywords: ['Архитектура ClickStack', 'архитектура наблюдаемости', 'HyperDX', 'коллектор OpenTelemetry', 'MongoDB', 'проектирование систем']
---

import Image from '@theme/IdealImage';
import architecture from '@site/static/images/use-cases/observability/clickstack-architecture.png';

Архитектура ClickStack построена вокруг трех основных компонентов: **ClickHouse**, **HyperDX** и **коллектора OpenTelemetry (OTel)**. Экземпляр **MongoDB** обеспечивает хранение состояния приложения. Вместе они формируют высокопроизводительный стек наблюдаемости с открытым исходным кодом, оптимизированный для логов, метрик и трассировок.


## Обзор архитектуры {#architecture-overview}

<Image img={architecture} alt='Архитектура' size='lg' />


## ClickHouse: движок базы данных {#clickhouse}

В основе ClickStack лежит ClickHouse — колоночная база данных, предназначенная для аналитики в реальном времени в больших масштабах. Она обеспечивает приём и выполнение запросов к данным наблюдаемости, предоставляя:

- Поиск за доли секунды по терабайтам событий
- Приём миллиардов записей с высокой кардинальностью в день
- Высокую степень сжатия данных наблюдаемости не менее чем в 10 раз
- Встроенную поддержку полуструктурированных данных JSON с возможностью динамического изменения схемы
- Мощный SQL-движок с сотнями встроенных аналитических функций

ClickHouse обрабатывает данные наблюдаемости как широкие события, обеспечивая глубокую корреляцию между логами, метриками и трассировками в единой структуре.


## Сборщик OpenTelemetry: приём данных {#open-telemetry-collector}

ClickStack включает предварительно настроенный сборщик OpenTelemetry (OTel) для приёма телеметрии в открытом стандартизированном формате. Пользователи могут отправлять данные по протоколу OTLP через:

- gRPC (порт `4317`)
- HTTP (порт `4318`)

Сборщик экспортирует телеметрию в ClickHouse эффективными пакетами. Он поддерживает оптимизированные схемы таблиц для каждого источника данных, обеспечивая масштабируемую производительность по всем типам сигналов.


## HyperDX: интерфейс {#hyperdx}

HyperDX — это пользовательский интерфейс для ClickStack. Он предоставляет:

- Поиск на естественном языке и в стиле Lucene
- Отслеживание в реальном времени для отладки
- Единое представление логов, метрик и трассировок
- Воспроизведение сессий для наблюдаемости фронтенда
- Создание дашбордов и настройку оповещений
- Интерфейс SQL-запросов для углубленного анализа

Разработанный специально для ClickHouse, HyperDX сочетает мощный поиск с интуитивно понятными рабочими процессами, позволяя пользователям быстро обнаруживать аномалии, исследовать проблемы и получать ценную информацию.


## MongoDB: состояние приложения {#mongo}

ClickStack использует MongoDB для хранения состояния на уровне приложения, включая:

- Дашборды
- Оповещения
- Профили пользователей
- Сохранённые визуализации

Такое разделение состояния от данных событий обеспечивает производительность и масштабируемость, одновременно упрощая резервное копирование и конфигурацию.

Эта модульная архитектура позволяет ClickStack предоставлять готовую к использованию платформу наблюдаемости, которая является быстрой, гибкой и имеет открытый исходный код.
