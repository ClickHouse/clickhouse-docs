| Параметр                                                     | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Значение по умолчанию |
| ------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| `id`                                                         | Идентификатор операции резервного копирования или восстановления; если не указан, используется случайно сгенерированный UUID. Если&#39;Если уже выполняется операция с тем же ID, возникает исключение.                                                                                                                                                                                                                                                               |                       |
| `compression_method`                                         | Задает метод сжатия для резервной копии. См. раздел[«кодеки сжатия для столбцов»](/sql-reference/statements/create/table#column_compression_codec)                                                                                                                                                                                                                                                                                                                    |                       |
| `compression_level`                                          | Указывает уровень сжатия для резервной копии                                                                                                                                                                                                                                                                                                                                                                                                                          |                       |
| `password`                                                   | Пароль для файла на диске.                                                                                                                                                                                                                                                                                                                                                                                                                                            |                       |
| `base_backup`                                                | Целевое расположение базовой резервной копии, используемой для инкрементных резервных копий. Например:`Disk('backups', '1.zip')`                                                                                                                                                                                                                                                                                                                                      |                       |
| `use_same_password_for_base_backup`                          | Должен ли базовый архив резервной копии наследовать пароль из запроса.                                                                                                                                                                                                                                                                                                                                                                                                |                       |
| `structure_only`                                             | Если включено, выполняет резервное копирование или восстановление только операторов CREATE без самих данных таблиц.                                                                                                                                                                                                                                                                                                                                                   |                       |
| `storage_policy`                                             | Политика хранения для таблиц, которые будут восстановлены. См.[«использование нескольких блочных устройств для хранения данных»](/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-multiple-volumes). Применяется только к`RESTORE`команды. Применяется только к таблицам с движком из семейства`MergeTree`семейство.                                                                                                                          |                       |
| `allow_non_empty_tables`                                     | Позволяет`RESTORE TABLE`вставлять данные в непустые таблицы. При этом более ранние данные в таблице будут смешаны с данными, извлечёнными из резервной копии. Поэтому этот параметр может привести к дублированию данных в таблице, используйте его с осторожностью.                                                                                                                                                                                                  | `0`                   |
| `backup_restore_keeper_max_retries`                          | Максимальное количество повторных попыток для операций [Zoo]Keeper во время выполнения операции BACKUP или RESTORE. Должно быть достаточно большим, чтобы вся операция не&#39;не завершится с ошибкой из-за временного сбоя в работе [Zoo]Keeper.                                                                                                                                                                                                                     | `1000`                |
| `backup_restore_keeper_retry_initial_backoff_ms`             | Начальное время ожидания перед повторной попыткой для операций [Zoo]Keeper во время резервного копирования или восстановления                                                                                                                                                                                                                                                                                                                                         | `100`                 |
| `backup_restore_keeper_retry_max_backoff_ms`                 | Максимальное время ожидания между повторными попытками операций [Zoo]Keeper во время резервного копирования или восстановления                                                                                                                                                                                                                                                                                                                                        | `5000`                |
| `backup_restore_failure_after_host_disconnected_for_seconds` | Если хост во время`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операция не&#39;t воссоздаёт своё эфемерное&#39;активен&#39;узел в ZooKeeper в течение этого времени, то весь процесс резервного копирования или восстановления считается неуспешным. Это значение должно быть больше любого разумного времени, необходимого хосту для повторного подключения к ZooKeeper после сбоя. Ноль означает отсутствие ограничения.                                               | `3600`                |
| `backup_restore_keeper_max_retries_while_initializing`       | Максимальное количество повторных попыток операций [Zoo]Keeper во время инициализации.`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операция.                                                                                                                                                                                                                                                                                                                             | `20`                  |
| `backup_restore_keeper_max_retries_while_handling_error`     | Максимальное количество повторных попыток операций [Zoo]Keeper при обработке ошибки операции `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER`.`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операции.                                                                                                                                                                                                                                                                         | `20`                  |
| `backup_restore_finish_timeout_after_error_sec`              | Как долго инициатор должен ждать реакции других хостов на&#39;ошибка&#39;узел и прекратить работу над текущей`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операция.                                                                                                                                                                                                                                                                                                      | `180`                 |
| `backup_restore_keeper_value_max_size`                       | Максимальный размер данных в [Zoo]Keeper&#39;узла при резервном копировании                                                                                                                                                                                                                                                                                                                                                                                           | `1048576`             |
| `backup_restore_batch_size_for_keeper_multi`                 | Максимальный размер пакета для multi‑запроса к [Zoo]Keeper при создании или восстановлении бэкапа                                                                                                                                                                                                                                                                                                                                                                     | `1000`                |
| `backup_restore_batch_size_for_keeper_multiread`             | Максимальный размер пакета для multiread‑запроса к [Zoo]Keeper во время резервного копирования или восстановления                                                                                                                                                                                                                                                                                                                                                     | `10000`               |
| `backup_restore_keeper_fault_injection_probability`          | Приблизительная вероятность сбоя запроса к Keeper во время резервного копирования или восстановления. Допустимое значение находится в интервале`[0.0f, 1.0f]`                                                                                                                                                                                                                                                                                                         | `0`                   |
| `backup_restore_keeper_fault_injection_seed`                 | `0`для случайного значения seed, иначе значение настройки                                                                                                                                                                                                                                                                                                                                                                                                             | `0`                   |
| `backup_restore_s3_retry_attempts`                           | Параметр для Aws::Client::RetryStrategy. Aws::Client выполняет повторы самостоятельно, 0 означает отсутствие повторов. Используется только для резервного копирования и восстановления.                                                                                                                                                                                                                                                                               | `1000`                |
| `max_backup_bandwidth`                                       | Максимальная скорость чтения в байтах в секунду для данного бэкапа на сервере. Ноль означает отсутствие ограничений.                                                                                                                                                                                                                                                                                                                                                  | `0`                   |
| `max_backups_io_thread_pool_size`                            | ClickHouse использует потоки из пула Backups IO Thread для выполнения операций ввода-вывода резервного копирования в S3.ClickHouse использует потоки из пула Backups IO Thread для выполнения операций ввода-вывода при работе с резервными копиями в S3. Параметр `max_backups_io_thread_pool_size` ограничивает максимальное количество потоков в этом пуле.ограничивает максимальное число потоков в пуле.                                                         | `1000`                |
| `max_backups_io_thread_pool_free_size`                       | Если число**idle**потоков в пуле потоков ввода-вывода резервных копий (Backups IO)Если число **свободных** потоков в пуле потоков Backups IO превышает `max_backup_io_thread_pool_free_size`, ClickHouse освободит ресурсы, занятые этими потоками, и уменьшит размер пула. При необходимости потоки будут созданы снова., ClickHouse освободит ресурсы, занятые простаивающими потоками, и уменьшит размер пула. При необходимости потоки могут быть созданы заново. | `0`                   |
| `backups_io_thread_pool_queue_size`                          | Максимальное количество заданий, которые можно поставить в очередь в пул потоков Backups IO Thread. Рекомендуется оставлять размер этой очереди неограниченным из-за текущей логики резервного копирования в S3. Примечание: значение`0`(по умолчанию) означает «без ограничений».                                                                                                                                                                                    | `0`                   |
| `backup_threads`                                             | Максимальное количество потоков для выполнения`BACKUP`запросов.                                                                                                                                                                                                                                                                                                                                                                                                       |                       |
| `max_backup_bandwidth_for_server`                            | Максимальная скорость чтения в байтах в секунду для всех резервных копий на сервере. Ноль означает, что ограничений нет.                                                                                                                                                                                                                                                                                                                                              | `0`                   |
| `shutdown_wait_backups_and_restores`                         | Если установлено значение true, ClickHouse дождётся завершения выполняющихся операций резервного копирования и восстановления перед завершением работы.                                                                                                                                                                                                                                                                                                               | `1`                   |