| Настройка                                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                              | Значение по умолчанию |
| ------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| `id`                                                         | Идентификатор операции резервного копирования или восстановления, если не указан — используется случайно сгенерированный UUID. Если уже выполняется операция с тем же идентификатором, выбрасывается исключение.                                                                                                                                                                                                      |                       |
| `compression_method`                                         | Задает метод сжатия для резервной копии. См. раздел [&quot;кодеки сжатия столбцов&quot;](/sql-reference/statements/create/table#column_compression_codec)                                                                                                                                                                                                                                                             |                       |
| `compression_level`                                          | Задает уровень сжатия для резервной копии                                                                                                                                                                                                                                                                                                                                                                             |                       |
| `password`                                                   | Пароль для файла на диске.                                                                                                                                                                                                                                                                                                                                                                                            |                       |
| `base_backup`                                                | Место хранения базовой резервной копии, используемой для инкрементных резервных копий. Например: `Disk('backups', '1.zip')`                                                                                                                                                                                                                                                                                           |                       |
| `use_same_password_for_base_backup`                          | Должен ли архив базовой резервной копии наследовать пароль, указанный в запросе.                                                                                                                                                                                                                                                                                                                                      |                       |
| `structure_only`                                             | Если включено, выполняет резервное копирование или восстановление только операторов CREATE без самих данных таблиц.                                                                                                                                                                                                                                                                                                   |                       |
| `storage_policy`                                             | Политика хранения данных для восстанавливаемых таблиц. См. раздел «[Использование нескольких блочных устройств для хранения данных](/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-multiple-volumes)». Применимо только к команде `RESTORE`. Применяется только к таблицам с движком семейства `MergeTree`.                                                                                 |                       |
| `allow_non_empty_tables`                                     | Позволяет команде `RESTORE TABLE` вставлять данные в непустые таблицы. Это приведёт к смешиванию уже существующих данных в таблице с данными, извлечёнными из резервной копии. Поэтому эта настройка может привести к дублированию данных в таблице, используйте её с осторожностью.                                                                                                                                  | `0`                   |
| `backup_restore_keeper_max_retries`                          | Максимальное число повторных попыток для операций с [Zoo]Keeper во время выполнения операции BACKUP или RESTORE. Должно быть достаточно большим, чтобы вся операция не завершилась сбоем из-за временного отказа [Zoo]Keeper.                                                                                                                                                                                         | `1000`                |
| `backup_restore_keeper_retry_initial_backoff_ms`             | Начальный интервал ожидания (backoff) для операций [Zoo]Keeper при создании или восстановлении резервной копии                                                                                                                                                                                                                                                                                                        | `100`                 |
| `backup_restore_keeper_retry_max_backoff_ms`                 | Максимальное время ожидания перед повторной попыткой операций [Zoo]Keeper при создании или восстановлении резервной копии                                                                                                                                                                                                                                                                                             | `5000`                |
| `backup_restore_failure_after_host_disconnected_for_seconds` | Если во время операции `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER` хост не пересоздаёт свой эфемерный узел &quot;alive&quot; в ZooKeeper в течение этого времени, вся операция резервного копирования или восстановления считается неуспешной. Это значение должно превышать любой разумный интервал, необходимый хосту для переподключения к ZooKeeper после сбоя. Ноль означает отсутствие ограничения по времени. | `3600`                |
| `backup_restore_keeper_max_retries_while_initializing`       | Максимальное количество повторных попыток операций [Zoo]Keeper при инициализации операции `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER`.                                                                                                                                                                                                                                                                               | `20`                  |
| `backup_restore_keeper_max_retries_while_handling_error`     | Максимальное число повторных попыток выполнения операций [Zoo]Keeper при обработке ошибок операций `BACKUP ON CLUSTER` и `RESTORE ON CLUSTER`.                                                                                                                                                                                                                                                                        | `20`                  |
| `backup_restore_finish_timeout_after_error_sec`              | Время, в течение которого инициатор должен ждать, пока другие хосты не отреагируют на узел &#39;error&#39; и не остановят свою работу над текущей операцией `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER`.                                                                                                                                                                                                             | `180`                 |
| `backup_restore_keeper_value_max_size`                       | Максимальный размер данных узла [Zoo]Keeper при создании резервной копии                                                                                                                                                                                                                                                                                                                                              | `1048576`             |
| `backup_restore_batch_size_for_keeper_multi`                 | Максимальный размер пакета операций для multi-запроса к [Zoo]Keeper при создании резервной копии или при восстановлении                                                                                                                                                                                                                                                                                               | `1000`                |
| `backup_restore_batch_size_for_keeper_multiread`             | Максимальный размер пакета при выполнении запроса multiread к [Zoo]Keeper во время резервного копирования или восстановления                                                                                                                                                                                                                                                                                          | `10000`               |
| `backup_restore_keeper_fault_injection_probability`          | Приблизительная вероятность отказа запроса к Keeper во время резервного копирования или восстановления. Допустимое значение — в диапазоне `[0.0f, 1.0f]`                                                                                                                                                                                                                                                              | `0`                   |
| `backup_restore_keeper_fault_injection_seed`                 | `0` — для случайного значения инициализации (seed), иначе — значение настройки                                                                                                                                                                                                                                                                                                                                        | `0`                   |
| `backup_restore_s3_retry_attempts`                           | Настройка для Aws::Client::RetryStrategy. Aws::Client сам выполняет повторные попытки, 0 означает, что повторы отключены. Применяется только для операций резервного копирования и восстановления.                                                                                                                                                                                                                    | `1000`                |
| `max_backup_bandwidth`                                       | Максимальная скорость чтения в байтах в секунду для конкретной резервной копии на сервере. Ноль означает отсутствие ограничений.                                                                                                                                                                                                                                                                                      | `0`                   |
| `max_backups_io_thread_pool_size`                            | ClickHouse использует потоки из пула Backups IO Thread для выполнения операций ввода-вывода в S3 при создании резервных копий. `max_backups_io_thread_pool_size` ограничивает максимальное количество потоков в этом пуле.                                                                                                                                                                                            | `1000`                |
| `max_backups_io_thread_pool_free_size`                       | Если число **простаивающих** потоков в пуле потоков Backups IO Thread превышает `max_backup_io_thread_pool_free_size`, ClickHouse освободит ресурсы, занимаемые такими потоками, и уменьшит размер пула. Потоки могут быть созданы снова при необходимости.                                                                                                                                                           | `0`                   |
| `backups_io_thread_pool_queue_size`                          | Максимальное количество заданий, которые могут быть поставлены в очередь пула потоков Backups IO. Рекомендуется оставлять размер этой очереди неограниченным из-за текущей логики резервного копирования в S3. Примечание: значение `0` (по умолчанию) означает отсутствие ограничения.                                                                                                                               | `0`                   |
| `backup_threads`                                             | Максимальное число потоков для выполнения запросов `BACKUP`.                                                                                                                                                                                                                                                                                                                                                          |                       |
| `max_backup_bandwidth_for_server`                            | Максимальная суммарная скорость чтения для всех резервных копий на сервере, в байтах в секунду. Ноль означает отсутствие ограничений.                                                                                                                                                                                                                                                                                 | `0`                   |
| `shutdown_wait_backups_and_restores`                         | Если установлено значение true, ClickHouse будет дожидаться завершения выполняющихся операций резервного копирования и восстановления перед завершением работы.                                                                                                                                                                                                                                                       | `1`                   |