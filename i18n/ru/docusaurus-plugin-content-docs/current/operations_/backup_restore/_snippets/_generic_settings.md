| Параметр                                                     | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Значение по умолчанию |
| ------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| `id`                                                         | Идентификатор операции резервного копирования или восстановления; если не указан, используется случайно сгенерированный UUID. Если&#39;Если уже запущена операция с тем же ID, будет сгенерировано исключение.                                                                                                                                                                                                                                                         |                       |
| `compression_method`                                         | Задает метод сжатия резервной копии. См. раздел[«кодеки сжатия данных в столбцах»](/sql-reference/statements/create/table#column_compression_codec)                                                                                                                                                                                                                                                                                                                    |                       |
| `compression_level`                                          | Определяет уровень сжатия резервной копии                                                                                                                                                                                                                                                                                                                                                                                                                              |                       |
| `password`                                                   | Пароль для файла на диске.                                                                                                                                                                                                                                                                                                                                                                                                                                             |                       |
| `base_backup`                                                | Место назначения базовой резервной копии, используемой для инкрементных резервных копий. Например:`Disk('backups', '1.zip')`                                                                                                                                                                                                                                                                                                                                           |                       |
| `use_same_password_for_base_backup`                          | Должен ли базовый архив резервной копии наследовать пароль из запроса.                                                                                                                                                                                                                                                                                                                                                                                                 |                       |
| `structure_only`                                             | Если параметр включён, выполняет резервное копирование или восстановление только операторов CREATE, без самих данных таблицы.                                                                                                                                                                                                                                                                                                                                          |                       |
| `storage_policy`                                             | Политика хранения для восстанавливаемых таблиц. См.[«использование нескольких блочных устройств для хранения данных»](/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-multiple-volumes). Применяется только к`RESTORE`команды `RESTORE`. Применяется только к таблицам с движком из семейства`MergeTree`семейство.                                                                                                                            |                       |
| `allow_non_empty_tables`                                     | Позволяет`RESTORE TABLE`для вставки данных в непустые таблицы. Это приведёт к смешению уже имеющихся данных в таблице с данными, извлечёнными из резервной копии. Поэтому этот параметр может привести к дублированию данных в таблице — используйте его с осторожностью.                                                                                                                                                                                              | `0`                   |
| `backup_restore_keeper_max_retries`                          | Максимальное число повторных попыток для операций [Zoo]Keeper во время выполнения BACKUP или RESTORE. Должно быть достаточно большим, чтобы вся операция не&#39;не завершилась с ошибкой из‑за временного сбоя в работе [Zoo]Keeper.                                                                                                                                                                                                                                   | `1000`                |
| `backup_restore_keeper_retry_initial_backoff_ms`             | Начальный тайм-аут ожидания (backoff) для операций [Zoo]Keeper во время резервного копирования или восстановления                                                                                                                                                                                                                                                                                                                                                      | `100`                 |
| `backup_restore_keeper_retry_max_backoff_ms`                 | Максимальное время ожидания с экспоненциальной задержкой (backoff) для операций [Zoo]Keeper при резервном копировании или восстановлении                                                                                                                                                                                                                                                                                                                               | `5000`                |
| `backup_restore_failure_after_host_disconnected_for_seconds` | Если хост во время`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операция не&#39;t воссоздаёт свой временный&#39;активен&#39;узел в ZooKeeper в течение этого времени, то весь бэкап или восстановление считаются неудачными. Это значение должно быть больше любого разумного времени, которое может потребоваться хосту, чтобы переподключиться к ZooKeeper после сбоя. Ноль означает отсутствие ограничений.                                                             | `3600`                |
| `backup_restore_keeper_max_retries_while_initializing`       | Максимальное число повторных попыток операций [Zoo]Keeper во время инициализации`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операция.                                                                                                                                                                                                                                                                                                                                    | `20`                  |
| `backup_restore_keeper_max_retries_while_handling_error`     | Максимальное число повторных попыток операций [Zoo]Keeper при обработке ошибки`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операции.                                                                                                                                                                                                                                                                                                                                      | `20`                  |
| `backup_restore_finish_timeout_after_error_sec`              | Как долго инициатор должен ждать, пока другие хосты отреагируют на&#39;ошибка&#39;узел и прекратить свою работу над текущей`BACKUP ON CLUSTER`или`RESTORE ON CLUSTER`операция.                                                                                                                                                                                                                                                                                         | `180`                 |
| `backup_restore_keeper_value_max_size`                       | Максимальный размер данных [Zoo]Keeper&#39;узла во время резервного копирования                                                                                                                                                                                                                                                                                                                                                                                        | `1048576`             |
| `backup_restore_batch_size_for_keeper_multi`                 | Максимальный размер пакета для multi‑запроса к [Zoo]Keeper при резервном копировании или восстановлении                                                                                                                                                                                                                                                                                                                                                                | `1000`                |
| `backup_restore_batch_size_for_keeper_multiread`             | Максимальный размер пакета для запроса multiread к [Zoo]Keeper при выполнении резервного копирования или восстановления                                                                                                                                                                                                                                                                                                                                                | `10000`               |
| `backup_restore_keeper_fault_injection_probability`          | Приблизительная вероятность сбоя запроса к Keeper во время резервного копирования или восстановления. Допустимое значение лежит в интервале`[0.0f, 1.0f]`                                                                                                                                                                                                                                                                                                              | `0`                   |
| `backup_restore_keeper_fault_injection_seed`                 | `0` — использовать случайный seed, иначе — значение настройкидля случайного значения seed, иначе значение настройки                                                                                                                                                                                                                                                                                                                                                    | `0`                   |
| `backup_restore_s3_retry_attempts`                           | Настройка для Aws::Client::RetryStrategy. Клиент Aws::Client выполняет повторы запросов самостоятельно, значение 0 означает отсутствие повторов. Применяется только для операций резервного копирования и восстановления.                                                                                                                                                                                                                                              | `1000`                |
| `max_backup_bandwidth`                                       | Максимальная скорость чтения в байтах в секунду для конкретного резервного копирования на сервере. Ноль означает отсутствие ограничений.                                                                                                                                                                                                                                                                                                                               | `0`                   |
| `max_backups_io_thread_pool_size`                            | ClickHouse использует потоки из пула Backups IO Thread для выполнения операций ввода-вывода при резервном копировании в S3.`max_backups_io_thread_pool_size`ограничивает максимальное число потоков в пуле.                                                                                                                                                                                                                                                            | `1000`                |
| `max_backups_io_thread_pool_free_size`                       | Если число**простой**количество потоков в пуле потоков Backups IO превышаетЕсли количество **свободных** потоков в пуле Backups IO Thread превышает `max_backup_io_thread_pool_free_size`, ClickHouse освободит ресурсы, занятые этими потоками, и уменьшит размер пула. При необходимости потоки могут быть созданы снова., ClickHouse освободит ресурсы, занятые простаивающими потоками, и уменьшит размер пула. При необходимости потоки могут быть созданы вновь. | `0`                   |
| `backups_io_thread_pool_queue_size`                          | Максимальное количество задач, которые могут быть поставлены в очередь пула потоков Backups IO. Рекомендуется оставлять эту очередь неограниченной из‑за текущей логики резервного копирования в S3. Примечание: значение`0`(по умолчанию) означает без ограничений.                                                                                                                                                                                                   | `0`                   |
| `backup_threads`                                             | Максимальное количество потоков выполнения`BACKUP`запросы.                                                                                                                                                                                                                                                                                                                                                                                                             |                       |
| `max_backup_bandwidth_for_server`                            | Максимальная скорость чтения в байтах в секунду для всех резервных копий на сервере. Ноль означает отсутствие ограничений.                                                                                                                                                                                                                                                                                                                                             | `0`                   |
| `shutdown_wait_backups_and_restores`                         | Если установлено в true, ClickHouse дождётся завершения запущенных операций резервного копирования и восстановления перед завершением работы.                                                                                                                                                                                                                                                                                                                          | `1`                   |