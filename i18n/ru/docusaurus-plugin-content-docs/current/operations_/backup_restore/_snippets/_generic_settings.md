| Настройка                                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                              | Значение по умолчанию |
| ------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| `id`                                                         | Идентификатор операции резервного копирования или восстановления; если он не указан, генерируется случайный UUID. Если уже выполняется операция с тем же идентификатором, будет выброшено исключение.                                                                                                                                                                                                                                 |                       |
| `compression_method`                                         | Указывает метод сжатия для резервной копии. См. раздел [«Кодеки сжатия столбцов»](/sql-reference/statements/create/table#column_compression_codec)                                                                                                                                                                                                                                                                                    |                       |
| `compression_level`                                          | Задает уровень сжатия резервной копии                                                                                                                                                                                                                                                                                                                                                                                                 |                       |
| `password`                                                   | Пароль к файлу на диске.                                                                                                                                                                                                                                                                                                                                                                                                              |                       |
| `base_backup`                                                | Место размещения базовой резервной копии, используемой для инкрементных резервных копий. Например: `Disk('backups', '1.zip')`                                                                                                                                                                                                                                                                                                         |                       |
| `use_same_password_for_base_backup`                          | Определяет, будет ли архив базовой резервной копии наследовать пароль, указанный в запросе.                                                                                                                                                                                                                                                                                                                                           |                       |
| `structure_only`                                             | Если включено, выполняет резервное копирование или восстановление только операторов CREATE без собственно данных таблиц.                                                                                                                                                                                                                                                                                                              |                       |
| `storage_policy`                                             | Политика хранения данных для восстанавливаемых таблиц. См. раздел «[Использование нескольких блочных устройств для хранения данных](/engines/table-engines/mergetree-family/mergetree#table_engine-mergetree-multiple-volumes)». Применимо только к команде `RESTORE`. Применяется только к таблицам с движком из семейства `MergeTree`.                                                                                              |                       |
| `allow_non_empty_tables`                                     | Позволяет оператору `RESTORE TABLE` вставлять данные в непустые таблицы. В результате существующие данные в таблице будут смешаны с данными, извлечёнными из резервной копии. Поэтому эта настройка может привести к дублированию данных в таблице, используйте её с осторожностью.                                                                                                                                                   | `0`                   |
| `backup_restore_keeper_max_retries`                          | Максимальное количество повторных попыток выполнения операций [Zoo]Keeper во время операции BACKUP или RESTORE. Должно быть достаточно большим, чтобы вся операция не завершилась неудачей из-за кратковременного сбоя [Zoo]Keeper.                                                                                                                                                                                                   | `1000`                |
| `backup_restore_keeper_retry_initial_backoff_ms`             | Начальный таймаут backoff для операций [Zoo]Keeper при выполнении резервного копирования или восстановления                                                                                                                                                                                                                                                                                                                           | `100`                 |
| `backup_restore_keeper_retry_max_backoff_ms`                 | Максимальный таймаут экспоненциальной задержки (backoff) для операций [Zoo]Keeper при резервном копировании или восстановлении                                                                                                                                                                                                                                                                                                        | `5000`                |
| `backup_restore_failure_after_host_disconnected_for_seconds` | Если во время операции `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER` хост не воссоздаёт свой эфемерный узел `alive` в ZooKeeper в течение этого времени, то вся операция резервного копирования или восстановления считается завершившейся с ошибкой. Это значение должно быть больше любого разумного времени, необходимого хосту для повторного подключения к ZooKeeper после сбоя. Ноль означает отсутствие ограничения по времени. | `3600`                |
| `backup_restore_keeper_max_retries_while_initializing`       | Максимальное число повторных попыток операций в [Zoo]Keeper во время инициализации операции `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER`.                                                                                                                                                                                                                                                                                             | `20`                  |
| `backup_restore_keeper_max_retries_while_handling_error`     | Максимальное число повторных попыток операций с [Zoo]Keeper при обработке ошибки операции `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER`.                                                                                                                                                                                                                                                                                               | `20`                  |
| `backup_restore_finish_timeout_after_error_sec`              | Время, в течение которого инициатор должен ждать, пока другой хост не обработает узел &#39;error&#39; и не остановит выполнение текущей операции `BACKUP ON CLUSTER` или `RESTORE ON CLUSTER`.                                                                                                                                                                                                                                        | `180`                 |
| `backup_restore_keeper_value_max_size`                       | Максимальный размер данных узла [Zoo]Keeper при создании резервной копии                                                                                                                                                                                                                                                                                                                                                              | `1048576`             |
| `backup_restore_batch_size_for_keeper_multi`                 | Максимальный размер пакета для операции multi в [Zoo]Keeper при резервном копировании или восстановлении                                                                                                                                                                                                                                                                                                                              | `1000`                |
| `backup_restore_batch_size_for_keeper_multiread`             | Максимальный размер пакета для запроса multiread к [Zoo]Keeper при создании или восстановлении резервной копии                                                                                                                                                                                                                                                                                                                        | `10000`               |
| `backup_restore_keeper_fault_injection_probability`          | Приблизительная вероятность отказа запроса к Keeper во время резервного копирования или восстановления. Допустимые значения находятся в диапазоне `[0.0f, 1.0f]`                                                                                                                                                                                                                                                                      | `0`                   |
| `backup_restore_keeper_fault_injection_seed`                 | `0` — для случайного значения seed, иначе — значение параметра                                                                                                                                                                                                                                                                                                                                                                        | `0`                   |
| `backup_restore_s3_retry_attempts`                           | Настройка для Aws::Client::RetryStrategy: повторные попытки выполняются самим Aws::Client, 0 означает отсутствие повторных попыток. Применяется только для резервного копирования и восстановления.                                                                                                                                                                                                                                   | `1000`                |
| `max_backup_bandwidth`                                       | Максимальная скорость чтения в байтах в секунду для данной резервной копии на сервере. Ноль означает отсутствие ограничений.                                                                                                                                                                                                                                                                                                          | `0`                   |
| `max_backups_io_thread_pool_size`                            | ClickHouse использует потоки из пула Backups IO Thread для выполнения операций ввода-вывода при резервном копировании в S3. `max_backups_io_thread_pool_size` ограничивает максимальное количество потоков в этом пуле.                                                                                                                                                                                                               | `1000`                |
| `max_backups_io_thread_pool_free_size`                       | Если количество **простаивающих** потоков в пуле Backups IO Thread pool превышает `max_backup_io_thread_pool_free_size`, ClickHouse освободит ресурсы, занятые этими потоками, и уменьшит размер пула. При необходимости потоки могут быть созданы снова.                                                                                                                                                                             | `0`                   |
| `backups_io_thread_pool_queue_size`                          | Максимальное количество задач, которые могут быть поставлены в очередь пула потоков Backups IO Thread. Рекомендуется оставлять эту очередь неограниченной из-за текущей логики резервного копирования в S3. Примечание: значение `0` (по умолчанию) означает неограниченную очередь.                                                                                                                                                  | `0`                   |
| `backup_threads`                                             | Максимальное число потоков, используемых при выполнении запросов `BACKUP`.                                                                                                                                                                                                                                                                                                                                                            |                       |
| `max_backup_bandwidth_for_server`                            | Максимальная скорость чтения в байтах в секунду для всех резервных копий на сервере. Ноль — без ограничений.                                                                                                                                                                                                                                                                                                                          | `0`                   |
| `shutdown_wait_backups_and_restores`                         | Если установлено значение true, ClickHouse будет ожидать завершения выполняющихся операций резервного копирования и восстановления перед завершением работы.                                                                                                                                                                                                                                                                          | `1`                   |