---
slug: /whats-new/security-changelog
sidebar_position: 20
sidebar_label: 'Журнал изменений безопасности'
title: 'Журнал изменений безопасности'
description: 'Журнал изменений безопасности с описанием обновлений и исправлений, связанных с безопасностью'
doc_type: 'changelog'
keywords: ['security', 'CVE', 'vulnerabilities', 'security fixes', 'patches']
---



# Журнал изменений безопасности



## Исправлено в ClickHouse v25.1.5.5, 2025-01-05 {#fixed-in-clickhouse-release-2025-01-05}

### [CVE-2025-1385](https://github.com/ClickHouse/ClickHouse/security/advisories/GHSA-5phv-x8x4-83x5) {#CVE-2025-1385}

При включенной функции library bridge компонент clickhouse-library-bridge предоставляет HTTP API на localhost. Это позволяет clickhouse-server динамически загружать библиотеку из указанного пути и выполнять её в изолированном процессе. В сочетании с функциональностью движков таблиц ClickHouse, которая разрешает загрузку файлов в определённые директории, неправильно настроенный сервер может быть эксплуатирован злоумышленником с привилегиями доступа к обоим движкам таблиц, что позволяет ему выполнить произвольный код на сервере ClickHouse.

Исправление внесено в следующие версии с открытым исходным кодом: v24.3.18.6, v24.8.14.27, v24.11.5.34, v24.12.5.65, v25.1.5.5

ClickHouse Cloud не подвержен данной уязвимости.

Благодарности: [Arseniy Dugin](https://github.com/ZerLes)


## Исправлено в ClickHouse v24.5, 2024-08-01 {#fixed-in-clickhouse-release-2024-08-01}

### [CVE-2024-6873](https://github.com/ClickHouse/ClickHouse/security/advisories/GHSA-432f-r822-j66f) {#CVE-2024-6873}

Возможно перенаправление потока выполнения процесса сервера ClickHouse из неаутентифицированного источника путём отправки специально сформированного запроса на нативный интерфейс сервера ClickHouse. Это перенаправление ограничено тем, что доступно в пределах 256-байтового диапазона памяти на момент выполнения. Данная уязвимость была обнаружена в рамках нашей программы Bug Bounty, и не было создано или использовано известного кода Proof of Concept для удалённого выполнения кода (RCE).

Исправление было внесено в следующие версии с открытым исходным кодом: v23.8.15.35-lts, v24.3.4.147-lts, v24.4.2.141-stable, v24.5.1.1763, v24.6.1.4423-stable

ClickHouse Cloud использует другую систему версионирования, и исправление этой уязвимости было применено ко всем экземплярам, работающим на версии v24.2 и выше.

Благодарности: malacupa (независимый исследователь)


## Исправлено в ClickHouse v24.1, 2024-01-30 {#fixed-in-clickhouse-release-24-01-30}

### [CVE-2024-22412](https://github.com/ClickHouse/ClickHouse/security/advisories/GHSA-45h5-f7g3-gr8r) {#CVE-2024-22412}

При переключении между ролями пользователей во время работы с ClickHouse с включённым кешем запросов существует риск получения некорректных данных. ClickHouse рекомендует пользователям уязвимых версий не использовать кеш запросов, если их приложение динамически переключается между различными ролями.

Исправление внесено в следующие версии с открытым исходным кодом: v24.1.1.2048, v24.1.8.22-stable, v23.12.6.19-stable, v23.8.12.13-lts, v23.3.22.3-lts

ClickHouse Cloud использует другую систему версионирования, исправление для этой уязвимости было применено в версии v24.0.2.54535.

Благодарности: Evan Johnson и Alan Braithwaite из команды Runreveal — дополнительную информацию можно найти в [их публикации в блоге](https://blog.runreveal.com/cve-2024-22412-behind-the-bug-a-classic-caching-problem-in-the-clickhouse-query-cache/).


## Исправлено в ClickHouse v23.10.5.20, 2023-11-26 {#fixed-in-clickhouse-release-23-10-5-20-2023-11-26}

### [CVE-2023-47118](https://github.com/ClickHouse/ClickHouse/security/advisories/GHSA-g22g-p6q2-x39v) {#CVE-2023-47118}

Уязвимость переполнения буфера в куче, затрагивающая нативный интерфейс, который по умолчанию работает на порту 9000/tcp. Злоумышленник может вызвать сбой серверного процесса ClickHouse, спровоцировав ошибку в кодеке сжатия T64. Данная уязвимость может быть эксплуатирована без аутентификации.

Исправление внесено в следующие версии с открытым исходным кодом: v23.10.2.13, v23.9.4.11, v23.8.6.16, v23.3.16.7

ClickHouse Cloud использует другую систему версионирования, исправление для этой уязвимости было применено в версии v23.9.2.47475.

Благодарности: malacupa (независимый исследователь)

### [CVE-2023-48298](https://github.com/ClickHouse/ClickHouse/security/advisories/GHSA-qw9f-qv29-8938) {#CVE-2023-48298}

Уязвимость целочисленного антипереполнения в кодеке сжатия FPC. Злоумышленник может использовать её для вызова сбоя серверного процесса ClickHouse. Данная уязвимость может быть эксплуатирована без аутентификации.

Исправление внесено в следующие версии с открытым исходным кодом: v23.10.4.25, v23.9.5.29, v23.8.7.24, v23.3.17.13.

ClickHouse Cloud использует другую систему версионирования, исправление для этой уязвимости было применено в версии v23.9.2.47475.

Благодарности: malacupa (независимый исследователь)

### [CVE-2023-48704](https://github.com/ClickHouse/ClickHouse/security/advisories/GHSA-5rmf-5g48-xv63) {#CVE-2023-48704}

Уязвимость переполнения буфера в куче, затрагивающая нативный интерфейс, который по умолчанию работает на порту 9000/tcp. Злоумышленник может вызвать сбой серверного процесса ClickHouse, спровоцировав ошибку в кодеке Gorilla. Данная уязвимость может быть эксплуатирована без аутентификации.

Исправление внесено в следующие версии с открытым исходным кодом: v23.10.5.20, v23.9.6.20, v23.8.8.20, v23.3.18.15.

ClickHouse Cloud использует другую систему версионирования, исправление для этой уязвимости было применено в версии v23.9.2.47551.

Благодарности: malacupa (независимый исследователь)


## Исправлено в ClickHouse 22.9.1.2603, 2022-09-22 {#fixed-in-clickhouse-release-22-9-1-2603-2022-9-22}

### CVE-2022-44011 {#CVE-2022-44011}

В сервере ClickHouse была обнаружена уязвимость переполнения буфера в куче. Злоумышленник, имеющий возможность загружать данные в сервер ClickHouse, мог вызвать аварийное завершение работы сервера путём вставки некорректно сформированного объекта CapnProto.

Исправление включено в версии 22.9.1.2603, 22.8.2.11, 22.7.4.16, 22.6.6.16, 22.3.12.19

Благодарность: Kiojj (независимый исследователь)

### CVE-2022-44010 {#CVE-2022-44010}

В сервере ClickHouse была обнаружена уязвимость переполнения буфера в куче. Злоумышленник мог отправить специально сформированный HTTP-запрос к HTTP-интерфейсу (по умолчанию прослушивающему порт 8123), что приводило к переполнению буфера в куче и аварийному завершению работы процесса сервера ClickHouse. Данная атака не требует аутентификации.

Исправление включено в версии 22.9.1.2603, 22.8.2.11, 22.7.4.16, 22.6.6.16, 22.3.12.19

Благодарность: Kiojj (независимый исследователь)


## Исправлено в ClickHouse 21.10.2.15, 2021-10-18 {#fixed-in-clickhouse-release-21-10-2-215-2021-10-18}

### CVE-2021-43304 {#cve-2021-43304}

Переполнение буфера в куче в кодеке сжатия LZ4 ClickHouse при обработке вредоносного запроса. Отсутствует проверка того, что операции копирования в цикле LZ4::decompressImpl, и в особенности произвольная операция копирования `wildCopy<copy_amount>(op, ip, copy_end)`, не выходят за границы буфера назначения.

Благодарность: JFrog Security Research Team

### CVE-2021-43305 {#cve-2021-43305}

Переполнение буфера в куче в кодеке сжатия LZ4 ClickHouse при обработке вредоносного запроса. Отсутствует проверка того, что операции копирования в цикле LZ4::decompressImpl, и в особенности произвольная операция копирования `wildCopy<copy_amount>(op, ip, copy_end)`, не выходят за границы буфера назначения. Эта уязвимость очень похожа на CVE-2021-43304, но уязвимая операция копирования находится в другом вызове wildCopy.

Благодарность: JFrog Security Research Team

### CVE-2021-42387 {#cve-2021-42387}

Чтение за границами буфера в куче в кодеке сжатия LZ4 ClickHouse при обработке вредоносного запроса. В рамках цикла LZ4::decompressImpl() из сжатых данных считывается 16-битное беззнаковое значение ('offset'), предоставленное пользователем. Это смещение затем используется в длине операции копирования без проверки верхних границ источника операции копирования.

Благодарность: JFrog Security Research Team

### CVE-2021-42388 {#cve-2021-42388}

Чтение за границами буфера в куче в кодеке сжатия LZ4 ClickHouse при обработке вредоносного запроса. В рамках цикла LZ4::decompressImpl() из сжатых данных считывается 16-битное беззнаковое значение ('offset'), предоставленное пользователем. Это смещение затем используется в длине операции копирования без проверки нижних границ источника операции копирования.

Благодарность: JFrog Security Research Team

### CVE-2021-42389 {#cve-2021-42389}

Деление на ноль в кодеке сжатия Delta ClickHouse при обработке вредоносного запроса. Первый байт сжатого буфера используется в операции взятия остатка от деления без проверки на 0.

Благодарность: JFrog Security Research Team

### CVE-2021-42390 {#cve-2021-42390}

Деление на ноль в кодеке сжатия DeltaDouble ClickHouse при обработке вредоносного запроса. Первый байт сжатого буфера используется в операции взятия остатка от деления без проверки на 0.

Благодарность: JFrog Security Research Team

### CVE-2021-42391 {#cve-2021-42391}

Деление на ноль в кодеке сжатия Gorilla ClickHouse при обработке вредоносного запроса. Первый байт сжатого буфера используется в операции взятия остатка от деления без проверки на 0.

Благодарность: JFrog Security Research Team


## Исправлено в ClickHouse 21.4.3.21, 2021-04-12 {#fixed-in-clickhouse-release-21-4-3-21-2021-04-12}

### CVE-2021-25263 {#cve-2021-25263}

Злоумышленник, имеющий привилегию CREATE DICTIONARY, может прочитать произвольный файл за пределами разрешённого каталога.

Исправление включено в версии 20.8.18.32-lts, 21.1.9.41-stable, 21.2.9.41-stable, 21.3.6.55-lts, 21.4.3.21-stable и более поздние.

Благодарность: [Vyacheslav Egoshin](https://twitter.com/vegoshin)


## Исправлено в релизе ClickHouse 19.14.3.3, 2019-09-10 {#fixed-in-clickhouse-release-19-14-3-3-2019-09-10}

### CVE-2019-15024 {#cve-2019-15024}

Злоумышленник, имеющий доступ на запись в ZooKeeper и способный запустить собственный сервер, доступный из сети, в которой работает ClickHouse, может создать специально подготовленный вредоносный сервер, который будет выступать в роли реплики ClickHouse и зарегистрировать его в ZooKeeper. Когда другая реплика будет получать часть данных от вредоносной реплики, это может привести к записи clickhouse-server в произвольный путь файловой системы.

Благодарность: Эльдар Заитов из команды информационной безопасности Яндекса

### CVE-2019-16535 {#cve-2019-16535}

Чтение за границами буфера (OOB read), запись за границами буфера (OOB write) и целочисленное переполнение с потерей значимости в алгоритмах декомпрессии могут быть использованы для удалённого выполнения кода (RCE) или отказа в обслуживании (DoS) через нативный протокол.

Благодарность: Эльдар Заитов из команды информационной безопасности Яндекса

### CVE-2019-16536 {#cve-2019-16536}

Переполнение стека, приводящее к отказу в обслуживании (DoS), может быть вызвано вредоносным аутентифицированным клиентом.

Благодарность: Эльдар Заитов из команды информационной безопасности Яндекса


## Исправлено в релизе ClickHouse 19.13.6.1, 2019-09-20 {#fixed-in-clickhouse-release-19-13-6-1-2019-09-20}

### CVE-2019-18657 {#cve-2019-18657}

Табличная функция `url` содержала уязвимость, позволяющую злоумышленнику внедрять произвольные HTTP-заголовки в запрос.

Благодарность: [Nikita Tikhomirov](https://github.com/NSTikhomirov)


## Исправлено в релизе ClickHouse 18.12.13, 2018-09-10 {#fixed-in-clickhouse-release-18-12-13-2018-09-10}

### CVE-2018-14672 {#cve-2018-14672}

Функции загрузки моделей CatBoost позволяли выполнять обход каталогов и читать произвольные файлы через сообщения об ошибках.

Благодарность: Андрей Красичков, команда информационной безопасности Яндекса


## Исправлено в релизе ClickHouse 18.10.3, 2018-08-13 {#fixed-in-clickhouse-release-18-10-3-2018-08-13}

### CVE-2018-14671 {#cve-2018-14671}

unixODBC позволял загружать произвольные разделяемые объекты из файловой системы, что приводило к уязвимости удалённого выполнения кода.

Благодарности: Андрей Красичков и Евгений Сидоров из команды информационной безопасности Яндекса


## Исправлено в релизе ClickHouse 1.1.54388, 2018-06-28 {#fixed-in-clickhouse-release-1-1-54388-2018-06-28}

### CVE-2018-14668 {#cve-2018-14668}

Табличная функция `remote` допускала использование произвольных символов в полях `user`, `password` и `default_database`, что приводило к атакам типа Cross Protocol Request Forgery.

Благодарность: Андрей Красичков из команды информационной безопасности Яндекса


## Исправлено в релизе ClickHouse 1.1.54390, 2018-07-06 {#fixed-in-clickhouse-release-1-1-54390-2018-07-06}

### CVE-2018-14669 {#cve-2018-14669}

В MySQL-клиенте ClickHouse была включена функциональность "LOAD DATA LOCAL INFILE", которая позволяла вредоносной базе данных MySQL читать произвольные файлы с подключенного сервера ClickHouse.

Благодарности: Андрей Красичков и Евгений Сидоров из команды информационной безопасности Яндекса


## Исправлено в релизе ClickHouse 1.1.54131, 2017-01-10 {#fixed-in-clickhouse-release-1-1-54131-2017-01-10}

### CVE-2018-14670 {#cve-2018-14670}

Некорректная конфигурация в deb-пакете могла привести к несанкционированному использованию базы данных.

Благодарности: Национальный центр кибербезопасности Великобритании (NCSC)
