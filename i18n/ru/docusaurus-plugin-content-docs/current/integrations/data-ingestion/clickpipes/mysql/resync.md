---
'title': 'Синхронизация Database ClickPipe'
'description': 'Документация по синхронизации базы данных ClickPipe'
'slug': '/integrations/clickpipes/mysql/resync'
'sidebar_label': 'Синхронизация ClickPipe'
'doc_type': 'guide'
---
import resync_button from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/resync_button.png'
import Image from '@theme/IdealImage';

### Что делает Resync? {#what-mysql-resync-do}

Resync включает в себя следующие операции в порядке:

1. Существующий ClickPipe удаляется, и запускается новый ClickPipe "resync". Таким образом, изменения в структурах исходных таблиц будут учтены при повторной синхронизации.
2. ClickPipe для повторной синхронизации создает (или заменяет) новый набор таблиц назначения, которые имеют те же названия, что и исходные таблицы, за исключением суффикса `_resync`.
3. Выполняется начальная загрузка в таблицы `_resync`.
4. Затем таблицы `_resync` меняются местами с оригинальными таблицами. Строки с пометкой "мягкое удаление" переносятся из оригинальных таблиц в таблицы `_resync` перед обменом.

Все настройки оригинального ClickPipe сохраняются в ClickPipe для повторной синхронизации. Статистика оригинального ClickPipe очищается в интерфейсе.

### Сценарии использования повторной синхронизации ClickPipe {#use-cases-mysql-resync}

Вот несколько сценариев:

1. Вам может потребоваться выполнить серьезные изменения схемы в исходных таблицах, которые сломают существующий ClickPipe, и вам потребуется перезапустить. Вы можете просто нажать Resync после внесения изменений.
2. Специально для Clickhouse, возможно, вам нужно было изменить ключи ORDER BY на целевых таблицах. Вы можете выполнить Resync, чтобы заново заполнить данные в новую таблицу с правильным ключом сортировки.

:::note
Вы можете выполнять повторную синхронизацию несколько раз, однако учитывайте нагрузку на исходную базу данных при выполнении повторной синхронизации.
:::

### Руководство по повторной синхронизации ClickPipe {#guide-mysql-resync}

1. На вкладке Источники данных нажмите на ClickPipe MySQL, который вы хотите повторно синхронизировать.
2. Перейдите на вкладку **Настройки**.
3. Нажмите на кнопку **Resync**.

<Image img={resync_button} border size="md"/>

4. Должно появиться диалоговое окно для подтверждения. Нажмите на Resync снова.
5. Перейдите на вкладку **Метрики**.
6. Через примерно 5 секунд (а также при обновлении страницы) статус трубы должен быть **Setup** или **Snapshot**.
7. Начальная загрузка повторной синхронизации может быть отслежена на вкладке **Таблицы** - в разделе **Статистика начальной загрузки**.
8. Как только начальная загрузка завершится, труба атомарно заменит таблицы `_resync` на оригинальные таблицы. Во время обмена статус будет **Resync**.
9. Как только обмен завершится, труба войдет в состояние **Running** и выполнит CDC, если это включено.