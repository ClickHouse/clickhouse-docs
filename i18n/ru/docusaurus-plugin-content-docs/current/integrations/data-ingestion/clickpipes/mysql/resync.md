---
title: 'Ресинхронизация ClickPipe для базы данных'
description: 'Руководство по ресинхронизации ClickPipe для базы данных'
slug: /integrations/clickpipes/mysql/resync
sidebar_label: 'Ресинхронизация ClickPipe'
doc_type: 'guide'
keywords: ['clickpipes', 'mysql', 'cdc', 'ингестия данных', 'синхронизация в реальном времени']
integration:
  - support_level: 'основной'
  - category: 'clickpipes'
---

import resync_button from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/resync_button.png'
import Image from '@theme/IdealImage';

### Что делает Resync? \\{#what-mysql-resync-do\\}

Resync выполняет следующие операции в указанном порядке:

1. Существующий ClickPipe удаляется, и запускается новый ClickPipe с режимом "resync". Таким образом, изменения в структурах исходных таблиц будут подхвачены при выполнении resync.
2. Resync ClickPipe создаёт (или заменяет) новый набор целевых таблиц с теми же именами, что и исходные, но с суффиксом `_resync`.
3. Выполняется начальная загрузка в таблицы `_resync`.
4. Затем таблицы `_resync` атомарно меняются местами с исходными таблицами. Логически удалённые строки переносятся из исходных таблиц в таблицы `_resync` перед обменом.

Все настройки исходного ClickPipe сохраняются в resync ClickPipe. Статистика исходного ClickPipe очищается в UI.

### Сценарии использования resync для ClickPipe \\{#use-cases-mysql-resync\\}

Вот несколько сценариев:

1. Возможно, вам нужно выполнить крупные изменения схемы исходных таблиц, которые сломают существующий ClickPipe, и вам потребуется перезапуск. В этом случае можно просто нажать Resync после выполнения изменений.
2. В частности, для ClickHouse, возможно, вам нужно было изменить ключи ORDER BY в целевых таблицах. Вы можете выполнить Resync, чтобы заново заполнить данные в новой таблице с корректным ключом сортировки.

:::note
Вы можете выполнять resync несколько раз, однако учитывайте нагрузку на исходную базу данных при его выполнении.
:::

### Руководство по Resync ClickPipe \\{#guide-mysql-resync\\}

1. Во вкладке Data Sources нажмите на MySQL ClickPipe, для которого нужно выполнить resync.
2. Перейдите во вкладку **Settings**.
3. Нажмите кнопку **Resync**.

<Image img={resync_button} border size="md" />

4. Появится диалоговое окно для подтверждения. Нажмите Resync ещё раз.
5. Перейдите во вкладку **Metrics**.
6. Примерно через 5 секунд (а также после обновления страницы) статус конвейера должен измениться на **Setup** или **Snapshot**.
7. Начальную загрузку resync можно отслеживать во вкладке **Tables** — в разделе **Initial Load Stats**.
8. После завершения начальной загрузки конвейер атомарно поменяет таблицы `_resync` местами с исходными таблицами. Во время обмена статус будет **Resync**.
9. После завершения обмена конвейер перейдёт в состояние **Running** и будет выполнять CDC, если оно включено.