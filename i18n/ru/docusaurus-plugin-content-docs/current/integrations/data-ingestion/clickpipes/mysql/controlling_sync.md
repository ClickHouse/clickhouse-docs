---
title: 'Управление синхронизацией MySQL ClickPipe'
description: 'Документация по управлению синхронизацией MySQL ClickPipe'
slug: /integrations/clickpipes/mysql/sync_control
sidebar_label: 'Управление синхронизацией'
keywords: ['MySQL ClickPipe', 'управление синхронизацией ClickPipe', 'репликация MySQL CDC', 'коннектор ClickHouse для MySQL', 'синхронизация баз данных с ClickHouse']
doc_type: 'guide'
integration:
  - support_level: 'core'
  - category: 'clickpipes'
---

import edit_sync_button from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/edit_sync_button.png'
import create_sync_settings from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/create_sync_settings.png'
import edit_sync_settings from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/sync_settings_edit.png'
import cdc_syncs from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/cdc_syncs.png'
import Image from '@theme/IdealImage';

В этом документе описывается, как управлять синхронизацией ClickPipe для MySQL, когда он работает в режиме **CDC (Running)**.


## Обзор \{#overview\}

ClickPipes для баз данных имеют архитектуру, которая состоит из двух параллельных процессов — извлечения данных из исходной базы данных и записи в целевую базу данных. Процесс извлечения управляется конфигурацией синхронизации, которая определяет, как часто должны забираться данные и какой объем данных должен забираться за один раз. Под «за один раз» мы подразумеваем один батч, так как ClickPipe считывает и отправляет данные батчами.

Существует два основных способа управлять синхронизацией MySQL ClickPipe. ClickPipe начнет отправку данных, когда сработает один из приведенных ниже параметров.

### Интервал синхронизации \{#interval\}

Интервал синхронизации конвейера — это период времени (в секундах), в течение которого ClickPipe считывает записи из исходной базы данных. Время, необходимое для отправки полученных данных в ClickHouse, в этот интервал не входит.

Значение по умолчанию — **1 минута**.
Интервал синхронизации может быть задан любым положительным целым числом, но рекомендуется устанавливать его не менее 10 секунд.

### Размер пакета выборки \{#batch-size\}

Размер пакета выборки — это количество записей, которое ClickPipe будет забирать из исходной базы данных за одну выборку. Под записями здесь понимаются операции вставки, обновления и удаления в таблицах, которые входят в ClickPipe.

Значение по умолчанию — **100 000** записей.
Безопасный максимум — 10 миллионов.

### Исключение: Долгоживущие транзакции на источнике \{#transactions\}

Когда транзакция выполняется в исходной базе данных, ClickPipe ждёт, пока не получит COMMIT этой транзакции, прежде чем продолжить. При этом это поведение **переопределяет** и интервал синхронизации, и размер пакета выборки.

### Настройка параметров синхронизации \{#configuring\}

Вы можете задать интервал синхронизации и размер пакета выборки данных при создании ClickPipe или при редактировании существующего.
При создании ClickPipe эти параметры отображаются на втором шаге мастера, как показано ниже:

<Image img={create_sync_settings} alt="Создание параметров синхронизации" size="md"/>

При редактировании существующего ClickPipe перейдите на вкладку **Settings** соответствующего конвейера, приостановите его, а затем нажмите **Configure**:

<Image img={edit_sync_button} alt="Кнопка редактирования синхронизации" size="md"/>

Откроется всплывающая панель с параметрами синхронизации, где вы можете изменить интервал синхронизации и размер пакета выборки данных:

<Image img={edit_sync_settings} alt="Редактирование параметров синхронизации" size="md"/>

### Мониторинг работы механизма управления синхронизацией \{#monitoring\}

Вы можете посмотреть, сколько времени занимает обработка каждого батча, в таблице **CDC Syncs** на вкладке **Metrics** в ClickPipe. Обратите внимание, что указанная здесь длительность включает время отправки; если входящих строк нет, ClickPipe ожидает, и время ожидания также включается в длительность.

<Image img={cdc_syncs} alt="Таблица CDC Syncs" size="md"/>