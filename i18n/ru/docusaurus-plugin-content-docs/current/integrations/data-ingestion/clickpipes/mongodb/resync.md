---
title: 'Повторная синхронизация ClickPipe для базы данных'
description: 'Документация по повторной синхронизации ClickPipe для базы данных'
slug: /integrations/clickpipes/mongodb/resync
sidebar_label: 'Повторная синхронизация ClickPipe'
doc_type: 'guide'
keywords: ['clickpipes', 'mongodb', 'cdc', 'ингестия данных', 'синхронизация в реальном времени']
---

import resync_button from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/resync_button.png'
import Image from '@theme/IdealImage';

### Что делает Resync?

Resync выполняет следующие операции по порядку:

1. Существующий ClickPipe удаляется, и запускается новый ClickPipe `resync`. Таким образом, изменения в структуре исходных таблиц будут учтены при повторной синхронизации.
2. Resync ClickPipe создаёт (или заменяет) новый набор целевых таблиц с теми же именами, что и у исходных таблиц, но с суффиксом `_resync`.
3. Выполняется начальная загрузка в таблицы `_resync`.
4. Затем таблицы `_resync` атомарно меняются местами с исходными таблицами. Логически (soft) удалённые строки переносятся из исходных таблиц в таблицы `_resync` до обмена.

Все настройки исходного ClickPipe сохраняются в resync ClickPipe. Статистика исходного ClickPipe в интерфейсе очищается.

### Сценарии использования повторной синхронизации ClickPipe

Ниже приведено несколько сценариев:

1. Возможно, вам нужно внести серьёзные изменения в схему исходных таблиц, которые нарушат работу существующего ClickPipe и потребуют его перезапуска. В этом случае вы можете просто нажать Resync после внесения изменений.
2. В частности, для ClickHouse может потребоваться изменить ключи ORDER BY в целевых таблицах. Вы можете выполнить Resync, чтобы заново заполнить данные в новой таблице с правильным ключом сортировки.

### Руководство по Resync ClickPipe

1. На вкладке Data Sources нажмите на MongoDB ClickPipe, для которого требуется выполнить повторную синхронизацию.
2. Перейдите на вкладку **Settings**.
3. Нажмите кнопку **Resync**.

<Image img={resync_button} border size="md" />

4. Появится диалоговое окно для подтверждения. Снова нажмите Resync.
5. Перейдите на вкладку **Metrics**.
6. Дождитесь, когда статус конвейера станет **Setup** или **Snapshot**.
7. За начальной загрузкой для resync можно наблюдать на вкладке **Tables** в разделе **Initial Load Stats**.
8. После завершения начальной загрузки конвейер атомарно поменяет таблицы `_resync` и исходные таблицы местами. Во время обмена статус будет **Resync**.
9. После завершения обмена конвейер перейдёт в состояние **Running** и будет выполнять CDC (фиксацию изменений данных), если она включена.
