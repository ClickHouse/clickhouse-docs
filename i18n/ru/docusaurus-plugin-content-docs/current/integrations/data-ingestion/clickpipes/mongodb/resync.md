---
'title': 'Синхронизация базы данных ClickPipe'
'description': 'Документация по синхронизации базы данных ClickPipe'
'slug': '/integrations/clickpipes/mongodb/resync'
'sidebar_label': 'Синхронизация ClickPipe'
'doc_type': 'guide'
---

import resync_button from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/resync_button.png'
import Image from '@theme/IdealImage';

### Что делает Resync? {#what-mongodb-resync-do}

Resync включает в себя следующие операции в порядке:

1. Существующий ClickPipe удаляется, и запускается новый ClickPipe "resync". Таким образом, изменения в структурах исходных таблиц будут учтены при выполнении resync.
2. ClickPipe resync создает (или заменяет) новый набор целевых таблиц, которые имеют те же названия, что и оригинальные таблицы, за исключением суффикса `_resync`.
3. Выполняется начальная загрузка в таблицы `_resync`.
4. Затем таблицы `_resync` меняются местами с оригинальными таблицами. Строки, помеченные для мягкого удаления, переносятся из оригинальных таблиц в таблицы `_resync` перед заменой.

Все настройки оригинального ClickPipe сохраняются в ClickPipe resync. Статистика оригинального ClickPipe очищается в пользовательском интерфейсе.

### Сценарии для повторной синхронизации ClickPipe {#use-cases-mongodb-resync}

Вот несколько сценариев:

1. Возможно, вам потребуется выполнить значительные изменения в схеме исходных таблиц, что приведет к сбоям в существующем ClickPipe, и вам нужно будет перезапустить его. Вы можете просто нажать Resync после внесения изменений.
2. Специально для ClickHouse, возможно, вам нужно было изменить ключи ORDER BY в целевых таблицах. Вы можете выполнить Resync для повторного заполнения данных в новую таблицу с правильным ключом сортировки.

### Руководство по Resync ClickPipe {#guide-mongodb-resync}

1. На вкладке Источники данных нажмите на MongoDB ClickPipe, который вы хотите повторно синхронизировать.
2. Перейдите на вкладку **Настройки**.
3. Нажмите на кнопку **Resync**.

<Image img={resync_button} border size="md"/>

4. Должно появиться диалоговое окно для подтверждения. Нажмите на Resync снова.
5. Перейдите на вкладку **Метрики**.
6. Подождите, пока статус канала не станет **Подготовка** или **Снимок**.
7. Начальную загрузку повторной синхронизации можно отслеживать на вкладке **Таблицы** - в разделе **Статистика начальной загрузки**.
8. Как только начальная загрузка завершится, канал атомарно заменит таблицы `_resync` с оригинальными таблицами. Во время замены статус будет **Resync**.
9. Как только замена завершится, канал перейдет в состояние **Работает** и выполнит CDC, если это включено.
