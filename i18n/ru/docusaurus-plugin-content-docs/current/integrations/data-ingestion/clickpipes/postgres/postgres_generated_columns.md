---
slug: '/integrations/clickpipes/postgres/generated_columns'
description: 'Страница описывает использование PostgreSQL для генерации рядов, а'
title: 'Сгенерированные Столбцы PostgreSQL: Ошибки и Лучшие Практики'
doc_type: guide
---
Когда вы используете сгенерированные колонки в таблицах, которые реплицируются в PostgreSQL, есть несколько важных аспектов, о которых следует помнить. Эти нюансы могут повлиять на процесс репликации и целостность данных в ваших целевых системах.

## Проблема с сгенерированными колонками {#the-problem-with-generated-columns}

1. **Не публикуются через `pgoutput`:** Сгенерированные колонки не публикуются через логический плагин репликации `pgoutput`. Это означает, что при репликации данных из PostgreSQL в другую систему значения сгенерированных колонок не включаются в поток репликации.

2. **Проблемы с первичными ключами:** Если сгенерированная колонка является частью вашего первичного ключа, это может вызвать проблемы с дедупликацией на целевой стороне. Поскольку значения сгенерированных колонок не реплицируются, система назначения не будет иметь необходимой информации для правильной идентификации и дедупликации строк.

3. **Проблемы с изменениями схемы:** Если вы добавите сгенерированную колонку в таблицу, которая уже реплицируется, новая колонка не будет заполнена в целевой системе, так как Postgres не предоставляет нам RelationMessage для новой колонки. Если затем вы добавите новую неспециальную колонку в ту же таблицу, ClickPipe, пытаясь согласовать схему, не сможет найти сгенерированную колонку в целевой системе, что приведет к сбою в процессе репликации.

## Лучшие практики {#best-practices}

Чтобы обойти эти ограничения, рассмотрите следующие лучшие практики:

1. **Воссоздайте сгенерированные колонки на целевой стороне:** Вместо того, чтобы полагаться на процесс репликации для обработки сгенерированных колонок, рекомендуется воссоздавать эти колонки на целевой стороне, используя инструменты, такие как dbt (data build tool) или другие механизмы преобразования данных.

2. **Избегайте использования сгенерированных колонок в первичных ключах:** При проектировании таблиц, которые будут реплицироваться, лучше избегать включения сгенерированных колонок в состав первичного ключа.

## Будущие улучшения интерфейса пользователя {#upcoming-improvements-to-ui}

В будущих версиях мы планируем добавить интерфейс пользователя, чтобы помочь пользователям с следующими задачами:

1. **Идентификация таблиц с сгенерированными колонками:** Интерфейс будет иметь функцию для идентификации таблиц, содержащих сгенерированные колонки. Это поможет пользователям понять, какие таблицы затронуты этой проблемой.

2. **Документация и лучшие практики:** Интерфейс будет включать лучшие практики для использования сгенерированных колонок в реплицируемых таблицах, включая рекомендации по избеганию распространенных проблем.