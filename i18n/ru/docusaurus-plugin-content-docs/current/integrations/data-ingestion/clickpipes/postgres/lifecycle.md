---
sidebar_label: 'Жизненный цикл конвейера Postgres ClickPipe'
description: 'Различные статусы конвейера и их значения'
slug: /integrations/clickpipes/postgres/lifecycle
title: 'Жизненный цикл конвейера Postgres ClickPipe'
doc_type: 'guide'
keywords: ['clickpipes', 'postgresql', 'cdc', 'data ingestion', 'real-time sync']
---



# Жизненный цикл Postgres ClickPipe {#lifecycle}

В этом документе описываются различные фазы работы Postgres ClickPipe, возможные статусы и их значения.


## Подготовка {#provisioning}

При нажатии на кнопку Create ClickPipe создается ClickPipe в состоянии `Provisioning`. В процессе подготовки разворачивается базовая инфраструктура для работы ClickPipes в рамках сервиса и регистрируются начальные метаданные конвейера. Поскольку вычислительные ресурсы для ClickPipes в рамках одного сервиса являются общими, второй ClickPipe создается значительно быстрее первого — инфраструктура уже развернута.


## Настройка {#setup}

После создания канала он переходит в состояние `Setup`. В этом состоянии создаются целевые таблицы ClickHouse. Также на этом этапе получаются и сохраняются определения таблиц из источника данных.


## Снимок состояния {#snapshot}

После завершения настройки происходит переход в состояние `Snapshot` (если это не канал, работающий только в режиме CDC, который перейдет в состояние `Running`). Термины `Snapshot`, `Initial Snapshot` и `Initial Load` (наиболее распространенный) являются взаимозаменяемыми. В этом состоянии создается снимок таблиц исходной базы данных и выполняется их загрузка в ClickHouse. При этом не используется логическая репликация, однако слот репликации создается на данном этапе, поэтому параметры `max_slot_wal_keep_size` и настройки хранилища должны учитывать рост слота во время начальной загрузки. Дополнительную информацию о начальной загрузке см. в [документации по параллельной начальной загрузке](./parallel_initial_load). Канал также переходит в состояние `Snapshot` при запуске повторной синхронизации или при добавлении новых таблиц в существующий канал.


## Выполнение {#running}

После завершения начальной загрузки канал переходит в состояние `Running` (если это не канал только для снимков, который перейдет в состояние `Completed`). Именно на этом этапе канал начинает захват изменений данных (`Change-Data Capture`). В этом состоянии запускается логическая репликация из исходной базы данных в ClickHouse. Информацию об управлении CDC см. в [документации по управлению CDC](./sync_control).


## Приостановлен {#paused}

Когда канал находится в состоянии `Running`, его можно приостановить. Это остановит процесс CDC, и канал перейдет в состояние `Paused`. В этом состоянии новые данные не извлекаются из исходной базы данных, но существующие данные в ClickHouse остаются без изменений. Канал можно возобновить из этого состояния.


## Приостановка {#pausing}

:::note
Это состояние скоро появится. Если вы используете наш [OpenAPI](https://clickhouse.com/docs/cloud/manage/openapi), рекомендуем добавить поддержку этого состояния уже сейчас, чтобы ваша интеграция продолжала работать после его выпуска.
:::
При нажатии на кнопку Pause канал переходит в состояние `Pausing`. Это промежуточное состояние, в котором происходит остановка процесса CDC. После полной остановки процесса CDC канал перейдет в состояние `Paused`.


## Изменение {#modifying}

:::note
Это состояние скоро появится. Если вы используете наш [OpenAPI](https://clickhouse.com/docs/cloud/manage/openapi), рекомендуем добавить его поддержку уже сейчас, чтобы ваша интеграция продолжала работать после выпуска.
:::
В настоящее время это состояние означает, что канал находится в процессе удаления таблиц.


## Повторная синхронизация {#resync}

:::note
Это состояние скоро появится. Если вы используете наш [OpenAPI](https://clickhouse.com/docs/cloud/manage/openapi), рекомендуем добавить поддержку этого состояния уже сейчас, чтобы ваша интеграция продолжала работать после его выпуска.
:::
Это состояние указывает, что канал находится в фазе повторной синхронизации и выполняет атомарную замену таблиц \_resync на исходные таблицы. Дополнительную информацию о повторной синхронизации можно найти в [документации по повторной синхронизации](./resync).


## Завершено {#completed}

Это состояние применяется к каналам, работающим только со снимками, и указывает, что снимок выполнен и дальнейшая работа не требуется.


## Сбой {#failed}

Если в канале произошла неустранимая ошибка, он перейдет в состояние `Failed`. Для восстановления из этого состояния вы можете обратиться в службу поддержки или выполнить [повторную синхронизацию](./resync) канала.
