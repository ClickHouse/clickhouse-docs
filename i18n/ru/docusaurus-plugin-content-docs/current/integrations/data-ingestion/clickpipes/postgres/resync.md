---
'title': 'Синхронизация БАЗЫ ДАННЫХ ClickPipe'
'description': 'Документация для синхронизации БАЗЫ ДАННЫХ ClickPipe'
'slug': '/integrations/clickpipes/postgres/resync'
'sidebar_label': 'Синхронизация ClickPipe'
'doc_type': 'guide'
---

import resync_button from '@site/static/images/integrations/data-ingestion/clickpipes/postgres/resync_button.png'
import Image from '@theme/IdealImage';

### Что делает Resync? {#what-postgres-resync-do}

Resync включает в себя следующие операции по порядку:
1. Существующий ClickPipe удаляется, и запускается новый ClickPipe с "resync". Таким образом, изменения в структурах исходных таблиц будут учтены при выполнении resync.
2. ClickPipe с resync создает (или заменяет) новый набор целевых таблиц, которые имеют такие же имена, как оригинальные таблицы, за исключением суффикса `_resync`.
3. Выполняется начальная загрузка в таблицы `_resync`.
4. Таблицы `_resync` затем обменяются местами с оригинальными таблицами. Строки с мягким удалением переносятся из оригинальных таблиц в таблицы `_resync` перед обменом.

Все настройки оригинального ClickPipe сохраняются в ClickPipe с resync. Статистика оригинального ClickPipe очищается в интерфейсе.

### Сценарии использования resync для ClickPipe {#use-cases-postgres-resync}

Вот несколько сценариев:

1. Вам может понадобиться выполнить серьезные изменения схемы на исходных таблицах, что сломает существующий ClickPipe, и вам нужно будет его перезапустить. Вы можете просто нажать Resync после внесения изменений.
2. В частности для ClickHouse, возможно, вам нужно было изменить ключи ORDER BY в целевых таблицах. Вы можете выполнить Resync, чтобы заново заполнить данные в новой таблице с правильным ключом сортировки.
3. Репликационный слот ClickPipe недействителен: Resync создает новый ClickPipe и новый слот в исходной базе данных.

:::note
Вы можете выполнять resync несколько раз, однако, пожалуйста, учтите нагрузку на исходную базу данных при выполнении resync, так как начальная загрузка с параллельными потоками происходит каждый раз.
:::

### Руководство по Resync ClickPipe {#guide-postgres-resync}

1. На вкладке Источники данных нажмите на ClickPipe Postgres, который вы хотите выполнить resync.
2. Перейдите на вкладку **Настройки**.
3. Нажмите кнопку **Resync**.

<Image img={resync_button} border size="md"/>

4. Появится диалоговое окно для подтверждения. Щелкните снова по Resync.
5. Перейдите на вкладку **Метрики**.
6. Через около 5 секунд (а также при обновлении страницы) статус трубопровода должен быть **Setup** или **Snapshot**.
7. Начальную загрузку resync можно отслеживать на вкладке **Таблицы** - в разделе **Статистика начальной загрузки**.
8. После завершения начальной загрузки трубопровод атомарно обменяет таблицы `_resync` с оригинальными таблицами. Во время замены статус будет **Resync**.
9. После завершения обмена трубопровод перейдет в состояние **Running** и выполнит CDC, если это включено.
