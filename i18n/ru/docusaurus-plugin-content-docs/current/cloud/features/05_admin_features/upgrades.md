---
'sidebar_label': 'Обновления'
'slug': '/manage/updates'
'title': 'Обновления'
'description': 'С ClickHouse Cloud вам никогда не придется беспокоиться о патчах и
  обновлениях. Мы регулярно выпускаем обновления, которые включают исправления, новые
  функции и улучшения производительности.'
'doc_type': 'guide'
---
import Image from '@theme/IdealImage';
import EnterprisePlanFeatureBadge from '@theme/badges/EnterprisePlanFeatureBadge'
import ScalePlanFeatureBadge from '@theme/badges/ScalePlanFeatureBadge'
import fast_release from '@site/static/images/cloud/manage/fast_release.png';
import enroll_fast_release from '@site/static/images/cloud/manage/enroll_fast_release.png';
import scheduled_upgrades from '@site/static/images/cloud/manage/scheduled_upgrades.png';
import scheduled_upgrade_window from '@site/static/images/cloud/manage/scheduled_upgrade_window.png';


# Обновления

С ClickHouse Cloud вам никогда не придется беспокоиться о патчах и обновлениях. Мы регулярно выпускаем обновления, которые включают исправления, новые функции и улучшения производительности. Для полного списка нововведений в ClickHouse смотрите наш [журнал изменений Cloud](/whats-new/cloud).

:::note
Мы вводим новый механизм обновлений, концепцию, которую мы называем "сделать перед разрывом" (или MBB). С этим новым подходом мы добавляем обновленные реплики до удаления старых в процессе обновления. Это приводит к более бесшумным обновлениям, которые менее нарушают рабочие нагрузки.

В рамках этого изменения исторические данные системных таблиц будут сохраняться в течение максимум 30 дней в рамках событий обновления. Кроме того, любые данные системных таблиц старше 19 декабря 2024 года для сервисов на AWS или GCP и старше 14 января 2025 года для сервисов на Azure не будут сохранены в рамках миграции на новые уровни организации.
:::

## Совместимость версий {#version-compatibility}

Когда вы создаете сервис, настройка [`compatibility`](/operations/settings/settings#compatibility) устанавливается на самую актуальную версию ClickHouse, предлагаемую на ClickHouse Cloud на момент первоначального предоставления вашего сервиса.

Настройка `compatibility` позволяет использовать значения по умолчанию из предыдущих версий. Когда ваш сервис обновляется до новой версии, версия, указанная для настройки `compatibility`, не изменяется. Это означает, что значения по умолчанию для настроек, существовавших на момент создания вашего сервиса, не изменятся (если вы не переопределили эти значения по умолчанию, в этом случае они сохранятся после обновления).

Вы не можете управлять настройкой по умолчанию на уровне сервиса для вашего сервиса. Вам необходимо [связаться с поддержкой](https://clickhouse.com/support/program), если вы хотите изменить версию, установленную для настройки по умолчанию `compatibility` вашего сервиса. Однако вы можете переопределить настройку `compatibility` на уровне пользователя, роли, профиля, запроса или сессии, используя стандартные механизмы настройки ClickHouse, такие как `SET compatibility = '22.3'` в сессии или `SETTINGS compatibility = '22.3'` в запросе.

## Режим обслуживания {#maintenance-mode}

Время от времени нам может потребоваться обновить ваш сервис, что может потребовать отключения определенных функций, таких как масштабирование или ожидание. В редких случаях нам может потребоваться предпринять действия по отношению к сервису, который испытывает проблемы, и вернуть его в здоровое состояние. В течение такого обслуживания вы увидите баннер на странице сервиса, который гласит _"Идет обслуживание"_. Вы все еще можете использовать сервис для запросов в это время.

С вас не будет взиматься плата за время, в течение которого сервис находится в режиме обслуживания. _Режим обслуживания_ является редким случаем и не должен путаться с регулярными обновлениями сервиса.

## Каналы выпусков (график обновлений) {#release-channels-upgrade-schedule}

Пользователи могут указать график обновлений для своего сервиса ClickHouse Cloud, подписавшись на определенный канал выпуска. Существует три канала выпуска, и пользователи имеют возможность настроить день и время недели для обновлений с помощью функции **плановых обновлений**.

Три канала выпуска:
- [**Канал быстрого выпуска**](#fast-release-channel-early-upgrades) для раннего доступа к обновлениям.
- [**Канал регулярного выпуска**](#regular-release-channel) является каналом по умолчанию, и обновления в этом канале начинаются через две недели после обновлений канала быстрого выпуска. Если для вашего сервиса на уровне Scale и Enterprise не установлен канал выпуска, по умолчанию он находится на канале регулярного выпуска.
- [**Канал медленного выпуска**](#slow-release-channel-deferred-upgrades) предназначен для отложенного выпуска. Обновления в этом канале происходят через две недели после обновлений канала регулярного выпуска.

:::note
Сервисы базового уровня автоматически подключаются к каналу быстрого выпуска.
:::

### Канал быстрого выпуска (ранние обновления) {#fast-release-channel-early-upgrades}

<ScalePlanFeatureBadge feature="Канал быстрого выпуска"/>

Кроме регулярного графика обновлений, мы предлагаем **Канал быстрого выпуска**, если вы хотите, чтобы ваши сервисы получали обновления раньше обычного графика обновлений.

В частности, сервисы будут:

- Получать последние выпуски ClickHouse
- Более частые обновления по мере тестирования новых релизов

Вы можете изменить график обновлений сервиса в облачной консоли, как показано ниже:

<div class="eighty-percent">
    <Image img={fast_release} size="lg" alt="Выберите план" border/>
</div>
<br/>

<div class="eighty-percent">
    <Image img={enroll_fast_release} size="lg" alt="Выберите план" border/>
</div>
<br/>

Этот **Канал быстрого выпуска** подходит для тестирования новых функций в некритических окружениях. **Не рекомендуется для рабочих нагрузок в производстве с строгими требованиями к времени безотказной работы и надежности.**

### Канал регулярного выпуска {#regular-release-channel}

Для всех сервисов на уровнях Scale и Enterprise, у которых не настроен канал выпуска или график обновлений, обновления будут выполняться в рамках регулярного канала выпуска. Это рекомендуется для производственных окружений.

Обновления для канала регулярного выпуска обычно выполняются через две недели после **Канала быстрого выпуска**.

:::note
Сервисы базового уровня обновляются вскоре после Канала быстрого выпуска.
:::

### Канал медленного выпуска (отложенные обновления) {#slow-release-channel-deferred-upgrades}

<EnterprisePlanFeatureBadge feature="Канал медленного выпуска"/>

Мы предлагаем **Канал медленного выпуска**, если вы хотите, чтобы ваши сервисы получали обновления после регулярного графика обновлений.

В частности, сервисы будут:

- Обновляться после завершения развертывания в Каналах Быстрого и Регулярного Выпуска
- Получать выпуски ClickHouse примерно через 2 недели после регулярного выпуска
- Предназначены для клиентов, которые хотят дополнительное время для тестирования обновлений ClickHouse в своих некритических окружениях перед обновлением в производстве. Некритические окружения могут получать обновления через Канал Быстрого или Регулярного Выпуска для тестирования и валидации.

:::note
Вы можете менять каналы выпусков в любое время. Однако в определенных случаях изменение будет применяться только к будущим релизам. 
- Переход на более быстрый канал немедленно обновит ваш сервис. т.е. с Медленного на Регулярный, с Регулярного на Быстрый
- Переход на более медленный канал не понизит версию вашего сервиса и сохранит его на текущей версии до появления более новой в этом канале. т.е. с Регулярного на Медленный, с Быстрого на Регулярный или Медленный
:::

## Плановые обновления {#scheduled-upgrades}

<EnterprisePlanFeatureBadge feature="Плановые обновления" linking_verb_are="true"/>

Пользователи могут настроить временной интервал обновлений для сервисов на уровне Enterprise.

Выберите сервис, для которого вы хотите указать расписание обновлений, затем выберите `Settings` в левом меню. Прокрутите вниз до `Scheduled upgrades`.

<div class="eighty-percent">
    <Image img={scheduled_upgrades} size="lg" alt="Плановые обновления" border/>
</div>
<br/>

Выбор этой опции позволит пользователям выбрать день недели/временной интервал для обновлений баз данных и облака.

<div class="eighty-percent">
    <Image img={scheduled_upgrade_window} size="lg" alt="Плановое время обновления" border/>
</div>
<br/>
:::note
Хотя плановые обновления следуют установленному расписанию, исключения применяются для критически важных патчей безопасности и исправлений уязвимостей. В случаях, когда обнаруживается срочная проблема безопасности, обновления могут выполняться вне запланированного окна. Клиенты будут уведомлены о таких исключениях по мере необходимости.
:::