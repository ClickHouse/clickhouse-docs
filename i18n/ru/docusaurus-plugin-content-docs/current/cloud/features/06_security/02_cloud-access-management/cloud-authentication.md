---
'sidebar_label': 'Аутентификация в облаке'
'slug': '/cloud/security/cloud-authentication'
'title': 'Аутентификация в облаке'
'description': 'Этот гид объясняет некоторые хорошие практики для настройки вашей
  аутентификации.'
'doc_type': 'guide'
---
import ScalePlanFeatureBadge from '@theme/badges/ScalePlanFeatureBadge'
import EnterprisePlanFeatureBadge from '@theme/badges/EnterprisePlanFeatureBadge'


# Аутентификация в облаке

ClickHouse Cloud предоставляет несколько способов аутентификации. Этот гид объясняет некоторые хорошие практики по настройке вашей аутентификации. Всегда консультируйтесь с вашей командой безопасности при выборе методов аутентификации.

## Настройки паролей {#password-settings}

Минимальные настройки паролей для нашей консоли и сервисов (баз данных) в настоящее время соответствуют [NIST 800-63B](https://pages.nist.gov/800-63-3/sp800-63b.html#sec4) Уровень гарантий аутентификации 1:
- Минимум 12 символов
- Включает 3 из следующих 4 пунктов:
  - 1 заглавную букву
  - 1 строчную букву
  - 1 цифру
  - 1 специальный символ

## Электронная почта и пароль {#email--password}

ClickHouse Cloud позволяет аутентифицироваться с помощью адреса электронной почты и пароля. При использовании этого метода лучший способ защитить вашу учетную запись ClickHouse — использовать надежный пароль. Существует множество онлайн-ресурсов, которые помогут вам придумать запоминающийся пароль. В качестве альтернативы вы можете использовать генератор случайных паролей и сохранить ваш пароль в менеджере паролей для повышения безопасности.

## SSO с использованием аутентификации Google или Microsoft {#sso-using-google-or-microsoft-social-authentication}

Если ваша компания использует Google Workspace или Microsoft 365, вы можете использовать текущую настройку единого входа в ClickHouse Cloud. Для этого просто зарегистрируйтесь, используя адрес электронной почты вашей компании, и пригласите других пользователей, используя их корпоративные электронные адреса. Это означает, что ваши пользователи должны войти в систему, используя потоки авторизации вашей компании, будь то через вашего провайдера идентификаций или напрямую через аутентификацию Google или Microsoft, прежде чем смогут аутентифицироваться в ClickHouse Cloud.

## Многофакторная аутентификация {#multi-factor-authentication}

Пользователи с электронной почтой + паролем или социальной аутентификацией могут дополнительно защитить свою учетную запись, используя многофакторную аутентификацию (MFA). Чтобы настроить MFA:
1. Войдите в [console.clickhouse.cloud](https://console.clickhouse.cloud/)
2. Нажмите на ваши инициалы в верхнем левом углу рядом с логотипом ClickHouse
3. Выберите Профиль
4. Выберите Безопасность слева
5. Нажмите Настроить в плитке приложения аутентификатора
6. Используйте приложение аутентификатора, такое как Authy, 1Password или Google Authenticator, чтобы отсканировать QR-код
7. Введите код для подтверждения
8. На следующем экране скопируйте код восстановления и сохраните его в безопасном месте
9. Установите флажок рядом с `Я сохранил этот код безопасно`
10. Нажмите Продолжить

## Восстановление учетной записи {#account-recovery}

<details> 
   <summary>Получить код восстановления</summary>

   Если вы ранее зарегистрировались для MFA и не создали или потеряли свой код восстановления, выполните следующие действия, чтобы получить новый код восстановления:
   1. Перейдите на https://console.clickhouse.cloud
   2. Войдите с помощью ваших учетных данных и MFA
   3. Перейдите к своему профилю в верхнем левом углу
   4. Нажмите Безопасность слева
   5. Нажмите на корзину рядом с вашим приложением аутентификатора
   6. Нажмите Удалить приложение аутентификатора
   7. Введите ваш код и нажмите Продолжить
   8. Нажмите Настроить в разделе приложения аутентификатора
   9. Отсканируйте QR-код и введите новый код
   10. Скопируйте ваш код восстановления и сохраните его в безопасном месте
   11. Установите флажок рядом с `Я сохранил этот код безопасно`
   12. Нажмите Продолжить

</details>
<details>
   <summary>Забыл пароль</summary>

   Если вы забыли свой пароль, следуйте этим шагам для самостоятельного восстановления:
   1. Перейдите на https://console.clickhouse.cloud
   2. Введите ваш адрес электронной почты и нажмите Продолжить
   3. Нажмите Забыли пароль?
   4. Нажмите Отправить ссылку для сброса пароля
   5. Проверьте свою электронную почту и нажмите Сбросить пароль из письма
   6. Введите новый пароль, подтвердите пароль и нажмите Обновить пароль
   7. Нажмите Назад для входа
   8. Войдите в систему с вашим новым паролем
            
</details>
<details>
   <summary>Потерянное устройство или токен MFA</summary>

   Если вы потеряли свое устройство MFA или удалили свой токен, выполните следующие шаги для его восстановления и создания нового токена:
   1. Перейдите на https://console.clickhouse.cloud
   2. Введите свои учетные данные и нажмите Продолжить
   3. На экране многофакторной аутентификации нажмите Отмена
   4. Нажмите Код восстановления
   5. Введите код и нажмите Продолжить
   6. Скопируйте новый код восстановления и сохраните его в безопасном месте
   7. Установите флажок рядом с `Я сохранил этот код безопасно` и нажмите продолжить
   8. После входа перейдите к своему профилю в верхнем левом углу
   9. Нажмите на безопасность в верхнем левом углу
   10. Нажмите на значок корзины рядом с приложением аутентификатора, чтобы удалить ваш старый аутентификатор
   11. Нажмите Удалить приложение аутентификатора
   12. Когда будет предложено выполнить многофакторную аутентификацию, нажмите Отмена
   13. Нажмите Код восстановления
   14. Введите ваш код восстановления (это новый код, сгенерированный на шаге 7) и нажмите Продолжить
   15. Скопируйте новый код восстановления и сохраните его в безопасном месте - это запасной вариант на случай, если вы покинете экран во время процесса удаления
   16. Установите флажок рядом с `Я сохранил этот код безопасно` и нажмите Продолжить
   17. Следуйте указанному выше процессу, чтобы настроить новый фактор MFA
       
</details>
<details>
   <summary>Потерянный MFA и код восстановления</summary>

   Если вы потеряли свое устройство MFA И код восстановления или вы потеряли свое устройство MFA и никогда не получали код восстановления, выполните следующие шаги, чтобы запросить сброс:

   **Отправить заявку**: Если вы находитесь в организации, в которой есть другие административные пользователи, даже если вы пытаетесь получить доступ к организации с одним пользователем, попросите члена вашей организации, которому назначена роль администратора, войти в организацию и отправить заявку в службу поддержки для сброса вашего MFA от вашего имени. После того как мы подтвердим, что запрос подлинный, мы сбросим ваше MFA и уведомим администратора. Войдите в систему как обычно без MFA и перейдите в настройки профиля, чтобы зарегистрировать новый фактор, если хотите.

   **Сброс по электронной почте**: Если вы единственный пользователь в организации, отправьте запрос в службу поддержки по электронной почте (support@clickhouse.com), используя адрес электронной почты, связанный с вашей учетной записью. После того как мы подтвердим, что запрос поступает с правильного адреса электронной почты, мы сбросим ваше MFA И пароль. Получите доступ к вашей электронной почте, чтобы получить ссылку для сброса пароля. Настройте новый пароль, а затем перейдите в настройки профиля, чтобы зарегистрировать новый фактор, если хотите. 
   
</details>

## SAML SSO {#saml-sso}

<EnterprisePlanFeatureBadge feature="SAML SSO"/>

ClickHouse Cloud также поддерживает язык разметки утверждений безопасности (SAML) для единого входа (SSO). Для получения дополнительной информации смотрите [Настройка SAML SSO](/cloud/security/saml-setup).

## Идентификатор пользователя базы данных и пароль {#database-user-id--password}

Используйте метод SHA256_hash при [создании учетных записей пользователей](/sql-reference/statements/create/user.md) для защиты паролей.

**ПОДСКАЗКА:** Поскольку пользователи с меньшими, чем административные, привилегиями не могут устанавливать свои собственные пароли, попросите пользователя захэшировать свой пароль с помощью генератора, такого как [этот](https://tools.keycdn.com/sha256-online-generator), прежде чем предоставить его администратору для настройки учетной записи. Пароли должны соответствовать [требованиям](#password-settings), указанным выше.

```sql
CREATE USER userName IDENTIFIED WITH sha256_hash BY 'hash';
```