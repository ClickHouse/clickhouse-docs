---
sidebar_label: 'Панели мониторинга'
slug: /cloud/manage/dashboards
title: 'Панели мониторинга'
description: 'Функция панелей мониторинга SQL Console позволяет собирать визуализации, созданные на основе сохранённых запросов, и обмениваться ими.'
doc_type: 'guide'
keywords: ['ClickHouse Cloud', 'панели мониторинга', 'визуализация данных', 'панели мониторинга SQL Console', 'облачная аналитика']
---

import BetaBadge from '@theme/badges/BetaBadge';
import Image from '@theme/IdealImage';
import dashboards_2 from '@site/static/images/cloud/dashboards/2_dashboards.png';
import dashboards_3 from '@site/static/images/cloud/dashboards/3_dashboards.png';
import dashboards_4 from '@site/static/images/cloud/dashboards/4_dashboards.png';
import dashboards_5 from '@site/static/images/cloud/dashboards/5_dashboards.png';
import dashboards_6 from '@site/static/images/cloud/dashboards/6_dashboards.png';
import dashboards_7 from '@site/static/images/cloud/dashboards/7_dashboards.png';
import dashboards_8 from '@site/static/images/cloud/dashboards/8_dashboards.png';
import dashboards_9 from '@site/static/images/cloud/dashboards/9_dashboards.png';
import dashboards_10 from '@site/static/images/cloud/dashboards/10_dashboards.png';
import dashboards_11 from '@site/static/images/cloud/dashboards/11_dashboards.png';


# Панели мониторинга {#dashboards}

Функция панелей мониторинга в SQL Console позволяет собирать и совместно использовать визуализации на основе сохранённых запросов. Начните с сохранения и визуализации запросов, добавления их визуализаций на панель и сделайте панель интерактивной с помощью параметров запросов.



## Базовые понятия {#core-concepts}

### Общий доступ к запросам {#query-sharing}

Чтобы поделиться панелью с коллегами, обязательно предоставьте общий доступ к базовому сохранённому запросу. Для просмотра визуализации пользователи должны иметь как минимум доступ «только для чтения» к этому сохранённому запросу. 

### Интерактивность {#interactivity}

Используйте [параметры запроса](/sql-reference/syntax#defining-and-using-query-parameters), чтобы сделать панель интерактивной. Например, вы можете добавить параметр запроса в оператор `WHERE`, чтобы использовать его как фильтр. 

Вы можете включать и отключать поле ввода параметра запроса через боковую панель фильтров **Global**, выбрав тип «filter» в настройках визуализации. Также вы можете включать и отключать ввод параметра запроса, связав его с другим объектом (например, таблицей) на панели. См. раздел «[configure a filter](/cloud/manage/dashboards#configure-a-filter)» в кратком руководстве по быстрому старту ниже. 



## Быстрый старт {#quick-start}

Создадим панель мониторинга для нашего сервиса ClickHouse, используя системную таблицу [query\_log](/operations/system-tables/query_log). 



## Быстрый старт {#quick-start-1}

### Создание сохранённого запроса {#create-a-saved-query}

Если у вас уже есть сохранённые запросы для визуализации, вы можете пропустить этот шаг. 

Откройте новую вкладку запроса. Давайте напишем запрос для подсчёта объёма запросов по дням для сервиса, используя системные таблицы ClickHouse:

<Image img={dashboards_2} size="md" alt="Создание сохранённого запроса" border/>

Мы можем просмотреть результаты запроса в табличном формате или начать строить визуализации в режиме графика. Для следующего шага сохраним запрос как `queries over time`:

<Image img={dashboards_3} size="md" alt="Сохранение запроса" border/>

Дополнительную документацию по сохранённым запросам можно найти в разделе [Saving a Query](/cloud/get-started/sql-console#saving-a-query).

Мы можем создать и сохранить ещё один запрос, `query count by query kind`, чтобы подсчитать количество запросов по типу запроса. Ниже приведена визуализация данных в виде столбчатой диаграммы в SQL-консоли. 

<Image img={dashboards_4} size="md" alt="Столбчатая диаграмма, визуализирующая результаты запроса" border/>

Теперь, когда у нас есть два запроса, создадим дашборд, чтобы визуализировать и собрать эти запросы. 

### Создание дашборда {#create-a-dashboard}

Перейдите в раздел Dashboards и нажмите "New Dashboard". После того как вы зададите имя, вы успешно создадите свой первый дашборд!

<Image img={dashboards_5} size="md" alt="Создание нового дашборда" border/>

### Добавление визуализации {#add-a-visualization}

У нас есть два сохранённых запроса: `queries over time` и `query count by query kind`. Визуализируем первый в виде линейного графика. Укажите заголовок и подзаголовок визуализации и выберите запрос для визуализации. Затем выберите тип графика "Line" и задайте оси x и y.

<Image img={dashboards_6} size="md" alt="Добавление визуализации" border/>

Здесь также можно внести дополнительные стилистические изменения — например, форматирование чисел, расположение легенды и подписи осей. 

Далее визуализируем второй запрос в виде таблицы и разместим его под линейным графиком. 

<Image img={dashboards_7} size="md" alt="Визуализация результатов запроса в виде таблицы" border/>

Вы создали свой первый дашборд, визуализировав два сохранённых запроса!

### Настройка фильтра {#configure-a-filter}

Сделаем этот дашборд интерактивным, добавив фильтр по типу запроса, чтобы вы могли отображать только тенденции, связанные с запросами Insert. Мы выполним эту задачу с помощью [параметров запроса](/sql-reference/syntax#defining-and-using-query-parameters). 

Нажмите на три точки рядом с линейным графиком и щёлкните по значку карандаша рядом с запросом, чтобы открыть встроенный редактор запроса. Здесь мы можем редактировать базовый сохранённый запрос непосредственно с дашборда. 

<Image img={dashboards_8} size="md" alt="Редактирование базового запроса" border/>

Теперь при нажатии жёлтой кнопки запуска запроса вы увидите тот же запрос, что и раньше, отфильтрованный только по insert-запросам. Нажмите кнопку сохранения, чтобы обновить запрос. Когда вы вернётесь к настройкам графика, вы сможете настраивать фильтрацию линейного графика. 

Теперь, используя Global Filters на верхней панели, вы можете переключать фильтр, изменяя значение. 

<Image img={dashboards_9} size="md" alt="Регулировка глобальных фильтров" border/>

Предположим, вы хотите связать фильтр линейного графика с таблицей. Это можно сделать, вернувшись к настройкам визуализации, изменив источник значения параметра запроса query_kind на таблицу и выбрав столбец query_kind в качестве поля для связи. 

<Image img={dashboards_10} size="md" alt="Изменение параметра запроса" border/>

Теперь вы можете управлять фильтром линейного графика непосредственно из таблицы запросов по типам, чтобы сделать дашборд интерактивным. 

<Image img={dashboards_11} size="md" alt="Управление фильтром линейного графика" border/>
