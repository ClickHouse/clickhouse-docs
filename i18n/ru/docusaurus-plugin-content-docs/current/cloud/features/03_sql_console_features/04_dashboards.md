---
'sidebar_label': 'Панели управления'
'slug': '/cloud/manage/dashboards'
'title': 'Панели управления'
'description': 'Функция панелей управления SQL Console позволяет собирать и делиться
  визуализациями из сохраненных запросов.'
'doc_type': 'guide'
---
import BetaBadge from '@theme/badges/BetaBadge';
import Image from '@theme/IdealImage';
import dashboards_2 from '@site/static/images/cloud/dashboards/2_dashboards.png';
import dashboards_3 from '@site/static/images/cloud/dashboards/3_dashboards.png';
import dashboards_4 from '@site/static/images/cloud/dashboards/4_dashboards.png';
import dashboards_5 from '@site/static/images/cloud/dashboards/5_dashboards.png';
import dashboards_6 from '@site/static/images/cloud/dashboards/6_dashboards.png';
import dashboards_7 from '@site/static/images/cloud/dashboards/7_dashboards.png';
import dashboards_8 from '@site/static/images/cloud/dashboards/8_dashboards.png';
import dashboards_9 from '@site/static/images/cloud/dashboards/9_dashboards.png';
import dashboards_10 from '@site/static/images/cloud/dashboards/10_dashboards.png';
import dashboards_11 from '@site/static/images/cloud/dashboards/11_dashboards.png';


# Панели мониторинга

Функция панелей мониторинга в SQL Console позволяет вам собирать и делиться визуализациями из сохраненных запросов. Начните с сохранения и визуализации запросов, добавления визуализаций запросов на панель мониторинга и создания интерактивной панели с помощью параметров запросов.

## Основные концепции {#core-concepts}

### Обмен запросами {#query-sharing}

Чтобы поделиться вашей панелью мониторинга с коллегами, убедитесь, что вы также поделились основным сохраненным запросом. Чтобы просмотреть визуализацию, у пользователей должно быть, по крайней мере, доступ только для чтения к основному сохраненному запросу.

### Интерактивность {#interactivity}

Используйте [параметры запросов](/sql-reference/syntax#defining-and-using-query-parameters), чтобы сделать вашу панель мониторинга интерактивной. Например, вы можете добавить параметр запроса в оператор `WHERE`, чтобы он функционировал как фильтр.

Вы можете переключать ввод параметра запроса через боковую панель **Глобальные** фильтры, выбрав тип «фильтр» в настройках визуализации. Вы также можете переключать ввод параметра запроса, связывая его с другим объектом (например, таблицей) на панели мониторинга. Пожалуйста, смотрите раздел “[настройка фильтра](/cloud/manage/dashboards#configure-a-filter)” в руководстве быстрого старта ниже.

## Быстрый старт {#quick-start}

Давайте создадим панель мониторинга для мониторинга нашей службы ClickHouse с использованием системной таблицы [query_log](/operations/system-tables/query_log).

## Быстрый старт {#quick-start-1}

### Создайте сохраненный запрос {#create-a-saved-query}

Если у вас уже есть сохраненные запросы для визуализации, вы можете пропустить этот шаг.

Откройте новую вкладку запроса. Давайте напишем запрос для подсчета объема запросов по дням на сервисе с использованием системных таблиц ClickHouse:

<Image img={dashboards_2} size="md" alt="Создайте сохраненный запрос" border/>

Мы можем просмотреть результаты запроса в табличном формате или начать строить визуализации из представления диаграммы. На следующем шаге мы сохраним запрос как `queries over time`:

<Image img={dashboards_3} size="md" alt="Сохранить запрос" border/>

Более подробную документацию о сохраненных запросах можно найти в разделе [Сохранение запроса](/cloud/get-started/sql-console#saving-a-query).

Мы можем создать и сохранить еще один запрос, `query count by query kind`, чтобы подсчитать количество запросов по типу запроса. Вот визуализация данных в виде диаграммы столбцов в SQL-console.

<Image img={dashboards_4} size="md" alt="Визуализация результатов запроса в виде столбчатой диаграммы" border/>

Теперь, когда у нас есть два запроса, давайте создадим панель мониторинга для визуализации и сбора этих запросов.

### Создайте панель мониторинга {#create-a-dashboard}

Перейдите в панель Панели мониторинга и нажмите «Новая панель». После того как вы присвоите имя, вы успешно создадите свою первую панель мониторинга!

<Image img={dashboards_5} size="md" alt="Создать новую панель мониторинга" border/>

### Добавьте визуализацию {#add-a-visualization}

У нас есть два сохраненных запроса: `queries over time` и `query count by query kind`. Давайте визуализируем первый как линейную диаграмму. Дайте вашей визуализации заголовок и подзаголовок и выберите запрос для визуализации. Затем выберите тип диаграммы «Линия» и назначьте оси x и y.

<Image img={dashboards_6} size="md" alt="Добавить визуализацию" border/>

Здесь также можно внести дополнительные стилистические изменения, такие как форматирование чисел, расположение легенды и метки осей. 

Затем давайте визуализируем второй запрос в виде таблицы и разместим его ниже линейной диаграммы.

<Image img={dashboards_7} size="md" alt="Визуализировать результаты запроса в виде таблицы" border/>

Вы создали свою первую панель мониторинга, визуализировав два сохраненных запроса!

### Настройка фильтра {#configure-a-filter}

Давайте сделаем эту панель интерактивной, добавив фильтр по типу запроса, чтобы вы могли отображать только тренды, связанные с запросами на вставку. Мы выполним это задание с помощью [параметров запросов](/sql-reference/syntax#defining-and-using-query-parameters).

Нажмите на три точки рядом с линейной диаграммой и нажмите на кнопку карандаша рядом с запросом, чтобы открыть встроенный редактор запросов. Здесь мы можем редактировать основной сохраненный запрос непосредственно с панели мониторинга.

<Image img={dashboards_8} size="md" alt="Редактировать основной запрос" border/>

Теперь, когда нажимаете на желтую кнопку запуска запроса, вы увидите тот же запрос, отфильтрованный по только вставочным запросам. Нажмите на кнопку сохранения, чтобы обновить запрос. Когда вы вернетесь к настройкам диаграммы, вы сможете фильтровать линейную диаграмму.

Теперь, используя Глобальные фильтры на верхней панели, вы можете переключать фильтр, изменяя ввод.

<Image img={dashboards_9} size="md" alt="Настройка глобальных фильтров" border/>

Предположим, вы хотите связать фильтр линейной диаграммы с таблицей. Вы можете сделать это, вернувшись к настройкам визуализации и изменив источник значения параметра запроса query_kind на таблицу, выбрав колонку query_kind в качестве связанного поля.

<Image img={dashboards_10} size="md" alt="Изменение параметра запроса" border/>

Теперь вы можете управлять фильтром на линейной диаграмме непосредственно из таблицы запросов по типам, чтобы сделать вашу панель интерактивной.

<Image img={dashboards_11} size="md" alt="Управление фильтром на линейной диаграмме" border/>