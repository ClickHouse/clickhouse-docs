---
'sidebar_title': 'Query Insights'
'slug': '/cloud/get-started/query-insights'
'description': 'Визуализируйте данные system.query_log для упрощения отладки запросов
  и оптимизации производительности'
'keywords':
- 'query insights'
- 'query log'
- 'query log ui'
- 'system.query_log insights'
'title': 'Запросы Инсайты'
'doc_type': 'guide'
---
import Image from '@theme/IdealImage';
import insights_overview from '@site/static/images/cloud/sqlconsole/insights_overview.png';
import insights_latency from '@site/static/images/cloud/sqlconsole/insights_latency.png';
import insights_recent from '@site/static/images/cloud/sqlconsole/insights_recent.png';
import insights_drilldown from '@site/static/images/cloud/sqlconsole/insights_drilldown.png';
import insights_query_info from '@site/static/images/cloud/sqlconsole/insights_query_info.png';


# Информация о запросах

Функция **Информация о запросах** упрощает использование встроенного журнала запросов ClickHouse с помощью различных визуализаций и таблиц. Таблица `system.query_log` в ClickHouse является ключевым источником информации для оптимизации запросов, отладки и мониторинга общего состояния и производительности кластера.

## Обзор запросов {#query-overview}

После выбора сервиса пункт **Мониторинг** в левом боковом меню должен расшириться, чтобы показать новый пункт **Информация о запросах**. Нажатие на этот вариант открывает новую страницу Информации о запросах:

<Image img={insights_overview} size="md" alt="Обзор интерфейса Информации о запросах" border/>

## Основные метрики {#top-level-metrics}

Статистические блоки вверху представляют собой базовые метрики запросов за выбранный период времени. Ниже мы представили три графика временных рядов, представляющих объем запросов, задержку и уровень ошибок, разбитые по типу запроса (select, insert, другие) за выбранный временной интервал. График задержки можно дополнительно настроить для отображения p50, p90 и p99 задержек:

<Image img={insights_latency} size="md" alt="График задержек интерфейса Информации о запросах" border/>

## Недавние запросы {#recent-queries}

Под основными метриками таблица отображает записи журнала запросов (группированные по нормализованному хешу запроса и пользователю) за выбранный временной интервал:

<Image img={insights_recent} size="md" alt="Таблица недавних запросов интерфейса Информации о запросах" border/>

Недавние запросы можно фильтровать и сортировать по любому доступному полю. Таблицу также можно настроить для отображения или скрытия дополнительных полей, таких как таблицы, задержки p90 и p99.

## Подробности запроса {#query-drill-down}

Выбор запроса из таблицы недавних запросов откроет всплывающее окно с метриками и информацией, относящейся к выбранному запросу:

<Image img={insights_drilldown} size="md" alt="Подробности запроса интерфейса Информации о запросах" border/>

Как мы видим из всплывающего окна, этот конкретный запрос был выполнен более 3000 раз за последние 24 часа. Все метрики на вкладке **Информация о запросе** являются агрегированными метриками, но мы также можем просмотреть метрики из отдельных запусков, выбрав вкладку **История запросов**:

<Image img={insights_query_info} size="sm" alt="Информация о запросе интерфейса Информации о запросах" border/>

<br />

Из этой панели пункты `Настройки` и `Профилирование событий` для каждого запуска запроса могут быть развернуты, чтобы раскрыть дополнительную информацию.