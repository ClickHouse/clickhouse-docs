---
sidebar_title: Информация о запросах
slug: /cloud/get-started/query-insights
description: Визуализируйте данные из system.query_log для упрощения отладки запросов и оптимизации производительности
keywords: [информация о запросах, журнал запросов, интерфейс журнала запросов, системные сведения о запросах]
---

import insights_overview from '@site/static/images/cloud/sqlconsole/insights_overview.png';
import insights_latency from '@site/static/images/cloud/sqlconsole/insights_latency.png';
import insights_recent from '@site/static/images/cloud/sqlconsole/insights_recent.png';
import insights_drilldown from '@site/static/images/cloud/sqlconsole/insights_drilldown.png';
import insights_query_info from '@site/static/images/cloud/sqlconsole/insights_query_info.png';


# Информация о запросах

Функция **Информация о запросах** упрощает использование встроенного журнала запросов ClickHouse с помощью различных визуализаций и таблиц. Таблица `system.query_log` ClickHouse является ключевым источником информации для оптимизации запросов, отладки и мониторинга общего состояния кластера и производительности.

## Обзор запросов {#query-overview}

После выбора сервиса элемент навигации **Мониторинг** в левой боковой панели должен развернуться, чтобы показать новый подэлемент **Информация о запросах**. Щелчок по этому варианту открывает новую страницу Информации о запросах:

<img src={insights_overview} alt="Обзор интерфейса Информации о запросах"/>

## Метрики верхнего уровня {#top-level-metrics}

Статистические блоки вверху представляют собой базовые метрики верхнего уровня запросов за выбранный период времени. Ниже представлены три временные серии, отображающие объем запросов, задержку и процент ошибок, разбитые по типу запроса (select, insert, other) за выбранный временной интервал. График латентности можно дополнительно настроить для отображения p50, p90 и p99 латентностей:

<img src={insights_latency} alt="График задержки интерфейса Информации о запросах"/>

## Недавние запросы {#recent-queries}

Под метриками верхнего уровня таблица отображает записи журнала запросов ( сгруппированные по нормализованному хешу запроса и пользователю ) за выбранный временной интервал:

<img src={insights_recent} alt="Таблица недавних запросов интерфейса Информации о запросах"/>

Недавние запросы можно фильтровать и сортировать по любому доступному полю. Таблицу также можно настроить для отображения или скрытия дополнительных полей, таких как таблицы, p90 и p99 латентности.

## Углублённый анализ запросов {#query-drill-down}

Выбор запроса из таблицы недавних запросов откроет всплывающее окно с метриками и информацией, специфичной для выбранного запроса:

<img src={insights_drilldown} alt="Углублённый анализ запроса интерфейса Информации о запросах"/>

Как видно из всплывающего окна, этот конкретный запрос выполнялся более 3000 раз за последние 24 часа. Все метрики на вкладке **Информация о запросе** являются агрегированными метриками, но мы также можем просмотреть метрики из отдельных запусков, выбрав вкладку **История запросов**:

<img src={insights_query_info}    
  class="image"
  alt="Информация о запросе интерфейса Информации о запросах"
  style={{width: '400px'}} />

<br />

В этом окне элементы `Настройки` и `События профилирования` для каждого выполнения запроса можно развернуть, чтобы получить дополнительную информацию.
