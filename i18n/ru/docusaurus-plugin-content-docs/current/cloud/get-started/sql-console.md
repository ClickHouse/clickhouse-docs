---
sidebar_title: SQL Консоль
slug: /cloud/get-started/sql-console
description: Запускайте запросы и создавайте визуализации с помощью SQL Консоли.
keywords: [sql консоль, sql клиент, облачная консоль, консоль]
---

import table_list_and_schema from '@site/static/images/cloud/sqlconsole/table-list-and-schema.png';
import view_columns from '@site/static/images/cloud/sqlconsole/view-columns.png';
import abc from '@site/static/images/cloud/sqlconsole/abc.png';
import inspecting_cell_content from '@site/static/images/cloud/sqlconsole/inspecting-cell-content.png';
import sort_descending_on_column from '@site/static/images/cloud/sqlconsole/sort-descending-on-column.png';
import filter_on_radio_column_equal_gsm from '@site/static/images/cloud/sqlconsole/filter-on-radio-column-equal-gsm.png';
import add_more_filters from '@site/static/images/cloud/sqlconsole/add-more-filters.png';
import filtering_and_sorting_together from '@site/static/images/cloud/sqlconsole/filtering-and-sorting-together.png';
import create_a_query_from_sorts_and_filters from '@site/static/images/cloud/sqlconsole/create-a-query-from-sorts-and-filters.png';
import creating_a_query from '@site/static/images/cloud/sqlconsole/creating-a-query.png';
import run_selected_query from '@site/static/images/cloud/sqlconsole/run-selected-query.png';
import run_at_cursor_2 from '@site/static/images/cloud/sqlconsole/run-at-cursor-2.png';
import run_at_cursor from '@site/static/images/cloud/sqlconsole/run-at-cursor.png';
import cancel_a_query from '@site/static/images/cloud/sqlconsole/cancel-a-query.png';
import sql_console_save_query from '@site/static/images/cloud/sqlconsole/sql-console-save-query.png';
import sql_console_rename from '@site/static/images/cloud/sqlconsole/sql-console-rename.png';
import sql_console_share from '@site/static/images/cloud/sqlconsole/sql-console-share.png';
import sql_console_edit_access from '@site/static/images/cloud/sqlconsole/sql-console-edit-access.png';
import sql_console_add_team from '@site/static/images/cloud/sqlconsole/sql-console-add-team.png';
import sql_console_edit_member from '@site/static/images/cloud/sqlconsole/sql-console-edit-member.png';
import sql_console_access_queries from '@site/static/images/cloud/sqlconsole/sql-console-access-queries.png';
import search_hn from '@site/static/images/cloud/sqlconsole/search-hn.png';
import match_in_body from '@site/static/images/cloud/sqlconsole/match-in-body.png';
import pagination from '@site/static/images/cloud/sqlconsole/pagination.png';
import pagination_nav from '@site/static/images/cloud/sqlconsole/pagination-nav.png';
import download_as_csv from '@site/static/images/cloud/sqlconsole/download-as-csv.png';
import tabular_query_results from '@site/static/images/cloud/sqlconsole/tabular-query-results.png';
import switch_from_query_to_chart from '@site/static/images/cloud/sqlconsole/switch-from-query-to-chart.png';
import trip_total_by_week from '@site/static/images/cloud/sqlconsole/trip-total-by-week.png';
import bar_chart from '@site/static/images/cloud/sqlconsole/bar-chart.png';
import change_from_bar_to_area from '@site/static/images/cloud/sqlconsole/change-from-bar-to-area.png';
import update_query_name from '@site/static/images/cloud/sqlconsole/update-query-name.png';
import update_subtitle_etc from '@site/static/images/cloud/sqlconsole/update-subtitle-etc.png';
import adjust_axis_scale from '@site/static/images/cloud/sqlconsole/adjust-axis-scale.png';


# SQL Консоль

SQL консоль — это самый быстрый и простой способ исследовать и запрашивать ваши базы данных в ClickHouse Cloud. Вы можете использовать SQL консоль для:

- Подключения к вашим ClickHouse Cloud Services
- Просмотра, фильтрации и сортировки данных таблицы
- Выполнения запросов и визуализации результирующих данных всего за несколько кликов
- Совместного использования запросов с членами команды и более эффективного сотрудничества.

### Исследование таблиц {#exploring-tables}

### Просмотр списка таблиц и информации о схеме {#viewing-table-list-and-schema-info}

Обзор таблиц, содержащихся в вашем экземпляре ClickHouse, можно найти в левой боковой панели. Используйте селектор базы данных в верхней части левой панели, чтобы просмотреть таблицы в конкретной базе данных.

<img src={table_list_and_schema} alt="список таблиц и схема"/>

Таблицы в списке также можно развернуть, чтобы просмотреть колонки и типы.

<img src={view_columns} alt="просмотр колонок"/>

### Исследование данных таблицы {#exploring-table-data}

Нажмите на таблицу в списке, чтобы открыть её в новой вкладке. В представлении таблицы данные можно легко просматривать, выбирать и копировать. Обратите внимание, что структура и форматирование сохраняются при копировании и вставке в приложения для работы с таблицами, такие как Microsoft Excel и Google Sheets. Вы можете переключаться между страницами данных таблицы (разбиение на страницы по 30 строк) с помощью навигации в нижнем колонтитуле.

<img src={abc} alt="abc"/>

### Просмотр содержимого ячейки {#inspecting-cell-data}

Инструмент инспектора ячеек можно использовать для просмотра больших объемов данных, содержащихся в одной ячейке. Чтобы открыть его, щелкните правой кнопкой мыши по ячейке и выберите «Просмотреть ячейку». Содержимое инспектора ячейки можно скопировать, нажав иконку копирования в правом верхнем углу содержимого инспектора. 

<img src={inspecting_cell_content} alt="Просмотр содержимого ячейки"/>

## Фильтрация и сортировка таблиц {#filtering-and-sorting-tables}

### Сортировка таблицы {#sorting-a-table}

Чтобы отсортировать таблицу в SQL консоли, откройте таблицу и выберите кнопку «Сортировать» на панеле инструментов. Эта кнопка откроет меню, в котором вы сможете настроить вашу сортировку. Вы можете выбрать колонку, по которой хотите отсортировать, и настроить порядок сортировки (по возрастанию или убыванию). Нажмите «Применить» или нажмите Enter, чтобы отсортировать вашу таблицу.

<img src={sort_descending_on_column} alt="сортировать по убыванию по колонке"/>

SQL консоль также позволяет добавлять несколько сортировок к таблице. Нажмите кнопку «Сортировать» снова, чтобы добавить другую сортировку.

:::note
Сортировки применяются в порядке их появления в панели сортировки (сверху вниз). Чтобы удалить сортировку, просто нажмите кнопку «x» рядом с сортировкой.
:::

### Фильтрация таблицы {#filtering-a-table}

Чтобы отфильтровать таблицу в SQL консоли, откройте таблицу и выберите кнопку «Фильтр». Точно так же, как и при сортировке, эта кнопка откроет меню, в котором вы сможете настроить ваш фильтр. Вы можете выбрать колонку, по которой будете фильтровать, и указать необходимые критерии. SQL консоль интеллигентно отображает параметры фильтра, соответствующие типу данных, содержащемуся в колонке.

<img src={filter_on_radio_column_equal_gsm} alt="фильтр по радиоколоночному равенству GSM"/>

Когда вы довольны своим фильтром, вы можете выбрать «Применить», чтобы отфильтровать ваши данные. Вы также можете добавить дополнительные фильтры, как показано ниже.

<img src={add_more_filters} alt="Добавить фильтр по диапазону больше 2000"/>

Аналогично функции сортировки, нажмите кнопку «x» рядом с фильтром, чтобы удалить его.

### Фильтрация и сортировка вместе {#filtering-and-sorting-together}

SQL консоль позволяет одновременно фильтровать и сортировать таблицу. Чтобы сделать это, добавьте все необходимые фильтры и сортировки, используя описанные выше шаги, и нажмите кнопку «Применить».

<img src={filtering_and_sorting_together} alt="Фильтрация и сортировка вместе"/>

### Создание запроса из фильтров и сортировок {#creating-a-query-from-filters-and-sorts}

SQL консоль может напрямую преобразовать ваши сортировки и фильтры в запросы одним нажатием. Просто выберите кнопку «Создать запрос» на панели инструментов с параметрами сортировки и фильтрации по вашему выбору. После нажатия «Создать запрос» откроется новая вкладка запроса, предварительно заполненная SQL командой, соответствующей данным, содержащимся в представлении таблицы.

<img src={create_a_query_from_sorts_and_filters} alt="Создание запроса из сортировок и фильтров"/>

:::note
Фильтры и сортировки не являются обязательными при использовании функции «Создать запрос».
:::

Вы можете узнать больше о запросах в SQL консоли, прочитав (link) документацию по запросам.

## Создание и выполнение запроса {#creating-and-running-a-query}

### Создание запроса {#creating-a-query}

Существует два способа создать новый запрос в SQL консоли.

- Нажмите кнопку «+» на панели вкладок
- Выберите кнопку «Новый запрос» из списка запросов в левой боковой панели

<img src={creating_a_query} alt="Создание запроса"/>

### Выполнение запроса {#running-a-query}

Чтобы выполнить запрос, введите ваши SQL команды в редактор SQL и нажмите кнопку «Выполнить» или используйте сочетание клавиш `cmd / ctrl + enter`. Чтобы написать и выполнить несколько команд последовательно, убедитесь, что после каждой команды стоит точка с запятой.

Опции выполнения запроса
По умолчанию нажатие кнопки «выполнить» выполнит все команды, содержащиеся в редакторе SQL. SQL консоль поддерживает две дополнительные опции выполнения запроса:

- Выполнить выбранные команды
- Выполнить команду в позиции курсора

Чтобы выполнить выбранные команды, выделите желаемую команду или последовательность команд и нажмите кнопку «Выполнить» (или используйте сочетание клавиш `cmd / ctrl + enter`). Вы также можете выбрать «Выполнить выбранное» из контекстного меню редактора SQL (открывается правым щелчком где-либо в редакторе), когда выделение присутствует.

<img src={run_selected_query} alt="выполнить выбранный запрос"/>

Запуск команды в текущей позиции курсора можно выполнить двумя способами:

- Выберите «По курсору» из меню расширенных опций выполнения (или используйте соответствующее сочетание клавиш `cmd / ctrl + shift + enter`)

<img src={run_at_cursor_2} alt="выполнить по курсору"/>

  - Выбор «Выполнить по курсору» из контекстного меню редактора SQL

<img src={run_at_cursor} alt="выполнить по курсору"/>

:::note
Команда, находящаяся в позиции курсора, будет мигать желтым при выполнении.
:::

### Отмена запроса {#canceling-a-query}

Пока запрос выполняется, кнопка «Выполнить» на панеле инструментов редактора запросов будет заменена на кнопку «Отмена». Просто нажмите на эту кнопку или нажмите `Esc`, чтобы отменить запрос. Примечание: любые результаты, которые уже были возвращены, сохранятся после отмены.

<img src={cancel_a_query} alt="Отменить запрос"/>

### Сохранение запроса {#saving-a-query}

Сохранение запросов позволяет вам легко находить их позже и делиться ими с вашими коллегами. SQL консоль также позволяет организовывать ваши запросы в папки.

Чтобы сохранить запрос, просто нажмите кнопку «Сохранить» сразу рядом с кнопкой «Выполнить» на панели инструментов. Введите желаемое имя и нажмите «Сохранить запрос».

:::note
Использование сочетания клавиш `cmd / ctrl` + s также сохранит любые изменения в текущей вкладке запроса.
:::

<img src={sql_console_save_query} alt="Сохранить запрос"/>

Кроме того, вы можете одновременно назвать и сохранить запрос, нажав на «Безымянный запрос» на панели инструментов, изменив имя и нажав Enter:
<img src={sql_console_rename} alt="Переименовать запрос"/>

### Совместное использование запроса {#query-sharing}

SQL консоль позволяет вам легко делиться запросами с членами вашей команды. SQL консоль поддерживает четыре уровня доступа, которые могут быть настроены как глобально, так и для каждого пользователя:

- Владелец (может настраивать параметры совместного использования)
- Права на запись
- Доступ только для чтения
- Нет доступа

После сохранения запроса нажмите кнопку «Поделиться» на панели инструментов. Появится модальное окно с параметрами совместного использования:

<img src={sql_console_share} alt="Поделиться запросом"/>

Чтобы настроить доступ к запросу для всех членов организации, имеющих доступ к сервису, просто отрегулируйте селектор уровня доступа на верхней строке:

<img src={sql_console_edit_access} alt="Редактировать доступ"/>

После применения вышеуказанного запроса теперь могут видеть (и выполнять) все члены команды с доступом к SQL консоли для сервиса.

Чтобы настроить доступ к запросу для конкретных членов, выберите желаемого участника команды из селектора «Добавить участника команды»:

<img src={sql_console_add_team} alt="Добавить участника команды"/>

После выбора участника команды должен появиться новый элемент строки с селектором уровня доступа:

<img src={sql_console_edit_member} alt="Редактировать доступ участника команды"/>

### Доступ к общим запросам {#accessing-shared-queries}

Если запрос был с вами разделен, он будет отображаться на вкладке «Запросы» левой боковой панели SQL консоли:

<img src={sql_console_access_queries} alt="Доступ к запросам"/>

### Ссылка на запрос (постоянные ссылки) {#linking-to-a-query-permalinks}

Сохраненные запросы также имеют постоянные ссылки, что означает, что вы можете отправлять и получать ссылки на общие запросы и открывать их напрямую.

Значения для любых параметров, которые могут существовать в запросе, автоматически добавляются в URL сохраненного запроса в качестве параметров запроса. Например, если запрос содержит параметры `{start_date: Date}` и `{end_date: Date}`, постоянная ссылка может выглядеть так: `https://console.clickhouse.cloud/services/:serviceId/console/query/:queryId?param_start_date=2015-01-01&param_end_date=2016-01-01`.

## Расширенные функции запроса {#advanced-querying-features}

### Поиск результатов запроса {#searching-query-results}

После выполнения запроса вы можете быстро искать среди возвращенного набора результатов, используя поле поиска в панели результатов. Эта функция помогает предварительно просмотреть результаты дополнительного условия `WHERE` или просто проверить, чтобы убедиться, что конкретные данные включены в набор результатов. После ввода значения в поле поиска панель результатов обновится и вернет записи, содержащие запись, соответствующую введенному значению. В этом примере мы будем искать все вхождения `breakfast` в таблице `hackernews` для комментариев, содержащих `ClickHouse` (без учета регистра):

<img src={search_hn} alt="Поиск данных Hacker News"/>

Примечание: любое поле, соответствующее введенному значению, будет возвращено. Например, третья запись на скриншоте выше не соответствует «breakfast» в поле `by`, но поле `text` соответствует:

<img src={match_in_body} alt="Совпадение в теле"/>

### Настройка параметров пагинации {#adjusting-pagination-settings}

По умолчанию панель результатов запроса будет отображать каждую запись результата на одной странице. Для больших наборов результатов может быть предпочтительнее разбить результаты на страницы для более удобного просмотра. Это можно сделать с помощью селектора пагинации в нижнем правом углу панели результатов:

<img src={pagination} alt="Опции пагинации"/>

Выбор размера страницы немедленно применит пагинацию к набору результатов, и параметры навигации появятся в середине нижней колонтитула панели результатов.

<img src={pagination_nav} alt="Навигация по пагинации"/>

### Экспорт данных результатов запроса {#exporting-query-result-data}

Наборы результатов запроса можно легко экспортировать в формат CSV непосредственно из SQL консоли. Для этого откройте меню `•••` с правой стороны панели инструментов результатов и выберите «Скачать как CSV».

<img src={download_as_csv} alt="Скачать как CSV"/>

## Визуализация данных запроса {#visualizing-query-data}

Некоторые данные могут быть легче интерпретированы в виде диаграмм. Вы можете быстро создать визуализации на основе данных результата запроса непосредственно из SQL консоли всего за несколько кликов. В качестве примера мы используем запрос, который рассчитывает статистику по неделям для поездок такси в Нью-Йорке:

```sql
select
   toStartOfWeek(pickup_datetime) as week,
   sum(total_amount) as fare_total,
   sum(trip_distance) as distance_total,
   count(*) as trip_total
from
   nyc_taxi
group by
   1
order by
   1 asc
```

<img src={tabular_query_results} alt="Табличные результаты запроса"/>

Без визуализации эти результаты трудно интерпретировать. Давайте превратим их в диаграмму.

### Создание диаграмм {#creating-charts}

Чтобы начать создание вашей визуализации, выберите опцию «Диаграмма» на панели инструментов результатов запроса. Появится панель конфигурации диаграммы:

<img src={switch_from_query_to_chart} alt="Переключение с запроса на диаграмму"/>

Мы начнем с создания простой столбиковой диаграммы, отслеживающей `trip_total` по `week`. Для этого мы перетащим поле `week` на ось x и поле `trip_total` на ось y:

<img src={trip_total_by_week} alt="Общее количество поездок по неделям"/>

Большинство типов диаграмм поддерживают несколько полей на числовых осях. Для демонстрации мы перетащим поле fare_total на ось y:

<img src={bar_chart} alt="Столбиковая диаграмма"/>

### Настройка диаграмм {#customizing-charts}

SQL консоль поддерживает десять типов диаграмм, которые можно выбрать из селектора типов диаграмм на панели конфигурации диаграммы. Например, мы можем легко изменить тип предыдущей диаграммы с «Столбиковой» на «Площадную»:

<img src={change_from_bar_to_area} alt="Сменить диаграмму с столбиковой на площадную"/>

Названия диаграмм соответствуют имени запроса, предоставляющего данные. Обновление имени запроса приведет к обновлению названия диаграммы:

<img src={update_query_name} alt="Обновить имя запроса"/>

Несколько более сложных характеристик диаграмм также можно настроить в разделе «Расширенные» панели конфигурации диаграммы. Для начала мы изменим следующие настройки:

- Подзаголовок
- Заголовки осей
- Ориентация меток для оси x

Наша диаграмма будет обновлена соответственно:

<img src={update_subtitle_etc} alt="Обновить подзаголовок и т.д."/>

В некоторых сценариях может потребоваться отдельная настройка масштабов для каждой оси. Это также можно сделать в разделе «Расширенные» панели конфигурации диаграммы, указав минимальные и максимальные значения диапазона оси. В качестве примера, указанная выше диаграмма выглядит хорошо, но для демонстрации корреляции между нашими полями `trip_total` и `fare_total`, диапазоны осей нуждаются в небольшой настройке:

<img src={adjust_axis_scale} alt="Настроить масштаб осей"/>
