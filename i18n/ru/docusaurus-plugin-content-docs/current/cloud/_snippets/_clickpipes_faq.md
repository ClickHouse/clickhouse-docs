import Image from '@theme/IdealImage';
import clickpipesPricingFaq1 from '@site/static/images/cloud/manage/jan2025_faq/external_clickpipes_pricing_faq_1.png';
import clickpipesPricingFaq2 from '@site/static/images/cloud/manage/jan2025_faq/external_clickpipes_pricing_faq_2.png';
import clickpipesPricingFaq3 from '@site/static/images/cloud/manage/jan2025_faq/external_clickpipes_pricing_faq_3.png';

<details>
  <summary>Что такое реплики ClickPipes?</summary>

  ClickPipes получает данные из удалённых источников через выделенную инфраструктуру,
  которая работает и масштабируется независимо от сервиса ClickHouse Cloud.
  Поэтому используются выделенные вычислительные реплики.
  Приведённые ниже диаграммы показывают упрощённую архитектуру.

  Для потоковых ClickPipes реплики ClickPipes обращаются к удалённым источникам данных (например, к брокеру Kafka),
  извлекают данные, обрабатывают и загружают их в целевой сервис ClickHouse.

  <Image img={clickpipesPricingFaq1} size="lg" alt="Реплики ClickPipes — потоковые ClickPipes" border force />

  В случае ClickPipes для объектного хранилища
  реплика ClickPipes координирует задачу загрузки данных
  (определяет файлы для копирования, поддерживает состояние и перемещает партиции),
  в то время как данные извлекаются непосредственно сервисом ClickHouse.

  <Image img={clickpipesPricingFaq2} size="lg" alt="Реплики ClickPipes — ClickPipes для объектного хранилища" border force />
</details>

<details>
  <summary>Каково количество реплик по умолчанию и их размер?</summary>

  Каждый ClickPipe по умолчанию использует 1 реплику с 2 ГиБ оперативной памяти и 0,5 vCPU.
  Это соответствует **0,25** вычислительных единиц ClickHouse (1 единица = 8 ГиБ RAM, 2 vCPU).
</details>

<details>
  <summary>Можно ли масштабировать реплики ClickPipes?</summary>

  Да, потоковые ClickPipes можно масштабировать как горизонтально, так и вертикально.
  Горизонтальное масштабирование добавляет больше реплик для увеличения пропускной способности, а вертикальное масштабирование увеличивает ресурсы (CPU и RAM), выделенные каждой реплике, для обработки более интенсивных рабочих нагрузок.
  Это можно настроить при создании ClickPipe или в любой момент в разделе **Settings** -&gt; **Advanced Settings** -&gt; **Scaling**.
</details>

<details>
  <summary>Сколько реплик ClickPipes мне нужно?</summary>

  Это зависит от пропускной способности рабочей нагрузки и требований к задержке.
  Рекомендуем начать со значения по умолчанию в 1 реплику, измерить задержку и при необходимости добавить реплики.
  Имейте в виду, что для Kafka ClickPipes необходимо также соответствующим образом масштабировать партиции брокера Kafka.
  Элементы управления масштабированием доступны в разделе «settings» для каждого потокового ClickPipe.

  <Image img={clickpipesPricingFaq3} size="lg" alt="Реплики ClickPipes — сколько реплик ClickPipes мне нужно?" border force />
</details>

<details>
  <summary>Как выглядит структура ценообразования ClickPipes?</summary>

  Она состоит из двух компонентов:

  * **Вычисления**: цена за единицу в час
    Вычисления представляют собой стоимость работы подов реплик ClickPipes независимо от того, активно ли они получают данные или нет.
    Применяется ко всем типам ClickPipes.
  * **Полученные данные**: цена за ГБ
    Тариф за полученные данные применяется ко всем потоковым ClickPipes
    (Kafka, Confluent, Amazon MSK, Amazon Kinesis, Redpanda, WarpStream,
    Azure Event Hubs) для данных, передаваемых через поды реплик.
    Размер полученных данных (ГБ) тарифицируется на основе байтов, полученных из источника (несжатых или сжатых).
</details>

<details>
  <summary>Каковы публичные цены на ClickPipes?</summary>

  * Вычисления: $0,20 за единицу в час ($0,05 за реплику в час)
  * Полученные данные: $0,04 за ГБ
</details>

<details>
  <summary>Как это выглядит на примере?</summary>

  Например, получение 1 ТБ данных в течение 24 часов с использованием коннектора Kafka с одной репликой (0,25 вычислительной единицы) стоит:

  $$
  (0,25 \times 0,20 \times 24) + (0,04 \times 1000) = $41,2
  $$

  <br />

  Для коннекторов объектного хранилища (S3 и GCS)
  взимается только стоимость вычислений ClickPipes, поскольку под ClickPipes не обрабатывает данные,
  а только координирует передачу, которая выполняется базовым сервисом ClickHouse:

  $$
  0,25 \times 0,20 \times 24 = $1,2
  $$
</details>


<details>

<summary>Как цены ClickPipes соотносятся с рыночными?</summary>

Философия ценообразования ClickPipes заключается
в покрытии операционных затрат платформы и одновременном предоставлении простого и надёжного способа переноса данных в ClickHouse Cloud.
С этой точки зрения наш анализ рынка показал, что мы находимся на конкурентной позиции.

</details>