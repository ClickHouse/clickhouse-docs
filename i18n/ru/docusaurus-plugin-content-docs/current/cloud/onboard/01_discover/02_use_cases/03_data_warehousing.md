---
slug: /cloud/get-started/cloud/use-cases/data_lake_and_warehouse
title: 'Data Lakehouse'
description: 'Создавайте современные архитектуры хранилищ данных в ClickHouse Cloud, сочетая гибкость дата-лейков с производительностью баз данных'
keywords: ['use cases', 'data lake and warehouse']
sidebar_label: 'Хранилище данных'
doc_type: 'guide'
---

import Image from '@theme/IdealImage';
import datalakehouse_01 from '@site/static/images/cloud/onboard/discover/use_cases/datalakehouse_01.png';

<iframe width="758" height="426" src="https://www.youtube.com/embed/mueG6z1mo8Y" title="Data lakehouses (in under 3 minutes)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen />

Архитектура data lakehouse — это конвергентный подход, который применяет принципы баз данных
к инфраструктуре data lake, при этом сохраняя гибкость и масштабируемость облачных систем хранения.

Lakehouse — это не просто «разобранная» база данных, а формирование схожих с базой данных
возможностей поверх принципиально иной основы (облачного объектного хранилища),
ориентированной на поддержку традиционной аналитики и современных AI/ML-нагрузок в рамках
единой платформы.


## Из каких компонентов состоит lakehouse данных? {#components-of-the-data-lakehouse}

Современная архитектура lakehouse данных представляет собой объединение технологий хранилища данных
и озера данных, сочетающее лучшие аспекты обоих подходов. Эта
архитектура состоит из нескольких отдельных, но взаимосвязанных слоев, обеспечивающих
гибкую и надежную платформу для хранения, управления и анализа данных.

Понимание этих компонентов необходимо организациям, которые планируют
внедрить или оптимизировать свою стратегию lakehouse данных. Многослойный подход позволяет
заменять компоненты и независимо развивать каждый слой, обеспечивая
архитектурную гибкость и защиту от устаревания.

Рассмотрим основные компоненты типичной архитектуры lakehouse данных
и то, как они взаимодействуют для создания целостной платформы управления данными.

<Image
  img={datalakehouse_01}
  alt='Компоненты lakehouse данных'
  size='md'
/>

| Компонент               | Описание                                                                                                                                                                                                                                                                                                                                    |
| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Источники данных**        | Источники данных lakehouse включают операционные базы данных, потоковые платформы, IoT-устройства, журналы приложений и внешних поставщиков.                                                                                                                                                                                                              |
| **Движок запросов**        | Обрабатывает аналитические запросы к данным, хранящимся в объектном хранилище, используя метаданные и оптимизации, предоставляемые слоем табличного формата. Поддерживает SQL и потенциально другие языки запросов для эффективного анализа больших объемов данных.                                                                                     |
| **Каталог метаданных**    | [Каталог данных](https://clickhouse.com/engineering-resources/data-catalog) выступает в качестве центрального репозитория метаданных, хранящего и управляющего определениями и схемами таблиц, информацией о партиционировании и политиками контроля доступа. Обеспечивает обнаружение данных, отслеживание происхождения и управление в рамках lakehouse.                             |
| **Слой табличного формата**  | [Слой табличного формата](https://clickhouse.com/engineering-resources/open-table-formats) управляет логической организацией файлов данных в таблицы, предоставляя функции, подобные базам данных, такие как ACID-транзакции, контроль и эволюция схемы, возможности time travel и оптимизации производительности, такие как пропуск данных и кластеризация. |
| **Объектное хранилище**      | Этот слой обеспечивает масштабируемое, надежное и экономически эффективное хранилище для всех файлов данных и метаданных. Он обрабатывает физическое сохранение данных в открытом формате, обеспечивая прямой доступ из множества инструментов и систем.                                                                                                                          |
| **Клиентские приложения** | Различные инструменты и приложения, которые подключаются к lakehouse для запроса данных, визуализации аналитических данных или создания продуктов данных. К ним могут относиться инструменты бизнес-аналитики, блокноты для data science, пользовательские приложения и инструменты ETL/ELT.                                                                                                                            |


## Каковы преимущества lakehouse? {#benefits-of-the-data-lakehouse}

Архитектура lakehouse предлагает несколько существенных преимуществ по сравнению
как с традиционными хранилищами данных, так и с озёрами данных:

### По сравнению с традиционными хранилищами данных {#compared-to-traditional-data-warehouses}

| #   | Преимущество                                     | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| --- | ------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | **Экономическая эффективность**                  | Lakehouse использует недорогое объектное хранилище вместо проприетарных форматов хранения, что значительно снижает затраты на хранение по сравнению с хранилищами данных, которые взимают высокую плату за интегрированное хранилище.                                                                                                                                                                                                  |
| 2   | **Гибкость и взаимозаменяемость компонентов**    | Архитектура lakehouse позволяет организациям заменять различные компоненты. Традиционные системы требуют полной замены при изменении требований или развитии технологий, в то время как lakehouse обеспечивает постепенную эволюцию путём замены отдельных компонентов, таких как движки запросов или форматы таблиц. Эта гибкость снижает зависимость от поставщика и позволяет организациям адаптироваться к меняющимся потребностям без разрушительных миграций. |
| 3   | **Поддержка открытых форматов**                  | Lakehouse хранит данные в открытых форматах файлов, таких как Parquet, что обеспечивает прямой доступ из различных инструментов без привязки к поставщику, в отличие от проприетарных форматов хранилищ данных, которые ограничивают доступ своей экосистемой.                                                                                                                                                                          |
| 4   | **Интеграция с AI/ML**                           | Lakehouse обеспечивает прямой доступ к данным для фреймворков машинного обучения и библиотек Python/R, в то время как хранилища данных обычно требуют извлечения данных перед их использованием для продвинутой аналитики.                                                                                                                                                                                                              |
| 5   | **Независимое масштабирование**                  | Lakehouse разделяет хранилище и вычисления, позволяя каждому масштабироваться независимо в зависимости от фактических потребностей, в отличие от многих хранилищ данных, где они масштабируются совместно.                                                                                                                                                                                                                              |

### По сравнению с озёрами данных {#compared-to-data-lakes}

| #   | Преимущество                    | Описание                                                                                                                                                                                         |
| --- | ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | **Производительность запросов** | Lakehouse реализует индексирование, статистику и оптимизацию размещения данных, что позволяет SQL-запросам выполняться со скоростью, сопоставимой с хранилищами данных, преодолевая низкую производительность необработанных озёр данных. |
| 2   | **Согласованность данных**      | Благодаря поддержке ACID-транзакций lakehouse обеспечивает согласованность при параллельных операциях, решая серьёзное ограничение традиционных озёр данных, где конфликты файлов могут повредить данные.          |
| 3   | **Управление схемами**          | Lakehouse обеспечивает валидацию схем и отслеживает эволюцию схем, предотвращая проблему «болота данных», распространённую в озёрах данных, где данные становятся непригодными из-за несогласованности схем.                |
| 4   | **Возможности управления**      | Lakehouse обеспечивает детальный контроль доступа и функции аудита на уровне строк и столбцов, устраняя ограниченные средства безопасности в базовых озёрах данных.                                            |
| 5   | **Поддержка BI-инструментов**   | Lakehouse предлагает SQL-интерфейсы и оптимизации, которые делают его совместимым со стандартными BI-инструментами, в отличие от необработанных озёр данных, которые требуют дополнительных слоёв обработки перед визуализацией.           |


## Как ClickHouse вписывается в архитектуру data lakehouse? {#where-does-clickhouse-fit-in-the-data-lakehouse-architecture}

ClickHouse — это мощный движок аналитических запросов в экосистеме современного data lakehouse. Он предоставляет организациям высокопроизводительное решение для анализа данных в больших масштабах. ClickHouse является привлекательным выбором благодаря исключительной скорости выполнения запросов и эффективности.

В архитектуре lakehouse ClickHouse функционирует как специализированный уровень обработки, который может гибко взаимодействовать с базовыми данными. Он может напрямую выполнять запросы к файлам Parquet, хранящимся в облачных системах объектного хранения, таких как S3, Azure Blob Storage или Google Cloud Storage, используя свои оптимизированные возможности колоночной обработки для получения быстрых результатов даже на массивных наборах данных. Эта возможность прямых запросов позволяет организациям анализировать данные озера без сложных процессов перемещения или преобразования данных.

ClickHouse интегрируется с открытыми табличными форматами, такими как Apache Iceberg, Delta Lake или Apache Hudi, для более сложных задач управления данными. Эта интеграция позволяет ClickHouse использовать преимущества расширенных возможностей этих форматов, сохраняя при этом исключительную производительность запросов, которой он известен. Организации могут интегрировать эти табличные форматы напрямую или подключаться через каталоги метаданных, такие как AWS Glue, Unity или другие каталожные сервисы.

Включая ClickHouse в качестве движка запросов в свою архитектуру lakehouse, организации могут выполнять молниеносно быстрые аналитические запросы к своему озеру данных, сохраняя при этом гибкость и открытость, которые определяют подход lakehouse. Эта комбинация обеспечивает производительность специализированной аналитической базы данных без ущерба для основных преимуществ модели lakehouse, включая взаимозаменяемость компонентов, открытые форматы и унифицированное управление данными.


## Гибридная архитектура: лучшее из двух миров {#hybrid-architecture-the-best-of-both-worlds}

Хотя ClickHouse превосходно справляется с запросами к компонентам lakehouse, его высокооптимизированный
движок хранения предоставляет дополнительное преимущество. Для сценариев использования, требующих запросов
с минимальной задержкой — таких как дашборды реального времени, операционная аналитика или
интерактивные пользовательские интерфейсы — организации могут выборочно хранить
критически важные для производительности данные непосредственно в нативном формате ClickHouse. Этот гибридный
подход обеспечивает лучшее из двух миров: непревзойденную скорость запросов
специализированного хранилища ClickHouse для аналитики, чувствительной к задержкам, и гибкость
выполнения запросов к более широкому data lakehouse при необходимости.

Эта двойная возможность позволяет организациям реализовывать многоуровневые стратегии работы с данными,
где горячие, часто используемые данные размещаются в оптимизированном хранилище ClickHouse
для получения ответов на запросы за доли секунды, при этом сохраняя бесшовный доступ к полной
истории данных в lakehouse. Команды могут принимать архитектурные решения на основе
требований к производительности, а не технических ограничений, используя ClickHouse как
молниеносно быструю аналитическую базу данных для критически важных рабочих нагрузок и гибкий движок запросов
для более широкой экосистемы данных.
