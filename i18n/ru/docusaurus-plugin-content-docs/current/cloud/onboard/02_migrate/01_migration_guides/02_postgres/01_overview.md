---
slug: /migrations/postgresql/overview
title: 'Сравнение PostgreSQL и ClickHouse'
description: 'Руководство по миграции с PostgreSQL на ClickHouse'
keywords: ['postgres', 'postgresql', 'migrate', 'migration']
sidebar_label: 'Обзор'
doc_type: 'guide'
---



# Сравнение ClickHouse с PostgreSQL



## Почему стоит использовать ClickHouse вместо Postgres? {#why-use-clickhouse-over-postgres}

Коротко: ClickHouse спроектирован для быстрой аналитики, в частности для запросов с `GROUP BY`, как OLAP-база данных, тогда как Postgres — это OLTP-база данных, предназначенная для транзакционных нагрузок.

OLTP, или базы данных оперативной обработки транзакций, предназначены для управления транзакционной информацией. Основная задача этих баз данных, классическим примером которых является Postgres, — обеспечить возможность инженеру отправить блок обновлений в базу данных и быть уверенным, что он целиком либо выполнится успешно, либо завершится с ошибкой. Такие транзакционные гарантии со свойствами ACID являются главным фокусом OLTP-баз данных и важным преимуществом Postgres. Учитывая эти требования, OLTP-базы данных обычно сталкиваются с ограничениями производительности при использовании для аналитических запросов к большим наборам данных.

OLAP, или базы данных оперативной аналитической обработки, спроектированы для удовлетворения этих потребностей — для управления аналитическими нагрузками. Основная задача этих баз данных — обеспечить возможность инженерам эффективно выполнять запросы и агрегировать данные по обширным наборам данных. OLAP-системы реального времени, такие как ClickHouse, позволяют выполнять такой анализ по мере поступления данных в режиме реального времени.

Более подробное сравнение ClickHouse и PostgreSQL см. [здесь](/migrations/postgresql/appendix#postgres-vs-clickhouse-equivalent-and-different-concepts).

Чтобы увидеть потенциальные различия в производительности между ClickHouse и Postgres при выполнении аналитических запросов, см. [Переписывание запросов PostgreSQL в ClickHouse](/migrations/postgresql/rewriting-queries).


## Стратегии миграции {#migration-strategies}

При миграции из PostgreSQL в ClickHouse выбор правильной стратегии зависит от вашего сценария использования, инфраструктуры и требований к данным. В целом захват изменений данных в реальном времени (CDC) является оптимальным подходом для большинства современных сценариев, тогда как ручная массовая загрузка с последующими периодическими обновлениями подходит для более простых случаев или одноразовых миграций.

Ниже описаны две основные стратегии миграции: **CDC в реальном времени** и **Ручная массовая загрузка + периодические обновления**.

### Репликация в реальном времени (CDC) {#real-time-replication-cdc}

Захват изменений данных (CDC) — это процесс синхронизации таблиц между двумя базами данных. Это наиболее эффективный подход для большинства миграций из PostgreSQL, хотя и более сложный, поскольку он обрабатывает вставки, обновления и удаления из PostgreSQL в ClickHouse практически в реальном времени. Он идеально подходит для сценариев, где важна аналитика в реальном времени.

Захват изменений данных в реальном времени (CDC) может быть реализован в ClickHouse с помощью [ClickPipes](/integrations/clickpipes/postgres/deduplication), если вы используете ClickHouse Cloud, или [PeerDB](https://github.com/PeerDB-io/peerdb), если вы используете ClickHouse on-premise. Эти решения обрабатывают сложности синхронизации данных в реальном времени, включая начальную загрузку, путем захвата вставок, обновлений и удалений из PostgreSQL и их репликации в ClickHouse. Такой подход гарантирует, что данные в ClickHouse всегда актуальны и точны без необходимости ручного вмешательства.

### Ручная массовая загрузка + периодические обновления {#manual-bulk-load-periodic-updates}

В некоторых случаях более простой подход, такой как ручная массовая загрузка с последующими периодическими обновлениями, может быть достаточным. Эта стратегия идеальна для одноразовых миграций или ситуаций, когда репликация в реальном времени не требуется. Она включает массовую загрузку данных из PostgreSQL в ClickHouse либо через прямые SQL-команды `INSERT`, либо путем экспорта и импорта CSV-файлов. После первоначальной миграции вы можете периодически обновлять данные в ClickHouse, синхронизируя изменения из PostgreSQL через регулярные интервалы.

Процесс массовой загрузки прост и гибок, но имеет недостаток в отсутствии обновлений в реальном времени. После загрузки начальных данных в ClickHouse обновления не будут отражаться немедленно, поэтому необходимо планировать периодические обновления для синхронизации изменений из PostgreSQL. Этот подход хорошо работает для менее критичных по времени сценариев, но он вносит задержку между моментом изменения данных в PostgreSQL и моментом появления этих изменений в ClickHouse.

### Какую стратегию выбрать? {#which-strategy-to-choose}

Для большинства приложений, требующих свежих и актуальных данных в ClickHouse, рекомендуется использовать CDC в реальном времени через ClickPipes. Это обеспечивает непрерывную синхронизацию данных с минимальной настройкой и обслуживанием. С другой стороны, ручная массовая загрузка с периодическими обновлениями является приемлемым вариантом для более простых одноразовых миграций или рабочих нагрузок, где обновления в реальном времени не критичны.

---

**[Начните руководство по миграции PostgreSQL здесь](/migrations/postgresql/dataset).**
