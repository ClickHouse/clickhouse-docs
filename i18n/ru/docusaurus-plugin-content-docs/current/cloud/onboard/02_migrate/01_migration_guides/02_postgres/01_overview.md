---
slug: /migrations/postgresql/overview
title: 'Сравнение PostgreSQL и ClickHouse'
description: 'Руководство по миграции с PostgreSQL на ClickHouse'
keywords: ['postgres', 'postgresql', 'migrate', 'migration']
sidebar_label: 'Обзор'
doc_type: 'guide'
---



# Сравнение ClickHouse с PostgreSQL



## Почему стоит использовать ClickHouse вместо Postgres? {#why-use-clickhouse-over-postgres}

Если кратко: потому что ClickHouse спроектирован для быстрых аналитических запросов, в частности запросов с `GROUP BY`, как OLAP-база данных, тогда как Postgres — это OLTP-база данных, предназначенная для транзакционных нагрузок.

OLTP (online transaction processing), или системы оперативной обработки транзакций, спроектированы для управления транзакционной информацией. Их основная задача, и Postgres является классическим примером такой системы, — обеспечить возможность инженеру отправить в базу данных пакет изменений и быть уверенным, что он целиком либо успешно выполнится, либо будет отклонён. Такие транзакционные гарантии с ACID-свойствами являются главным фокусом OLTP-баз данных и большим преимуществом Postgres. С учётом этих требований OLTP-базы данных, как правило, сталкиваются с ограничениями по производительности при использовании для аналитических запросов по большим наборам данных.

OLAP (online analytical processing), или системы оперативной аналитической обработки, спроектированы для решения этих задач — обслуживания аналитических нагрузок. Основная цель таких баз данных — обеспечить возможность инженерам эффективно выполнять запросы и агрегировать данные по огромным наборам данных. OLAP-системы реального времени, такие как ClickHouse, позволяют выполнять этот анализ по мере приёма данных в режиме реального времени.

Более подробное сравнение ClickHouse и PostgreSQL см. [здесь](/migrations/postgresql/appendix#postgres-vs-clickhouse-equivalent-and-different-concepts).

Чтобы увидеть потенциальные различия в производительности ClickHouse и Postgres на аналитических запросах, см. раздел [Rewriting PostgreSQL Queries in ClickHouse](/migrations/postgresql/rewriting-queries).



## Стратегии миграции {#migration-strategies}

При миграции с PostgreSQL в ClickHouse выбор стратегии зависит от вашего сценария использования, инфраструктуры и требований к данным. В целом, репликация в режиме реального времени с использованием CDC (фиксация изменений данных, Change Data Capture) является наилучшим подходом для большинства современных сценариев, тогда как ручная массовая загрузка с последующими периодическими обновлениями подходит для более простых случаев или одноразовых миграций.

Ниже описаны две основные стратегии миграции: **CDC в реальном времени** и **ручная массовая загрузка + периодические обновления**.

### Репликация в реальном времени (CDC) {#real-time-replication-cdc}

CDC (фиксация изменений данных, Change Data Capture) — это процесс, с помощью которого таблицы поддерживаются в синхронизированном состоянии между двумя базами данных. Это наиболее эффективный подход для большинства миграций с PostgreSQL, но и более сложный, так как он обрабатывает операции вставки, обновления и удаления из PostgreSQL в ClickHouse практически в реальном времени. Он идеально подходит для сценариев, в которых важна аналитика в реальном времени. 

Репликация в реальном времени с использованием CDC может быть реализована в ClickHouse с помощью [ClickPipes](/integrations/clickpipes/postgres/deduplication), если вы используете ClickHouse Cloud, или [PeerDB](https://github.com/PeerDB-io/peerdb), если вы запускаете ClickHouse в собственной инфраструктуре (on‑prem). Эти решения берут на себя сложность синхронизации данных в реальном времени, включая начальную загрузку, отслеживая операции вставки, обновления и удаления в PostgreSQL и реплицируя их в ClickHouse. Такой подход гарантирует, что данные в ClickHouse всегда актуальны и точны, без необходимости ручного вмешательства.

### Ручная массовая загрузка + периодические обновления {#manual-bulk-load-periodic-updates}

В некоторых случаях более простой подход, такой как ручная массовая загрузка с последующими периодическими обновлениями, может быть достаточным. Эта стратегия оптимальна для одноразовых миграций или ситуаций, когда репликация в реальном времени не требуется. Она предполагает массовую загрузку данных из PostgreSQL в ClickHouse либо с помощью прямых SQL-команд `INSERT`, либо путем экспорта и импорта файлов CSV. После первоначальной миграции вы можете периодически обновлять данные в ClickHouse, синхронизируя изменения из PostgreSQL через регулярные интервалы.

Процесс массовой загрузки прост и гибок, но его недостаток — отсутствие обновлений в реальном времени. После того как начальные данные загружены в ClickHouse, изменения не будут отражаться немедленно, поэтому необходимо планировать периодические обновления для синхронизации изменений из PostgreSQL. Этот подход хорошо подходит для менее чувствительных ко времени сценариев, но он вносит задержку между моментом изменения данных в PostgreSQL и временем, когда эти изменения появляются в ClickHouse.

### Какую стратегию выбрать? {#which-strategy-to-choose}

Для большинства приложений, которым в ClickHouse требуются свежие, актуальные данные, рекомендуется использовать репликацию CDC в реальном времени через ClickPipes. Она обеспечивает непрерывную синхронизацию данных при минимальных затратах на настройку и обслуживание. В свою очередь, ручная массовая загрузка с периодическими обновлениями является жизнеспособным вариантом для более простых, одноразовых миграций или нагрузок, для которых обновления в реальном времени не критичны.

---

**[Начните руководство по миграции PostgreSQL здесь](/migrations/postgresql/dataset).**
