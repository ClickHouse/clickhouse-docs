---
'slug': '/migrations/postgresql/overview'
'title': 'Сравнение PostgreSQL и ClickHouse'
'description': 'Руководство по миграции с PostgreSQL на ClickHouse'
'keywords':
- 'postgres'
- 'postgresql'
- 'migrate'
- 'migration'
'sidebar_label': 'Обзор'
'doc_type': 'guide'
---
# Сравнение ClickHouse и PostgreSQL

## Почему использовать ClickHouse вместо Postgres? {#why-use-clickhouse-over-postgres}

TLDR: Потому что ClickHouse предназначен для быстрой аналитики, в частности для запросов `GROUP BY`, как OLAP база данных, в то время как Postgres является OLTP базой данных, предназначенной для транзакционных нагрузок.

OLTP, или базы данных онлайн-транзакционной обработки, предназначены для управления транзакционной информацией. Основная задача этих баз данных, для которой Postgres является классическим примером, заключается в том, чтобы обеспечить возможность инженеру отправить блок обновлений в базу данных и быть уверенным, что он будет — целиком — либо успешен, либо провален. Эти типы транзакционных гарантий с ACID-свойствами являются основным фокусом OLTP баз данных и огромной силой Postgres. Учитывая эти требования, OLTP базы данных, как правило, сталкиваются с ограничениями производительности, когда используются для аналитических запросов над большими наборами данных.

OLAP, или базы данных онлайн-аналитической обработки, предназначены для удовлетворения этих потребностей — управления аналитическими нагрузками. Основная цель этих баз данных заключается в том, чтобы обеспечить возможность инженерам эффективно выполнять запросы и агрегировать огромные наборы данных. Реальные OLAP системы, такие как ClickHouse, позволяют проводить этот анализ по мере поступления данных в реальном времени.

Смотрите [здесь](/migrations/postgresql/appendix#postgres-vs-clickhouse-equivalent-and-different-concepts) для более глубокого сравнения ClickHouse и PostgreSQL.

Чтобы увидеть потенциальные различия в производительности между ClickHouse и Postgres при выполнении аналитических запросов, смотрите [Переписывание запросов PostgreSQL в ClickHouse](/migrations/postgresql/rewriting-queries).

## Стратегии миграции {#migration-strategies}

При миграции с PostgreSQL на ClickHouse правильная стратегия зависит от вашего случая использования, инфраструктуры и требований к данным. В общем, реальная Change Data Capture (CDC) является лучшим подходом для большинства современных случаев использования, в то время как ручная пакетная загрузка с последующими периодическими обновлениями подходит для более простых сценариев или одноразовых миграций.

Ниже описаны две основные стратегии миграции: **Реальная CDC** и **Ручная пакетная загрузка + Периодические обновления**.

### Реальная репликация (CDC) {#real-time-replication-cdc}

Change Data Capture (CDC) — это процесс, при котором таблицы синхронизируются между двумя базами данных. Это наиболее эффективный подход для большинства миграций с PostgreSQL, но он более сложный, так как обрабатывает вставки, обновления и удаления из PostgreSQL в ClickHouse в почти реальном времени. Это идеально подходит для случаев использования, где важна аналитика в реальном времени.

Реальная Change Data Capture (CDC) может быть реализована в ClickHouse с помощью [ClickPipes](/integrations/clickpipes/postgres/deduplication), если вы используете ClickHouse Cloud, или [PeerDB](https://github.com/PeerDB-io/peerdb) в случае, если вы запускаете ClickHouse на своем оборудовании. Эти решения обрабатывают сложности синхронизации данных в реальном времени, включая первоначальную загрузку, захватывая вставки, обновления и удаления из PostgreSQL и реплицируя их в ClickHouse. Этот подход гарантирует, что данные в ClickHouse всегда свежие и актуальные без необходимости ручного вмешательства.

### Ручная пакетная загрузка + периодические обновления {#manual-bulk-load-periodic-updates}

В некоторых случаях более простой подход, такой как ручная пакетная загрузка с последующими периодическими обновлениями, может быть достаточен. Эта стратегия идеально подходит для одноразовых миграций или ситуаций, когда не требуется реальная репликация. Она включает загрузку данных из PostgreSQL в ClickHouse пакетно, либо с помощью прямых SQL команд `INSERT`, либо путем экспорта и импорта CSV файлов. После первоначальной миграции вы можете периодически обновлять данные в ClickHouse, синхронизируя изменения из PostgreSQL через регулярные интервалы.

Процесс пакетной загрузки прост и гибок, но имеет недостаток в виде отсутствия обновлений в реальном времени. После того как первоначальные данные загружены в ClickHouse, обновления не будут отражаться немедленно, поэтому вам потребуется планировать периодические обновления для синхронизации изменений из PostgreSQL. Этот подход хорошо работает для менее критичных по времени случаев использования, но вводит задержку между моментом, когда данные изменяются в PostgreSQL, и моментом, когда эти изменения появляются в ClickHouse.

### Какую стратегию выбрать? {#which-strategy-to-choose}

Для большинства приложений, требующих свежих, актуальных данных в ClickHouse, реальная CDC через ClickPipes является рекомендованным подходом. Он обеспечивает непрерывную синхронизацию данных с минимальной настройкой и обслуживанием. С другой стороны, ручная пакетная загрузка с периодическими обновлениями является жизнеспособной опцией для более простых одноразовых миграций или нагрузок, где обновления в реальном времени не являются критическими.

---

**[Начните руководство по миграции PostgreSQL здесь](/migrations/postgresql/dataset).**