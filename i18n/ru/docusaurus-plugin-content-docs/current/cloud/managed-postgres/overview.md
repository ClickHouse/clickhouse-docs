---
slug: /cloud/managed-postgres/overview
sidebar_label: 'Обзор'
title: 'Управляемый Postgres'
description: 'Быстрый, масштабируемый, корпоративного уровня Postgres на базе NVMe-хранилища с нативной интеграцией с ClickHouse для аналитики в режиме реального времени'
keywords: ['управляемый Postgres', 'PostgreSQL', 'облачная база данных', 'сервис Postgres', 'NVMe Postgres', 'интеграция с ClickHouse']
doc_type: 'guide'
---

import PrivatePreviewBadge from '@theme/badges/PrivatePreviewBadge';
import Image from '@theme/IdealImage';

<PrivatePreviewBadge />

ClickHouse Managed Postgres — это управляемый сервис Postgres корпоративного уровня, созданный для высокой производительности и масштабируемости. Благодаря NVMe-хранилищу, которое физически размещено рядом с вычислительными ресурсами, он обеспечивает до 10 раз более высокую производительность для нагрузок, упирающихся в диск, по сравнению с альтернативами, использующими сетевые дисковые хранилища вроде EBS.

Созданный в партнёрстве с [Ubicloud](https://www.ubicloud.com/), чья основательская команда имеет успешный опыт создания высококлассных сервисов Postgres в Citus Data, Heroku и Microsoft, Managed Postgres решает типичные проблемы производительности быстрорастущих приложений: снижение скорости ингестии и обновлений данных, медленные операции VACUUM, повышенную хвостовую задержку (tail latency) и всплески активности WAL, вызванные ограниченными дисковыми IOPS.

{/* TODO: Схема архитектуры, иллюстрирующая интеграцию Postgres с ClickHouse
    Path: /static/images/cloud/managed-postgres/architecture-overview.png */}


## Производительность на базе NVMe \{#nvme-performance\}

Большинство управляемых сервисов Postgres используют сетевые хранилища, такие как Amazon EBS, для которых при каждом обращении к диску требуется сетевой обмен. Это вносит задержки, измеряемые в миллисекундах, и ограничивает IOPS, создавая узкие места для нагрузок с интенсивной записью или высоким уровнем операций ввода-вывода.

Управляемый Postgres использует хранилище NVMe, физически подключённое к тому же серверу, что и ваша база данных. Это архитектурное отличие обеспечивает:

- **Задержку дисковой подсистемы на уровне микросекунд** вместо миллисекунд
- **Неограниченный локальный IOPS** без сетевых узких мест
- **До 10 раз более высокую производительность** для нагрузок, зависящих от диска, при той же стоимости

Для рабочих нагрузок Postgres, которые в первую очередь ограничены дисковым IOPS и задержкой, это приводит к более быстрой ингестии, ускорению операций VACUUM, снижению хвостовых задержек и более предсказуемой производительности под нагрузкой.

## Нативная интеграция с ClickHouse \{#clickhouse-integration\}

Сервис Managed Postgres нативно интегрируется с ClickHouse, объединяя транзакционную обработку и аналитику без сложных ETL-конвейеров.

### Репликация из Postgres в ClickHouse \{#postgres-replication\}

Настройте репликацию данных из Postgres в ClickHouse с помощью [коннектора Postgres CDC в ClickPipes](/integrations/clickpipes/postgres). Коннектор обрабатывает как начальную загрузку, так и непрерывную инкрементальную синхронизацию и зарекомендовал себя в продакшене у сотен корпоративных клиентов, переносящих сотни терабайт данных в месяц.

### pg_clickhouse: единый слой запросов \{#pg-clickhouse\}

Каждый инстанс Managed Postgres включает расширение [`pg_clickhouse`](https://github.com/ClickHouse/pg_clickhouse), которое позволяет выполнять запросы к ClickHouse напрямую из Postgres. Ваше приложение может использовать Postgres как единый слой запросов для транзакций и аналитики, без необходимости подключаться к нескольким базам данных.

Расширение обеспечивает полноценный pushdown запросов в ClickHouse для эффективного выполнения, включая поддержку фильтров, join-ов, semi-join-ов, агрегаций и функций. В настоящее время 14 из 22 запросов TPC-H полностью передаются в ClickHouse, обеспечивая более чем 60-кратный прирост производительности по сравнению с выполнением тех же запросов в стандартном Postgres.

## Надёжность корпоративного уровня \{#enterprise-reliability\}

Managed Postgres обеспечивает возможности надёжности и безопасности, необходимые для продакшен-нагрузок.

### Высокая доступность \{#high-availability\}

Настройте до двух резервных реплик в разных зонах доступности, используя репликацию с кворумом. Эти резервные реплики предназначены для обеспечения высокой доступности и автоматического переключения при сбоях, что позволяет базе данных быстро восстанавливаться после отказов. Для масштабирования операций чтения вы можете развернуть отдельные [реплики только для чтения](/cloud/managed-postgres/read-replicas). Подробности конфигурации см. на странице [High availability](/cloud/managed-postgres/high-availability).

### Резервные копии и восстановление \{#backups\}

Каждый экземпляр включает автоматическое резервное копирование, которое поддерживает создание форков и восстановление до произвольной точки во времени. Резервное копирование выполняется с помощью [WAL-G](https://github.com/wal-g/wal-g), хорошо известного инструмента с открытым исходным кодом, который выполняет полные резервные копии и непрерывное архивирование WAL в объектное хранилище.

### Безопасность и соответствие требованиям \{#security-compliance\}

Управляемый Postgres разработан в соответствии с теми же стандартами безопасности, что и ClickHouse Cloud:

- **Аутентификация**: поддержка SAML/SSO
- **Сетевая безопасность**: списки разрешённых IP-адресов, шифрование данных в состоянии покоя и при передаче (TLS 1.3)
- **Контроль доступа**: полный доступ суперпользователя для администрирования базы данных

### Основа с открытым исходным кодом \{#open-source\}

И Postgres, и ClickHouse являются базами данных с открытым исходным кодом и большими, активно развивающимися сообществами. Компоненты интеграции, включая расширение `pg_clickhouse` и CDC (фиксацию изменений данных) репликацию, реализованную с помощью PeerDB, также имеют открытый исходный код. Такая основа обеспечивает отсутствие привязки к конкретному поставщику, давая вам полный контроль и долгосрочную гибкость при работе с вашим стеком данных.