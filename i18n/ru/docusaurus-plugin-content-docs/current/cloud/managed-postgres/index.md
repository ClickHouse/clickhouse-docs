---
slug: /cloud/managed-postgres
title: 'Управляемый Postgres'
description: 'Быстрый, масштабируемый Postgres корпоративного уровня на базе NVMe-накопителей с нативной интеграцией с ClickHouse для аналитики в режиме реального времени'
keywords: ['управляемый Postgres', 'postgresql', 'облачная база данных', 'сервис Postgres', 'nvme postgres', 'интеграция ClickHouse']
doc_type: 'guide'
---

import PrivatePreviewBadge from '@theme/badges/PrivatePreviewBadge';
import Image from '@theme/IdealImage';

<PrivatePreviewBadge />

ClickHouse Managed Postgres — это управляемый сервис Postgres корпоративного уровня, созданный для высокой производительности и масштабирования. Используя NVMe-накопители, физически размещённые рядом с вычислительными ресурсами, он обеспечивает до 10-кратного ускорения для нагрузок, упирающихся в дисковую подсистему, по сравнению с решениями, использующими сетевое хранилище, такое как EBS.

Созданный в партнёрстве с [Ubicloud](https://www.ubicloud.com/), чья команда основателей имеет успешный опыт создания и эксплуатации Postgres мирового уровня в Citus Data, Heroku и Microsoft, Managed Postgres решает проблемы производительности, с которыми часто сталкиваются быстрорастущие приложения: более медленная ингестия и обновления, медленные операции VACUUM, повышенная хвостовая задержка и всплески WAL, вызванные ограниченной производительностью дисковой подсистемы по IOPS.

{/* TODO: Схема архитектуры, иллюстрирующая интеграцию Postgres и ClickHouse
    Path: /static/images/cloud/managed-postgres/architecture-overview.png */}


## Производительность на базе NVMe \{#nvme-performance\}

Большинство управляемых сервисов Postgres используют сетевые хранилища вроде Amazon EBS, что требует сетевого раунд-трипа для каждого обращения к диску. Это вносит задержки, измеряемые в миллисекундах, и ограничивает IOPS, создавая узкие места для нагрузок с интенсивной записью или высоким вводом-выводом.

Управляемый Postgres использует NVMe-хранилище, физически подключённое к тому же серверу, что и ваша база данных. Это архитектурное отличие обеспечивает:

- **Задержку доступа к диску на уровне микросекунд** вместо миллисекунд
- **Неограниченные локальные IOPS** без сетевых узких мест
- **До 10 раз более высокую производительность** для нагрузок, упирающихся в подсистему хранения, при той же стоимости

Для нагрузок Postgres, которые в первую очередь ограничены дисковыми IOPS и задержкой, это даёт более быстрый приём данных, более быстрое выполнение `VACUUM`, меньшие хвостовые задержки (tail latency) и более предсказуемую производительность под нагрузкой.

## Нативная интеграция ClickHouse \{#clickhouse-integration\}

Managed Postgres напрямую интегрируется с ClickHouse, объединяя транзакции и аналитику без сложных ETL-конвейеров.

### Репликация из Postgres в ClickHouse \{#postgres-replication\}

Реплицируйте данные Postgres в ClickHouse с помощью [коннектора Postgres CDC в ClickPipes](/integrations/clickpipes/postgres). Коннектор обрабатывает как начальную загрузку, так и непрерывную инкрементальную синхронизацию и проверен в эксплуатации сотнями корпоративных клиентов, ежемесячно реплицирующих сотни терабайт данных.

### pg_clickhouse: унифицированный слой запросов \{#pg-clickhouse\}

Каждый экземпляр Managed Postgres поставляется с расширением [`pg_clickhouse`](https://github.com/ClickHouse/pg_clickhouse), которое позволяет выполнять запросы к ClickHouse напрямую из Postgres. Ваше приложение может использовать Postgres как единый слой запросов и для транзакционных операций, и для аналитики, без необходимости подключаться к нескольким базам данных.

Расширение обеспечивает широкую передачу запросов в ClickHouse для эффективного выполнения, включая поддержку фильтров, соединений, полусоединений (semi-join), агрегаций и функций. В настоящее время 14 из 22 запросов TPC-H полностью передаются в ClickHouse, обеспечивая более чем 60-кратный прирост производительности по сравнению с выполнением тех же запросов в стандартном Postgres.

## Надежность корпоративного уровня \{#enterprise-reliability\}

Управляемый Postgres обеспечивает надежность и безопасность, необходимые для продакшн-нагрузок.

### Высокая доступность \{#high-availability\}

Настройте до двух резервных реплик в разных зонах доступности с использованием кворумной репликации. Эти резервные реплики предназначены для обеспечения высокой доступности и автоматического переключения при отказе, что позволяет базе данных быстро восстанавливаться после сбоев. Для масштабирования чтения вы можете развернуть отдельные [реплики только для чтения](/cloud/managed-postgres/read-replicas). Подробные сведения о конфигурации см. на странице [Высокая доступность](/cloud/managed-postgres/high-availability).

### Резервное копирование и восстановление \{#backups\}

Каждый экземпляр предоставляет автоматическое резервное копирование, поддерживающее создание форков и восстановление данных до произвольного момента времени. Резервное копирование выполняется с помощью [WAL-G](https://github.com/wal-g/wal-g) — популярного инструмента с открытым исходным кодом, который обеспечивает полные резервные копии и непрерывное архивирование WAL в объектное хранилище.

### Безопасность и соответствие нормативным требованиям \{#security-compliance\}

Управляемый Postgres создан в соответствии с теми же стандартами безопасности, что и ClickHouse Cloud:

- **Аутентификация**: поддержка SAML/SSO
- **Сетевая безопасность**: формирование списка разрешённых IP‑адресов, шифрование данных в состоянии покоя и при передаче (TLS 1.3)
- **Управление доступом**: полный доступ суперпользователя для администрирования базы данных

### Основа с открытым исходным кодом \{#open-source\}

И Postgres, и ClickHouse являются базами данных с открытым исходным кодом с большими и активно развивающимися сообществами. Компоненты интеграции, включая расширение `pg_clickhouse` и CDC репликацию на базе PeerDB, также являются решениями с открытым исходным кодом. Такая основа исключает привязку к поставщику и обеспечивает вам полный контроль и долгосрочную гибкость вашего стека данных.