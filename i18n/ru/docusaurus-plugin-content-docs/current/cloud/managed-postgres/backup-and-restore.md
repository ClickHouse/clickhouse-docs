---
slug: /cloud/managed-postgres/backup-and-restore
sidebar_label: 'Резервное копирование и восстановление'
title: 'Резервное копирование и восстановление'
description: 'Узнайте о стратегиях резервного копирования и восстановлении до точки во времени в ClickHouse Managed Postgres'
keywords: ['резервное копирование', 'восстановление', 'восстановление до точки во времени', 'pitr', 'план восстановления после аварии', 'резервное копирование Postgres']
doc_type: 'guide'
---

import PrivatePreviewBadge from '@theme/badges/PrivatePreviewBadge';
import Image from '@theme/IdealImage';
import backupAndRestore from '@site/static/images/managed-postgres/backup-and-restore.png';

<PrivatePreviewBadge />

Управляемый Postgres обеспечивает безопасность и доступность ваших данных с помощью автоматических резервных копий и восстановления до определённого момента времени. Вы можете просматривать историю резервного копирования и инициировать восстановление в разделе **Backups** вашего экземпляра.

<Image img={backupAndRestore} alt="Раздел Backups с историей резервных копий и параметрами восстановления до определённого момента времени" size="lg" border />


## Резервное копирование \{#backups\}

### Частота резервного копирования \{#backup-frequency\}

Managed Postgres ежедневно создает полные резервные копии вашей базы данных. В дополнение к полным резервным копиям файлы журнала предзаписи (Write-Ahead Log, WAL) архивируются каждые 60 секунд или при накоплении 16 МБ данных WAL, в зависимости от того, что наступит раньше. Такая комбинация полных резервных копий и непрерывного архивирования WAL позволяет выполнять восстановление до любого момента времени в пределах периода хранения.

### Период хранения \{#retention-period\}

Резервные копии хранятся в течение 7 дней, что обеспечивает достаточное время для восстановления в случае потери или повреждения данных. Если вам требуется более длительный период хранения резервных копий, обратитесь в [службу поддержки](https://clickhouse.com/support/program).

### Хранение и надёжность \{#storage-and-durability\}

Резервные копии реплицируются на несколько серверов с использованием кодирования с избыточностью, что гарантирует их доступность даже при недоступности части серверов хранения. Хранилище резервных копий изолировано на уровне бакета: каждый экземпляр Managed Postgres имеет собственный выделенный бакет хранения, а учётные данные настроены таким образом, чтобы позволять доступ только к резервным копиям этого экземпляра.

## Восстановление на определённый момент времени \{#point-in-time-recovery\}

Восстановление на определённый момент времени позволяет вернуть базу данных к любому конкретному моменту в пределах окна хранения резервных копий. Это полезно для восстановления после случайного удаления данных, их повреждения или других проблем, когда необходимо откатиться к заведомо корректному состоянию.

Чтобы выполнить восстановление на определённый момент времени:

1. Перейдите в раздел **Backups** вашего экземпляра Managed Postgres.
2. В разделе **Point in time recovery** выберите дату и время (в UTC), на которые нужно восстановить данные.
3. Нажмите **Restore to point in time**.

В результате операции восстановления создаётся новый экземпляр Managed Postgres с состоянием вашей базы данных на выбранный момент времени. Исходный экземпляр остаётся без изменений, что позволяет проверить восстановленные данные перед принятием решения, какой экземпляр оставить.