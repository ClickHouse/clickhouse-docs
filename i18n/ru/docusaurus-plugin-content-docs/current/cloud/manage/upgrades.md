---
sidebar_label: 'Обновления'
slug: /manage/updates
---

import EnterprisePlanFeatureBadge from '@theme/badges/EnterprisePlanFeatureBadge'
import ScalePlanFeatureBadge from '@theme/badges/ScalePlanFeatureBadge'
import fast_release from '@site/static/images/cloud/manage/fast_release.png';
import enroll_fast_release from '@site/static/images/cloud/manage/enroll_fast_release.png';
import scheduled_upgrades from '@site/static/images/cloud/manage/scheduled_upgrades.png';
import scheduled_upgrade_window from '@site/static/images/cloud/manage/scheduled_upgrade_window.png';


# Обновления

С ClickHouse Cloud вам никогда не придется беспокоиться о патчах и обновлениях. Мы периодически выпускаем обновления, которые включают исправления, новые функции и улучшения производительности. Для получения полного списка нововведений в ClickHouse перейдите в наш [журнал изменений Cloud](/cloud/reference/changelog.md).

:::note
Мы вводим новый механизм обновления, концепцию, которую мы называем «сделать перед тем, как сломать» (или MBB). С этим новым подходом мы добавляем обновленные реплики перед удалением старых во время операции обновления. Это приводит к более плавным обновлениям, которые меньше мешают выполняемым рабочим нагрузкам.

В рамках этого изменения исторические данные системных таблиц будут храниться в течение максимум 30 дней как часть событий обновления. Кроме того, любые данные системных таблиц старше 19 декабря 2024 года для услуг на AWS или GCP и старше 14 января 2025 года для услуг на Azure не будут сохраняться в рамках миграции на новые уровни организации.
:::

## Совместимость версий {#version-compatibility}

Когда вы создаете сервис, настройка [`compatibility`](/operations/settings/settings#compatibility) устанавливается на самую актуальную версию ClickHouse, предлагаемую в ClickHouse Cloud на момент первоначального развертывания вашего сервиса.

Настройка `compatibility` позволяет использовать значения по умолчанию для настроек из предыдущих версий. Когда ваш сервис обновляется до новой версии, версия, указанная для настройки `compatibility`, не изменяется. Это означает, что значения по умолчанию для настроек, которые существовали на момент создания вашего сервиса, не изменятся (если вы уже не переопределили эти значения по умолчанию, в этом случае они сохранятся после обновления).

Вы не можете управлять настройкой `compatibility` для вашего сервиса. Вам необходимо [связаться со службой поддержки](https://clickhouse.com/support/program), если вы хотите изменить версию, установленную для вашей настройки `compatibility`.

## Режим обслуживания {#maintenance-mode}

Иногда может возникнуть необходимость обновить ваш сервис, что может потребовать отключения некоторых функций, таких как масштабирование или простое. В редких случаях нам может понадобиться принять меры по обслуживанию сервиса, который испытывает проблемы, и вернуть его в здоровое состояние. Во время такого обслуживания вы увидите баннер на странице сервиса с надписью _"Идет обслуживание"_. Тем не менее, вы все равно сможете использовать сервис для запросов в это время.

Время, в течение которого сервис находится в режиме обслуживания, не будет оплачиваться. _Режим обслуживания_ — это редкое событие и не должно путаться с обычными обновлениями сервиса.

## Каналы выпуска (график обновлений) {#release-channels-upgrade-schedule}

Вы можете указать график обновлений для вашего сервиса ClickHouse Cloud, подписавшись на конкретный канал выпуска.

### Канал быстрого обновления (ранние обновления) {#fast-release-channel-early-upgrades}

<ScalePlanFeatureBadge feature="Канал быстрого обновления"/>

Помимо регулярного графика обновлений, мы предлагаем **Канал быстрого обновления**, если вы хотите, чтобы ваши сервисы получали обновления раньше обычного графика выпуска.

В частности, услуги будут:

- Получать последние релизы ClickHouse
- Более частые обновления, по мере тестирования новых релизов

Вы можете изменить график обновлений сервиса в консоли Cloud, как показано ниже:

<div class="eighty-percent">
    <img alt="Выбор плана" src={fast_release} />
</div>
<br/>

<div class="eighty-percent">
    <img alt="Выбор плана" src={enroll_fast_release} />
</div>
<br/>

Этот **Канал быстрого обновления** подходит для тестирования новых функций в некритичных средах. **Не рекомендуется для производственных рабочих нагрузок с жесткими требованиями к времени работы и надежности.**

### Регулярный канал обновления {#regular-release-channel}

Для всех сервисов уровня Scale и Enterprise, которые не имеют настроенного канала выпуска или графика обновления, обновления будут выполняться в рамках выпуска Регулярного канала. Это рекомендуется для производственных сред.

Обновления для регулярного канала обычно выполняются через две недели после **Канала быстрого обновления**.

:::note
Сервисы базового уровня обновляются вскоре после Канала быстрого обновления.
:::

## Запланированные обновления {#scheduled-upgrades}

<EnterprisePlanFeatureBadge feature="Запланированные обновления" linking_verb_are="true"/>

Пользователи могут настроить окно обновления для услуг на уровне Enterprise.

Выберите сервис, для которого вы хотите указать запланированное обновление, затем выберите `Настройки` из левого меню. Прокрутите до `Запланированные обновления`.

<div class="eighty-percent">
    <img alt="Запланированные обновления" src={scheduled_upgrades} />
</div>
<br/>

Выбор этой опции позволит пользователям выбрать день недели/временной интервал для обновлений базы данных и облака.

<div class="eighty-percent">
    <img alt="Окно запланированного обновления" src={scheduled_upgrade_window} />
</div>
<br/>
:::note
Хотя запланированные обновления следуют определенному графику, исключения применяются для критических патчей безопасности и исправлений уязвимостей. В случаях, когда выявлена срочная проблема безопасности, обновления могут быть выполнены вне запланированного окна. Клиенты будут уведомлены о таких исключениях по мере необходимости.
:::

