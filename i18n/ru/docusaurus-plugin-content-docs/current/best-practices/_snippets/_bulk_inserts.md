Механика, описанная выше, иллюстрирует постоянные накладные расходы независимо от размера вставки, что делает размер пакета единственной наиболее важной оптимизацией для пропускной способности приема данных. Пакетные вставки уменьшают накладные расходы в соотношении с общим временем вставки и улучшают эффективность обработки.

Мы рекомендуем вставлять данные пакетами по крайней мере по 1,000 строк, а в идеале от 10,000 до 100,000 строк. Меньшее количество, но более крупные вставки снижает количество записанных частей, минимизирует нагрузку на слияние и снижает общее использование ресурсов системы.

**Для эффективной стратегии синхронной вставки требуется пакетирование на стороне клиента.**

Если вы не можете пакетировать данные на стороне клиента, ClickHouse поддерживает асинхронные вставки, которые переносят пакетирование на сервер ([см.](/best-practices/selecting-an-insert-strategy#asynchronous-inserts)).

:::tip 
Независимо от размера ваших вставок, мы рекомендуем сохранять количество запросов на вставку на уровне около одного запроса на вставку в секунду. Причина этой рекомендации заключается в том, что созданные части сливаются в более крупные части в фоновом режиме (для оптимизации ваших данных для запросов на чтение), и отправка слишком большого количества запросов на вставку в секунду может привести к ситуациям, когда фоновое слияние не может справиться с количеством новых частей. Однако вы можете использовать более высокий темп запросов на вставку в секунду, когда используете асинхронные вставки (см. асинхронные вставки). 
:::
