Механизм, описанный выше, демонстрирует постоянные накладные расходы независимо от размера вставки, что делает размер пакета ключевой оптимизацией для пропускной способности приёма. Пакетная вставка уменьшает накладные расходы как долю от общего времени вставки и повышает эффективность обработки.

Мы рекомендуем вставлять данные пакетами как минимум по 1 000 строк, а в идеале — от 10 000 до 100 000 строк. Более редкие, но более крупные вставки снижают количество записываемых кусков (parts), минимизируют нагрузку на слияния и уменьшают общее потребление ресурсов системы. 

**Для того чтобы стратегия синхронных вставок была эффективной, требуется такое клиентское пакетирование.**

Если вы не можете выполнять пакетирование данных на стороне клиента, ClickHouse поддерживает асинхронные вставки, которые переносят пакетирование на сервер ([см.](/best-practices/selecting-an-insert-strategy#asynchronous-inserts)).

:::tip 
Независимо от размера ваших вставок мы рекомендуем поддерживать количество запросов на вставку на уровне примерно одного в секунду. Причина этой рекомендации в том, что созданные куски (parts) в фоновом режиме объединяются в более крупные (для оптимизации данных под запросы на чтение), и отправка слишком большого числа запросов на вставку в секунду может привести к ситуации, когда фоновое слияние не будет успевать за количеством новых кусков. Однако вы можете использовать более высокую частоту запросов на вставку при использовании асинхронных вставок (см. асинхронные вставки). 
:::