Описанная выше механика демонстрирует постоянные накладные расходы независимо от размера вставки, что делает размер пакета наиболее важной оптимизацией для пропускной способности при вставке данных. Пакетная вставка снижает долю накладных расходов в общем времени вставки и повышает эффективность обработки.

Мы рекомендуем вставлять данные пакетами не менее 1 000 строк, в идеале — от 10 000 до 100 000 строк. Меньшее количество более крупных вставок уменьшает число записываемых кусков данных, минимизирует нагрузку на слияние и снижает общее потребление системных ресурсов.

**Для эффективной работы стратегии синхронной вставки необходимо пакетирование на стороне клиента.**

Если пакетирование данных на стороне клиента невозможно, ClickHouse поддерживает асинхронные вставки, которые переносят пакетирование на сервер ([подробнее](/best-practices/selecting-an-insert-strategy#asynchronous-inserts)).

:::tip
Независимо от размера вставок, мы рекомендуем поддерживать частоту запросов вставки на уровне примерно одного запроса в секунду. Причина этой рекомендации в том, что созданные куски данных объединяются в более крупные куски в фоновом режиме (для оптимизации данных под запросы чтения), и отправка слишком большого количества запросов вставки в секунду может привести к ситуации, когда фоновое слияние не будет успевать обрабатывать новые куски. Однако при использовании асинхронных вставок можно использовать более высокую частоту запросов вставки в секунду (см. раздел об асинхронных вставках).
:::