Механизм, описанный выше, демонстрирует постоянные накладные расходы независимо от размера вставки, поэтому размер пакета является наиболее важной оптимизацией для пропускной способности загрузки данных. Пакетная вставка уменьшает накладные расходы в относительном выражении (как долю от общего времени вставки) и повышает эффективность обработки.

Мы рекомендуем вставлять данные пакетами как минимум по 1 000 строк, а в идеале — от 10 000 до 100 000 строк. Более редкие, но крупные вставки уменьшают количество записываемых частей, минимизируют нагрузку на слияния и снижают общее потребление ресурсов системы. 

**Чтобы стратегия синхронной вставки была эффективной, необходимо формировать такие пакеты на стороне клиента.**

Если вы не можете формировать пакеты данных на стороне клиента, ClickHouse поддерживает асинхронные вставки, которые переносят пакетизацию на сервер ([см.](/best-practices/selecting-an-insert-strategy#asynchronous-inserts)).

:::tip 
Независимо от размера ваших вставок мы рекомендуем поддерживать частоту запросов на вставку на уровне примерно одного запроса в секунду. Это связано с тем, что созданные части сливаются в более крупные части в фоновом режиме (для оптимизации данных под запросы на чтение), и отправка слишком большого количества запросов на вставку в секунду может привести к ситуациям, когда фоновое слияние не успевает за количеством новых частей. Однако вы можете использовать более высокую частоту запросов на вставку в секунду при использовании асинхронных вставок (см. асинхронные вставки). 
:::