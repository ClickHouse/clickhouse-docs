Механизм, описанный выше, демонстрирует постоянные накладные расходы независимо от размера вставки, что делает размер батча ключевой оптимизацией для максимизации пропускной способности загрузки данных. Пакетная вставка снижает накладные расходы как долю от общего времени вставки и повышает эффективность обработки.

Мы рекомендуем вставлять данные батчами минимум по 1 000 строк, а в идеале — в диапазоне 10 000–100 000 строк. Реже, но более крупные вставки уменьшают количество записываемых кусков, минимизируют нагрузку на слияния и снижают общее потребление системных ресурсов. 

**Чтобы стратегия синхронных вставок была эффективной, необходима такая пакетизация на стороне клиента.**

Если вы не можете выполнять пакетизацию данных на стороне клиента, ClickHouse поддерживает асинхронные вставки, при которых пакетизация переносится на сервер ([см.](/best-practices/selecting-an-insert-strategy#asynchronous-inserts)).

:::tip 
Независимо от размера ваших вставок мы рекомендуем удерживать число запросов `INSERT` на уровне примерно одного запроса на вставку в секунду. Причина этой рекомендации в том, что создаваемые куски в фоновом режиме сливаются в более крупные (для оптимизации данных под запросы на чтение), и отправка слишком большого количества запросов на вставку в секунду может привести к ситуациям, когда фоновое слияние не успевает обрабатывать количество новых кусков. Однако вы можете использовать более высокую частоту запросов на вставку в секунду при использовании асинхронных вставок (см. асинхронные вставки). 
:::