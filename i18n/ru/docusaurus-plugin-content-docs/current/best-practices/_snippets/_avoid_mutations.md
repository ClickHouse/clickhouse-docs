В ClickHouse **мутации** — это операции, которые изменяют или удаляют существующие данные в таблице, обычно с помощью `ALTER TABLE ... DELETE` или `ALTER TABLE ... UPDATE`. Хотя эти операторы могут выглядеть похожими на стандартные SQL‑операции, по сути они устроены принципиально иначе. 

Вместо модификации строк на месте мутации в ClickHouse представляют собой асинхронные фоновые процессы, которые полностью перезаписывают [части данных](/parts), затронутые изменением. Такой подход необходим из‑за колоночной, неизменяемой модели хранения в ClickHouse и может приводить к значительной нагрузке на ввод‑вывод и потреблению ресурсов.

Когда запускается мутация, ClickHouse планирует создание новых **изменённых частей**, оставляя исходные части нетронутыми до тех пор, пока новые не будут готовы. Как только они готовы, изменённые части атомарно заменяют исходные. Однако, поскольку операция перезаписывает целые части, даже незначительное изменение (например, обновление одной строки) может привести к масштабным перезаписям и сильному увеличению объёма операций записи. 

Для больших наборов данных это может вызывать существенный всплеск дискового ввода‑вывода и ухудшать общую производительность кластера. В отличие от слияний, мутации нельзя откатить после отправки на выполнение; они будут продолжать выполняться даже после перезапуска сервера, если их явно не отменить — см. [`KILL MUTATION`](/sql-reference/statements/kill#kill-mutation).

:::tip Мониторинг количества активных или поставленных в очередь мутаций в ClickHouse
Информацию о том, как отслеживать количество активных или поставленных в очередь мутаций, см. в следующей [статье базы знаний](/knowledgebase/view_number_of_active_mutations).
:::

Мутации **полностью упорядочены**: они применяются к данным, вставленным до момента запуска мутации, в то время как более новые данные не затрагиваются. Они не блокируют вставки, но всё же могут пересекаться с другими выполняющимися запросами. SELECT, выполняющийся во время мутации, может читать смесь изменённых и неизменённых частей, что может приводить к неконсистентным представлениям данных в ходе выполнения. ClickHouse выполняет мутации параллельно для отдельных частей, что может ещё больше увеличить использование памяти и CPU, особенно когда задействованы сложные подзапросы (например, x IN (SELECT ...)).

Как правило, **избегайте частых или крупномасштабных мутаций**, особенно на таблицах с большим объёмом данных. Вместо этого используйте альтернативные движки таблиц, такие как [ReplacingMergeTree](/guides/replacing-merge-tree) или [CollapsingMergeTree](/engines/table-engines/mergetree-family/collapsingmergetree), которые разработаны для более эффективной обработки исправлений данных во время выполнения запросов или в процессе слияний. Если мутации абсолютно необходимы, внимательно отслеживайте их с помощью таблицы system.mutations и используйте `KILL MUTATION`, если процесс завис или ведёт себя некорректно. Некорректное использование мутаций может привести к ухудшению производительности, чрезмерному «перелопачиванию» хранилища и потенциальной нестабильности сервиса, поэтому применяйте их осторожно и как можно реже.

Для удаления данных пользователи также могут рассмотреть [облегчённые удаления (Lightweight deletes)](/guides/developer/lightweight-delete) или управление данными с помощью [секций (partitions)](/best-practices/choosing-a-partitioning-key), которые позволяют [эффективно удалять](/sql-reference/statements/alter/partition#drop-partitionpart) целые части.