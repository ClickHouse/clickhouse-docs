В ClickHouse **мутациями** называются операции, которые изменяют или удаляют существующие данные в таблице — обычно с помощью `ALTER TABLE ... DELETE` или `ALTER TABLE ... UPDATE`. Хотя эти операторы могут выглядеть похожими на стандартные SQL‑операции, на уровне реализации они принципиально отличаются. 

Вместо изменения строк «на месте» мутации в ClickHouse представляют собой асинхронные фоновые процессы, которые переписывают целые [части данных](/parts), затронутые изменением. Такой подход необходим из-за колонко-ориентированной, неизменяемой модели хранения ClickHouse и может приводить к значительной нагрузке на ввод‑вывод и использование ресурсов.

Когда выполняется мутация, ClickHouse планирует создание новых **изменённых частей**, оставляя исходные части нетронутыми до тех пор, пока новые не будут готовы. Затем изменённые части атомарно заменяют оригинальные. Однако, поскольку операция переписывает целые части, даже незначительное изменение (например, обновление одной строки) может привести к масштабным перезаписям и существенному увеличению объёма записей (write amplification). 

Для больших наборов данных это может вызвать серьёзный всплеск дискового ввода‑вывода и ухудшить общую производительность кластера. В отличие от слияний, мутации нельзя откатить после запуска, и они будут продолжать выполняться даже после перезапуска сервера, если их явно не отменить — см. [`KILL MUTATION`](/sql-reference/statements/kill#kill-mutation).

:::tip Monitoring the number of active or queued mutations in ClickHouse
Информацию о том, как отслеживать количество активных или поставленных в очередь мутаций, см. в следующей [статье базы знаний](/knowledgebase/view_number_of_active_mutations).
:::

Мутации **тотально упорядочены**: они применяются к данным, вставленным до момента запуска мутации, тогда как более новые данные остаются незатронутыми. Они не блокируют вставки, но при этом могут пересекаться с другими выполняющимися запросами. SELECT, выполняющийся во время мутации, может читать смесь изменённых и неизменённых частей, что может приводить к неконсистентным представлениям данных в ходе выполнения. ClickHouse выполняет мутации параллельно по частям, что может дополнительно увеличивать использование памяти и CPU, особенно когда задействованы сложные подзапросы (такие как x IN (SELECT ...)).

Как правило, **избегайте частых или крупномасштабных мутаций**, особенно на высоконагруженных таблицах. Вместо этого используйте альтернативные движки таблиц, такие как [ReplacingMergeTree](/guides/replacing-merge-tree) или [CollapsingMergeTree](/engines/table-engines/mergetree-family/collapsingmergetree), которые спроектированы для более эффективной обработки исправлений данных во время выполнения запросов или при слияниях. Если мутации абсолютно необходимы, внимательно отслеживайте их с помощью таблицы system.mutations и используйте `KILL MUTATION`, если процесс застрял или ведёт себя некорректно. Неправильное использование мутаций может привести к снижению производительности, чрезмерным переработкам данных в хранилище и потенциальной нестабильности сервиса — поэтому применяйте их осторожно и как можно реже.

Для удаления данных пользователи также могут рассмотреть [облегчённые удаления (Lightweight deletes)](/guides/developer/lightweight-delete) или управление данными через [секции (partitions)](/best-practices/choosing-a-partitioning-key), которые позволяют [эффективно удалять целые части](/sql-reference/statements/alter/partition#drop-partitionpart).