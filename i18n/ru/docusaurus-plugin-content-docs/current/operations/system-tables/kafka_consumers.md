---
description: 'Системная таблица, содержащая сведения о потребителях Kafka.'
keywords: ['system table', 'kafka_consumers']
slug: /operations/system-tables/kafka_consumers
title: 'system.kafka_consumers'
doc_type: 'reference'
---

import SystemTableCloud from '@site/i18n/ru/docusaurus-plugin-content-docs/current/_snippets/_system_table_cloud.md';

<SystemTableCloud />

Содержит информацию о потребителях Kafka.
Применяется для [движка таблиц Kafka](../../engines/table-engines/integrations/kafka) (родная интеграция ClickHouse).

Столбцы:

{/*AUTOGENERATED_START*/ }

* `database` ([String](../../sql-reference/data-types/)) — База данных таблицы с движком Kafka.
* `table` ([String](../../sql-reference/data-types/)) — Имя таблицы с движком Kafka.
* `consumer_id` ([String](../../sql-reference/data-types/)) — Идентификатор потребителя Kafka. Обратите внимание, что у таблицы может быть несколько потребителей. Задаётся параметром `kafka_num_consumers`.
* `assignments.topic` ([Array(String)](../../sql-reference/data-types/)) — Топик Kafka.
* `assignments.partition_id` ([Array(Int32)](../../sql-reference/data-types/)) — Идентификатор раздела Kafka. Обратите внимание, что только один потребитель может быть назначен на раздел.
* `assignments.current_offset` ([Array(Int64)](../../sql-reference/data-types/)) — Текущее смещение (offset).
* `assignments.intent_size` ([Array(Nullable(Int64))](../../sql-reference/data-types/)) — Количество отправленных, но ещё не зафиксированных сообщений в новом движке StorageKafka.
* `exceptions.time` ([Array(DateTime)](../../sql-reference/data-types/)) — Метка времени генерации 10 последних исключений.
* `exceptions.text` ([Array(String)](../../sql-reference/data-types/)) — Текст 10 последних исключений.
* `last_poll_time` ([DateTime](../../sql-reference/data-types/)) — Метка времени самого последнего опроса (poll).
* `num_messages_read` ([UInt64](../../sql-reference/data-types/)) — Количество сообщений, прочитанных потребителем.
* `last_commit_time` ([DateTime](../../sql-reference/data-types/)) — Метка времени самой последней фиксации (commit).
* `num_commits` ([UInt64](../../sql-reference/data-types/)) — Общее количество фиксаций (commit) для данного потребителя.
* `last_rebalance_time` ([DateTime](../../sql-reference/data-types/)) — Метка времени самой последней операции перераспределения (Kafka rebalance).
* `num_rebalance_revocations` ([UInt64](../../sql-reference/data-types/)) — Сколько раз у потребителя отзывали его разделы.
* `num_rebalance_assignments` ([UInt64](../../sql-reference/data-types/)) — Сколько раз потребитель назначался на кластер Kafka.
* `is_currently_used` ([UInt8](../../sql-reference/data-types/)) — Флаг, показывающий, используется ли сейчас потребитель.
* `last_used` ([DateTime64(6)](../../sql-reference/data-types/)) — Время последнего использования этого потребителя.
* `rdkafka_stat` ([String](../../sql-reference/data-types/)) — Внутренняя статистика библиотеки. Установите параметр `statistics_interval_ms` в 0, чтобы отключить; значение по умолчанию — 3000 (раз в три секунды).

{/*AUTOGENERATED_END*/ }

Пример:

```sql
SELECT *
FROM system.kafka_consumers
FORMAT Vertical
```

```text
Строка 1:
──────
database:                   test
table:                      kafka
consumer_id:                ClickHouse-instance-test-kafka-1caddc7f-f917-4bb1-ac55-e28bd103a4a0
assignments.topic:          ['system_kafka_cons']
assignments.partition_id:   [0]
assignments.current_offset: [18446744073709550615]
exceptions.time:            []
exceptions.text:            []
last_poll_time:             2006-11-09 18:47:47
num_messages_read:          4
last_commit_time:           2006-11-10 04:39:40
num_commits:                1
last_rebalance_time:        1970-01-01 00:00:00
num_rebalance_revocations:  0
num_rebalance_assignments:  1
is_currently_used:          1
rdkafka_stat:               {...}

```
