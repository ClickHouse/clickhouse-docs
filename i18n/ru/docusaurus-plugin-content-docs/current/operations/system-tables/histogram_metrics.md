---
description: 'Эта таблица содержит метрики-гистограммы, которые можно мгновенно вычислить
  и экспортировать в формате Prometheus. Она всегда актуальна.'
keywords: ['системная таблица', 'histogram_metrics']
slug: /operations/system-tables/histogram_metrics
title: 'system.histogram_metrics'
doc_type: 'reference'
---

import SystemTableCloud from '@site/i18n/ru/docusaurus-plugin-content-docs/current/_snippets/_system_table_cloud.md';


# histogram_metrics \{#histogram_metrics\}

<SystemTableCloud />

Эта таблица содержит метрики гистограммы, которые могут вычисляться мгновенно и экспортироваться в формате Prometheus. Она всегда актуальна. Заменяет устаревшую таблицу `system.latency_log`.

Столбцы:

{/*AUTOGENERATED_START*/ }

* `metric` ([String](../../sql-reference/data-types/)) — Имя метрики.
* `value` ([Int64](../../sql-reference/data-types/)) — Значение метрики.
* `description` ([String](../../sql-reference/data-types/)) — Описание метрики.
* `labels` ([Map(String, String)](../../sql-reference/data-types/)) — Метки метрики.

{/*AUTOGENERATED_END*/ }

**Пример**

Вы можете использовать следующий запрос для экспорта всех метрик гистограмм в формате Prometheus.

```sql
SELECT
  metric AS name,
  toFloat64(value) AS value,
  description AS help,
  labels,
  'histogram' AS type
FROM system.histogram_metrics
FORMAT Prometheus
```


## Описания метрик \{#metric_descriptions\}

### keeper_response_time_ms_bucket \{#keeper_response_time_ms_bucket\}

Время ответа Keeper в миллисекундах.

### keeper_client_queue_duration_milliseconds_bucket \{#keeper_client_queue_duration_milliseconds_bucket\}

Время, в течение которого запросы ожидают постановки в очередь и находятся в очереди перед обработкой клиентом Keeper, в миллисекундах.

### keeper_receive_request_time_milliseconds_bucket \{#keeper_receive_request_time_milliseconds_bucket\}

Время, необходимое для получения и разбора запроса от клиента обработчиком Keeper по TCP, в миллисекундах.

### keeper_dispatcher_requests_queue_time_milliseconds_bucket \{#keeper_dispatcher_requests_queue_time_milliseconds_bucket\}

Время пребывания запроса в очереди диспетчера Keeper, в миллисекундах.

### keeper_write_pre_commit_time_milliseconds_bucket \{#keeper_write_pre_commit_time_milliseconds_bucket\}

Время предварительной обработки запроса на запись перед коммитом в Raft, в миллисекундах.

### keeper_write_commit_time_milliseconds_bucket \{#keeper_write_commit_time_milliseconds_bucket\}

Время обработки запроса на запись после фиксации в Raft, в миллисекундах.

### keeper_dispatcher_responses_queue_time_milliseconds_bucket \{#keeper_dispatcher_responses_queue_time_milliseconds_bucket\}

Время, которое ответ находится в очереди ответов диспетчера Keeper, в миллисекундах.

### keeper_send_response_time_milliseconds_bucket \{#keeper_send_response_time_milliseconds_bucket\}

Время, затраченное на отправку ответа клиенту в TCP-обработчике Keeper (включает постановку в очередь и запись в сокет), в миллисекундах.

### keeper_read_wait_for_write_time_milliseconds_bucket \{#keeper_read_wait_for_write_time_milliseconds_bucket\}

Время, в течение которого запрос на чтение ожидает завершения запроса на запись, от которого он зависит, в миллисекундах.

### keeper_read_process_time_milliseconds_bucket \{#keeper_read_process_time_milliseconds_bucket\}

Время обработки запроса на чтение в Keeper, в миллисекундах.

### keeper_batch_size_elements_bucket \{#keeper_batch_size_elements_bucket\}

Размер пакета, отправляемого в Raft, в элементах.

### keeper_batch_size_bytes_bucket \{#keeper_batch_size_bytes_bucket\}

Размер пакета, отправляемого в Raft, в байтах.

**См. также**

- [system.asynchronous_metrics](/operations/system-tables/asynchronous_metrics) — Содержит периодически вычисляемые метрики.
- [system.events](/operations/system-tables/events) — Содержит количество произошедших событий.
- [system.metric_log](/operations/system-tables/metric_log) — Содержит историю значений метрик из таблиц `system.metrics` и `system.events`.
- [Monitoring](../../operations/monitoring.md) — Базовые концепции мониторинга ClickHouse.