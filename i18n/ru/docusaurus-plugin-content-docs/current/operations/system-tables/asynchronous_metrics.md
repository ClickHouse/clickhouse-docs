---
description: 'Системная таблица, содержащая метрики, которые вычисляются периодически в фоновом режиме. Например, количество используемой оперативной памяти.'
slug: /operations/system-tables/asynchronous_metrics
title: 'system.asynchronous_metrics'
keywords: ['system table', 'asynchronous_metrics']
---
import SystemTableCloud from '@site/i18n/ru/docusaurus-plugin-content-docs/current/_snippets/_system_table_cloud.md';

<SystemTableCloud/>

Содержит метрики, которые вычисляются периодически в фоновом режиме. Например, количество используемой оперативной памяти.

Колонки:

- `metric` ([String](../../sql-reference/data-types/string.md)) — Название метрики.
- `value` ([Float64](../../sql-reference/data-types/float.md)) — Значение метрики.
- `description` ([String](../../sql-reference/data-types/string.md)) - Описание метрики.

**Пример**

``` sql
SELECT * FROM system.asynchronous_metrics LIMIT 10
```

``` text
┌─metric──────────────────────────────────┬──────value─┬─description────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ AsynchronousMetricsCalculationTimeSpent │ 0.00179053 │ Время в секундах, затраченное на вычисление асинхронных метрик (это накладные расходы асинхронных метрик).                                                                                                                                           │
│ NumberOfDetachedByUserParts             │          0 │ Общее количество частей, отделенных от таблиц MergeTree пользователями с помощью запроса `ALTER TABLE DETACH` (в отличие от неожиданных, поврежденных или проигнорированных частей). Сервер не учитывает отделенные части, их можно удалить.                    │
│ NumberOfDetachedParts                   │          0 │ Общее количество частей, отделенных от таблиц MergeTree. Часть может быть отделена пользователем с помощью запроса `ALTER TABLE DETACH` или самим сервером, если часть повреждена, неожиданна или не нужна. Сервер не учитывает отделенные части, их можно удалить. │
│ TotalRowsOfMergeTreeTables              │    2781309 │ Общее количество строк (записей), хранящихся во всех таблицах семейства MergeTree.                                                                                                                                                                   │
│ TotalBytesOfMergeTreeTables             │    7741926 │ Общее количество байт (сжатых, включая данные и индексы), хранящихся во всех таблицах семейства MergeTree.                                                                                                                                         │
│ NumberOfTables                          │         93 │ Общее количество таблиц, суммированное по всем базам данных на сервере, за исключением баз данных, которые не могут содержать таблицы MergeTree. Исключенные механизмы баз данных - это те, которые генерируют набор таблиц на лету, такие как `Lazy`, `MySQL`, `PostgreSQL`, `SQLite`. │
│ NumberOfDatabases                       │          6 │ Общее количество баз данных на сервере.                                                                                                                                                                                                                   │
│ MaxPartCountForPartition                │          6 │ Максимальное количество частей на партицию во всех партициях всех таблиц семейства MergeTree. Значения больше 300 указывают на неправильную настройку, перегрузку или массовую загрузку данных.                                                                             │
│ ReplicasSumMergesInQueue                │          0 │ Сумма операций слияния в очереди (еще не применено) для реплицируемых таблиц.                                                                                                                                                                       │
│ ReplicasSumInsertsInQueue               │          0 │ Сумма операций INSERT в очереди (еще не реплицировано) для реплицируемых таблиц.                                                                                                                                                                   │
└─────────────────────────────────────────┴────────────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

<!--- В отличие от system.events и system.metrics, асинхронные метрики не собираются в простом списке в файле исходного кода - они смешаны с логикой в src/Interpreters/ServerAsynchronousMetrics.cpp.
      Перечисляем их здесь явно для удобства читателя. --->
## Описание метрик {#metric-descriptions}
### AsynchronousHeavyMetricsCalculationTimeSpent {#asynchronousheavymetricscalculationtimespent}

Время в секундах, затраченное на вычисление асинхронных тяжелых (связанных с таблицами) метрик (это накладные расходы асинхронных метрик).
### AsynchronousHeavyMetricsUpdateInterval {#asynchronousheavymetricsupdateinterval}

Интервал обновления тяжелых (связанных с таблицами) метрик.
### AsynchronousMetricsCalculationTimeSpent {#asynchronousmetricscalculationtimespent}

Время в секундах, затраченное на вычисление асинхронных метрик (это накладные расходы асинхронных метрик).
### AsynchronousMetricsUpdateInterval {#asynchronousmetricsupdateinterval}

Интервал обновления метрик.
### BlockActiveTime_*name* {#blockactivetime_name}

Время в секундах, в течение которого блочное устройство имело запросы ввода-вывода в очереди. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardBytes_*name* {#blockdiscardbytes_name}

Количество отброшенных байт на блочном устройстве. Эти операции имеют отношение к SSD. Операции по удалению не используются ClickHouse, но могут быть использованы другими процессами в системе. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardMerges_*name* {#blockdiscardmerges_name}

Количество операций удаления, запрошенных от блочного устройства и объединенных вместе планировщиком ввода-вывода ОС. Эти операции имеют отношение к SSD. Операции по удалению не используются ClickHouse, но могут быть использованы другими процессами в системе. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardOps_*name* {#blockdiscardops_name}

Количество операций удаления, запрошенных от блочного устройства. Эти операции имеют отношение к SSD. Операции по удалению не используются ClickHouse, но могут быть использованы другими процессами в системе. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardTime_*name* {#blockdiscardtime_name}

Время в секундах, затраченное на операции удаления, запрошенные от блочного устройства, суммированное по всем операциям. Эти операции имеют отношение к SSD. Операции по удалению не используются ClickHouse, но могут быть использованы другими процессами в системе. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockInFlightOps_*name* {#blockinflightops_name}

Это значение подсчитывает количество запросов ввода-вывода, которые были отправлены драйверу устройства, но еще не завершены. Оно не включает запросы ввода-вывода, которые находятся в очереди, но еще не отправлены драйверу устройства. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockQueueTime_*name* {#blockqueuetime_name}

Это значение подсчитывает количество миллисекунд, которые запросы ввода-вывода ожидали на этом блочном устройстве. Если есть несколько запросов ввода-вывода в ожидании, это значение увеличится как произведение количества миллисекунд на количество ожидающих запросов. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadBytes_*name* {#blockreadbytes_name}

Количество байт, прочитанных с блочного устройства. Оно может быть меньше количества байт, прочитанных из файловой системы из-за использования кэша страниц ОС, который сохраняет ввод-вывод. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadMerges_*name* {#blockreadmerges_name}

Количество операций чтения, запрошенных с блочного устройства и объединенных вместе планировщиком ввода-вывода ОС. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadOps_*name* {#blockreadops_name}

Количество операций чтения, запрошенных с блочного устройства. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadTime_*name* {#blockreadtime_name}

Время в секундах, затраченное на операции чтения, запрошенные с блочного устройства, суммированное по всем операциям. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteBytes_*name* {#blockwritebytes_name}

Количество байт, записанных на блочное устройство. Оно может быть меньше количества байт, записанных в файловую систему из-за использования кэша страниц ОС, который сохраняет ввод-вывод. Запись на блочное устройство может произойти позже соответствующей записи в файловую систему из-за кеширования записи. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteMerges_*name* {#blockwritemerges_name}

Количество операций записи, запрошенных от блочного устройства и объединенных вместе планировщиком ввода-вывода ОС. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteOps_*name* {#blockwriteops_name}

Количество операций записи, запрошенных от блочного устройства. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteTime_*name* {#blockwritetime_name}

Время в секундах, затраченное на операции записи, запрошенные от блочного устройства, суммированное по всем операциям. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. См. https://www.kernel.org/doc/Documentation/block/stat.txt
### CPUFrequencyMHz_*name* {#cpufrequencymhz_name}

Текущая частота процессора в МГц. Большинство современных процессоров динамически регулируют частоту для экономии энергии и увеличения производительности.
### CompiledExpressionCacheBytes {#compiledexpressioncachebytes}

Общее количество байт, используемых для кэша JIT-скомпилированного кода.
### CompiledExpressionCacheCount {#compiledexpressioncachecount}

Общее количество записей в кэше JIT-скомпилированного кода.
### DiskAvailable_*name* {#diskavailable_name}

Доступные байты на диске (виртуальная файловая система). Удаленные файловые системы могут показать большое значение, например, 16 EiB.
### DiskTotal_*name* {#disktotal_name}

Общий размер диска в байтах (виртуальная файловая система). Удаленные файловые системы могут показать большое значение, например, 16 EiB.
### DiskUnreserved_*name* {#diskunreserved_name}

Доступные байты на диске (виртуальная файловая система) без резервов для слияний, загрузок и перемещений. Удаленные файловые системы могут показать большое значение, например, 16 EiB.
### DiskUsed_*name* {#diskused_name}

Использованные байты на диске (виртуальная файловая система). Удаленные файловые системы не всегда предоставляют эту информацию.
### FilesystemCacheBytes {#filesystemcachebytes}

Общее количество байт в виртуальной файловой системе `cache`. Этот кэш хранится на диске.
### FilesystemCacheFiles {#filesystemcachefiles}

Общее количество сегментов файлов, кэшированных в виртуальной файловой системе `cache`. Этот кэш хранится на диске.
### FilesystemLogsPathAvailableBytes {#filesystemlogspathavailablebytes}

Доступные байты на том разделе, где смонтирован путь логов ClickHouse. Если это значение приближается к нулю, вам следует настроить ротацию логов в конфигурационном файле.
### FilesystemLogsPathAvailableINodes {#filesystemlogspathavailableinodes}

Количество доступных инодов на том разделе, где смонтирован путь логов ClickHouse.
### FilesystemLogsPathTotalBytes {#filesystemlogspathtotalbytes}

Размер раздела, на котором смонтирован путь логов ClickHouse, в байтах. Рекомендуется иметь не менее 10 ГБ для логов.
### FilesystemLogsPathTotalINodes {#filesystemlogspathtotalinodes}

Общее количество инодов на том разделе, где смонтирован путь логов ClickHouse.
### FilesystemLogsPathUsedBytes {#filesystemlogspathusedbytes}

Использованные байты на том разделе, где смонтирован путь логов ClickHouse.
### FilesystemLogsPathUsedINodes {#filesystemlogspathusedinodes}

Количество использованных инодов на том разделе, где смонтирован путь логов ClickHouse.
### FilesystemMainPathAvailableBytes {#filesystemmainpathavailablebytes}

Доступные байты на том разделе, где смонтирован основной путь ClickHouse.
### FilesystemMainPathAvailableINodes {#filesystemmainpathavailableinodes}

Количество доступных инодов на том разделе, где смонтирован основной путь ClickHouse. Если он близок к нулю, это указывает на неправильную конфигурацию, и вы получите сообщение 'нет места на устройстве', даже если диск не заполнен.
### FilesystemMainPathTotalBytes {#filesystemmainpathtotalbytes}

Размер раздела, на котором смонтирован основной путь ClickHouse, в байтах.
### FilesystemMainPathTotalINodes {#filesystemmainpathtotalinodes}

Общее количество инодов на том разделе, где смонтирован основной путь ClickHouse. Если он меньше 25 миллионов, это указывает на неправильную конфигурацию.
### FilesystemMainPathUsedBytes {#filesystemmainpathusedbytes}

Использованные байты на том разделе, где смонтирован основной путь ClickHouse.
### FilesystemMainPathUsedINodes {#filesystemmainpathusedinodes}

Количество использованных инодов на том разделе, где смонтирован основной путь ClickHouse. Это значение в основном соответствует количеству файлов.
### HTTPThreads {#httpthreads}

Количество потоков в сервере HTTP-интерфейса (без TLS).
### InterserverThreads {#interserverthreads}

Количество потоков в сервере протокола связи реплик (без TLS).
### Jitter {#jitter}

Разница во времени, когда поток для вычисления асинхронных метрик был запланирован на пробуждение и временем, когда он фактически пробудился. Косвенный показатель общей задержки системы и ее отзывчивости.
### LoadAverage*N* {#loadaveragen}

Общая нагрузка системы, усредненная с экспоненциальным сглаживанием за 1 минуту. Нагрузка представляет количество потоков во всех процессах (сущностях планирования ядра ОС), которые в данный момент работают на ЦП или ожидают ввода-вывода, или готовы к выполнению, но не планируются в данный момент. Это число включает все процессы, а не только clickhouse-server. Нормальное значение может быть больше количества ядер ЦП, если система перегружена, и многие процессы готовы к выполнению, но ожидают ЦП или ввода-вывода.
### MMapCacheCells {#mmapcachecells}

Количество файлов, открытых с помощью `mmap` (отображенные в памяти). Это используется для запросов с установленным параметром `local_filesystem_read_method` на `mmap`. Файлы, открытые с помощью `mmap`, хранятся в кэше, чтобы избежать затратных сбросов TLB.
### MarkCacheBytes {#markcachebytes}

Общий размер кэша меток в байтах.
### MarkCacheFiles {#markcachefiles}

Общее количество файлов меток, кэшированных в кэше меток.
### MaxPartCountForPartition {#maxpartcountforpartition}

Максимальное количество частей на партицию во всех партициях всех таблиц семейства MergeTree. Значения больше 300 указывают на неправильную настройку, перегрузку или массовую загрузку данных.
### MemoryCode {#memorycode}

Количество виртуальной памяти, отображенной для страниц машинного кода процесса сервера, в байтах.
### MemoryDataAndStack {#memorydataandstack}

Количество виртуальной памяти, отображенной для использования стека и для выделенной памяти, в байтах. Не уточняется, включает ли она стеки на каждую нить и большую часть выделенной памяти, которая выделяется с помощью системного вызова 'mmap'. Эта метрика существует только для полноты. Я рекомендую использовать метрику `MemoryResident` для мониторинга.
### MemoryResidentMax {#memoryresidentmax}

Максимальное количество физической памяти, используемой процессом сервера, в байтах.
### MemoryResident {#memoryresident}

Количество физической памяти, используемой процессом сервера, в байтах.
### MemoryShared {#memoryshared}

Количество памяти, используемой процессом сервера, которая также разделяется с другими процессами, в байтах. ClickHouse не использует разделяемую память, но какая-то память может быть помечена ОС как разделяемая по своим причинам. Эта метрика не имеет большого смысла для наблюдения, и она существует только для полноты.
### MemoryVirtual {#memoryvirtual}

Размер пространства виртуальных адресов, выделенного процессом сервера, в байтах. Размер пространства виртуальных адресов обычно значительно больше, чем потребление физической памяти, и не должен использоваться как оценка потребления памяти. Большие значения этой метрики совершенно нормальны и имеют только технический смысл.
### MySQLThreads {#mysqlthreads}

Количество потоков в сервере протокола совместимости MySQL.
### NetworkReceiveBytes_*name* {#networkreceivebytes_name}

Количество байт, полученных через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceiveDrop_*name* {#networkreceivedrop_name}

Количество байт, потерянных при получении через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceiveErrors_*name* {#networkreceiveerrors_name}

Количество ошибок, произошедших при получении через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceivePackets_*name* {#networkreceivepackets_name}

Количество сетевых пакетов, полученных через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendBytes_*name* {#networksendbytes_name}

Количество байт, отправленных через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendDrop_*name* {#networksenddrop_name}

Количество раз, когда пакет был потерян во время отправки через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendErrors_*name* {#networksenderrors_name}

Количество ошибок (например, повторная передача TCP), произошедших при отправке через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendPackets_*name* {#networksendpackets_name}

Количество сетевых пакетов, отправленных через сетевой интерфейс. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### NumberOfDatabases {#numberofdatabases}

Общее количество баз данных на сервере.
### NumberOfDetachedByUserParts {#numberofdetachedbyuserparts}

Общее количество частей, отделенных от таблиц MergeTree пользователями с помощью запроса `ALTER TABLE DETACH` (в отличие от неожиданных, поврежденных или проигнорированных частей). Сервер не учитывает отделенные части, их можно удалить.
### NumberOfDetachedParts {#numberofdetachedparts}

Общее количество частей, отделенных от таблиц MergeTree. Часть может быть отделена пользователем с помощью запроса `ALTER TABLE DETACH` или самим сервером, если часть повреждена, неожиданна или не нужна. Сервер не учитывает отделенные части, их можно удалить.
### NumberOfTables {#numberoftables}

Общее количество таблиц, суммированное по всем базам данных на сервере, за исключением баз данных, которые не могут содержать таблицы MergeTree. Исключенные механизмы баз данных - это те, которые генерируют набор таблиц на лету, такие как `Lazy`, `MySQL`, `PostgreSQL`, `SQLite`.
### OSContextSwitches {#oscontextswitches}

Количество переключений контекста, которые система претерпела на хост-машине. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSGuestNiceTime {#osguestnicetime}

Соотношение времени, затраченного на выполнение виртуального ЦП для гостевых операционных систем под управлением ядра Linux, когда гость был установлен на более высокий приоритет (см. `man procfs`). Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет отношения к ClickHouse, но все же существует для полноты. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSGuestNiceTimeCPU_*N* {#osguestnicetimecpu_n}

Соотношение времени, затраченного на выполнение виртуального ЦП для гостевых операционных систем под управлением ядра Linux, когда гость был установлен на более высокий приоритет (см. `man procfs`). Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет отношения к ClickHouse, но все же существует для полноты. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSGuestNiceTimeNormalized {#osguestnicetimenormalized}

Значение похоже на `OSGuestNiceTime`, но делится на количество ядер ЦП, чтобы измеряться в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения данной метрики по нескольким серверам в кластере, даже если количество ядер неоднородно, и при этом получать средний показатель использования ресурсов.
### OSGuestTime {#osguesttime}

Соотношение времени, затраченного на выполнение виртуального ЦП для гостевых операционных систем под управлением ядра Linux (см. `man procfs`). Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет отношения к ClickHouse, но все же существует для полноты. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSGuestTimeCPU_*N* {#osguesttimecpu_n}

Соотношение времени, затраченного на выполнение виртуального ЦП для гостевых операционных систем под управлением ядра Linux (см. `man procfs`). Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Эта метрика не имеет отношения к ClickHouse, но все же существует для полноты. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSGuestTimeNormalized {#osguesttimenormalized}

Значение похоже на `OSGuestTime`, но делится на количество ядер ЦП, чтобы измеряться в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения данной метрики по нескольким серверам в кластере, даже если количество ядер неоднородно, и при этом получать средний показатель использования ресурсов.
### OSIOWaitTime {#osiowaittime}

Соотношение времени, когда ядро ЦП не выполняло код, но при этом ядро ОС не запускало никаких других процессов на этом ЦП, так как процессы ожидали ввода-вывода. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSIOWaitTimeCPU_*N* {#osiowaittimecpu_n}

Соотношение времени, когда ядро ЦП не выполняло код, но при этом ядро ОС не запускало никаких других процессов на этом ЦП, так как процессы ожидали ввода-вывода. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSIOWaitTimeNormalized {#osiowaittimenormalized}

Значение похоже на `OSIOWaitTime`, но делится на количество ядер ЦП, чтобы измеряться в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения данной метрики по нескольким серверам в кластере, даже если количество ядер неоднородно, и при этом получать средний показатель использования ресурсов.
### OSIdleTime {#osidletime}

Соотношение времени, в течение которого ядро ЦП было бездействующим (даже не готовым к запуску процесса, ожидающего ввода-вывода) с точки зрения ядра ОС. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Это не включает время, когда ЦП использовался недостаточно из-за причин, не зависящих от ЦП (нагрузки на память, остановки конвейера, ошибки предсказания ветвления и т. д.). Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSIdleTimeCPU_*N* {#osidletimecpu_n}

Соотношение времени, в течение которого ядро ЦП было бездействующим (даже не готовым к запуску процесса, ожидающего ввода-вывода) с точки зрения ядра ОС. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Это не включает время, когда ЦП использовался недостаточно из-за причин, не зависящих от ЦП (нагрузки на память, остановки конвейера, ошибки предсказания ветвления и т. д.). Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSIdleTimeNormalized {#osidletimenormalized}

Значение похоже на `OSIdleTime`, но делится на количество ядер ЦП, чтобы измеряться в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения данной метрики по нескольким серверам в кластере, даже если количество ядер неоднородно, и при этом получать средний показатель использования ресурсов.
### OSInterrupts {#osinterrupts}

Количество прерываний на хост-машине. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSIrqTime {#osirqtime}

Соотношение времени, затраченного на выполнение запросов аппаратных прерываний на ЦП. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неправильную настройку оборудования или очень высокую сетевую нагрузку. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSIrqTimeCPU_*N* {#osirqtimecpu_n}

Соотношение времени, затраченного на выполнение запросов аппаратных прерываний на ЦП. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неправильную настройку оборудования или очень высокую сетевую нагрузку. Значение для одного ядра ЦП будет находиться в интервале [0..1]. Значение для всех ядер ЦП рассчитывается как сумма по ним [0..число ядер].
### OSIrqTimeNormalized {#osirqtimenormalized}

Значение похоже на `OSIrqTime`, но делится на количество ядер ЦП, чтобы измеряться в интервале [0..1], независимо от количества ядер. Это позволяет усреднять значения данной метрики по нескольким серверам в кластере, даже если количество ядер неоднородно, и при этом получать средний показатель использования ресурсов.
### OSMemoryAvailable {#osmemoryavailable}

Количество памяти, доступной для использования программами, в байтах. Это очень похоже на метрику `OSMemoryFreePlusCached`. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryBuffers {#osmemorybuffers}

Количество памяти, используемой буферами ядра ОС, в байтах. Это обычно должно быть небольшим значением, и большие значения могут указывать на неправильную настройку ОС. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryCached {#osmemorycached}

Количество памяти, используемой кэшем страниц ОС, в байтах. Обычно почти вся доступная память используется кэшем страниц ОС - высокие значения этой метрики нормальны и ожидаемы. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryFreePlusCached {#osmemoryfreepluscached}

Количество свободной памяти плюс память кэша страниц ОС на хост-системе, в байтах. Эта память доступна для использования программами. Значение должно быть очень похоже на `OSMemoryAvailable`. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server.

### OSMemoryFreeWithoutCached {#osmemoryfreewithoutcached}

Объем свободной памяти на хост-системе в байтах. Это значение не включает память, используемую памятью кеша страниц ОС, в байтах. Память кеша страниц также доступна для использования программами, поэтому значение этой метрики может быть запутанным. Вместо этого смотрите метрику `OSMemoryAvailable`. Для удобства мы также предоставляем метрику `OSMemoryFreePlusCached`, которая должна быть похожа на OSMemoryAvailable. Смотрите также https://www.linuxatemyram.com/. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server.
### OSMemoryTotal {#osmemorytotal}

Общее количество памяти на хост-системе в байтах.
### OSNiceTime {#osnicetime}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства с более высоким приоритетом. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSNiceTimeCPU_*N* {#osnicetimecpu_n}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства с более высоким приоритетом. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSNiceTimeNormalized {#osnicetimenormalized}

Значение похоже на `OSNiceTime`, но делится на количество ядер CPU, чтобы измеряться в интервале [0..1], независимо от числа ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неоднородное, и все равно получать метрику среднему использованию ресурсов.
### OSOpenFiles {#osopenfiles}

Общее количество открытых файлов на хост-машине. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server.
### OSProcessesBlocked {#osprocessesblocked}

Количество потоков, заблокированных в ожидании завершения ввода-вывода (`man procfs`). Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server.
### OSProcessesCreated {#osprocessescreated}

Количество созданных процессов. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server.
### OSProcessesRunning {#osprocessesrunning}

Количество исполняемых (работающих или готовых к выполнению) потоков операционной системой. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server.
### OSSoftIrqTime {#ossoftirqtime}

Соотношение времени, потраченного на выполнение запросов программных прерываний на CPU. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неэффективное программное обеспечение, работающее на системе. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSSoftIrqTimeCPU_*N* {#ossoftirqtimecpu_n}

Соотношение времени, потраченного на выполнение запросов программных прерываний на CPU. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Высокое значение этой метрики может указывать на неэффективное программное обеспечение, работающее на системе. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSSoftIrqTimeNormalized {#ossoftirqtimenormalized}

Значение похоже на `OSSoftIrqTime`, но делится на количество ядер CPU, чтобы измеряться в интервале [0..1] независимо от числа ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неоднородное, и все равно получать метрику среднему использованию ресурсов.
### OSStealTime {#osstealtime}

Соотношение времени, проведенного в других операционных системах CPU при работе в виртуализированной среде. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Не все виртуализированные среды предоставляют эту метрику, и большинство из них этого не делают. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSStealTimeCPU_*N* {#osstealtimecpu_n}

Соотношение времени, проведенного в других операционных системах CPU при работе в виртуализированной среде. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Не все виртуализированные среды предоставляют эту метрику, и большинство из них этого не делают. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSStealTimeNormalized {#osstealtimenormalized}

Значение похоже на `OSStealTime`, но делится на количество ядер CPU, чтобы измеряться в интервале [0..1] независимо от числа ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неоднородное, и все равно получать метрику среднему использованию ресурсов.
### OSSystemTime {#ossystemtime}

Соотношение времени, в течение которого ядро CPU выполняло код ядра ОС (системный код). Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSSystemTimeCPU_*N* {#ossystemtimecpu_n}

Соотношение времени, в течение которого ядро CPU выполняло код ядра ОС (системный код). Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSSystemTimeNormalized {#ossystemtimenormalized}

Значение похоже на `OSSystemTime`, но делится на количество ядер CPU, чтобы измеряться в интервале [0..1] независимо от числа ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неоднородное, и все равно получать метрику среднему использованию ресурсов.
### OSThreadsRunnable {#osthreadsrunnable}

Общее количество «выполняемых» потоков, как это видит планировщик ядра ОС.
### OSThreadsTotal {#osthreadstotal}

Общее количество потоков, как это видит планировщик ядра ОС.
### OSUptime {#osuptime}

Время работы хост-сервера (машины, на которой работает ClickHouse) в секундах.
### OSUserTime {#osusertime}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Это также включает время, когда CPU был недозагружен по причинам, связанным с его внутренними процессами (загрузки памяти, зависания конвейера, ошибки предсказания ветвлений, работа другого ядра SMT). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSUserTimeCPU_*N* {#osusertimecpu_n}

Соотношение времени, в течение которого ядро CPU выполняло код пользовательского пространства. Это метрика системного уровня, которая включает все процессы на хост-машине, а не только clickhouse-server. Это также включает время, когда CPU был недозагружен по причинам, связанным с его внутренними процессами (загрузки памяти, зависания конвейера, ошибки предсказания ветвлений, работа другого ядра SMT). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU вычисляется как сумма по ним [0..число ядер].
### OSUserTimeNormalized {#osusertimenormalized}

Значение похоже на `OSUserTime`, но делится на количество ядер CPU, чтобы измеряться в интервале [0..1] независимо от числа ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неоднородное, и все равно получать метрику среднему использованию ресурсов.
### PostgreSQLThreads {#postgresqlthreads}

Количество потоков в сервере протокола совместимости с PostgreSQL.
### QueryCacheBytes {#querycachebytes}

Общий размер кеша запросов в байтах.
### QueryCacheEntries {#querycacheentries}

Общее количество записей в кеше запросов.
### ReplicasMaxAbsoluteDelay {#replicasmaxabsolutedelay}

Максимальная разница в секундах между самой свежей реплицированной частью и самой свежей частью данных, которая еще должна быть реплицирована, по распределенным таблицам. Очень высокое значение указывает на реплику без данных.
### ReplicasMaxInsertsInQueue {#replicasmaxinsertsinqueue}

Максимальное количество операций INSERT в очереди (еще не реплицированы) по распределенным таблицам.
### ReplicasMaxMergesInQueue {#replicasmaxmergesinqueue}

Максимальное количество операций слияния в очереди (еще не применены) по распределенным таблицам.
### ReplicasMaxQueueSize {#replicasmaxqueuesize}

Максимальный размер очереди (в количестве операций, таких как получение, слияние) по распределенным таблицам.
### ReplicasMaxRelativeDelay {#replicasmaxrelativedelay}

Максимальная разница между задержкой реплики и задержкой самой актуальной реплики той же таблицы по распределенным таблицам.
### ReplicasSumInsertsInQueue {#replicassuminsertsinqueue}

Сумма операций INSERT в очереди (еще не реплицированы) по распределенным таблицам.
### ReplicasSumMergesInQueue {#replicassummergesinqueue}

Сумма операций слияния в очереди (еще не применены) по распределенным таблицам.
### ReplicasSumQueueSize {#replicassumqueuesize}

Суммарный размер очереди (в количестве операций, таких как получение, слияние) по распределенным таблицам.
### TCPThreads {#tcpthreads}

Количество потоков в сервере протокола TCP (без TLS).
### Temperature_*N* {#temperature_n}

Температура соответствующего устройства в ℃. Датчик может возвращать нереалистичное значение. Источник: `/sys/class/thermal`
### Temperature_*name* {#temperature_name}

Температура, сообщаемая соответствующим монитором оборудования и соответствующим датчиком в ℃. Датчик может возвращать нереалистичное значение. Источник: `/sys/class/hwmon`
### TotalBytesOfMergeTreeTables {#totalbytesofmergetreetables}

Общее количество байт (сжатых, включая данные и индексы), хранящихся во всех таблицах семейства MergeTree.
### TotalPartsOfMergeTreeTables {#totalpartsofmergetreetables}

Общее количество частей данных во всех таблицах семейства MergeTree. Числа больше 10 000 негативно скажутся на времени запуска сервера и могут указывать на неразумный выбор ключа партиции.
### TotalPrimaryKeyBytesInMemory {#totalprimarykeybytesinmemory}

Общее количество памяти (в байтах), используемое значениями первичного ключа (учитывает только активные части).
### TotalPrimaryKeyBytesInMemoryAllocated {#totalprimarykeybytesinmemoryallocated}

Общее количество памяти (в байтах), зарезервированной для значений первичного ключа (учитывает только активные части).
### TotalRowsOfMergeTreeTables {#totalrowsofmergetreetables}

Общее количество строк (записей), хранящихся во всех таблицах семейства MergeTree.
### UncompressedCacheBytes {#uncompressedcachebytes}

Общий размер несжатого кеша в байтах. Несжатый кеш обычно не улучшает производительность и следует в основном избегать.
### UncompressedCacheCells {#uncompressedcachecells}

Общее количество записей в несжатом кеше. Каждая запись представляет собой распакованный блок данных. Несжатый кеш обычно не улучшает производительность и следует в основном избегать.
### Uptime {#uptime}

Время работы сервера в секундах. Оно включает время, затраченное на инициализацию сервера перед принятием соединений.
### jemalloc.active {#jemallocactive}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.allocated {#jemallocallocated}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.arenas.all.dirty_purged {#jemallocarenasalldirty_purged}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.arenas.all.muzzy_purged {#jemallocarenasallmuzzy_purged}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.arenas.all.pactive {#jemallocarenasallpactive}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.arenas.all.pdirty {#jemallocarenasallpdirty}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.arenas.all.pmuzzy {#jemallocarenasallpmuzzy}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.background_thread.num_runs {#jemallocbackground_threadnum_runs}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.background_thread.num_threads {#jemallocbackground_threadnum_threads}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.background_thread.run_intervals {#jemallocbackground_threadrun_intervals}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.epoch {#jemallocepoch}

Внутренний инкрементальный номер обновления статистики jemalloc (аллокатор памяти Джейсона Эванса), используемый во всех других метриках `jemalloc`.
### jemalloc.mapped {#jemallocmapped}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.metadata {#jemallocmetadata}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.metadata_thp {#jemallocmetadata_thp}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.resident {#jemallocresident}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.retained {#jemallocretained}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html
### jemalloc.prof.active {#jemallocprofactive}

Внутренняя метрика низкоуровневого альлокатора памяти (jemalloc). Смотрите https://jemalloc.net/jemalloc.3.html

**Смотрите также**

- [Мониторинг](../../operations/monitoring.md) — Основные концепции мониторинга ClickHouse.
- [system.metrics](/operations/system-tables/metrics) — Содержит мгновенно рассчитанные метрики.
- [system.events](/operations/system-tables/events) — Содержит ряд произошедших событий.
- [system.metric_log](/operations/system-tables/metric_log) — Содержит историю значений метрик из таблиц `system.metrics` и `system.events`.
```
