---
slug: '/operations/system-tables/asynchronous_metrics'
description: 'Системная таблица, содержащая метрики, которые рассчитываются периодически'
title: system.asynchronous_metrics
keywords: ['системная таблица', 'asynchronous_metrics']
doc_type: reference
---
import SystemTableCloud from '@site/i18n/ru/docusaurus-plugin-content-docs/current/_snippets/_system_table_cloud.md';


# system.asynchronous_metrics

<SystemTableCloud/>

Содержит метрики, которые рассчитываются периодически в фоновом режиме. Например, объем используемой оперативной памяти.

Столбцы:

- `metric` ([String](../../sql-reference/data-types/string.md)) — Название метрики.
- `value` ([Float64](../../sql-reference/data-types/float.md)) — Значение метрики.
- `description` ([String](../../sql-reference/data-types/string.md)) — Описание метрики.

**Пример**

```sql
SELECT * FROM system.asynchronous_metrics LIMIT 10
```

```text
┌─metric──────────────────────────────────┬──────value─┬─description────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ AsynchronousMetricsCalculationTimeSpent │ 0.00179053 │ Time in seconds spent for calculation of asynchronous metrics (this is the overhead of asynchronous metrics).                                                                                                                                              │
│ NumberOfDetachedByUserParts             │          0 │ The total number of parts detached from MergeTree tables by users with the `ALTER TABLE DETACH` query (as opposed to unexpected, broken or ignored parts). The server does not care about detached parts and they can be removed.                          │
│ NumberOfDetachedParts                   │          0 │ The total number of parts detached from MergeTree tables. A part can be detached by a user with the `ALTER TABLE DETACH` query or by the server itself it the part is broken, unexpected or unneeded. The server does not care about detached parts and they can be removed. │
│ TotalRowsOfMergeTreeTables              │    2781309 │ Total amount of rows (records) stored in all tables of MergeTree family.                                                                                                                                                                                   │
│ TotalBytesOfMergeTreeTables             │    7741926 │ Total amount of bytes (compressed, including data and indices) stored in all tables of MergeTree family.                                                                                                                                                   │
│ NumberOfTables                          │         93 │ Total number of tables summed across the databases on the server, excluding the databases that cannot contain MergeTree tables. The excluded database engines are those who generate the set of tables on the fly, like `Lazy`, `MySQL`, `PostgreSQL`, `SQlite`. │
│ NumberOfDatabases                       │          6 │ Total number of databases on the server.                                                                                                                                                                                                                   │
│ MaxPartCountForPartition                │          6 │ Maximum number of parts per partition across all partitions of all tables of MergeTree family. Values larger than 300 indicates misconfiguration, overload, or massive data loading.                                                                       │
│ ReplicasSumMergesInQueue                │          0 │ Sum of merge operations in the queue (still to be applied) across Replicated tables.                                                                                                                                                                       │
│ ReplicasSumInsertsInQueue               │          0 │ Sum of INSERT operations in the queue (still to be replicated) across Replicated tables.                                                                                                                                                                   │
└─────────────────────────────────────────┴────────────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

<!--- В отличие от system.events и system.metrics, асинхронные метрики не собираются в простом списке в исходном коде - они 
      смешаны с логикой в src/Interpreters/ServerAsynchronousMetrics.cpp. 
      Перечисляем их здесь явно для удобства читателя. --->
## Описания метрик {#metric-descriptions}
### AsynchronousHeavyMetricsCalculationTimeSpent {#asynchronousheavymetricscalculationtimespent}

Время в секундах, затраченное на расчет асинхронных тяжелых (связанных с таблицами) метрик (это накладные расходы асинхронных метрик).
### AsynchronousHeavyMetricsUpdateInterval {#asynchronousheavymetricsupdateinterval}

Интервал обновления тяжелых (связанных с таблицами) метрик.
### AsynchronousMetricsCalculationTimeSpent {#asynchronousmetricscalculationtimespent}

Время в секундах, затраченное на расчет асинхронных метрик (это накладные расходы асинхронных метрик).
### AsynchronousMetricsUpdateInterval {#asynchronousmetricsupdateinterval}

Интервал обновления метрик.
### BlockActiveTime_*name* {#blockactivetime_name}

Время в секундах, в течение которого блоку устройства были поставлены IO-запросы в очередь. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardBytes_*name* {#blockdiscardbytes_name}

Количество удаленных байтов на блочном устройстве. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами на системе. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardMerges_*name* {#blockdiscardmerges_name}

Количество операций удаления, запрошенных с блочного устройства и объединенных вместе планировщиком IO ОС. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами на системе. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardOps_*name* {#blockdiscardops_name}

Количество операций удаления, запрошенных с блочного устройства. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами на системе. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockDiscardTime_*name* {#blockdiscardtime_name}

Время в секундах, затраченное на операции удаления, запрошенные с блочного устройства, суммированное по всем операциям. Эти операции актуальны для SSD. Операции удаления не используются ClickHouse, но могут использоваться другими процессами на системе. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockInFlightOps_*name* {#blockinflightops_name}

Это значение подсчитывает количество IO-запросов, которые были выданы драйверу устройства, но еще не завершились. Оно не включает IO-запросы, которые находятся в очереди, но еще не были выданы драйверу устройства. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockQueueTime_*name* {#blockqueuetime_name}

Это значение подсчитывает количество миллисекунд, которые IO-запросы ожидали на этом блочном устройстве. Если несколько IO-запросов ожидают, это значение будет увеличиваться как произведение количества миллисекунд на количество ожидающих запросов. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadBytes_*name* {#blockreadbytes_name}

Количество байтов, прочитанных с блочного устройства. Оно может быть ниже, чем количество байтов, прочитанных из файловой системы, из-за использования кэша страниц ОС, который экономит IO. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadMerges_*name* {#blockreadmerges_name}

Количество операций чтения, запрошенных с блочного устройства и объединенных вместе планировщиком IO ОС. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadOps_*name* {#blockreadops_name}

Количество операций чтения, запрошенных с блочного устройства. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockReadTime_*name* {#blockreadtime_name}

Время в секундах, затраченное на операции чтения, запрошенные с блочного устройства, суммированное по всем операциям. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteBytes_*name* {#blockwritebytes_name}

Количество байтов, записанных в блочное устройство. Оно может быть ниже, чем количество байтов, записанных в файловую систему, из-за использования кэша страниц ОС, который экономит IO. Запись в блочное устройство может происходить позже, чем соответствующая запись в файловую систему из-за кэширования записи. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteMerges_*name* {#blockwritemerges_name}

Количество операций записи, запрошенных с блочного устройства и объединенных вместе планировщиком IO ОС. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteOps_*name* {#blockwriteops_name}

Количество операций записи, запрошенных с блочного устройства. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### BlockWriteTime_*name* {#blockwritetime_name}

Время в секундах, затраченное на операции записи, запрошенные с блочного устройства, суммированное по всем операциям. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server. Источник: `/sys/block`. Смотрите https://www.kernel.org/doc/Documentation/block/stat.txt
### CPUFrequencyMHz_*name* {#cpufrequencymhz_name}

Текущая частота CPU, в МГц. Большинство современных процессоров динамически регулируют частоту для экономии энергии и Turbo Boost.
### DictionaryMaxUpdateDelay {#dictionarymaxlastsuccessfulupdatetime}

Максимальная задержка (в секундах) обновления словаря.
### DictionaryTotalFailedUpdates {#dictionaryloadfailed}

Количество ошибок с момента последней успешной загрузки во всех словарях.
### DiskAvailable_*name* {#diskavailable_name}

Доступные байты на диске (виртуальная файловая система). Удаленные файловые системы могут показывать большое значение, например 16 EiB.
### DiskTotal_*name* {#disktotal_name}

Общий размер в байтах диска (виртуальная файловая система). Удаленные файловые системы могут показывать большое значение, например 16 EiB.
### DiskUnreserved_*name* {#diskunreserved_name}

Доступные байты на диске (виртуальная файловая система) без резервирования для слияний, выборок и перемещений. Удаленные файловые системы могут показывать большое значение, например 16 EiB.
### DiskUsed_*name* {#diskused_name}

Использованные байты на диске (виртуальная файловая система). Удаленные файловые системы не всегда предоставляют эту информацию.
### FilesystemCacheBytes {#filesystemcachebytes}

Общее количество байтов в виртуальной файловой системе `cache`. Этот кэш хранится на диске.
### FilesystemCacheFiles {#filesystemcachefiles}

Общее количество сегментов файлов в кэше виртуальной файловой системы `cache`. Этот кэш хранится на диске.
### FilesystemLogsPathAvailableBytes {#filesystemlogspathavailablebytes}

Доступные байты на том разделе, где монтируется путь логов ClickHouse. Если это значение приближается к нулю, вам следует настроить ротацию логов в файле конфигурации.
### FilesystemLogsPathAvailableINodes {#filesystemlogspathavailableinodes}

Количество доступных inodes на том разделе, где монтируется путь логов ClickHouse.
### FilesystemLogsPathTotalBytes {#filesystemlogspathtotalbytes}

Размер раздела, на котором монтируется путь логов ClickHouse, в байтах. Рекомендуется иметь как минимум 10 ГБ для логов.
### FilesystemLogsPathTotalINodes {#filesystemlogspathtotalinodes}

Общее количество inodes на том разделе, где монтируется путь логов ClickHouse.
### FilesystemLogsPathUsedBytes {#filesystemlogspathusedbytes}

Использованные байты на том разделе, где монтируется путь логов ClickHouse.
### FilesystemLogsPathUsedINodes {#filesystemlogspathusedinodes}

Количество использованных inodes на том разделе, где монтируется путь логов ClickHouse.
### FilesystemMainPathAvailableBytes {#filesystemmainpathavailablebytes}

Доступные байты на том разделе, где монтируется основной путь ClickHouse.
### FilesystemMainPathAvailableINodes {#filesystemmainpathavailableinodes}

Количество доступных inodes на том разделе, где монтируется основной путь ClickHouse. Если оно близко к нулю, это указывает на неправильную конфигурацию, и вы получите 'нет места на устройстве', даже когда диск не полон.
### FilesystemMainPathTotalBytes {#filesystemmainpathtotalbytes}

Размер раздела, на котором монтируется основной путь ClickHouse, в байтах.
### FilesystemMainPathTotalINodes {#filesystemmainpathtotalinodes}

Общее количество inodes на том разделе, где монтируется основной путь ClickHouse. Если их меньше 25 миллионов, это указывает на неправильную конфигурацию.
### FilesystemMainPathUsedBytes {#filesystemmainpathusedbytes}

Использованные байты на том разделе, где монтируется основной путь ClickHouse.
### FilesystemMainPathUsedINodes {#filesystemmainpathusedinodes}

Количество использованных inodes на том разделе, где монтируется основной путь ClickHouse. Это значение в основном соответствует количеству файлов.
### HTTPThreads {#httpthreads}

Количество потоков в сервере HTTP интерфейса (без TLS).
### InterserverThreads {#interserverthreads}

Количество потоков в сервере протокола связи реплик (без TLS).
### Jitter {#jitter}

Разница во времени, когда поток для расчета асинхронных метрик был запланирован на пробуждение, и временем, когда он фактически был пробужден. Прокси-индикатор общей задержки и отзывчивости системы.
### LoadAverage*N* {#loadaveragen}

Общая нагрузка системы, усредненная с экспоненциальным сглаживанием за 1 минуту. Нагрузка представляет собой количество потоков по всем процессам (планирующим единицам ядра ОС), которые в данный момент выполняются на CPU или ожидают IO, или готовы выполнять, но в данный момент времени не расписаны. Это число включает все процессы, а не только clickhouse-server. Число может превышать количество ядер CPU, если система перегружена и многие процессы готовы к выполнению, но ждут CPU или IO.
### MaxPartCountForPartition {#maxpartcountforpartition}

Максимальное количество частей на партицию во всех партициях всех таблиц семейства MergeTree. Значения более 300 указывают на неправильную конфигурацию, перегрузку или массовую загрузку данных.
### MemoryCode {#memorycode}

Количество виртуальной памяти, отображенной для страниц машинного кода серверного процесса, в байтах.
### MemoryDataAndStack {#memorydataandstack}

Количество виртуальной памяти, отображенной для использования стека и для выделенной памяти, в байтах. Не уточняется, включает ли она стеки на поток и большую часть выделенной памяти, которая выделяется с помощью системного вызова 'mmap'. Эта метрика существует только для полноты. Я рекомендую использовать метрику `MemoryResident` для мониторинга.
### MemoryResidentMax {#memoryresidentmax}

Максимальное количество физической памяти, используемой серверным процессом, в байтах.
### MemoryResident {#memoryresident}

Количество физической памяти, используемой серверным процессом, в байтах.
### MemoryShared {#memoryshared}

Количество памяти, используемой серверным процессом, которая также используется другими процессами, в байтах. ClickHouse не использует общую память, но некоторая память может быть обозначена ОС как общая по своим причинам. Эта метрика не имеет большого смысла для наблюдения и существует только для полноты.
### MemoryVirtual {#memoryvirtual}

Размер виртуального адресного пространства, выделенного серверным процессом, в байтах. Размер виртуального адресного пространства обычно значительно больше, чем потребление физической памяти, и не должен использоваться как оценка для потребления памяти. Большие значения этой метрики совершенно нормальны и имеют только техническое значение.
### MySQLThreads {#mysqlthreads}

Количество потоков в сервере протокола совместимости MySQL.
### NetworkReceiveBytes_*name* {#networkreceivebytes_name}

Количество байтов, полученных через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceiveDrop_*name* {#networkreceivedrop_name}

Количество байтов, которые были отброшены, когда пакет был получен через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceiveErrors_*name* {#networkreceiveerrors_name}

Количество ошибок, произошедших при получении через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkReceivePackets_*name* {#networkreceivepackets_name}

Количество сетевых пакетов, полученных через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendBytes_*name* {#networksendbytes_name}

Количество байтов, отправленных через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendDrop_*name* {#networksenddrop_name}

Количество раз, когда пакет был отброшен при отправке через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendErrors_*name* {#networksenderrors_name}

Количество раз, когда произошла ошибка (например, retransmit TCP) при отправке через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NetworkSendPackets_*name* {#networksendpackets_name}

Количество сетевых пакетов, отправленных через сетевой интерфейс. Это метрика для всей системы, которая включает все процессы на хост-машине, а не только clickhouse-server.
### NumberOfDatabases {#numberofdatabases}

Общее количество баз данных на сервере.
### NumberOfDetachedByUserParts {#numberofdetachedbyuserparts}

Общее количество частей, отделенных от таблиц MergeTree пользователями с помощью запроса `ALTER TABLE DETACH` (в отличие от неожиданных, сломанных или игнорируемых частей). Сервер не заботится об отделенных частях, и их можно удалить.
### NumberOfDetachedParts {#numberofdetachedparts}

Общее количество частей, отделенных от таблиц MergeTree. Часть может быть отделена пользователем с помощью запроса `ALTER TABLE DETACH` или самим сервером, если часть сломана, неожиданна или не нужна. Сервер не заботится об отделенных частях, и их можно удалить.
### NumberOfTables {#numberoftables}

Общее количество таблиц, суммированное по базам данных на сервере, исключая базы данных, которые не могут содержать таблицы MergeTree. Исключенные движки баз данных - это те, которые генерируют набор таблиц на лету, такие как `Lazy`, `MySQL`, `PostgreSQL`, `SQlite`.
### OSContextSwitches {#oscontextswitches}

Количество переключений контекста, которые система претерпела на хост-машине. Эта метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSGuestNiceTime {#osguestnicetime}

Соотношение времени, затраченного на выполнение виртуального CPU для гостевых операционных систем под управлением ядра Linux, когда гостевое ОС было установлено на более высокий приоритет (Смотрите `man procfs`). Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все же существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSGuestNiceTimeCPU_*N* {#osguestnicetimecpu_n}

Соотношение времени, затраченного на выполнение виртуального CPU для гостевых операционных систем под управлением ядра Linux, когда гостевое ОС было установлено на более высокий приоритет (Смотрите `man procfs`). Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все еще существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSGuestNiceTimeNormalized {#osguestnicetimenormalized}

Это значение аналогично `OSGuestNiceTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер неравномерное, и все же получить среднюю метрику использования ресурсов.
### OSGuestTime {#osguesttime}

Соотношение времени, затраченного на выполнение виртуального CPU для гостевых операционных систем под управлением ядра Linux (Смотрите `man procfs`). Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все еще существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSGuestTimeCPU_*N* {#osguesttimecpu_n}

Соотношение времени, затраченного на выполнение виртуального CPU для гостевых операционных систем под управлением ядра Linux (Смотрите `man procfs`). Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Эта метрика не имеет значения для ClickHouse, но все еще существует для полноты. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSGuestTimeNormalized {#osguesttimenormalized}

Это значение аналогично `OSGuestTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер неравномерное, и все же получить среднюю метрику использования ресурсов.
### OSIOWaitTime {#osiowaittime}

Соотношение времени, когда ядро CPU не запускало код, но когда ядро ОС не запускало никакой другой процесс на этом CPU, так как процессы ожидали IO. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSIOWaitTimeCPU_*N* {#osiowaittimecpu_n}

Соотношение времени, когда ядро CPU не запускало код, но когда ядро ОС не запускало никакой другой процесс на этом CPU, так как процессы ожидали IO. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSIOWaitTimeNormalized {#osiowaittimenormalized}

Это значение аналогично `OSIOWaitTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер неравномерное, и все же получить среднюю метрику использования ресурсов.
### OSIdleTime {#osidletime}

Соотношение времени, когда ядро CPU было бездействующим (даже не готовым к запуску процесса, ожидающего IO) с точки зрения ядра ОС. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Это не включает время, когда CPU был недогружен по причинам, внутренним для CPU (нагрузки памяти, задержки конвейера, ошибки предсказания ветвлений, работа другого SMT-ядер). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSIdleTimeCPU_*N* {#osidletimecpu_n}

Соотношение времени, когда ядро CPU было бездействующим (даже не готовым к запуску процесса, ожидающего IO) с точки зрения ядра ОС. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Это не включает время, когда CPU был недогружен по причинам, внутренним для CPU (нагрузки памяти, задержки конвейера, ошибки предсказания ветвлений, работа другого SMT-ядер). Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSIdleTimeNormalized {#osidletimenormalized}

Это значение аналогично `OSIdleTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер неравномерное, и все же получить среднюю метрику использования ресурсов.
### OSInterrupts {#osinterrupts}

Количество прерываний на хост-машине. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSIrqTime {#osirqtime}

Соотношение времени, затраченного на выполнение запросов аппаратных прерываний на CPU. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Высокое число этой метрики может указывать на неправильную конфигурацию оборудования или очень высокую нагрузку на сеть. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSIrqTimeCPU_*N* {#osirqtimecpu_n}

Соотношение времени, затраченного на выполнение запросов аппаратных прерываний на CPU. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Высокое число этой метрики может указывать на неправильную конфигурацию оборудования или очень высокую нагрузку на сеть. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSIrqTimeNormalized {#osirqtimenormalized}

Это значение аналогично `OSIrqTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер неравномерное, и все же получить среднюю метрику использования ресурсов.
### OSMemoryAvailable {#osmemoryavailable}

Количество памяти, доступной для использования программами, в байтах. Это очень похоже на метрику `OSMemoryFreePlusCached`. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSMemoryBuffers {#osmemorybuffers}

Количество памяти, используемой буферами ядра ОС, в байтах. Обычно оно небольшое, и большие значения могут указывать на неправильную конфигурацию ОС. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSMemoryCached {#osmemorycached}

Количество памяти, используемой кэшем страниц ОС, в байтах. Обычно почти вся доступная память используется кэшом страниц ОС - высокие значения этой метрики нормальны и ожидаемы. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSMemoryFreePlusCached {#osmemoryfreepluscached}

Количество свободной памяти плюс память кэша страниц ОС на хост-системе, в байтах. Эта память доступна для использования программами. Значение должно быть очень похоже на `OSMemoryAvailable`. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSMemoryFreeWithoutCached {#osmemoryfreewithoutcached}

Количество свободной памяти на хост-системе, в байтах. Это не включает память, используемую памятью кэша страниц ОС, в байтах. Память кэша страниц также доступна для использования программами, поэтому значение этой метрики может быть запутанным. Вместо этого смотрите метрику `OSMemoryAvailable`. Для удобства мы также предоставляем метрику `OSMemoryFreePlusCached`, которая должна быть несколько похожа на OSMemoryAvailable. Также смотрите https://www.linuxatemyram.com/. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSMemoryTotal {#osmemorytotal}

Общее количество памяти на хост-системе, в байтах.
### OSNiceTime {#osnicetime}

Соотношение времени, когда ядро CPU выполняло код пользовательского пространства с более высоким приоритетом. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSNiceTimeCPU_*N* {#osnicetimecpu_n}

Соотношение времени, когда ядро CPU выполняло код пользовательского пространства с более высоким приоритетом. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSNiceTimeNormalized {#osnicetimenormalized}

Это значение аналогично `OSNiceTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер неравномерное и все равно получать среднюю метрику использования ресурсов.
### OSOpenFiles {#osopenfiles}

Общее количество открытых файлов на хост-машине. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSProcessesBlocked {#osprocessesblocked}

Количество потоков, заблокированных в ожидании завершения I/O (`man procfs`). Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSProcessesCreated {#osprocessescreated}

Количество созданных процессов. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSProcessesRunning {#osprocessesrunning}

Количество выполняемых (работающих или готовых к выполнению) потоков операционной системой. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server.
### OSSoftIrqTime {#ossoftirqtime}

Соотношение времени, затраченного на выполнение программных запросов прерываний на CPU. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Высокое число этой метрики может указывать на неэффективное программное обеспечение, работающее в системе. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSSoftIrqTimeCPU_*N* {#ossoftirqtimecpu_n}

Соотношение времени, затраченного на выполнение программных запросов прерываний на CPU. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Высокое число этой метрики может указывать на неэффективное программное обеспечение, работающее в системе. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSSoftIrqTimeNormalized {#ossoftirqtimenormalized}

Это значение аналогично `OSSoftIrqTime`, но делится на количество ядер CPU, чтобы быть измеренным в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики по нескольким серверам в кластере, даже если количество ядер неравномерное и все равно получать среднюю метрику использования ресурсов.
### OSStealTime {#osstealtime}

Соотношение времени, затраченного другими операционными системами на CPU при работе в виртуализированной среде. Это метрика для всей системы, она включает все процессы на хост-машине, не только clickhouse-server. Не все виртуализированные среды представляют эту метрику, и большинство из них этого не делают. Значение для одного ядра CPU будет в интервале [0..1]. Значение для всех ядер CPU рассчитывается как сумма по ним [0..количество ядер].
### OSStealTimeCPU_*N* {#osstealtimecpu_n}

Соотношение времени, проведенного CPU в других операционных системах при работе в виртуализированной среде. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Не все виртуализированные среды предоставляют эту метрику, и большинство из них не делают этого. Значение для одного CPU-ядра будет в интервале [0..1]. Значение для всех CPU-ядер рассчитывается как сумма по ним [0..num cores].  
### OSStealTimeNormalized {#osstealtimenormalized}

Значение, аналогичное `OSStealTime`, но деленное на количество CPU-ядер, чтобы измеряться в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все равно получать среднюю метрику использования ресурсов.  
### OSSystemTime {#ossystemtime}

Соотношение времени, которое CPU-ядро выполняло код ядра ОС (системный код). Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного CPU-ядра будет в интервале [0..1]. Значение для всех CPU-ядер рассчитывается как сумма по ним [0..num cores].  
### OSSystemTimeCPU_*N* {#ossystemtimecpu_n}

Соотношение времени, которое CPU-ядро выполняло код ядра ОС (системный код). Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Значение для одного CPU-ядра будет в интервале [0..1]. Значение для всех CPU-ядер рассчитывается как сумма по ним [0..num cores].  
### OSSystemTimeNormalized {#ossystemtimenormalized}

Значение, аналогичное `OSSystemTime`, но деленное на количество CPU-ядер, чтобы измеряться в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все равно получать среднюю метрику использования ресурсов.  
### OSThreadsRunnable {#osthreadsrunnable}

Общее количество «работоспособных» потоков, как это видит планировщик ядра ОС.  
### OSThreadsTotal {#osthreadstotal}

Общее количество потоков, как это видит планировщик ядра ОС.  
### OSUptime {#osuptime}

Время работы хост-сервера (машины, на которой запущен ClickHouse) в секундах.  
### OSUserTime {#osusertime}

Соотношение времени, которое CPU-ядро выполняло код пользовательского пространства. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Это также включает время, когда CPU был недогружен по внутренним причинам (загрузки памяти, задержки конвейера, ошибки предсказания ветвления, работа другого SMT-ядра). Значение для одного CPU-ядра будет в интервале [0..1]. Значение для всех CPU-ядер рассчитывается как сумма по ним [0..num cores].  
### OSUserTimeCPU_*N* {#osusertimecpu_n}

Соотношение времени, которое CPU-ядро выполняло код пользовательского пространства. Это метрика системы в целом, она включает все процессы на хост-машине, а не только clickhouse-server. Это также включает время, когда CPU был недогружен по внутренним причинам (загрузки памяти, задержки конвейера, ошибки предсказания ветвления, работа другого SMT-ядра). Значение для одного CPU-ядра будет в интервале [0..1]. Значение для всех CPU-ядер рассчитывается как сумма по ним [0..num cores].  
### OSUserTimeNormalized {#osusertimenormalized}

Значение, аналогичное `OSUserTime`, но деленное на количество CPU-ядер, чтобы измеряться в интервале [0..1] независимо от количества ядер. Это позволяет усреднять значения этой метрики на нескольких серверах в кластере, даже если количество ядер неравномерно, и все равно получать среднюю метрику использования ресурсов.  
### PostgreSQLThreads {#postgresqlthreads}

Количество потоков в сервере протокола совместимости PostgreSQL.  
### ReplicasMaxAbsoluteDelay {#replicasmaxabsolutedelay}

Максимальная разница в секундах между самой свежей реплицированной частью и самой свежей частью данных, которая еще предстоит реплицироваться, по реплицируемым таблицам. Очень высокое значение указывает на реплику без данных.  
### ReplicasMaxInsertsInQueue {#replicasmaxinsertsinqueue}

Максимальное количество операций INSERT в очереди (еще предстоит реплицировать) по реплицируемым таблицам.  
### ReplicasMaxMergesInQueue {#replicasmaxmergesinqueue}

Максимальное количество операций слияния в очереди (еще предстоит применить) по реплицируемым таблицам.  
### ReplicasMaxQueueSize {#replicasmaxqueuesize}

Максимальный размер очереди (в количестве операций, таких как получение, слияние) по реплицируемым таблицам.  
### ReplicasMaxRelativeDelay {#replicasmaxrelativedelay}

Максимальная разница между задержкой реплики и задержкой самой актуальной реплики той же таблицы, по реплицируемым таблицам.  
### ReplicasSumInsertsInQueue {#replicassuminsertsinqueue}

Сумма операций INSERT в очереди (еще предстоит реплицировать) по реплицируемым таблицам.  
### ReplicasSumMergesInQueue {#replicassummergesinqueue}

Сумма операций слияния в очереди (еще предстоит применить) по реплицируемым таблицам.  
### ReplicasSumQueueSize {#replicassumqueuesize}

Сумма размера очереди (в количестве операций, таких как получение, слияние) по реплицируемым таблицам.  
### TCPThreads {#tcpthreads}

Количество потоков в сервере протокола TCP (без TLS).  
### Temperature_*N* {#temperature_n}

Температура соответствующего устройства в ℃. Датчик может возвращать нереалистичное значение. Источник: `/sys/class/thermal`  
### Temperature_*name* {#temperature_name}

Температура, сообщаемая соответствующим аппаратным монитором и соответствующим датчиком в ℃. Датчик может возвращать нереалистичное значение. Источник: `/sys/class/hwmon`  
### TotalBytesOfMergeTreeTables {#totalbytesofmergetreetables}

Общее количество байт (сжатых, включая данные и индексы), хранящихся во всех таблицах семейства MergeTree.  
### TotalPartsOfMergeTreeTables {#totalpartsofmergetreetables}

Общее количество частей данных во всех таблицах семейства MergeTree. Числа больше 10 000 отрицательно влияют на время запуска сервера, и это может указывать на неразумный выбор ключа партиционирования.  
### TotalPrimaryKeyBytesInMemory {#totalprimarykeybytesinmemory}

Общее количество памяти (в байтах), используемой значениями первичного ключа (учитываются только активные части).  
### TotalPrimaryKeyBytesInMemoryAllocated {#totalprimarykeybytesinmemoryallocated}

Общее количество памяти (в байтах), зарезервированной для значений первичного ключа (учитываются только активные части).  
### TotalRowsOfMergeTreeTables {#totalrowsofmergetreetables}

Общее количество строк (записей), хранящихся во всех таблицах семейства MergeTree.  
### Uptime {#uptime}

Время работы сервера в секундах. Включает время, затраченное на инициализацию сервера перед приемом соединений.  
### jemalloc.active {#jemallocactive}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.allocated {#jemallocallocated}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.arenas.all.dirty_purged {#jemallocarenasalldirty_purged}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.arenas.all.muzzy_purged {#jemallocarenasallmuzzy_purged}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.arenas.all.pactive {#jemallocarenasallpactive}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.arenas.all.pdirty {#jemallocarenasallpdirty}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.arenas.all.pmuzzy {#jemallocarenasallpmuzzy}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.background_thread.num_runs {#jemallocbackground_threadnum_runs}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.background_thread.num_threads {#jemallocbackground_threadnum_threads}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.background_thread.run_intervals {#jemallocbackground_threadrun_intervals}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.epoch {#jemallocepoch}

Внутренний номер инкрементального обновления статистики jemalloc (аллокатор памяти Джейсона Эванса), используемый во всех других метриках `jemalloc`.  
### jemalloc.mapped {#jemallocmapped}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.metadata {#jemallocmetadata}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.metadata_thp {#jemallocmetadata_thp}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.resident {#jemallocresident}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.retained {#jemallocretained}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  
### jemalloc.prof.active {#jemallocprofactive}

Внутренняя метрика низкоуровневого аллокатора памяти (jemalloc). См. https://jemalloc.net/jemalloc.3.html  

**Смотрите также**

- [Мониторинг](../../operations/monitoring.md) — Основные концепции мониторинга ClickHouse.
- [system.metrics](/operations/system-tables/metrics) — Содержит мгновенно рассчитанные метрики.
- [system.events](/operations/system-tables/events) — Содержит ряд произошедших событий.
- [system.metric_log](/operations/system-tables/metric_log) — Содержит историю значений метрик из таблиц `system.metrics` и `system.events`.