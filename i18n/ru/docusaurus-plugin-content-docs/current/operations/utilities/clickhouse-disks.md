---
description: 'Документация по ClickHouse-disks'
sidebar_label: 'clickhouse-disks'
sidebar_position: 59
slug: /operations/utilities/clickhouse-disks
title: 'ClickHouse-disks'
doc_type: 'reference'
---



# Clickhouse-disks

Утилита, предоставляющая операции с дисками ClickHouse, аналогичные операциям с файловой системой. Работает в интерактивном и неинтерактивном режимах.



## Общие параметры программы {#program-wide-options}

- `--config-file, -C` -- путь к конфигурационному файлу ClickHouse, по умолчанию `/etc/clickhouse-server/config.xml`.
- `--save-logs` -- записывать ход выполнения вызываемых команд в `/var/log/clickhouse-server/clickhouse-disks.log`.
- `--log-level` -- какой [тип](../server-configuration-parameters/settings#logger) событий записывать в журнал, по умолчанию `none`.
- `--disk` -- какой диск использовать для команд `mkdir, move, read, write, remove`. По умолчанию `default`.
- `--query, -q` -- отдельный запрос, который можно выполнить без запуска интерактивного режима
- `--help, -h` -- вывести все параметры и команды с описанием


## Отложенная инициализация {#lazy-initialization}

Все диски, доступные в конфигурации, инициализируются отложенно. Это означает, что соответствующий объект диска инициализируется только при использовании этого диска в какой-либо команде. Такой подход повышает надёжность утилиты и позволяет избежать обращения к дискам, которые описаны в конфигурации, но не используются пользователем и могут вызвать ошибку при инициализации. Однако должен существовать диск, который инициализируется при запуске clickhouse-disks. Этот диск указывается с помощью параметра `--disk` в командной строке (значение по умолчанию — `default`).


## Диски по умолчанию {#default-disks}

После запуска становятся доступны два диска, которые не указаны в конфигурации, но могут быть использованы для инициализации.

1. **Диск `local`**: Этот диск предназначен для имитации локальной файловой системы, из которой была запущена утилита `clickhouse-disks`. Его начальный путь соответствует каталогу, из которого был запущен `clickhouse-disks`, и он монтируется в корневой каталог файловой системы.

2. **Диск `default`**: Этот диск монтируется в локальную файловую систему в каталог, указанный параметром `clickhouse/path` в конфигурации (значение по умолчанию — `/var/lib/clickhouse`). Его начальный путь — `/`.


## Состояние clickhouse-disks {#clickhouse-disks-state}

Для каждого добавленного диска утилита сохраняет текущий каталог (как в обычной файловой системе). Пользователь может изменять текущий каталог и переключаться между дисками.

Состояние отображается в приглашении командной строки в формате "`disk_name`:`path_name`"


## Команды {#commands}

В этом файле документации все обязательные позиционные аргументы обозначаются как `<parameter>`, именованные аргументы — как `[--parameter value]`. Любой позиционный параметр может быть указан как именованный параметр с соответствующим именем.

- `cd (change-dir, change_dir) [--disk disk] <path>`
  Изменить текущую директорию на `path` на диске `disk` (по умолчанию используется текущий диск). Переключение диска не происходит.
- `copy (cp) [--disk-from disk_1] [--disk-to disk_2] <path-from> <path-to>`.
  Рекурсивно скопировать данные из `path-from` на диске `disk_1` (по умолчанию используется текущий диск (параметр `disk` в неинтерактивном режиме))
  в `path-to` на диске `disk_2` (по умолчанию используется текущий диск (параметр `disk` в неинтерактивном режиме)).
- `current_disk_with_path (current, current_disk, current_path)`
  Вывести текущее состояние в формате:
  `Disk: "current_disk" Path: "current path on current disk"`
- `help [<command>]`
  Вывести справочное сообщение о команде `command`. Если `command` не указана, вывести информацию обо всех командах.
- `move (mv) <path-from> <path-to>`.
  Переместить файл или директорию из `path-from` в `path-to` в пределах текущего диска.
- `remove (rm, delete) <path>`.
  Рекурсивно удалить `path` на текущем диске.
- `link (ln) <path-from> <path-to>`.
  Создать жёсткую ссылку из `path-from` в `path-to` на текущем диске.
- `list (ls) [--recursive] <path>`
  Вывести список файлов по пути `path` на текущем диске. По умолчанию нерекурсивно.
- `list-disks (list_disks, ls-disks, ls_disks)`.
  Вывести список имён дисков.
- `mkdir [--recursive] <path>` на текущем диске.
  Создать директорию. По умолчанию нерекурсивно.
- `read (r) <path-from> [--path-to path]`
  Прочитать файл из `path-from` в `path` (если не указан, используется `stdout`).
- `switch-disk [--path path] <disk>`
  Переключиться на диск `disk` по пути `path` (если `path` не указан, по умолчанию используется предыдущий путь на диске `disk`).
- `write (w) [--path-from path] <path-to>`.
  Записать файл из `path` (если `path` не указан, используется `stdin`, ввод завершается по Ctrl+D) в `path-to`.
