---
slug: '/operations/utilities/clickhouse-disks'
sidebar_label: clickhouse-disks
sidebar_position: 59
description: 'Документация для Clickhouse-disks'
title: Clickhouse-disks
doc_type: reference
---
# Clickhouse-disks

Утилита, предоставляющая файловые операции, похожие на операции с файловой системой, для дисков ClickHouse. Она может работать как в интерактивном, так и в неинтерактивном режимах.

## Опции на уровне программы {#program-wide-options}

* `--config-file, -C` -- путь к конфигурации ClickHouse, по умолчанию `/etc/clickhouse-server/config.xml`.
* `--save-logs` -- Логировать прогресс выполненных команд в `/var/log/clickhouse-server/clickhouse-disks.log`.
* `--log-level` -- Какой [тип](../server-configuration-parameters/settings#logger) событий логировать, по умолчанию `none`.
* `--disk` -- какой диск использовать для команд `mkdir, move, read, write, remove`. По умолчанию `default`.
* `--query, -q` -- один запрос, который может быть выполнен без запуска интерактивного режима.
* `--help, -h` -- вывести все опции и команды с описанием.

## Ленивая инициализация {#lazy-initialization}
Все диски, доступные в конфигурации, инициализируются лениво. Это значит, что соответствующий объект для диска инициализируется только тогда, когда этот диск используется в какой-либо команде. Это сделано для повышения стабильности утилиты и для предотвращения обращения к дискам, описанным в конфигурации, но не используемым пользователем, которые могут сработать с ошибкой при инициализации. Тем не менее, должен быть диск, который инициализируется при запуске clickhouse-disks. Этот диск указывается с помощью параметра `--disk` через командную строку (значение по умолчанию `default`).

## Дефолтные диски {#default-disks}
После запуска доступны два диска, которые не указаны в конфигурации, но могут быть инициализированы.

1. **Диск `local`**: Этот диск предназначен для имитации локальной файловой системы, из которой была запущена утилита `clickhouse-disks`. Его начальный путь — директория, из которой была запущена `clickhouse-disks`, и он примонтирован в корневую директорию файловой системы.

2. **Диск `default`**: Этот диск смонтирован в локальную файловую систему в директории, указанной параметром `clickhouse/path` в конфигурации (значение по умолчанию `/var/lib/clickhouse`). Его начальный путь установлен на `/`.

## Состояние Clickhouse-disks {#clickhouse-disks-state}
Для каждого добавленного диска утилита хранит текущую директорию (как в обычной файловой системе). Пользователь может изменять текущую директорию и переключаться между дисками.

Состояние отображается в подсказке "`disk_name`:`path_name`"

## Команды {#commands}

В этом документационном файле все обязательные позиционные аргументы обозначаются как `<parameter>`, именованные аргументы обозначаются как `[--parameter value]`. Все позиционные параметры могут быть указаны как именованный параметр с соответствующим именем.

* `cd (change-dir, change_dir) [--disk disk] <path>`
  Изменить директорию на путь `path` на диске `disk` (значение по умолчанию — текущий диск). Переключение диска не происходит.
* `copy (cp) [--disk-from disk_1] [--disk-to disk_2] <path-from> <path-to>`.
  Рекурсивно копировать данные с `path-from` на диске `disk_1` (значение по умолчанию — текущий диск (параметр `disk` в неинтерактивном режиме))
  на `path-to` на диске `disk_2` (значение по умолчанию — текущий диск (параметр `disk` в неинтерактивном режиме)).
* `current_disk_with_path (current, current_disk, current_path)`
  Вывести текущее состояние в формате:
    `Диск: "current_disk" Путь: "текущий путь на текущем диске"`
* `help [<command>]`
  Вывести сообщение справки о команде `command`. Если `command` не указана, вывести информацию о всех командах.
* `move (mv) <path-from> <path-to>`.
  Переместить файл или директорию с `path-from` на `path-to` в пределах текущего диска.
* `remove (rm, delete) <path>`.
  Удалить `path` рекурсивно на текущем диске.
* `link (ln) <path-from> <path-to>`.
  Создать жесткую ссылку с `path-from` на `path-to` на текущем диске.
* `list (ls) [--recursive] <path>`
  Перечислить файлы в `path` на текущем диске. По умолчанию нерекурсивно.
* `list-disks (list_disks, ls-disks, ls_disks)`.
  Перечислить имена дисков.
* `mkdir [--recursive] <path>` на текущем диске.
  Создать директорию. По умолчанию нерекурсивно.
* `read (r) <path-from> [--path-to path]`
  Прочитать файл с `path-from` в `path` (`stdout`, если не указан).
* `switch-disk [--path path] <disk>`
  Переключиться на диск `disk` на пути `path` (если `path` не указан, значение по умолчанию — предыдущий путь на диске `disk`).
* `write (w) [--path-from path] <path-to>`.
  Записать файл из `path` (`stdin`, если `path` не указан, ввод должен завершиться с помощью Ctrl+D) в `path-to`.