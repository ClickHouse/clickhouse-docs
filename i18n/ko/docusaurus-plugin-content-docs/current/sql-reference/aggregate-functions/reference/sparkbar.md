---
description: '`x` 값과 해당 값의 반복 횟수(출현 빈도) `y`를 기준으로, 구간 `[min_x, max_x]` 에 대한 빈도 히스토그램을 그리는 FUNCTION입니다.'
sidebar_label: 'sparkbar'
slug: /sql-reference/aggregate-functions/reference/sparkbar
title: 'sparkbar'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## sparkbar \{#sparkbar\}

도입 버전: v21.11

이 함수는 구간 `[min_x, max_x]`에서 값 `x`와 해당 값들의 반복 빈도 `y`에 대한 빈도 히스토그램을 그립니다.
같은 버킷에 속하는 모든 `x`의 반복 값은 평균이 계산되므로 데이터는 미리 집계되어 있어야 합니다.
음수인 반복 값은 무시됩니다.

구간이 지정되지 않으면 최소 `x`가 구간의 시작으로, 최대 `x`가 구간의 끝으로 사용됩니다.
구간이 지정된 경우 구간 밖의 값은 무시됩니다.

**구문**

```sql
sparkbar(buckets[, min_x, max_x])(x, y)
```

**별칭**: `sparkBar`

**매개변수**

* `buckets` — 세그먼트 수입니다. [`(U)Int*`](/sql-reference/data-types/int-uint)
* `min_x` — 선택 사항입니다. 구간의 시작값입니다. [`(U)Int*`](/sql-reference/data-types/int-uint) 또는 [`Float*`](/sql-reference/data-types/float) 또는 [`Decimal`](/sql-reference/data-types/decimal)
* `max_x` — 선택 사항입니다. 구간의 끝값입니다. [`(U)Int*`](/sql-reference/data-types/int-uint) 또는 [`Float*`](/sql-reference/data-types/float) 또는 [`Decimal`](/sql-reference/data-types/decimal)

**인수**

* `x` — 값을 담고 있는 필드입니다. [`const String`](/sql-reference/data-types/string)
* `y` — 값의 빈도를 나타내는 필드입니다. [`const String`](/sql-reference/data-types/string)

**반환 값**

빈도 히스토그램을 반환합니다. [`String`](/sql-reference/data-types/string)

**예시**

**구간을 지정하지 않는 경우**

```sql title=Query
CREATE TABLE spark_bar_data (`value` Int64, `event_date` Date) ENGINE = MergeTree ORDER BY event_date;

INSERT INTO spark_bar_data VALUES (1,'2020-01-01'), (3,'2020-01-02'), (4,'2020-01-02'), (-3,'2020-01-02'), (5,'2020-01-03'), (2,'2020-01-04'), (3,'2020-01-05'), (7,'2020-01-06'), (6,'2020-01-07'), (8,'2020-01-08'), (2,'2020-01-11');

SELECT sparkbar(9)(event_date, cnt) FROM (SELECT sum(value) AS cnt, event_date FROM spark_bar_data GROUP BY event_date);
```

```response title=Response
┌─sparkbar(9)(event_date, cnt)─┐
│ ▂▅▂▃▆█  ▂                    │
└──────────────────────────────┘
```

**간격 지정 사용**

```sql title=Query
SELECT sparkbar(9, toDate('2020-01-01'), toDate('2020-01-10'))(event_date, cnt) FROM (SELECT sum(value) AS cnt, event_date FROM spark_bar_data GROUP BY event_date);
```

```response title=Response
┌─sparkbar(9, toDate('2020-01-01'), toDate('2020-01-10'))(event_date, cnt)─┐
│ ▂▅▂▃▇▆█                                                                  │
└──────────────────────────────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
