---
description: '각 요소의 가중치를 고려한 선형 보간(linear interpolation)을 사용하여 수치 데이터 시퀀스의 분위수를 계산합니다.'
slug: /sql-reference/aggregate-functions/reference/quantileInterpolatedWeighted
title: 'quantileInterpolatedWeighted'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantileInterpolatedWeighted \{#quantileInterpolatedWeighted\}

도입 버전: v23.1

각 요소의 가중치를 고려하여, 선형 보간법을 사용해 수치형 데이터 시퀀스의 [분위수(quantile)](https://en.wikipedia.org/wiki/Quantile)를 계산합니다.

보간된 값을 얻기 위해 전달된 모든 값을 배열로 결합한 뒤, 해당 값들의 가중치에 따라 정렬합니다.
이후 [weighted percentile method](https://en.wikipedia.org/wiki/Percentile#The_weighted_percentile_method)를 사용하여 가중치에 기반한 누적 분포를 구성하고, 가중치와 값을 이용해 선형 보간을 수행하여 분위수를 계산합니다.

쿼리에서 서로 다른 레벨(level)을 사용하는 여러 `quantile*` 함수를 사용할 때는 내부 상태가 결합되지 않으므로(즉, 쿼리가 최적일 때보다 비효율적으로 동작합니다),
이 경우에는 [`quantiles`](/sql-reference/aggregate-functions/reference/quantiles#quantiles) 함수를 사용하십시오.

**구문**

```sql
quantileInterpolatedWeighted(level)(expr, weight)
```

**별칭**: `medianInterpolatedWeighted`

**매개변수**

* `level` — 선택적 매개변수입니다. 분위수 수준입니다. 0에서 1 사이의 상수 부동 소수점 숫자입니다. `[0.01, 0.99]` 범위의 `level` 값을 사용할 것을 권장합니다. 기본값: 0.5입니다. `level=0.5`일 때 함수는 중앙값을 계산합니다. [`Float*`](/sql-reference/data-types/float)

**인수**

* `expr` — 컬럼 값을 대상으로 하며 결과가 숫자 데이터 타입, Date 또는 DateTime이 되는 표현식입니다. [`(U)Int*`](/sql-reference/data-types/int-uint) 또는 [`Float*`](/sql-reference/data-types/float) 또는 [`Decimal*`](/sql-reference/data-types/decimal) 또는 [`Date`](/sql-reference/data-types/date) 또는 [`DateTime`](/sql-reference/data-types/datetime)
* `weight` — 시퀀스 요소의 가중치를 담은 컬럼입니다. 가중치는 값이 나타나는 횟수입니다. [`UInt*`](/sql-reference/data-types/int-uint)

**반환 값**

지정된 수준의 분위수입니다. [`Float64`](/sql-reference/data-types/float) 또는 [`Date`](/sql-reference/data-types/date) 또는 [`DateTime`](/sql-reference/data-types/datetime)

**예시**

**보간 가중 분위수 계산**

```sql title=Query
CREATE TABLE t (
    n Int32,
    val Int32
) ENGINE = Memory;

INSERT INTO t VALUES (0, 3), (1, 2), (2, 1), (5, 4);

SELECT quantileInterpolatedWeighted(n, val) FROM t;
```

```response title=Response
┌─quantileInterpolatedWeighted(n, val)─┐
│                                    1 │
└──────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**함께 보기**

* [median](/sql-reference/aggregate-functions/reference/median)
* [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md)
