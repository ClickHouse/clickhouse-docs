---
'description': '시계열 작업을 위한 함수에 대한 Documentation'
'sidebar_label': 'TimeSeries'
'slug': '/sql-reference/functions/time-series-functions'
'title': '시계열 작업을 위한 함수'
'doc_type': 'reference'
---


# 시계열 함수

아래 함수는 `timeSeries*()` 집계 함수들과 함께 사용하도록 설계되었습니다. 예를 들어
[timeSeriesInstantRateToGrid](../aggregate-functions/reference/timeSeriesInstantRateToGrid.md),
[timeSeriesLastToGrid](../aggregate-functions/reference/timeSeriesResampleToGridWithStaleness.md) 등과 같이 사용됩니다.

## timeSeriesRange {#timeSeriesRange}

타임스탬프의 범위를 생성합니다.

**구문**

```sql
timeSeriesRange(start_timestamp, end_timestamp, step)
```

**인수**

- `start_timestamp` - 범위의 시작.
- `end_timestamp` - 범위의 끝.
- `step` - 범위의 단계(초 단위).

**반환 값**

- 타임스탬프의 범위를 반환합니다: `[start_timestamp, start_timestamp + step, start_timestamp + 2 * step, ..., end_timestamp]`.

**예제**

쿼리:

```sql
SELECT timeSeriesRange('2025-06-01 00:00:00'::DateTime64(3), '2025-06-01 00:01:00'::DateTime64(3), 30) AS rng;
```

결과:

```text
┌────────────────────────────────────result─────────────────────────────────────────┐
│ ['2025-06-01 00:00:00.000', '2025-06-01 00:00:30.000', '2025-06-01 00:01:00.000'] │
└───────────────────────────────────────────────────────────────────────────────────┘
```

**노트**
- 함수 `timeSeriesRange()`가 `start_timestamp`와 `end_timestamp`가 같게 호출되면
1-element 배열 `[start_timestamp]`를 반환합니다.
- 함수 `timeSeriesRange()`는 함수 [range](../functions/array-functions.md#range)와 유사합니다.
예를 들어, 타임스탬프의 타입이 `DateTime64(3)`이고 `start_timestamp < end_timestamp`인 경우,
`timeSeriesRange(start_timestamp, end_timestamp, step)`는 다음 표현식과 동일한 결과를 반환합니다:
```sql
range(start_timestamp::Int64, end_timestamp::Int64 + 1, step::Int64)::Array(DateTime64(3))
```

## timeSeriesFromGrid {#timeSeriesFromGrid}

값 배열 `[value1, value2, value3, ..., valueN]`을 
튜플 배열 `[(start_timestamp, value1), (start_timestamp + step, value2), (start_timestamp + 2 * step, value3), ..., (end_timestamp, valueN)]`으로 변환합니다.

값 중 일부가 `NULL`인 경우, 함수는 이러한 null 값을 결과 배열에 복사하지 않지만, 현재 타임스탬프는 여전히 증가합니다. 예를 들어 `[value1, NULL, value2]`의 경우 함수는
`[(start_timestamp, value1), (start_timestamp + 2 * step, value2)]`를 반환합니다.

현재 타임스탬프는 `end_timestamp`보다 커질 때까지 `step`씩 증가하며, 각 타임스탬프는 지정된 값 배열의 값과 결합됩니다. 값의 수가 타임스탬프의 수와 맞지 않으면 함수는 예외를 발생시킵니다.

**구문**

```sql
timeSeriesFromGrid(start_timestamp, end_timestamp, step, values);
```

**인수**

- `start_timestamp` - 그리드의 시작.
- `end_timestamp` - 그리드의 끝.
- `step` - 그리드의 단계(초 단위).
- `values` - 값 배열 `[value1, value2, ..., valueN]`.

**반환 값**

- `start_timestamp`와 `step`으로 설명된 정기적인 시간 그리드에 타임스탬프가 결합된 값들을 반환합니다.

**예제**

쿼리:

```sql
SELECT timeSeriesFromGrid('2025-06-01 00:00:00'::DateTime64(3), '2025-06-01 00:01:30.000'::DateTime64(3), 30, [10, 20, NULL, 30]) AS result;
```

결과:

```text
┌─────────────────────────────────────────────result─────────────────────────────────────────────┐
│ [('2025-06-01 00:00:00.000',10),('2025-06-01 00:00:30.000',20),('2025-06-01 00:01:30.000',30)] │
└────────────────────────────────────────────────────────────────────────────────────────────────┘
```

**노트**
함수 `timeSeriesFromGrid(start_timestamp, end_timestamp, step, values)`는 다음 표현식과 동일한 결과를 반환합니다:
```sql
arrayFilter(x -> x.2 IS NOT NULL, arrayZip(timeSeriesRange(start_timestamp, end_timestamp, step), values))
```

<!-- 
이하의 태그 내부 내용은 문서 프레임워크 빌드 시 
시스템 함수에서 생성된 문서로 교체됩니다. 태그를 수정하거나 제거하지 마십시오.
자세한 사항은: https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->

<!--AUTOGENERATED_START-->
## seriesDecomposeSTL {#seriesDecomposeSTL}

버전: v24.1에 도입됨


STL [(Loess 기반의 계절-추세 분해 절차)](https://www.wessa.net/download/stl.pdf) 를 사용하여 시리즈 데이터를 계절, 추세 및 잔여 구성 요소로 분해합니다.
    

**구문**

```sql
seriesDecomposeSTL(series, period)
```

**인수**

- `series` — 숫자 값 배열 [`Array((U)Int8/16/32/64)`](/sql-reference/data-types/array) 또는 [`Array(Float*)`](/sql-reference/data-types/array)
- `period` — 양의 정수 [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)


**반환 값**

계절 구성 요소를 포함하는 첫 번째 배열, 추세를 포함하는 두 번째 배열, 잔여 구성 요소를 포함하는 세 번째 배열, 그리고 기본선(계절 + 추세) 구성 요소를 포함하는 네 번째 배열을 반환합니다. [`Array(Array(Float32), Array(Float32), Array(Float32), Array(Float32))`](/sql-reference/data-types/array)

**예제**

**STL을 사용하여 시리즈 데이터 분해**

```sql title=Query
SELECT seriesDecomposeSTL([10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34], 3) AS print_0
```

```response title=Response
┌───────────print_0──────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ [[
        -13.529999, -3.1799996, 16.71,      -13.53,     -3.1799996, 16.71,      -13.53,     -3.1799996,
        16.71,      -13.530001, -3.18,      16.710001,  -13.530001, -3.1800003, 16.710001,  -13.530001,
        -3.1800003, 16.710001,  -13.530001, -3.1799994, 16.71,      -13.529999, -3.1799994, 16.709997
    ],
    [
        23.63,     23.63,     23.630003, 23.630001, 23.630001, 23.630001, 23.630001, 23.630001,
        23.630001, 23.630001, 23.630001, 23.63,     23.630001, 23.630001, 23.63,     23.630001,
        23.630001, 23.63,     23.630001, 23.630001, 23.630001, 23.630001, 23.630001, 23.630003
    ],
    [
        0, 0.0000019073486, -0.0000019073486, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0000019073486, 0,
        0
    ],
    [
        10.1, 20.449999, 40.340004, 10.100001, 20.45, 40.34, 10.100001, 20.45, 40.34, 10.1, 20.45, 40.34,
        10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.100002, 20.45, 40.34
    ]]                                                                                                                   │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```



## seriesOutliersDetectTukey {#seriesOutliersDetectTukey}

버전: v24.2에 도입됨


[Tukey Fences](https://en.wikipedia.org/wiki/Outlier#Tukey%27s_fences)를 사용하여 시리즈 데이터에서 이상치를 감지합니다.
    

**구문**

```sql
seriesOutliersDetectTukey(series[, min_percentile, max_percentile, K])
```

**인수**

- `series` — 숫자 값 배열. [`Array((UInt8/16/32/64))`](/sql-reference/data-types/array) 또는 [`Array(Float*)`](/sql-reference/data-types/array)
- `min_percentile` — 선택 사항. 사분 범위를 계산하기 위해 사용되는 최소 백분위 (%)로, 값은 [0.02,0.98] 범위 내에 있어야 합니다. 기본값은 0.25입니다. [`Float*`](/sql-reference/data-types/float)
- `max_percentile` — 선택 사항. 사분 범위를 계산하기 위해 사용되는 최대 백분위 (%)로, 값은 [0.02,0.98] 범위 내에 있어야 합니다. 기본값은 0.75입니다. [`Float*`](/sql-reference/data-types/float)
- `K` — 선택 사항. 약한 또는 강한 이상치를 감지하기 위해 사용할 비음수 상수 값. 기본값은 1.5입니다. [`Float*`](/sql-reference/data-types/float)


**반환 값**

입력 배열과 같은 길이를 가지며 각 값은 시리즈의 해당 요소에서 가능한 이상치를 나타내는 점수를 나타냅니다. 비영은 점수는 가능한 이상치를 나타냅니다. [`Array(Float32)`](/sql-reference/data-types/array)

**예제**

**기본 이상치 탐지**

```sql title=Query
SELECT seriesOutliersDetectTukey([-3, 2, 15, 3, 5, 6, 4, 5, 12, 45, 12, 3, 3, 4, 5, 6]) AS print_0
```

```response title=Response
┌───────────print_0─────────────────┐
│[0,0,0,0,0,0,0,0,0,27,0,0,0,0,0,0] │
└───────────────────────────────────┘
```

**사용자 정의 매개변수에 의한 이상치 탐지**

```sql title=Query
SELECT seriesOutliersDetectTukey([-3, 2, 15, 3, 5, 6, 4.50, 5, 12, 45, 12, 3.40, 3, 4, 5, 6], 0.2, 0.8, 1.5) AS print_0
```

```response title=Response
┌─print_0──────────────────────────────┐
│ [0,0,0,0,0,0,0,0,0,19.5,0,0,0,0,0,0] │
└──────────────────────────────────────┘
```



## seriesPeriodDetectFFT {#seriesPeriodDetectFFT}

버전: v23.12에 도입됨


FFT - [빠른 푸리에 변환](https://en.wikipedia.org/wiki/Fast_Fourier_transform)을 사용하여 주어진 시리즈 데이터의 주기를 찾습니다.
    

**구문**

```sql
seriesPeriodDetectFFT(series)
```

**인수**

- `series` — 숫자 값 배열. [`Array((U)Int8/16/32/64)`](/sql-reference/data-types/array) 또는 [`Array(Float*)`](/sql-reference/data-types/array)


**반환 값**

시리즈 데이터의 주기와 동일한 실수를 반환하며, 데이터 포인트의 수가 네 개 미만일 경우 NaN을 반환합니다. [`Float64`](/sql-reference/data-types/float)

**예제**

**간단한 패턴으로 주기 감지**

```sql title=Query
SELECT seriesPeriodDetectFFT([1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6]) AS print_0
```

```response title=Response
┌───────────print_0──────┐
│                      3 │
└────────────────────────┘
```

**복잡한 패턴으로 주기 감지**

```sql title=Query
SELECT seriesPeriodDetectFFT(arrayMap(x -> abs((x % 6) - 3), range(1000))) AS print_0
```

```response title=Response
┌─print_0─┐
│       6 │
└─────────┘
```



## timeSeriesFromGrid {#timeSeriesFromGrid}

버전: v25.8에 도입됨


값 배열 `[x1, x2, x3, ...]`를 튜플 배열
`[(start_timestamp, x1), (start_timestamp + step, x2), (start_timestamp + 2 * step, x3), ...]`로 변환합니다.

현재 타임스탬프는 `end_timestamp`보다 커질 때까지 `step`만큼 증가합니다.
값의 수가 타임스탬프의 수와 일치하지 않으면 함수는 예외를 발생시킵니다.

`[x1, x2, x3, ...]`의 NULL 값은 건너뛰지만 현재 타임스탬프는 여전히 증가합니다.
예를 들어 `[value1, NULL, x2]`의 경우 함수는 `[(start_timestamp, x1), (start_timestamp + 2 * step, x2)]`를 반환합니다.
    

**구문**

```sql
timeSeriesFromGrid(start_timestamp, end_timestamp, step, values)
```

**인수**

- `start_timestamp` — 그리드의 시작. [`DateTime64`](/sql-reference/data-types/datetime64) 또는 [`DateTime`](/sql-reference/data-types/datetime) 또는 [`UInt32`](/sql-reference/data-types/int-uint)
- `end_timestamp` — 그리드의 끝. [`DateTime64`](/sql-reference/data-types/datetime64) 또는 [`DateTime`](/sql-reference/data-types/datetime) 또는 [`UInt32`](/sql-reference/data-types/int-uint)
- `step` — 그리드의 단계(초 단위) [`Decimal64`](/sql-reference/data-types/decimal) 또는 [`Decimal32`](/sql-reference/data-types/decimal) 또는 [`UInt32/64`](/sql-reference/data-types/int-uint)
- `values` — 값 배열 [`Array(Float*)`](/sql-reference/data-types/array) 또는 [`Array(Nullable(Float*))`](/sql-reference/data-types/array)


**반환 값**

소스 값 배열과 `start_timestamp` 및 `step`으로 결합된 타임스탬프에서 값을 반환합니다. [`Array(Tuple(DateTime64, Float64))`](/sql-reference/data-types/array)

**예제**

**사용 예**

```sql title=Query
SELECT timeSeriesFromGrid('2025-06-01 00:00:00'::DateTime64(3), '2025-06-01 00:01:30.000'::DateTime64(3), 30, [10, 20, NULL, 30]) AS result;
```

```response title=Response
┌─────────────────────────────────────────────result─────────────────────────────────────────────┐
│ [('2025-06-01 00:00:00.000',10),('2025-06-01 00:00:30.000',20),('2025-06-01 00:01:30.000',30)] │
└────────────────────────────────────────────────────────────────────────────────────────────────┘
```



## timeSeriesIdToTags {#timeSeriesIdToTags}

버전: v25.8에 도입됨

지정된 시계열 식별자와 관련된 태그를 찾습니다.

**구문**

```sql
timeSeriesIdToTags(id)
```

**인수**

- `id` — 시계열의 식별자. [`UInt64`](/sql-reference/data-types/int-uint) 또는 [`UInt128`](/sql-reference/data-types/int-uint) 또는 [`UUID`](/sql-reference/data-types/uuid) 또는 [`FixedString(16)`](/sql-reference/data-types/fixedstring)


**반환 값**

태그 이름과 태그 값을 쌍으로 표현한 배열을 반환합니다. [`Array(Tuple(String, String))`](/sql-reference/data-types/array)

**예제**

**예제**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count') AS id, timeSeriesIdToTags(id)
```

```response title=Response
8374283493092    [('__name__', ''http_requests_count''), ('env', 'dev'), ('region', 'eu')]
```



## timeSeriesIdToTagsGroup {#timeSeriesIdToTagsGroup}

버전: v25.8에 도입됨

지정된 시계열 식별자를 해당 그룹 인덱스로 변환합니다. 그룹 인덱스는 현재 실행 중인 쿼리의 맥락에서 각 고유한 태그 집합에 연결된 숫자 0, 1, 2, 3입니다.

**구문**

```sql
timeSeriesIdToTagsGroup(id)
```

**인수**

- `id` — 시계열의 식별자. [`UInt64`](/sql-reference/data-types/int-uint) 또는 [`UInt128`](/sql-reference/data-types/int-uint) 또는 [`UUID`](/sql-reference/data-types/uuid) 또는 [`FixedString(16)`](/sql-reference/data-types/fixedstring)


**반환 값**

이 태그 집합과 연결된 그룹 인덱스를 반환합니다. [`UInt64`](/sql-reference/data-types/int-uint)

**예제**

**예제**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count') AS id, timeSeriesIdToTagsGroup(id)
```

```response title=Response
8374283493092    0
```



## timeSeriesRange {#timeSeriesRange}

버전: v25.8에 도입됨


타임스탬프의 범위를 생성합니다: `[start_timestamp, start_timestamp + step, start_timestamp + 2 * step, ..., end_timestamp]`.

`start_timestamp`가 `end_timestamp`와 같으면, 함수는 `[start_timestamp]`를 포함하는 1-element 배열을 반환합니다.

함수 `timeSeriesRange()`는 함수 [range](../functions/array-functions.md#range)와 유사합니다.


**구문**

```sql
timeSeriesRange(start_timestamp, end_timestamp, step)
```

**인수**

- `start_timestamp` — 범위의 시작. [`DateTime64`](/sql-reference/data-types/datetime64) 또는 [`DateTime`](/sql-reference/data-types/datetime) 또는 [`UInt32`](/sql-reference/data-types/int-uint)
- `end_timestamp` — 범위의 끝. [`DateTime64`](/sql-reference/data-types/datetime64) 또는 [`DateTime`](/sql-reference/data-types/datetime) 또는 [`UInt32`](/sql-reference/data-types/int-uint)
- `step` — 범위의 단계(초 단위) [`UInt32/64`](/sql-reference/data-types/int-uint) 또는 [`Decimal32/64`](/sql-reference/data-types/decimal)


**반환 값**

타임스탬프의 범위를 반환합니다. [`Array(DateTime64)`](/sql-reference/data-types/array)

**예제**

**사용 예**

```sql title=Query
SELECT timeSeriesRange('2025-06-01 00:00:00'::DateTime64(3), '2025-06-01 00:01:00'::DateTime64(3), 30)
```

```response title=Response
┌────────────────────────────────────result─────────────────────────────────────────┐
│ ['2025-06-01 00:00:00.000', '2025-06-01 00:00:30.000', '2025-06-01 00:01:00.000'] │
└───────────────────────────────────────────────────────────────────────────────────┘
```



## timeSeriesStoreTags {#timeSeriesStoreTags}

버전: v25.8에 도입됨

쿼리 컨텍스트 내에서 시계열의 식별자와 태그 간의 매핑을 저장하여, 이후 함수 timeSeriesIdToTags()가 이러한 태그를 추출할 수 있도록 합니다.

**구문**

```sql
timeSeriesStoreTags(id, tags_array, separate_tag_name_1, separate_tag_value_1, ...)
```

**인수**

- `id` — 시계열의 식별자. [`UInt64`](/sql-reference/data-types/int-uint) 또는 [`UInt128`](/sql-reference/data-types/int-uint) 또는 [`UUID`](/sql-reference/data-types/uuid) 또는 [`FixedString(16)`](/sql-reference/data-types/fixedstring)
- `tags_array` — 쌍 배열 (태그 이름, 태그 값). [`Array(Tuple(String, String))`](/sql-reference/data-types/array) 또는 [`NULL`](/sql-reference/syntax#null)
- `separate_tag_name_i` — 태그 이름. [`String`](/sql-reference/data-types/string) 또는 [`FixedString`](/sql-reference/data-types/fixedstring)
- `separate_tag_value_i` — 태그 값. [`String`](/sql-reference/data-types/string) 또는 [`FixedString`](/sql-reference/data-types/fixedstring) 또는 [`Nullable(String)`](/sql-reference/data-types/nullable)


**반환 값**

첫 번째 인수, 즉 시계열의 식별자를 반환합니다.

**예제**

**예제**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count')
```

```response title=Response
8374283493092
```



## timeSeriesTagsGroupToTags {#timeSeriesTagsGroupToTags}

버전: v25.8에 도입됨

그룹 인덱스와 관련된 태그를 찾습니다. 그룹 인덱스는 현재 실행 중인 쿼리의 맥락에서 각 고유한 태그 집합에 연결된 숫자 0, 1, 2, 3입니다.

**구문**

```sql
timeSeriesTagsGroupToTags(group)
```

**인수**

- `group` — 시계열과 관련된 그룹 인덱스. [`UInt64`](/sql-reference/data-types/int-uint)


**반환 값**

태그 이름과 태그 값을 쌍으로 표현한 배열을 반환합니다. [`Array(Tuple(String, String))`](/sql-reference/data-types/array)

**예제**

**예제**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count') AS id, timeSeriesIdToTagsGroup(id) AS group, timeSeriesTagsGroupToTags(group)
```

```response title=Response
8374283493092    0    [('__name__', ''http_requests_count''), ('env', 'dev'), ('region', 'eu')]
```



<!--AUTOGENERATED_END-->
