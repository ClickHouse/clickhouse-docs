---
'slug': '/faq/operations/production'
'title': '생산에서 어떤 ClickHouse 버전을 사용해야 하나요?'
'toc_hidden': true
'toc_priority': 10
'description': '이 페이지는 생산에서 사용할 ClickHouse 버전에 대한 지침을 제공합니다.'
'doc_type': 'guide'
'keywords':
- 'production'
- 'deployment'
- 'versions'
- 'best practices'
- 'upgrade strategy'
---


# 어떤 ClickHouse 버전을 프로덕션에 사용할 것인가? {#which-clickhouse-version-to-use-in-production}

우선 사람들이 왜 이 질문을 하는지 논의해 봅시다. 두 가지 주요 이유가 있습니다:

1.  ClickHouse는 상당히 높은 속도로 개발되고 있으며, 보통 연간 10개 이상의 안정적인 릴리스를 제공합니다. 이는 선택할 수 있는 릴리스 범위가 넓어지는 것을 의미하며, 간단한 선택이 아닙니다.
2.  일부 사용자는 어떤 버전이 자신의 사용 사례에 가장 적합한지 알아내는 데 시간을 들이기보다는 다른 사람의 조언을 따르고 싶어합니다.

두 번째 이유가 더 근본적이므로, 우리는 그것을 먼저 다루고 다양한 ClickHouse 릴리스를 탐색하는 것으로 돌아가겠습니다.

## 어떤 ClickHouse 버전을 추천하십니까? {#which-clickhouse-version-do-you-recommend}

컨설턴트를 고용하거나 잘 알려진 전문가를 신뢰하여 프로덕션 환경에 대한 책임을 덜고 싶어 하는 유혹이 있습니다. 다른 사람이 추천한 특정 ClickHouse 버전을 설치하고, 그로 인해 문제가 발생하면 그것은 당신의 잘못이 아닙니다, 다른 사람의 잘못입니다. 이러한 사고 방식은 큰 함정입니다. 외부인은 당신의 회사 프로덕션 환경에서 어떤 일이 발생하는지 당신보다 더 잘 알지 못합니다.

그러면 어떤 ClickHouse 버전으로 업그레이드할지 제대로 선택하는 방법은 무엇입니까? 또는 첫 번째 ClickHouse 버전을 선택하는 방법은 무엇입니까? 우선, **실제적인 프로덕션 환경**을 설정하는 데 투자해야 합니다. 이상적인 세계에서는 완전히 동일한 그림자 복사본일 수 있지만, 보통은 비용이 많이 듭니다.

여기 프로덕션 환경과 비슷한 비용으로 사전 프로덕션 환경에서 합리적인 충실도를 얻기 위한 몇 가지 주요 사항이 있습니다:

- 사전 프로덕션 환경은 프로덕션에서 실행할 쿼리 집합과 가깝게 실행해야 합니다:
  - 일부 고정된 데이터를 사용하여 읽기 전용으로 만들지 마십시오.
  - 데이터를 복사하기만 하고 전형적인 보고서를 만들지 않고 쓰기 전용으로 만들지 마십시오.
  - 스키마 마이그레이션을 적용하는 대신 완전히 초기화하지 마십시오.
- 실제 프로덕션 데이터와 쿼리의 샘플을 사용하십시오. 선택한 샘플이 여전히 대표성을 가지며 `SELECT` 쿼리가 합리적인 결과를 반환하게 하십시오. 데이터가 민감하고 내부 정책이 프로덕션 환경을 벗어나는 것을 허용하지 않는 경우, 불투명성을 사용하십시오.
- 사전 프로덕션이 프로덕션 환경과 동일한 방식으로 모니터링 및 경고 소프트웨어로 보호되는지 확인하십시오.
- 프로덕션이 여러 데이터 센터나 지역에 걸쳐 있다면, 사전 프로덕션도 동일하게 하십시오.
- 프로덕션에서 복제, 분산 테이블 및 계층적 물리화된 뷰와 같은 복잡한 기능을 사용하는 경우, 사전 프로덕션에서도 유사하게 구성되어 있는지 확인하십시오.
- 사전 프로덕션에서 프로덕션과 유사한 수의 서버나 VM을 사용하되 더 작은 크기로 사용할지, 또는 그보다 훨씬 적은 수를 사용하되 동일한 크기로 사용할지에 대한 절충이 있습니다. 첫 번째 옵션은 추가적인 네트워크 관련 문제를 발견할 수 있으나, 두 번째는 관리가 더 쉽습니다.

투자할 두 번째 영역은 **자동화된 테스트 인프라**입니다. 어떤 종류의 쿼리가 한 번 성공적으로 실행되었다고 해서 영원히 그렇게 계속될 것이라고 가정하지 마십시오. ClickHouse가 모킹된 일부 단위 테스트를 갖는 것은 괜찮지만, 귀하의 제품이 실제 ClickHouse에 대해 실행되고 모든 중요한 사용 사례가 여전히 예상대로 작동하는지 확인할 수 있는 합리적인 양의 자동화된 테스트를 갖도록 하십시오.

추가적인 단계로 [ClickHouse의 오픈 소스 테스트 인프라](https://github.com/ClickHouse/ClickHouse/tree/master/tests)에 이러한 자동화된 테스트를 기여하는 것을 고려할 수 있습니다. 이는 ClickHouse의 일상적인 개발에 지속적으로 사용됩니다. [어떻게 실행하는지](../../development/tests.md) 배우고 이 프레임워크에 맞게 테스트를 조정하는 데 시간과 노력이 필요하겠지만, ClickHouse 릴리스가 안정적으로 발표될 때 이미 그에 대해 테스트되었다는 것을 보장함으로써, 나중에 문제를 보고하고 버그 수정이 구현되고 리포트되는 동안 시간을 낭비하는 것을 피할 수 있습니다. 일부 기업은 심지어 그러한 테스트 기여를 내부 정책으로 활용하고 있습니다 (Google의 [Beyonce's Rule](https://www.oreilly.com/library/view/software-engineering-at/9781492082781/ch01.html#policies_that_scale_well)).

사전 프로덕션 환경과 테스트 인프라를 갖추면 최상의 버전을 선택하는 것이 간단해집니다:

1.  새로운 ClickHouse 릴스에 대해 정기적으로 자동화된 테스트를 실행하십시오. `testing`으로 표시된 ClickHouse 릴리스에 대해서도 수행할 수 있지만, 그것으로 추후 단계로 진행하는 것은 권장하지 않습니다.
2.  테스트를 통과한 ClickHouse 릴리스를 사전 프로덕션에 배포하고 모든 프로세스가 예상대로 실행되고 있는지 확인하십시오.
3.  발견한 문제를 [ClickHouse GitHub Issues](https://github.com/ClickHouse/ClickHouse/issues)에 보고하십시오.
4.  큰 문제가 없었다면 ClickHouse 릴리스를 프로덕션 환경에 배포하기 시작하는 것이 안전해야 합니다. [카나리 릴리스](https://martinfowler.com/bliki/CanaryRelease.html) 또는 [그린 블루 배포](https://martinfowler.com/bliki/BlueGreenDeployment.html)와 유사한 접근 방식을 구현하는 점진적인 릴리스 자동화에 투자하는 것이 프로덕션에서 문제의 위험을 더욱 줄일 수 있습니다.

위에서 설명한 접근 방식에는 ClickHouse에 특화된 내용이 없다는 것을 눈치채셨을 것입니다. 사람들이 프로덕션 환경을 진지하게 생각할 경우 의존하는 인프라의 모든 부분에 대해 그렇게 합니다.

## ClickHouse 릴리스를 선택하는 방법은? {#how-to-choose-between-clickhouse-releases}

ClickHouse 패키지 저장소의 내용을 살펴보면 두 가지 종류의 패키지가 있습니다:

1.  `stable`
2.  `lts` (장기 지원)

이들 간의 선택을 위한 안내는 다음과 같습니다:

- `stable`은 우리가 기본적으로 추천하는 패키지 종류입니다. 이들은 대략 월간으로 출시되며 (따라서 새로운 기능을 합리적인 지연으로 제공합니다) 최신 안정 릴리스 세 개는 진단 및 버그 수정의 백포트 지원을 받습니다.
- `lts`는 연간 두 번 출시되며 초기 출시 후 1년 동안 지원됩니다. 다음과 같은 경우 `stable`보다 선호할 수도 있습니다:
  - 귀하의 회사에 빈번한 업그레이드 또는 비 LTS 소프트웨어 사용을 허용하지 않는 내부 정책이 있습니다.
  - ClickHouse를 사용하는 일부 보조 제품이 복잡한 ClickHouse 기능을 요구하지 않거나 업데이트를 유지할 충분한 자원이 없는 경우입니다.

`lts`가 최선의 선택이라고 처음 생각했던 많은 팀들이 종종 중요한 기능 때문에 결국에는 `stable`로 전환하게 됩니다.

:::tip    
ClickHouse를 업그레이드할 때 염두에 두어야 할 한 가지 더: 우리는 항상 릴리스 간의 호환성을 살펴보고 있지만, 때로는 유지하는 것이 합리적이지 않거나 사소한 세부 사항이 변경될 수 있습니다. 따라서 업그레이드하기 전에 [변경 로그](/whats-new/changelog/index.md)를 확인하여 하위 호환성 변경 사항에 대한 노트가 있는지 확인하십시오.
:::
