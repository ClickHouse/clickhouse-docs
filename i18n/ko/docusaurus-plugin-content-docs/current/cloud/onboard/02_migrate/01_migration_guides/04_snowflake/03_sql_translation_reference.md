---
'sidebar_label': 'SQL 변환 참조'
'slug': '/migrations/snowflake-translation-reference'
'description': 'SQL 변환 참조'
'keywords':
- 'Snowflake'
'title': 'Snowflake에서 ClickHouse로 마이그레이션'
'show_related_blogs': true
'doc_type': 'guide'
---


# Snowflake SQL 변환 가이드

## 데이터 타입 {#data-types}

### 숫자 {#numerics}

ClickHouse와 Snowflake 간에 데이터를 이동하는 사용자는 ClickHouse가 숫자 선언에 대해 더 세밀한 정밀도를 제공한다는 점을 즉시 알게 됩니다. 예를 들어, Snowflake는 숫자에 대한 타입인 Number를 제공합니다. 이를 통해 사용자는 정밀도(전체 숫자 수)와 스케일(소수점 오른쪽의 숫자 수)를 최대 38까지 지정해야 합니다. 정수 선언은 Number와 동의어이며, 정밀도와 스케일을 고정으로 정의하여 범위가 동일합니다. 이러한 편리함은 정수의 경우 스케일이 0이기 때문에 정밀도를 수정하는 것이 Snowflake에서 디스크의 데이터 크기에 영향을 미치지 않기 때문입니다 - 마이크로 파티션 수준에서 기록 시에 숫자 범위를 위해 필요한 최소 바이트가 사용됩니다. 그러나 스케일은 저장 공간에 영향을 미치며 압축으로 상쇄됩니다. `Float64` 타입은 정밀도가 떨어지는 대신 더 넓은 값 범위를 제공합니다.

이와 대조적으로 ClickHouse는 부동 소수점 및 정수에 대해 여러 개의 부호 있는 및 부호 없는 정밀도를 제공합니다. 이러한 기능을 통해 ClickHouse 사용자는 정수를 위한 필요한 정밀도를 명시적으로 설정하여 저장 및 메모리 오버헤드를 최적화할 수 있습니다. Decimal 타입은 Snowflake의 Number 타입에 해당하며, 76자리의 두 배의 정밀도와 스케일을 제공합니다. 유사한 `Float64` 값 외에도 ClickHouse는 정밀도가 덜 중요한 경우에 사용될 수 있는 `Float32`를 제공합니다.

### 문자열 {#strings}

ClickHouse와 Snowflake는 문자열 데이터 저장에 대해 대조적인 접근 방식을 취합니다. Snowflake의 `VARCHAR`는 유니코드 문자를 UTF-8로 보관하며, 사용자가 최대 길이를 지정할 수 있습니다. 이 길이는 저장 또 는 성능에 영향을 미치지 않으며, 문자열을 저장하는 데 항상 최소 바이트 수가 사용되며, 실제로는 다운스트림 도구에 유용한 제약 조건만 제공합니다. `Text` 및 `NChar`와 같은 다른 타입은 이 타입의 단순한 별칭입니다. 반면 ClickHouse는 모든 [문자열 데이터를 원시 바이트로](/sql-reference/data-types/string) `String` 타입(길이 지정 필요 없음)으로 저장하며, 인코딩을 사용자에게 맡기고, [쿼리 시간 함수](/sql-reference/functions/string-functions#lengthUTF8)를 제공하여 다양한 인코딩을 지원합니다. 이는 독자에게 ["불투명한 데이터 인수"](https://utf8everywhere.org/#cookie)가 왜 필요한지를 설명합니다. 따라서 ClickHouse의 `String`은 그 구현 방식에서 Snowflake의 Binary 타입과 더 유사합니다. [Snowflake](https://docs.snowflake.com/en/sql-reference/collation)와 [ClickHouse](/sql-reference/statements/select/order-by#collation-support) 모두 사용자가 문자열이 정렬되고 비교되는 방식을 오버라이드할 수 있도록 "정렬"을 지원합니다.

### 반구조적 타입 {#semi-structured-data}

Snowflake는 반구조적 데이터에 대해 `VARIANT`, `OBJECT`, `ARRAY` 타입을 지원합니다.

ClickHouse는 이에 상응하는 [`Variant`](/sql-reference/data-types/variant), `Object`(현재는 기본 `JSON` 타입을 선호하여 사용되지 않음) 및 [`Array`](/sql-reference/data-types/array) 타입을 제공합니다. 또한 ClickHouse는 현재 사용되지 않는 `Object('json')` 타입을 대체하는 [`JSON`](/sql-reference/data-types/newjson) 타입을 제공하며, 이는 [기타 기본 JSON 타입과 비교하여](https://jsonbench.com/) 특히 성능이 우수하고 저장 효율적입니다.

ClickHouse는 또한 이름이 지정된 [`Tuple`s](/sql-reference/data-types/tuple)와 [`Nested`](/sql-reference/data-types/nested-data-structures/nested) 타입을 통해 Tuple의 배열을 지원하여 사용자가 중첩된 구조를 명시적으로 매핑할 수 있도록 합니다. 이는 ClickHouse에서 인덱스 정의에서 캐스팅이 필요 없고 사용할 수 있는 중첩된 숫자에 대한 쿼리를 간소화합니다. Snowflake는 사용자에게 외부 객체에 대해 `OBJECT`, `VARIANT`, `ARRAY` 타입을 사용하도록 요구하며 [명시적인 내부 타이핑](https://docs.snowflake.com/en/sql-reference/data-types-semistructured#characteristics-of-an-object)을 허용하지 않는 것과 달리, ClickHouse에서는 모든 계층에서 코덱 및 타입 최적화를 적용할 수 있습니다. 

ClickHouse에서는 서브 구조에 코덱과 최적화된 타입도 적용할 수 있습니다. 이는 중첩 구조의 압축이 우수하며 평탄화된 데이터와 비교할 때 동등하게 유지된다는 추가 이점을 제공합니다. 반대로 특정 타입을 서브 구조에 적용할 수 없기 때문에 Snowflake는 [최적 압축을 달성하기 위해 데이터를 평탄화할 것을 권장합니다](https://docs.snowflake.com/en/user-guide/semistructured-considerations#storing-semi-structured-data-in-a-variant-column-vs-flattening-the-nested-structure). Snowflake는 이러한 데이터 타입에 대해 [크기 제한을 부과합니다](https://docs.snowflake.com/en/user-guide/semistructured-considerations#data-size-limitations).

### 타입 참조 {#type-reference}

| Snowflake                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | ClickHouse                                                                                                                                                     | Note                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`NUMBER`](https://docs.snowflake.com/en/sql-reference/data-types-numeric)                                                                                                                                                                                                                                                                                                                                                                                                      | [`Decimal`](/sql-reference/data-types/decimal)                                                                                                                 | ClickHouse는 Snowflake보다 두 배의 정밀도와 스케일을 지원합니다 - 76 자리 대 38 자리.                                                                                                                                                                                                                                                                                            |
| [`FLOAT`, `FLOAT4`, `FLOAT8`](https://docs.snowflake.com/en/sql-reference/data-types-numeric#data-types-for-floating-point-numbers)                                                                                                                                                                                                                                                                                                                                             | [`Float32`, `Float64`](/sql-reference/data-types/float)                                                                                                        | Snowflake의 모든 부동 소수점 수는 64 비트입니다.                                                                                                                                                                                                                                                                                                                                             |
| [`VARCHAR`](https://docs.snowflake.com/en/sql-reference/data-types-text#varchar)                                                                                                                                                                                                                                                                                                                                                                                                | [`String`](/sql-reference/data-types/string)                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                 |
| [`BINARY`](https://docs.snowflake.com/en/sql-reference/data-types-text#binary)                                                                                                                                                                                                                                                                                                                                                                                                  | [`String`](/sql-reference/data-types/string)                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                 |
| [`BOOLEAN`](https://docs.snowflake.com/en/sql-reference/data-types-logical)                                                                                                                                                                                                                                                                                                                                                                                                     | [`Bool`](/sql-reference/data-types/boolean)                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                 |
| [`DATE`](https://docs.snowflake.com/en/sql-reference/data-types-datetime#date)                                                                                                                                                                                                                                                                                                                                                                                                  | [`Date`](/sql-reference/data-types/date), [`Date32`](/sql-reference/data-types/date32)                                                                         | `DATE`는 Snowflake에서 ClickHouse보다 더 넓은 날짜 범위를 제공합니다. 예를 들어, `Date32`의 최소값은 `1900-01-01`이고 `Date`는 `1970-01-01`입니다. ClickHouse의 `Date`는 보다 비용 효율적인(2바이트) 저장소를 제공합니다.                                                                                                                                                                              |
| [`TIME(N)`](https://docs.snowflake.com/en/sql-reference/data-types-datetime#time)                                                                                                                                                                                                                                                                                                                                                                                               | 직접적인 동등물은 없지만 [`DateTime`](/sql-reference/data-types/datetime) 및 [`DateTime64(N)`](/sql-reference/data-types/datetime64)로 표현될 수 있습니다.   | `DateTime64`는 정밀도의 동일한 개념을 사용합니다.                                                                                                                                                                                                                                                                                                                               |
| [`TIMESTAMP`](https://docs.snowflake.com/en/sql-reference/data-types-datetime#timestamp) - [`TIMESTAMP_LTZ`](https://docs.snowflake.com/en/sql-reference/data-types-datetime#timestamp-ltz-timestamp-ntz-timestamp-tz), [`TIMESTAMP_NTZ`](https://docs.snowflake.com/en/sql-reference/data-types-datetime#timestamp-ltz-timestamp-ntz-timestamp-tz), [`TIMESTAMP_TZ`](https://docs.snowflake.com/en/sql-reference/data-types-datetime#timestamp-ltz-timestamp-ntz-timestamp-tz) | [`DateTime`](/sql-reference/data-types/datetime) 및 [`DateTime64`](/sql-reference/data-types/datetime64)                                                      | `DateTime` 및 `DateTime64`는 열에 대해 TZ 파라미터를 선택적으로 정의할 수 있습니다. 정의되지 않은 경우 서버의 시간대가 사용됩니다. 또한 클라이언트에 대해 `--use_client_time_zone` 매개변수를 사용할 수 있습니다.                                                                                                                                                            |
| [`VARIANT`](https://docs.snowflake.com/en/sql-reference/data-types-semistructured#variant)                                                                                                                                                                                                                                                                                                                                                                                      | [`JSON`, `Tuple`, `Nested`](/interfaces/formats)                                                                                                   | `JSON` 타입은 ClickHouse에서 실험적입니다. 이 타입은 입력 시간에 열 타입을 유추합니다. `Tuple`, `Nested` 및 `Array` 또한 대안으로 명시적 타입 구조를 구축하는 데 사용될 수 있습니다.                                                                                                                                                                              |
| [`OBJECT`](https://docs.snowflake.com/en/sql-reference/data-types-semistructured#object)                                                                                                                                                                                                                                                                                                                                                                                        | [`Tuple`, `Map`, `JSON`](/interfaces/formats)                                                                                                      | `OBJECT` 및 `Map`은 ClickHouse의 `JSON` 타입과 유사하며, 키는 `String`입니다. ClickHouse는 값이 일관되고 강하게 타입이 정의되도록 요구하는 반면, Snowflake는 `VARIANT`를 사용합니다. 이는 ClickHouse에서 필요한 경우 `Tuple`을 사용하여 계층을 명시적으로 정의하거나 `JSON` 타입에 의존해야 함을 의미합니다. |
| [`ARRAY`](https://docs.snowflake.com/en/sql-reference/data-types-semistructured#array)                                                                                                                                                                                                                                                                                                                                                                                          | [`Array`](/sql-reference/data-types/array), [`Nested`](/sql-reference/data-types/nested-data-structures/nested)                                                | Snowflake의 `ARRAY`는 요소에 대해 `VARIANT`를 사용합니다 - 슈퍼 타입입니다. 반대로 ClickHouse에서는 이들이 강하게 타입화됩니다.                                                                                                                                                                                                                                                         |
| [`GEOGRAPHY`](https://docs.snowflake.com/en/sql-reference/data-types-geospatial#geography-data-type)                                                                                                                                                                                                                                                                                                                                                                            | [`Point`, `Ring`, `Polygon`, `MultiPolygon`](/sql-reference/data-types/geo)                                                                                    | Snowflake는 좌표계(WGS 84)를 부과하지만 ClickHouse는 쿼리 시간에 적용합니다.                                                                                                                                                                                                                                                                                          |
| [`GEOMETRY`](https://docs.snowflake.com/en/sql-reference/data-types-geospatial#geometry-data-type)                                                                                                                                                                                                                                                                                                                                                                              | [`Point`, `Ring`, `Polygon`, `MultiPolygon`](/sql-reference/data-types/geo)                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                      |

| ClickHouse 타입   | 설명                                                                                           |
|-------------------|------------------------------------------------------------------------------------------------|
| `IPv4` 및 `IPv6` | IP 특정 타입으로 Snowflake보다 더 효율적인 저장이 가능할 수 있습니다.                              |
| `FixedString`     | 해시를 위해 유용한 고정 길이의 바이트를 사용할 수 있게 해 줍니다.                               |
| `LowCardinality`  | 각 타입을 딕셔너리 인코딩할 수 있게 해주며, 카디널리티가 < 100k인 경우에 유용합니다.         |
| `Enum`            | 8비트 또는 16비트 범위에서 이름 값의 효율적인 인코딩을 허용합니다.                             |
| `UUID`            | UUID를 효율적으로 저장하기 위한 타입입니다.                                                  |
| `Array(Float32)`  | 벡터를 Float32의 배열로 표현할 수 있으며 지원되는 거리 함수가 있습니다.                      |

마지막으로, ClickHouse는 집계 함수의 중간 
[상태를 저장하는 독특한 기능을 제공합니다](/sql-reference/data-types/aggregatefunction). 이 
상태는 구현에 따라 다르지만, 집계 결과를 저장하고 나중에 쿼리할 수 있게 해 줍니다(해당하는 병합 함수와 함께). 일반적으로 이 기능은 물리화된 뷰를 통해 사용되며, 아래에서 보여드리듯이 최소한의 저장 비용으로 삽입된 데이터에 대한 쿼리의 증가 결과를 저장함으로써 특정 쿼리의 성능을 개선할 수 있는 기능을 제공합니다(자세한 내용은 여기에서 확인하십시오).
