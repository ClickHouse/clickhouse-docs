---
'slug': '/about-us/history'
'sidebar_label': 'ClickHouse 역사'
'sidebar_position': 40
'description': 'ClickHouse 개발의 역사'
'keywords':
- 'history'
- 'development'
- 'Metrica'
'title': 'ClickHouse 역사'
'doc_type': 'reference'
---


# ClickHouse 역사 {#clickhouse-history}

ClickHouse는 처음에 [Yandex.Metrica](https://metrica.yandex.com/)를 지원하기 위해 개발되었으며, [세계에서 두 번째로 큰 웹 분석 플랫폼](http://w3techs.com/technologies/overview/traffic_analysis/all)으로 계속해서 핵심 구성 요소로 남아 있습니다. 데이터베이스에 13조 개 이상의 레코드와 매일 200억 건 이상의 이벤트가 존재하며, ClickHouse는 비집계 데이터에서 즉시 맞춤 보고서를 생성할 수 있도록 합니다. 이 글에서는 ClickHouse의 초기 개발 목표를 간략히 다룹니다.

Yandex.Metrica는 사용자에 의해 정의된 임의의 세그먼트를 기반으로 클릭 수 및 세션에 따라 즉석에서 맞춤 보고서를 생성합니다. 이는 종종 보고서를 만들기 위한 새로운 데이터를 실시간으로 수집하며, 고유 사용자 수와 같은 복잡한 집계를 구축해야 합니다.

2014년 4월 기준으로 Yandex.Metrica는 매일 약 120억 개의 이벤트(페이지 조회 및 클릭)를 추적하고 있었습니다. 이러한 모든 이벤트는 맞춤 보고서를 구축하기 위해 저장되어야 했습니다. 단일 쿼리는 몇 백 밀리초 내에 수백만 행을 스캔하거나 몇 초 만에 수억 행을 스캔해야 할 수 있습니다.

## Yandex.Metrica 및 기타 Yandex 서비스에서의 사용 {#usage-in-yandex-metrica-and-other-yandex-services}

ClickHouse는 Yandex.Metrica에서 여러 가지 용도로 사용됩니다.
주요 임무는 비집계 데이터를 사용하여 온라인 모드에서 보고서를 생성하는 것입니다. 이는 374대의 서버 클러스터를 사용하며, 데이터베이스에 20.3조 행 이상의 데이터를 저장합니다. 압축된 데이터의 양은 중복 및 복제본을 고려하지 않고도 약 2PB입니다. 비압축 데이터(TSV 형식)의 양은 약 17PB입니다.

ClickHouse는 다음 프로세스에서도 중요한 역할을 합니다:

- Yandex.Metrica의 세션 리플레이 데이터를 저장합니다.
- 중간 데이터를 처리합니다.
- 분석과 함께 글로벌 보고서를 생성합니다.
- Yandex.Metrica 엔진의 디버깅을 위한 쿼리를 실행합니다.
- API 및 사용자 인터페이스의 로그를 분석합니다.

현재 Yandex 서비스 및 부서에는 수십 개의 ClickHouse 설치가 있으며, 여기에는 검색 분야, 전자 상거래, 광고, 비즈니스 분석, 모바일 개발, 개인 서비스 등이 포함됩니다.

## 집계 데이터와 비집계 데이터 {#aggregated-and-non-aggregated-data}

효과적으로 통계를 계산하려면 데이터를 집계해야 한다는 일반적인 의견이 있습니다. 이는 데이터의 양을 줄여주기 때문입니다.

하지만 데이터 집계에는 많은 제한이 있습니다:

- 요구되는 보고서의 사전 정의된 목록이 필요합니다.
- 사용자는 맞춤 보고서를 만들 수 없습니다.
- 많은 수의 고유 키에 대해 집계할 경우 데이터 양이 거의 줄어들지 않아 집계는 쓸모가 없습니다.
- 많은 수의 보고서에 대해 너무 많은 집계 변형이 존재합니다(조합 폭발).
- 높은 기수(예: URL)를 가진 키를 집계할 때 데이터 양이 크게 줄어들지 않습니다(두 배 미만).
- 이러한 이유로 집계된 데이터의 양은 줄어드는 대신 증가할 수 있습니다.
- 사용자는 우리가 생성하는 모든 보고서를 보는 것이 아닙니다. 이러한 계산의 상당 부분은 쓸모가 없습니다.
- 다양한 집계로 인해 데이터의 논리적 무결성이 위배될 수 있습니다.

우리가 아무 것도 집계하지 않고 비집계 데이터로 작업한다면 계산의 양이 줄어들 수 있습니다.

그러나 집계를 사용하면 상당 부분의 작업이 오프라인에서 수행되고 비교적 평온하게 완료됩니다. 반면 온라인 계산은 결과를 기다리는 사용자 때문에 가능한 한 빨리 계산해야 합니다.

Yandex.Metrica에는 대부분의 보고서에 사용되는 Metrage라는 데이터 집계 전용 시스템이 있습니다. 
2009년부터 Yandex.Metrica는 비집계 데이터를 위한 OLAPServer라는 특수 OLAP 데이터베이스를 사용하는데, 이는 이전에 보고서 빌더에 사용되었습니다. 
OLAPServer는 비집계 데이터에서 잘 작동했지만, 모든 보고서에 원하는 대로 사용하기에는 많은 제약이 있었습니다. 이에는 데이터 유형(숫자만 지원) 지원 부족과 실시간으로 데이터를 점진적으로 업데이트할 수 없는 점(매일 데이터를 다시 쓰는 방식만 가능)이 포함되었습니다. OLAPServer는 DBMS가 아니라 특수 데이터베이스입니다.

ClickHouse의 초기 목표는 OLAPServer의 제한을 제거하고 모든 보고서에서 비집계 데이터를 다루는 문제를 해결하는 것이었지만, 수년에 걸쳐 다양한 분석 작업에 적합한 범용 데이터베이스 관리 시스템으로 발전하게 되었습니다.
