---
title: ClickHouse에서 매개변수화된 VIEW를 사용하는 방법
description: 쿼리 시점의 매개변수에 따라 데이터를 동적으로 분할할 수 있도록 ClickHouse에서 매개변수화된 VIEW를 생성하고 쿼리하는 방법을 설명합니다.
date: 2023-08-01
tags: ['사용 사례']
keywords: ['매개변수화된 VIEW']
---

{frontMatter.description}

{/* 생략 */}

## ClickHouse에서 매개변수화된 VIEW 사용하기 \{#using-parameterized-views-in-clickhouse\}

매개변수화된 VIEW는 쿼리 실행 시 전달하는 매개변수에 따라 데이터를 실시간으로 다양한 기준으로 분할·분석하는 데 유용합니다.

다음은 기본 예제입니다:

1. 테이블을 생성합니다.

```sql
clickhouse-cloud :) CREATE TABLE raw_data (id UInt32, data String) ENGINE = MergeTree ORDER BY id

CREATE TABLE raw_data
(
`id` UInt32,
`data` String
)
ENGINE = MergeTree
ORDER BY id

Query id: aa21e614-1e10-4bba-88ce-4c7183a9148e

Ok.

0 rows in set. Elapsed: 0.332 sec.
```

2. 임의의 샘플 데이터를 삽입합니다

```sql
clickhouse-cloud :) INSERT INTO raw_data SELECT * FROM generateRandom('`id` UInt32,
`data` String',1,1) LIMIT 1000000;

INSERT INTO raw_data SELECT *
FROM generateRandom('`id` UInt32,
`data` String', 1, 1)
LIMIT 1000000

Query id: c552a34a-b72f-45e1-bed0-778923e1b5c9

Ok.

0 rows in set. Elapsed: 0.438 sec. Processed 1.05 million rows, 10.99 MB (2.39 million rows/s., 25.11 MB/s.)
```

3. 파라미터화된 VIEW를 생성합니다:

```sql
clickhouse-cloud :) CREATE VIEW raw_data_parametrized AS SELECT * FROM raw_data WHERE id BETWEEN {id_from:UInt32} AND {id_to:UInt32}

CREATE VIEW raw_data_parametrized AS
SELECT *
FROM raw_data
WHERE (id >= {id_from:UInt32}) AND (id <= {id_to:UInt32})

Query id: 45fb83a6-aa55-4197-a7cd-9e1ad2c76d48

Ok.

0 rows in set. Elapsed: 0.102 sec.
```

4. `FROM` 절에 필요한 파라미터를 전달하여 파라미터화된 VIEW를 쿼리합니다:

```sql
clickhouse-cloud :) SELECT count() FROM raw_data_parametrized(id_from=0, id_to=50000);

SELECT count()
FROM raw_data_parametrized(id_from = 0, id_to = 50000)

Query id: 5731aae1-3e68-4e63-b57f-d50f29055744

┌─count()─┐
│ 317019 │
└─────────┘

1 row in set. Elapsed: 0.004 sec. Processed 319.49 thousand rows, 319.49 KB (76.29 million rows/s., 76.29 MB/s.)
```

자세한 내용은 https://clickhouse.com/docs/sql-reference/statements/create/view#parameterized-view를 참고하십시오.
