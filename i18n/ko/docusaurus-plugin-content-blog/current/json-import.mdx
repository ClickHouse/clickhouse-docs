---
title: JSON을 ClickHouse로 가져오는 방법
description: "JSON에는 여러 가지 변형 형식이 있지만, 데이터 수집에 가장 일반적으로 사용되는 형식은 JSONEachRow입니다. 이 형식에서는 각 행에 하나의 JSON 객체가 있으며, 각 객체는 줄바꿈으로 구분됩니다."
date: 2023-03-20
tags: ['데이터 수집']
keywords: ['JSON 가져오기']
---

{frontMatter.description}

{/* 생략 */}

## ClickHouse로 JSON 가져오기 \{#importing-json-into-clickhouse\}

ClickHouse는 [입출력을 위한 다양한 데이터 형식](https://clickhouse.com/docs/interfaces/formats/)을 지원합니다. 이들 중에는 여러 JSON 변형 형식이 있지만, 데이터 수집에 가장 일반적으로 사용되는 형식은 [JSONEachRow](https://clickhouse.com/docs/interfaces/formats/#jsoneachrow)입니다. 이 형식은 한 행당 하나의 JSON 객체를 요구하며, 각 객체는 줄바꿈으로 구분됩니다.

## 예시 \{#examples\}

[HTTP 인터페이스](https://clickhouse.com/docs/interfaces/http/) 사용 예:

```bash
$ echo '{"foo":"bar"}' | curl 'http://localhost:8123/?query=INSERT%20INTO%20test%20FORMAT%20JSONEachRow' --data-binary @-
```

[CLI 인터페이스](https://clickhouse.com/docs/interfaces/cli/)를 사용하여:

```bash
$ echo '{"foo":"bar"}'  | clickhouse-client --query="INSERT INTO test FORMAT JSONEachRow"
```

데이터를 수동으로 삽입하는 대신 [클라이언트 라이브러리](https://clickhouse.com/docs/interfaces/) 중 하나를 사용하는 것을 고려해 볼 수 있습니다.

## 유용한 설정 \{#useful-settings\}

* `input_format_skip_unknown_fields`를 사용하면 테이블 스키마에 존재하지 않는 추가 필드가 포함되어 있어도(해당 필드를 버리고) JSON을 INSERT 할 수 있습니다.
* `input_format_import_nested_json`을 사용하면 [Nested](https://clickhouse.com/docs/sql-reference/data-types/nested-data-structures/nested/) 타입의 컬럼에 중첩 JSON 객체를 INSERT 할 수 있습니다.

:::note
설정은 HTTP 인터페이스에서는 `GET` 매개변수로, `CLI` 인터페이스에서는 `--`로 시작하는 추가 명령줄 인자로 지정합니다.
:::