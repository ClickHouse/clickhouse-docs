---
title: 문자열 키와 값을 사용하는 ClickHouse 딕셔너리 생성 방법
description: MergeTree 테이블을 소스로 하여 문자열 키와 값을 사용하는 ClickHouse 딕셔너리를 생성하는 방법을 설정 및 사용 예제와 함께 설명합니다.
date: 2023-07-10
tags: ['데이터 모델링']
keywords: ['딕셔너리', '문자열 키', '문자열 값']
---

{frontMatter.description}

{{/* 이하 생략 */}}

## 질문 \{#question\}

MergeTree 테이블을 소스로 사용하여 문자열 키와 문자열 값을 사용하는 ClickHouse 딕셔너리를 생성하는 방법

## 답변 \{#answer\}

* 딕셔너리용 소스 테이블을 생성합니다

```
CREATE TABLE db1.table1_dict_source
(
  id UInt32,
  email String,
  name String
)
ENGINE = MergeTree()
ORDER BY id;
```

* 행을 삽입합니다

```
INSERT INTO db1.table1_dict_source
(id, email, name)
VALUES
(1, 'me@domain.com', 'me'),
(2, 'you@domain.com', 'you');
```

* key와 value가 모두 String 타입인 딕셔너리를 CREATE합니다

```
CREATE DICTIONARY db1.table1_dict
(
    email String,
    name String
)
PRIMARY KEY email
SOURCE(
CLICKHOUSE(
TABLE 'table1_dict_source'
USER 'default'
PASSWORD 'ClickHouse123!'))
LAYOUT(COMPLEX_KEY_HASHED())
LIFETIME(MIN 0 MAX 1000);
```

* 딕셔너리를 테스트합니다

```
clickhouse-cloud :) SELECT * from db1.table1_dict;

SELECT *
FROM db1.table1_dict

Query id: 098396ce-11dd-4c71-a0e1-40723dd67ddc

┌─email──────────┬─name─┐
│ me@domain.com  │ me   │
│ you@domain.com │ you  │
└────────────────┴──────┘

2 rows in set. Elapsed: 0.001 sec. 
```

또한 다음과 같이 dictGet 함수를 사용하여 값을 조회할 수 있습니다.

```
SELECT dictGet('db1.table1_dict', 'name', 'me@domain.com');
```

응답:

```
┌─dictGet('db1.table1_dict', 'name', 'me@domain.com')─┐
│ me                                                  │
└─────────────────────────────────────────────────────┘
```

자세한 내용은 https://clickhouse.com/docs/sql-reference/functions/ext-dict-functions 문서를 참조하십시오.
