---
title: Node.jsì—ì„œ @clickhouse/clientë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
description: "Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ @clickhouse/clientë¥¼ ì‚¬ìš©í•˜ì—¬ ClickHouseì™€ ì—°ë™í•˜ê³  ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤."
date: 2023-11-22
tags: ['Language Clients']
keywords: ['NodeJS']
---

{frontMatter.description}

{/* ìƒëµ */}

## NodeJSì—ì„œ @clickhouse/client ì‚¬ìš©í•˜ê¸° \{#use-nodejs-with-clickhouseclient\}

ê¸°ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí« íŒŒì¼ `main.ts`ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

`Package.json` (ê²½ë¡œ `./` ì•„ë˜ì— ë‘¡ë‹ˆë‹¤):

```json
{
  "name": "a simple clickhouse client example",
  "version": "1.0.0",
  "main": "main.js",
  "license": "MIT",
  "devDependencies": {
    "typescript": "^5.3.2"
  },
  "dependencies": {
    "@clickhouse/client": "^0.2.6"
  }
}
```

`Main.ts` (`./src` ì•„ë˜ì— ë‘ì‹­ì‹œì˜¤):

```ts
import { ClickHouseClient, createClient } from '@clickhouse/client'; // or '@clickhouse/client-web'

interface ClickHouseResultSet<T> {
  meta: Meta[];
  data: T[];
  rows: number;
  statistics: Statistics;
}

interface Statistics {
  elapsed: number;
  rows_read: number;
  bytes_read: number;
}

interface Meta {
  name: string;
  type: string;
}

interface Count {
  c: number;
}

//Please replace client connection parameters like`host`
//`username`, `passowrd`, `database` as needed.

const initClickHouseClient = async (): Promise<ClickHouseClient> => {
  const client = createClient({
    host: 'https://FQDN.aws.clickhouse.cloud',
    username: 'default',
    password: 'password',
    database: 'default',
    application: `pingpong`,
  });

  console.log('ClickHouse ping');
  if (!(await client.ping())) {
    throw new Error('failed to ping clickhouse!');
  }
  console.log('ClickHouse pong!');
  return client;
};

const main = async () => {
  console.log('Initialising clickhouse client');
  const client = await initClickHouseClient();

  const row = await client.query({
    query: `SELECT count() AS c FROM system.tables WHERE database='system'`,
  });

  const jsonRow: ClickHouseResultSet<Count> = await row.json();

  console.log(`I have found ${jsonRow.data[0].c} system tables!`);

  await client.close();
  console.log(`ğŸ‘‹`);
};

main();
```

íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë ¤ë©´ `./` ë””ë ‰í„°ë¦¬ì—ì„œ `yarn`ì„ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤.

```
$ yarn
yarn install v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
âœ¨  Done in 0.14s.
```

`./` ë””ë ‰í„°ë¦¬ì—ì„œ `main.ts` ì½”ë“œë¥¼ ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤:`

```
$ npx ts-node src/main.ts
```

ë‹¤ìŒê³¼ ê°™ì´ ì¶œë ¥ë©ë‹ˆë‹¤:

```
Initialising clickhouse client
ClickHouse ping
ClickHouse pong!
I have found 120 system tables!
ğŸ‘‹
```
