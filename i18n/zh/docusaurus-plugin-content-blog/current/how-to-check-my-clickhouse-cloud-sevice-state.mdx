---
title: 如何检查 ClickHouse Cloud 服务状态
description: 了解如何使用 ClickHouse Cloud API 在不唤醒服务的情况下检查服务是停止、空闲还是运行状态。
date: 2023-11-16
tags: ['云管理']
keywords: ['云服务状态']
---

{frontMatter.description}

{/* 截断 */}


## 如何检查您的 ClickHouse Cloud 服务状态 \{#how-to-check-your-clickhouse-cloud-service-state\}

我如何检查我的 ClickHouse Cloud 服务状态？我想确认服务当前是已停止、空闲还是正在运行，但又不希望在检查时将其唤醒。

## 解答 \{#answer\}

[ClickHouse Cloud API](/cloud/manage/api/api-overview) 非常适合用于检查云服务的状态。在使用 Cloud API 之前，您需要先在服务中创建一个 API Key。您可以在 ClickHouse Cloud 控制台 [clickhouse.cloud](https://console.clickhouse.cloud) 中完成此操作：

- [API 概览](/cloud/manage/api/api-overview)
- [Swagger](https://clickhouse.com/docs/cloud/manage/api/swagger)

1. 要检查某个服务的状态，运行以下命令。请确保将 `Key-ID` 和 `Key-Secret` 替换为您各自的值：

   ```shell
   curl --user '[Key-ID]:[Key-Secret]' https://api.clickhouse.cloud/v1/organizations/[Org-ID]/services/[Service-ID]
   ```

   输出类似如下内容：

   ```json
   result":{"id":"[Service-ID]","name":"[Service-Name]","provider":"aws","region":"us-east-1","state":"**idle**","endpoints":[{"protocol":"nativesecure","host":"[Connect-URL]","port":9440},{"protocol":"https","host":"[Connect-URL]","port":8443}],"tier":"development","idleScaling":true,"idleTimeoutMinutes":15,"ipAccessList":[{"source":"[my-IP]","description":"[my-IP-name]"}],"createdAt":"2023-04-13T23:47:47Z"},"status":200}
   ```

1. 您可以使用 [jq 工具](https://jqlang.github.io/jq/) 来提取 `state` 键：

   ```shell
   curl --user '[Key-ID]:[Key-Secret]' https://api.clickhouse.cloud/v1/organizations/[Org-ID]/services/[Service-ID] | jq '.state'
   ```

   输出类似如下内容：

   ```json
   **idle**
   ```

1. 对一个正在运行的服务执行同样的命令将会输出：

   ```json
   **running**
   ```