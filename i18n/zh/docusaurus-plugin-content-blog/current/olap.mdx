---
title: 什么是 OLAP？
description: "OLAP 是联机分析处理（Online Analytical Processing）的缩写。这个广义术语可以从两个角度来理解：技术视角和业务视角。"
date: 2021-09-01
tags: ['概念']
keywords: ['OLAP']
---

{frontMatter.description}

{/* 截断 */}


## OLAP \{#olap\}

[OLAP](https://en.wikipedia.org/wiki/Online_analytical_processing) 代表 Online Analytical Processing（联机分析处理）。这是一个涵义广泛的术语，可以从两个层面来理解：技术层面和业务层面。 

不过在更宏观的层面上，你可以简单地把这几个词倒过来理解：

Processing
:   某些源数据会被处理……

Analytical
:   ……以生成分析报表和洞察……

Online
:   ……并以在线实时的方式完成。

## 从业务视角看 OLAP \{#olap-from-the-business-perspective\}

近年来，业务人员开始意识到数据的价值。那些在决策时“摸黑前行”的公司，往往难以跟上竞争步伐。成功企业的数据驱动方法促使它们收集所有对业务决策哪怕“略有用处”的数据，并构建相应机制对这些数据进行及时分析。OLAP 数据库管理系统（DBMS）正是在这一场景中发挥作用。

从业务角度看，OLAP 使公司能够持续规划、分析和报告运营活动，从而最大化效率、降低成本，并最终扩大市场份额。这些工作既可以在自建系统中完成，也可以外包给 SaaS 提供商，例如 Web/移动分析服务、CRM 服务等。OLAP 是众多 BI（商业智能）应用背后的核心技术。

ClickHouse 是一种 OLAP 数据库管理系统，经常被用作此类 SaaS 解决方案的后端，用于分析特定领域的数据。然而，一些企业仍然不愿将其数据交给第三方提供商，因此自建数据仓库的方案同样可行。

## 从技术视角看 OLAP \{#olap-from-the-technical-perspective\}

所有数据库管理系统大致可以分为两类：OLAP（联机**分析**处理，Online **Analytical** Processing）和 OLTP（联机**事务**处理，Online **Transactional** Processing）。前者侧重于构建报表，每个报表通常基于海量的历史数据，但生成报表的频率并不高。而后者通常要处理连续不断的事务流，不断地修改数据的当前状态。

在实践中，OLAP 和 OLTP 并不是泾渭分明的类别，更像是一个光谱。大多数实际系统通常会主要针对其中一种场景进行优化，但在需要处理另一类负载时，也会提供一定的解决方案或变通方法。这种情况经常迫使企业集成并运行多套存储系统，这本身或许并不算什么大问题，但系统越多，运维成本就越高。因此，近年来的一个趋势是 HTAP（**Hybrid Transactional/Analytical Processing，混合事务/分析处理**），即让单一数据库管理系统能够同样出色地处理这两类负载。

即便某个 DBMS 一开始是纯 OLAP 或纯 OLTP，为了在竞争中保持优势，也不得不朝 HTAP 的方向演进。ClickHouse 也不例外，它最初被设计为[尽可能快的 OLAP 系统](https://clickhouse.com/docs/faq/general/why-clickhouse-is-so-fast)，目前依然不支持完整的事务功能，但已经引入了一致性读/写，以及用于更新/删除数据的变更操作（mutations）等特性。

OLAP 和 OLTP 系统之间的基本取舍依然存在：

- 为了高效地构建分析报表，能够按列独立读取数据至关重要，因此大多数 OLAP 数据库都是[列式](https://clickhouse.com/docs/faq/general/columnar-database)的；
- 而按列单独存储会增加对行进行操作（例如追加或就地修改）的成本，该成本与列的数量成正比（如果系统尝试“以防万一”记录事件的所有细节，那么列数可能会非常庞大）。因此，大多数 OLTP 系统采用按行组织数据的方式存储。