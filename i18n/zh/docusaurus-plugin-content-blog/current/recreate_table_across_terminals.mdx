---
date: 2023-03-24
title: "如何在不同终端之间快速重建小表"
description: "了解如何在开发环境中，借助复制/粘贴在不同终端之间快速重建一个小表及其数据。"
tags: ['工具和实用程序']
keywords: ['重建表', '终端']
---

{frontMatter.description}

{/* 截断 */}


## Question \{#question\}

如何仅通过在不同终端之间复制和粘贴，快速重建一张表及其数据？

## 回答

这并不是推荐的数据迁移方式，不应在生产环境中用于数据库之间的数据迁移。

此方法仅作为在多环境开发时，用于快速、简便地重新创建少量数据的权宜之计。

1. 使用 `SHOW CREATE table` 获取 `CREATE TABLE` 语句：

```sql
SHOW CREATE TABLE cookies;

SHOW CREATE TABLE cookies

查询 ID：248ec8e2-5bce-45b3-97d9-ed68edf445a5

┌─statement────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ CREATE TABLE default.cookies
(
    `id` String,
    `timestamp` DateTime
)
ENGINE = MergeTree
ORDER BY id
SETTINGS index_granularity = 8192 │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

```

2. 使用 `FORMAT SQLInsert` 导出数据

```sql
SELECT * FROM cookies FORMAT SQLInsert;

SELECT *
FROM cookies
FORMAT SQLInsert

Query id: 383759b8-69c0-4561-ab95-f8224abc0071

INSERT INTO table (`id`, `timestamp`) VALUES ('4', '2023-03-15 16:28:46')
, ('2', '2023-03-15 16:28:41')
, ('1', '2023-03-15 16:11:02'), ('1', '2023-03-15 16:11:40'), ('1', '2023-03-15 16:11:48'), ('1', '2023-03-15 16:16:05'), ('2', '2023-03-15 16:11:06'), ('3', '2023-03-15 16:11:12'), ('3', '2023-03-15 16:11:45'), ('3', '2023-03-15 16:16:08'), ('4', '2023-03-15 16:11:14'), ('4', '2023-03-15 16:11:50'), ('4', '2023-03-15 16:16:01'), ('5', '2023-03-15 16:11:18'), ('5', '2023-03-15 16:16:11')
;

结果集包含 15 行。用时：0.023 秒。
```

请注意，您需要在第 2 步将名称 `table` 替换为实际的表名（本示例中为 `cookies`）
