---
title: 什么是列式数据库？
description: "列式数据库将每一列的数据单独存储。这样在执行任意查询时，只需从磁盘读取被使用到的那些列的数据。"
date: 2021-09-01
tags: ['核心数据概念']
keywords: ['列式数据库']
---

import Image from '@theme/IdealImage';
import RowOriented from '@site/static/images/row-oriented.gif';
import ColumnOriented from '@site/static/images/column-oriented.gif';

{frontMatter.description}

{/* truncate */}


## 介绍 \{#introduction\}

列式数据库会将每一列的数据独立存储。这样一来，在执行任意一次查询时，只需从磁盘读取该查询实际用到的列的数据。代价是：对整行产生影响的操作会相应变得更加昂贵。列式数据库也被称为面向列的数据库管理系统。ClickHouse 就是此类系统的一个典型示例。

## 列式数据库的优势 \{#advantages-of-a-columnar-database\}

列式数据库的主要优势包括：

- 在包含许多列的表中，仅使用少数列的查询。
- 针对海量数据的聚合查询。
- 按列进行数据压缩。

## 行式数据库 vs 列式数据库 \{#row-oriented-vs-column-oriented-databases\}

下面是一个示意图，用于说明在生成报表时，传统行式系统与列式数据库之间的差异：

**传统行式**

<Image img={RowOriented} alt="传统行式数据库存储示意图" size="md" />

**列式**

<Image img={ColumnOriented} alt="列式数据库存储示意图" size="md" />

对于分析型应用来说，列式数据库是首选，因为它允许在表中预先定义许多列以备后用，但在执行读取查询时，对未使用列不会产生额外开销（传统的 OLTP 数据库在查询时会读取整行数据，因为数据是按行而不是按列存储的）。列式数据库专为大数据处理和数据仓库而设计。它们通常通过由低成本硬件组成的分布式集群进行原生横向扩展，以提高吞吐量。ClickHouse 通过结合使用[分布式](https://clickhouse.com/docs/engines/table-engines/special/distributed)和[复制](https://clickhouse.com/docs/engines/table-engines/mergetree-family/replication)表来实现这一点。