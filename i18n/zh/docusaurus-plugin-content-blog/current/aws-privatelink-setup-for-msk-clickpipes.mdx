---
title: 通过 AWS PrivateLink 将 MSK 暴露给 ClickPipes 的设置
description: 通过 MSK 多 VPC 连接功能将私有 MSK 暴露给 ClickPipes 的设置步骤。
date: 2025-4-15
tags: ['安全与认证', '云管理']
keywords: ['AWS PrivateLink', 'MSK', 'ClickPipes']
---

{frontMatter.description}

{/* 截断 */}

## 概览 \{#overview\}

本指南将引导您配置一个可与 [ClickPipes 反向私有端点](/integrations/clickpipes/aws-privatelink#msk-multi-vpc) 搭配使用的 **MSK 多 VPC** 环境。

## 要求 \{#requirements\}

您的 MSK 集群 VPC 必须位于我们的某个 ClickPipes 区域内。支持的区域列表请参见 [ClickPipes 区域](/integrations/clickpipes/aws-privatelink#aws-privatelink-regions)。

## 启用多 VPC 互连 \{#enabling-multi-vpc-connectivity\}

1. 进入 MSK 集群页面。
   * 在 Amazon MSK 控制台左侧导航栏中选择 “Clusters”。
   * 选择你希望配置为多 VPC 互连的目标 MSK 集群。
2. 启用 MSK 多 VPC 互连
   * 在 **Connectivity** 选项卡中找到 **Multi-VPC connectivity** 部分。
   * 点击 **Edit**。
   * 启用 **Turn-on MSK multi-VPC connectivity** 选项。
   * 按照向导完成配置。
3. 将 ClickPipes 账户主体添加到集群策略中
   * 转到 **Configuration** 选项卡。
   * 在 **Cluster policy** 部分点击 **Edit**。
   * 在 **IAM policy** 中加入 `arn:aws:iam::072088201116:root`。示例：
     ```json
     {
         "Version": "2012-10-17",
         "Statement": [
             {
                 "Effect": "Allow",
                 "Principal": {
                     "AWS": [
                         "arn:aws:iam::072088201116:root"
                     ]
                 },
                 "Action": [
                     "kafka-cluster:Connect",
                     "kafka-cluster:DescribeCluster",
                     "kafka-cluster:ListClusters"
                 ]
             }
         ]
     }
     ```

## 创建反向私有终端节点 \{#creating-reverse-private-endpoint\}

按照 [ClickPipes 文档](/integrations/clickpipes/aws-privatelink#creating-clickpipe) 中的步骤创建反向私有终端节点。