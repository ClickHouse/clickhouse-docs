---
slug: /changelogs/24.6
title: 'v24.6 云端变更日志'
description: 'v24.6 快速发布变更日志'
keywords: ['changelog', 'cloud']
sidebar_label: '24.6'
sidebar_position: 7
doc_type: 'changelog'
---



# V24.6 Cloud 版本更新日志

基于 v24.6 版本的 ClickHouse Cloud 服务相关更新。



## 向后不兼容的变更 {#backward-incompatible-change}

- 重构了存储引擎 `S3Queue` 在 `Ordered` 模式下的并行处理。如果您使用了 `s3queue_processing_threads_num` 或 `s3queue_total_shards_num` 设置,此 PR 对 Ordered 模式不向后兼容。设置 `s3queue_total_shards_num` 已被删除,该设置此前仅允许在 `s3queue_allow_experimental_sharded_mode` 下使用,现已弃用。新增设置 `s3queue_buckets`。[#64349](https://github.com/ClickHouse/ClickHouse/pull/64349) ([Kseniia Sumarokova](https://github.com/kssenii))。
- 新增函数 `snowflakeIDToDateTime`、`snowflakeIDToDateTime64`、`dateTimeToSnowflakeID` 和 `dateTime64ToSnowflakeID`。与现有函数 `snowflakeToDateTime`、`snowflakeToDateTime64`、`dateTimeToSnowflake` 和 `dateTime64ToSnowflake` 不同,新函数与 `generateSnowflakeID` 函数兼容,即可接受由 `generateSnowflakeID` 生成的 snowflake ID,并生成与 `generateSnowflakeID` 相同类型(即 `UInt64`)的 snowflake ID。此外,新函数默认使用 UNIX 纪元(即 1970-01-01),与 `generateSnowflakeID` 保持一致。如有需要,可以传递不同的纪元,例如 Twitter/X 的纪元 2010-11-04(即自 UNIX 纪元起 1288834974657 毫秒)。旧的转换函数已弃用,将在过渡期后移除:如仍需使用,请启用设置 `allow_deprecated_snowflake_conversion_functions`。[#64948](https://github.com/ClickHouse/ClickHouse/pull/64948) ([Robert Schulze](https://github.com/rschu1ze))。


## 新功能 {#new-feature}

- 支持空元组。[#55061](https://github.com/ClickHouse/ClickHouse/pull/55061) ([Amos Bird](https://github.com/amosbird))。
- 新增希尔伯特曲线编码和解码函数。[#60156](https://github.com/ClickHouse/ClickHouse/pull/60156) ([Artem Mustafin](https://github.com/Artemmm91))。
- 新增对 `hilbertEncode` 的索引分析支持。[#64662](https://github.com/ClickHouse/ClickHouse/pull/64662) ([Artem Mustafin](https://github.com/Artemmm91))。
- 新增使用 `readWKTLineString` 函数读取 WKT 格式 `LINESTRING` 几何图形的支持。[#62519](https://github.com/ClickHouse/ClickHouse/pull/62519) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov))。
- 新增 SQL 函数 `generateSnowflakeID`,用于生成 Twitter 风格的 Snowflake ID。[#63577](https://github.com/ClickHouse/ClickHouse/pull/63577) ([Danila Puzov](https://github.com/kazalika))。
- 新增使用 `=` 运算符比较 `IPv4` 和 `IPv6` 类型的支持。[#64292](https://github.com/ClickHouse/ClickHouse/pull/64292) ([Francisco J. Jurado Moreno](https://github.com/Beetelbrox))。
- 支持在二元数学函数(pow、atan2、max2、min2、hypot)中使用 decimal 参数。[#64582](https://github.com/ClickHouse/ClickHouse/pull/64582) ([Mikhail Gorshkov](https://github.com/mgorshkov))。
- 新增 SQL 函数 `parseReadableSize`(以及 `OrNull` 和 `OrZero` 变体)。[#64742](https://github.com/ClickHouse/ClickHouse/pull/64742) ([Francisco J. Jurado Moreno](https://github.com/Beetelbrox))。
- 为类文件存储引擎(s3/file/hdfs/url/azureBlobStorage)新增 `_time` 虚拟列。[#64947](https://github.com/ClickHouse/ClickHouse/pull/64947) ([Ilya Golshtein](https://github.com/ilejn))。
- 引入新函数 `base64URLEncode`、`base64URLDecode` 和 `tryBase64URLDecode`。[#64991](https://github.com/ClickHouse/ClickHouse/pull/64991) ([Mikhail Gorshkov](https://github.com/mgorshkov))。
- 新增函数 `editDistanceUTF8`,用于计算两个 UTF8 字符串之间的[编辑距离](https://en.wikipedia.org/wiki/Edit_distance)。[#65269](https://github.com/ClickHouse/ClickHouse/pull/65269) ([LiuNeng](https://github.com/liuneng1994))。
- 新增 `http_response_headers` 配置项,以支持在自定义 HTTP 处理程序中设置自定义响应头。[#63562](https://github.com/ClickHouse/ClickHouse/pull/63562) ([Grigorii](https://github.com/GSokol))。
- 新增表函数 `loop`,支持以无限循环方式返回查询结果。[#63452](https://github.com/ClickHouse/ClickHouse/pull/63452) ([Sariel](https://github.com/sarielwxm))。此功能对测试很有用。
- 在 `system.query_log` 中引入两个新列:`used_privileges` 和 `missing_privileges`。`used_privileges` 记录查询执行期间检查的权限,`missing_privileges` 包含缺失的必需权限。[#64597](https://github.com/ClickHouse/ClickHouse/pull/64597) ([Alexey Katsman](https://github.com/alexkats))。
- 新增设置 `output_format_pretty_display_footer_column_names`,启用后会在长表(默认为 50 行)的末尾显示列名,最小行数阈值由 `output_format_pretty_display_footer_column_names_min_rows` 控制。[#65144](https://github.com/ClickHouse/ClickHouse/pull/65144) ([Shaun Struwig](https://github.com/Blargian))。


## 性能改进 {#performance-improvement}


* 修复在 #60459（24.5）中引入的 `cross join` 性能回退问题。#65243（Nikita Taranov）。
* 改进 io&#95;uring 重新提交的可观测性。将 profile 事件 IOUringSQEsResubmits 重命名为 IOUringSQEsResubmitsAsync，并新增 IOUringSQEsResubmitsSync。#63699 (Tomer Shafir)。
* 引入断言，用于验证所有函数在调用时使用的列大小是否正确。#63723（Raúl Marín）。
* 在插入过程中新增按行重新排列的能力，以在不违反由 `PRIMARY KEY` 指定的顺序的前提下优化数据大小。该行为由设置 `optimize_row_order` 控制（默认关闭）。[#63578](https://github.com/ClickHouse/ClickHouse/pull/63578)（[Igor Markelov](https://github.com/ElderlyPassionFruit)）。
* 添加了原生 Parquet 读取器，可以将 Parquet 二进制数据直接读取为 ClickHouse 列。该功能由设置 `input_format_parquet_use_native_reader` 控制（默认禁用）。[#60361](https://github.com/ClickHouse/ClickHouse/pull/60361)（[ZhiHong Zhang](https://github.com/copperybean)）。
* 在查询过滤条件能够从 MergeTree 表中选出精确范围时，支持部分简单 `count` 优化。[#60463](https://github.com/ClickHouse/ClickHouse/pull/60463) ([Amos Bird](https://github.com/amosbird))。
* 通过在单个 transform 中汇集多个线程的块，降低多线程 `INSERT` 的最大内存使用量。 [#61047](https://github.com/ClickHouse/ClickHouse/pull/61047) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* 在使用 Azure 对象存储时，通过采用固定内存分配来降低内存占用，避免分配额外的缓冲区。[#63160](https://github.com/ClickHouse/ClickHouse/pull/63160) ([SmitaRKulkarni](https://github.com/SmitaRKulkarni))。
* 减少 `ColumnNullable::size` 中虚函数调用的次数。[#60556](https://github.com/ClickHouse/ClickHouse/pull/60556) ([HappenLee](https://github.com/HappenLee))。
* 当正则表达式参数为单个字符时，加快 `splitByRegexp` 的执行速度。 [#62696](https://github.com/ClickHouse/ClickHouse/pull/62696) ([Robert Schulze](https://github.com/rschu1ze)).
* 通过跟踪 8 位和 16 位键中实际使用的最小值和最大值来加速聚合操作，从而减少需要检查的单元格数量。[#62746](https://github.com/ClickHouse/ClickHouse/pull/62746)（[Jiebin Sun](https://github.com/jiebinn)）。
* 当左侧为 `LowCardinality` 且右侧为常量集合时，对 `IN` 运算符进行了优化。[#64060](https://github.com/ClickHouse/ClickHouse/pull/64060) ([Zhiguo Zhou](https://github.com/ZhiguoZh)).
* 在 `ConcurrentHashJoin` 中使用线程池初始化和销毁哈希表。[#64241](https://github.com/ClickHouse/ClickHouse/pull/64241)（[Nikita Taranov](https://github.com/nickitat)）。
* 优化了包含稀疏列的表中的纵向合并。[#64311](https://github.com/ClickHouse/ClickHouse/pull/64311)（[Anton Popov](https://github.com/CurtizJ)）。
* 在垂直合并期间启用了从远程文件系统预取数据的功能，从而降低了在数据存储于远程文件系统的表中执行垂直合并时的延迟。 [#64314](https://github.com/ClickHouse/ClickHouse/pull/64314) ([Anton Popov](https://github.com/CurtizJ)).
* 减少对 `ColumnSparse::filter` 中 `isDefault` 的冗余调用以提升性能。 [#64426](https://github.com/ClickHouse/ClickHouse/pull/64426) ([Jiebin Sun](https://github.com/jiebinn)).
* 通过发起多个异步 `getChildren` 请求，加快 `find_super_nodes` 和 `find_big_family` keeper-client 命令的执行。[#64628](https://github.com/ClickHouse/ClickHouse/pull/64628) ([Alexander Gololobov](https://github.com/davenger))。
* 改进针对可为空数值类型参数的 `least`/`greatest` 函数。[#64668](https://github.com/ClickHouse/ClickHouse/pull/64668) ([KevinyhZou](https://github.com/KevinyhZou))。
* 允许合并查询计划中两个连续的过滤步骤。如果过滤条件可以从父步骤下推，这将改进过滤下推（filter pushdown）优化。[#64760](https://github.com/ClickHouse/ClickHouse/pull/64760)（[Nikolai Kochetov](https://github.com/KochetovNicolai)）。
* 在纵向 final 的最新实现中移除不正确的优化，并默认重新启用纵向 final 算法。 [#64783](https://github.com/ClickHouse/ClickHouse/pull/64783) ([Duc Canh Le](https://github.com/canhld94)).
* 从过滤表达式中移除 `ALIAS` 节点。这可以在带有 `PREWHERE` 的查询中（使用新分析器）略微提升性能。 [#64793](https://github.com/ClickHouse/ClickHouse/pull/64793) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* 重新启用 OpenSSL 会话缓存。 [#65111](https://github.com/ClickHouse/ClickHouse/pull/65111) ([Robert Schulze](https://github.com/rschu1ze))。
* 新增了用于在插入时禁用跳过索引和统计信息物化的设置（`materialize_skip_indexes_on_insert` 和 `materialize_statistics_on_insert`）。 [#64391](https://github.com/ClickHouse/ClickHouse/pull/64391) ([Anton Popov](https://github.com/CurtizJ)).
* 使用已分配的内存大小来计算行组大小，并在单线程模式下降低 Parquet 写入器的峰值内存占用。[#64424](https://github.com/ClickHouse/ClickHouse/pull/64424) ([LiuNeng](https://github.com/liuneng1994))。
* 改进稀疏列迭代器以减少 `size` 的调用次数。[#64497](https://github.com/ClickHouse/ClickHouse/pull/64497) ([Jiebin Sun](https://github.com/jiebinn))。
* 更新条件，在备份到 Azure Blob 存储时使用服务端复制。[#64518](https://github.com/ClickHouse/ClickHouse/pull/64518) ([SmitaRKulkarni](https://github.com/SmitaRKulkarni)).
* 针对具有大量跳过索引（skip indexes）的表，优化了纵向合并的内存使用。 [#64580](https://github.com/ClickHouse/ClickHouse/pull/64580) ([Anton Popov](https://github.com/CurtizJ)).





## 改进 {#improvement}


* 恢复了 ClickHouse 在 CSV 格式下处理和解释 `Tuple` 的既有行为。此更改实质上回滚了 ClickHouse/ClickHouse#60994，并将相关行为仅限定在以下几个设置下：output&#95;format&#95;csv&#95;serialize&#95;tuple&#95;into&#95;separate&#95;columns、input&#95;format&#95;csv&#95;deserialize&#95;separate&#95;columns&#95;into&#95;tuple 和 input&#95;format&#95;csv&#95;try&#95;infer&#95;strings&#95;from&#95;quoted&#95;tuples。#65170 (Nikita Mikhaylov)。
* 对系统表执行 `SHOW CREATE TABLE` 时，现在会显示每个表特有且非常实用的注释，用于解释为什么需要这个表。[#63788](https://github.com/ClickHouse/ClickHouse/pull/63788) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov))。
* 函数 `round()`, `roundBankers()`, `floor()`, `ceil()` 和 `trunc()` 的第二个参数（scale）现在可以为非 const。[#64798](https://github.com/ClickHouse/ClickHouse/pull/64798) ([Mikhail Gorshkov](https://github.com/mgorshkov))。
* 在服务饱和、调度线程时，避免在进行 MergeTree 索引分析时可能发生的死锁。[#59427](https://github.com/ClickHouse/ClickHouse/pull/59427)（[Sean Haynes](https://github.com/seandhaynes)）。
* 修复了 S3 代理支持和隧道功能中的若干次要边界情况问题。[#63427](https://github.com/ClickHouse/ClickHouse/pull/63427) ([Arthur Passos](https://github.com/arthurpassos))。
* 添加指标，用于跟踪 `plain_rewritable` 元数据存储创建和删除的目录数量，以及本地到远程内存映射表中的条目数量。[#64175](https://github.com/ClickHouse/ClickHouse/pull/64175)（[Julia Kartseva](https://github.com/jkartseva)）。
* 查询缓存现在会将文本相同但设置不同的查询视为不同的查询。这样在不同设置（例如 `limit` 或 `additional_table_filters`）会影响查询结果的情况下，提高了健壮性。[#64205](https://github.com/ClickHouse/ClickHouse/pull/64205)（[Robert Schulze](https://github.com/rschu1ze)）。
* 在对象存储中支持将非标准错误码 `QpsLimitExceeded` 视为可重试错误。[#64225](https://github.com/ClickHouse/ClickHouse/pull/64225) ([Sema Checherinda](https://github.com/CheSema))。
* 新增了用于控制平均输出数据块大小（字节）的设置 `input_format_parquet_prefer_block_bytes`，并将 `input_format_parquet_max_block_size` 的默认值修改为 65409。[#64427](https://github.com/ClickHouse/ClickHouse/pull/64427) ([LiuNeng](https://github.com/liuneng1994)).
* 用户配置中的设置不会影响基于对象存储的 `MergeTree` 的合并和变更操作。 [#64456](https://github.com/ClickHouse/ClickHouse/pull/64456) ([alesapin](https://github.com/alesapin)).
* 在对象存储中将非标准错误码 `TotalQpsLimitExceeded` 视为可重试错误。[#64520](https://github.com/ClickHouse/ClickHouse/pull/64520) ([Sema Checherinda](https://github.com/CheSema))。
* 为开源版和 ClickHouse Cloud 版本更新了高级仪表板，新增了“最大并发网络连接数”图表。[#64610](https://github.com/ClickHouse/ClickHouse/pull/64610)（[Thom O&#39;Connor](https://github.com/thomoco)）。
* 改进 `zeros_mt` 和 `generateRandom` 的进度汇报。 [#64804](https://github.com/ClickHouse/ClickHouse/pull/64804) ([Raúl Marín](https://github.com/Algunenano))。
* 添加异步指标 `jemalloc.profile.active`，用于显示当前是否启用了采样。此指标是对 `prof.active` 的补充激活机制；调用线程要进行采样，这两者都必须处于激活状态。[#64842](https://github.com/ClickHouse/ClickHouse/pull/64842) ([Unalian](https://github.com/Unalian))。
* 移除对 `allow_experimental_join_condition` 的重要标记。该标记可能会导致在混合版本集群中无法成功执行分布式查询。[#65008](https://github.com/ClickHouse/ClickHouse/pull/65008) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov))。
* 新增服务器异步指标 `DiskGetObjectThrottler*` 和 `DiskPutObjectThrottler*`，用于反映通过磁盘设置 `s3_max_get_rps` 和 `s3_max_put_rps` 定义的每秒请求速率限制，以及当前在不触发该磁盘限流阈值的情况下仍可发送的请求数量。对于每个配置了限流的磁盘，都会定义这些指标。[#65050](https://github.com/ClickHouse/ClickHouse/pull/65050) ([Sergei Trifonov](https://github.com/serxa))。
* 在使用 `bcrypt_hash` 创建用户时添加验证。[#65242](https://github.com/ClickHouse/ClickHouse/pull/65242)（[Raúl Marín](https://github.com/Algunenano)）。
* 为 `PREWHERE` 执行期间/之后读取的行数添加 profile 事件。[#64198](https://github.com/ClickHouse/ClickHouse/pull/64198) ([Nikita Taranov](https://github.com/nickitat)).
* 在使用并行副本时，在 `EXPLAIN PLAN` 中输出查询。[#64298](https://github.com/ClickHouse/ClickHouse/pull/64298) ([vdimir](https://github.com/vdimir))。
* 将 `allow_deprecated_functions` 重命名为 `allow_deprecated_error_prone_window_functions`。 [#64358](https://github.com/ClickHouse/ClickHouse/pull/64358) ([Raúl Marín](https://github.com/Algunenano)).
* 在 `file` 表函数中，对文件描述符同样遵循 `max_read_buffer_size` 设置。 [#64532](https://github.com/ClickHouse/ClickHouse/pull/64532) ([Azat Khuzhin](https://github.com/azat)).
* 即使在 `Materialized View` 中，对不支持的存储也禁用事务。[#64918](https://github.com/ClickHouse/ClickHouse/pull/64918) ([alesapin](https://github.com/alesapin)).
* 在旧版 analyzer 中禁止使用 `QUALIFY` 子句。旧版 analyzer 会忽略 `QUALIFY`，因此在执行 mutation 时可能导致意外的数据被删除。[#65356](https://github.com/ClickHouse/ClickHouse/pull/65356) ([Dmitry Novik](https://github.com/novikd)).





## 错误修复(官方稳定版本中用户可见的异常行为) {#bug-fix-user-visible-misbehavior-in-an-official-stable-release}

- 修复了 'set' 跳数索引与 IN 和 indexHint() 配合使用时不生效的问题。#62083 (Michael Kolupaev)。
- 修复了当表未使用自适应粒度时,带有 FINAL 的查询返回错误结果的问题。#62432 (Duc Canh Le)。
- 支持在参数化视图赋值期间执行函数。#63502 (SmitaRKulkarni)。
- 修复了 Parquet 内存跟踪问题。#63584 (Michael Kolupaev)。
- 修复了分布式查询结果中缺少数据的罕见情况。#63691 (vdimir)。
- 修复了读取 Tuple(Map(LowCardinality(String), String), ...) 类型列的问题。#63956 (Anton Popov)。
- 修复了非限定 COLUMNS 匹配器的解析问题。保留输入列顺序并禁止使用未知标识符。#63962 (Dmitry Novik)。
- 修复了不同类型(表达式和函数)的循环别名导致的循环别名错误。#63993 (Nikolai Kochetov)。
- 此修复将在查询管道中为每个视图使用具有正确定义者的适当重定义上下文。#64079 (pufit)。
- 修复分析器:修复了使用 INTERPOLATE 时出现的"未找到列"错误。#64096 (Yakov Olkhovskiy)。
- 防止在 CREATE TABLE as MaterializedView 时出现 LOGICAL_ERROR。#64174 (Raúl Marín)。
- 查询缓存现在将针对不同数据库的两个相同查询视为不同。之前的行为可能被用于绕过读取表所需的权限。#64199 (Robert Schulze)。
- 修复了 StatusFile 中 ~WriteBufferFromFileDescriptor 未捕获异常可能导致的中止问题。#64206 (Kruglov Pavel)。
- 修复了带有 ARRAY JOIN 的分布式查询中的重复别名错误。#64226 (Nikolai Kochetov)。
- 修复了从字符串到整数的意外 accurateCast 问题。#64255 (wudidapaopao)。
- 修复了当任何 OR 组包含互斥原子时的 CNF 简化问题。#64256 (Eduard Karacharov)。
- 修复了查询树大小验证问题。#64377 (Dmitry Novik)。
- 修复了带有 PREWHERE 的 Buffer 表的逻辑错误:错误的类型转换。#64388 (Nikolai Kochetov)。
- 修复了具有默认表达式的表的 CREATE TABLE AS 查询问题。#64455 (Anton Popov)。
- 修复了在具有可空键的表上使用 ORDER BY ... NULLS FIRST / LAST 时的 optimize_read_in_order 行为。#64483 (Eduard Karacharov)。
- 修复了带有 GLOBAL IN 别名的查询中出现的"表达式节点列表期望 1 个投影名称"和"未知表达式或标识符"错误。#64517 (Nikolai Kochetov)。
- 修复了在 GROUP BY 键中使用常量 CTE 的分布式查询中出现的"无法找到列"错误。#64519 (Nikolai Kochetov)。
- 修复了当格式化器生成奇数个字符且最后一个字符为 0 时,函数 formatDateTimeInJodaSyntax 的输出问题。例如,SELECT formatDateTimeInJodaSyntax(toDate('2012-05-29'), 'D') 现在正确返回 150 而不是之前的 15。#64614 (LiuNeng)。
- 如果已使用 -If 组合器,则不重写聚合。#64638 (Dmitry Novik)。
- 修复了浮点数的类型推断问题(在小缓冲区的情况下,即 --max_read_buffer_size 1)。#64641 (Azat Khuzhin)。
- 修复了可能导致带有表达式的 TTL 不生效的错误。#64694 (alesapin)。
- 修复了删除始终为真的 WHERE 和 PREWHERE 表达式的问题(针对新分析器)。#64695 (Nikolai Kochetov)。
- 修复了在通过 startsWith、endsWith、match、multiSearchAny 的结果进行过滤时,基于令牌的文本索引(ngrambf、full_text)过度消除数据分区的问题。#64720 (Eduard Karacharov)。
- 修复了 UTF8::computeWidth 函数中 ANSI CSI 转义的不正确行为。#64756 (Shaun Struwig)。
- 修复了跨子查询错误删除 ORDER BY / LIMIT BY 的情况。#64766 (Raúl Marín)。
- 修复了(实验性)在混合连接条件中使用子查询进行不等连接的问题。#64775 (lgbo)。
- 修复了在 plain_rewritable 磁盘上的本地缓存中发生的崩溃问题。#64778 (Julia Kartseva)。
- 修复了在通过嵌套列使用 ARRAY JOIN 的分布式查询中出现的"无法找到列"问题。修复 #64755。#64801 (Nikolai Kochetov)。
- 修复了 SLRU 缓存策略中的内存泄漏问题。#64803 (Kseniia Sumarokova)。
- 修复了几种查询中可能出现的不正确内存跟踪问题:从 S3 读取任何数据的查询、通过 HTTP 协议的查询、异步插入。#64844 (Anton Popov)。
- 修复了当物化视图的列类型与源表不同时,使用 PREWHERE 从物化视图读取的查询出现的块结构不匹配错误。修复 #64611。#64855 (Nikolai Kochetov)。
- 修复了当表具有带子查询的 TTL + 数据库复制 + 并行副本 + 分析器时发生的罕见崩溃。这种情况确实很少见,但请不要在 TTL 中使用子查询。#64858 (alesapin)。
- 修复了在 ClickHouse/ClickHouse#54211 中对参数化视图失效的 ALTER MODIFY COMMENT 查询。#65031 (Nikolay Degterinsky)。
- 修复了启用 cluster_secure_connection 参数时 DatabaseReplicated 中的 host_id 问题。以前,即使启用了该参数,DatabaseReplicated 创建的集群内的所有连接都不安全。#65054 (Nikolay Degterinsky)。
- 修复了 StorageMerge 的 PREWHERE 优化后出现的"未就绪集合"错误。#65057 (Nikolai Kochetov)。
- 避免在类文件存储中写入已完成的缓冲区。#65063 (Kruglov Pavel)。
- 修复了循环别名情况下可能出现的无限查询持续时间问题。修复 #64849。#65081 (Nikolai Kochetov)。
- 修复了带有 INTERPOLATE(别名)的远程查询出现的"未知表达式标识符"错误(新分析器)。修复 #64636。#65090 (Nikolai Kochetov)。
- 修复了将算术操作推出聚合的问题。在新分析器中,优化仅应用一次。#65104 (Dmitry Novik)。
- 修复了新分析器中的聚合函数名称重写问题。#65110 (Dmitry Novik)。
- 在从客户端套接字读取请求体(部分)时发生接收超时的情况下,响应 5xx 而不是 200 OK。#65118 (Julian Maicher)。
- 修复了对冲请求可能发生的崩溃问题。#65206 (Azat Khuzhin)。
- 修复了 Hashed 和 Hashed_Array 字典短路求值中的错误,该错误可能读取未初始化的数字,导致各种错误。#65256 (jsc0218)。
- 此 PR 确保在 IN 操作符的类型转换过程中,常量(IN 操作符的第二个参数)的类型始终可见。否则,丢失类型信息可能导致某些转换失败,例如从 DateTime 到 Date 的转换。修复(#64487)。#65315 (pn)。
