---
description: '表函数文档'
sidebar_label: '表函数'
sidebar_position: 1
slug: /sql-reference/table-functions/
title: '表函数'
doc_type: 'reference'
---



# 表函数

表函数是一种用于构造表的方式。



{/*AUTOGENERATED_START*/ }

| 页面                                                                                     | 说明                                                                                                                          |
| -------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| [azureBlobStorage](/sql-reference/table-functions/azureBlobStorage)                    | 提供类似数据表的接口，可用于在 Azure Blob Storage 中选择和插入文件，其行为类似于 `s3` 函数。                                                                 |
| [azureBlobStorageCluster](/sql-reference/table-functions/azureBlobStorageCluster)      | 支持在指定集群的多个节点上并行处理来自 Azure Blob 存储的文件。                                                                                       |
| [clusterAllReplicas](/sql-reference/table-functions/cluster)                           | 允许在不创建 Distributed 表的前提下，访问集群中在 `remote_servers` 部分配置的所有分片。                                                                 |
| [deltaLake](/sql-reference/table-functions/deltalake)                                  | 为 Amazon S3 中的 Delta Lake 表提供只读的类表访问接口。                                                                                     |
| [deltaLakeCluster](/sql-reference/table-functions/deltalakeCluster)                    | 这是 DeltaLake 表函数的扩展功能。                                                                                                      |
| [dictionary](/sql-reference/table-functions/dictionary)                                | 将字典数据以 ClickHouse 表的形式展示。其工作方式与 Dictionary 引擎相同。                                                                            |
| [executable](/engines/table-functions/executable)                                      | `executable` 表函数基于用户自定义函数（UDF）的输出创建一个表，该函数由你在脚本中定义，而脚本会将行输出到 **stdout**。                                                    |
| [file](/sql-reference/table-functions/file)                                            | 一种表引擎，提供类似于表的接口，用于对文件执行 SELECT 和 INSERT 操作，与 s3 表函数类似。处理本地文件时使用 `file()`，处理对象存储（如 S3、GCS 或 MinIO）中的 bucket（存储桶）时使用 `s3()`。  |
| [fileCluster](/sql-reference/table-functions/fileCluster)                              | 启用在集群内的多个节点上并行处理匹配指定路径的文件。发起节点会与工作节点建立连接，展开文件路径中的通配符（glob），并将读文件任务分派给工作节点。每个工作节点都会向发起节点请求下一个要处理的文件，如此往复，直到所有任务完成（所有文件都已读取）。 |
| [format](/sql-reference/table-functions/format)                                        | 按照指定的输入格式从参数中解析数据。若未指定 structure 参数，则会从数据中自动推断其结构。                                                                          |
| [gcs](/sql-reference/table-functions/gcs)                                              | 提供类似表格的接口，用于对来自 Google Cloud Storage 的数据执行 `SELECT` 和 `INSERT` 操作。需要 `Storage Object User` IAM 角色。                          |
| [fuzzQuery](/sql-reference/table-functions/fuzzQuery)                                  | 对给定的查询字符串进行随机扰动。                                                                                                            |
| [fuzzJSON](/sql-reference/table-functions/fuzzJSON)                                    | 对 JSON 字符串进行随机扰动处理。                                                                                                         |
| [generateRandom](/sql-reference/table-functions/generate)                              | 根据给定的 schema 生成随机数据。可用于为测试表填充数据。并非所有类型都受支持。                                                                                 |
| [mergeTreeProjection](/sql-reference/table-functions/mergeTreeProjection)              | 表示某个 MergeTree 表投影的内容，可用于自省。                                                                                                |
| [mergeTreeIndex](/sql-reference/table-functions/mergeTreeIndex)                        | 表示 MergeTree 表中索引和标记文件的内容。可用于内部检查。                                                                                          |
| [hdfs](/sql-reference/table-functions/hdfs)                                            | 基于 HDFS 中的文件创建一张表。该表函数与 `url` 和 `file` 表函数类似。                                                                               |
| [hdfsCluster](/sql-reference/table-functions/hdfsCluster)                              | 允许在指定集群内的多个节点上并行处理 HDFS 文件。                                                                                                 |
| [hudi](/sql-reference/table-functions/hudi)                                            | 为存储在 Amazon S3 中的 Apache Hudi 表提供只读的表格接口。                                                                                   |
| [ytsaurus](/sql-reference/table-functions/ytsaurus)                                    | 该表函数可用于从 YTsaurus 集群读取数据。                                                                                                   |
| [hudiCluster 表函数](/sql-reference/table-functions/hudiCluster)                          | 是 Hudi 表函数的扩展。可以在指定的集群中利用多个节点，并行处理位于 Amazon S3 上的 Apache Hudi 表文件。                                                          |
| [iceberg](/sql-reference/table-functions/iceberg)                                      | 为存储在 Amazon S3、Azure、HDFS 或本地的 Apache Iceberg 表提供只读的表式接口。                                                                   |
| [paimon](/sql-reference/table-functions/paimon)                                        | 提供一个类似表的只读接口，用于访问存储在 Amazon S3、Azure、HDFS 或本地的 Apache Paimon 表。                                                             |
| [icebergCluster](/sql-reference/table-functions/icebergCluster)                        | `iceberg` 表函数的扩展，允许在指定集群的多个节点上并行处理 Apache Iceberg 文件。                                                                       |
| [paimonCluster](/sql-reference/table-functions/paimonCluster)                          | 对 paimon 表函数的扩展，用于在指定集群的多个节点上并行处理 Apache Paimon 文件。                                                                         |
| [input](/sql-reference/table-functions/input)                                          | 一种表函数，用于将按给定结构发送到服务器的数据高效转换后插入到具有另一结构的表中。                                                                                   |
| [jdbc](/sql-reference/table-functions/jdbc)                                            | 返回一个通过 JDBC 驱动连接的数据表。                                                                                                       |
| [merge](/sql-reference/table-functions/merge)                                          | 创建一个临时 Merge 表。其结构通过对底层表的列取并集并推导出公共类型来确定。                                                                                   |
| [mongodb](/sql-reference/table-functions/mongodb)                                      | 允许对存储在远程 MongoDB 服务器上的数据执行 `SELECT` 查询。                                                                                     |
| [mysql](/sql-reference/table-functions/mysql)                                          | 允许对存储在远程 MySQL 服务器上的数据进行 `SELECT` 和 `INSERT` 查询操作。                                                                          |
| [null](/sql-reference/table-functions/null)                                            | 使用 Null 表引擎创建具有指定结构的临时表。该函数用于方便编写测试和进行演示。                                                                                   |
| [timeSeriesMetrics](/sql-reference/table-functions/timeSeriesMetrics)                  | timeSeriesMetrics 返回表 `db_name.time_series_table` 所使用的指标表，该表的引擎为 TimeSeries 引擎。                                             |
| [timeSeriesSelector](/sql-reference/table-functions/timeSeriesSelector)                | 从 TimeSeries 表中读取时间序列数据，根据选择器进行过滤，并且时间戳位于指定的时间区间内。                                                                          |
| [timeSeriesTags](/sql-reference/table-functions/timeSeriesTags)                        | timeSeriesTags 表函数会返回表 `db_name.time_series_table`（其表引擎为 TimeSeries）的标签表。                                                   |
| [prometheusQueryRange](/sql-reference/table-functions/prometheusQueryRange)            | 使用 TimeSeries 表中的数据评估 Prometheus 查询。                                                                                        |
| [zeros](/sql-reference/table-functions/zeros)                                          | 用于测试目的，是快速生成大量行数据的最快方法。类似于 `system.zeros` 和 `system.zeros_mt` 系统表。                                                          |
| [timeSeriesData](/sql-reference/table-functions/timeSeriesData)                        | timeSeriesData 返回表引擎为 TimeSeries 的表 `db_name.time_series_table` 所使用的数据表。                                                    |
| [numbers](/sql-reference/table-functions/numbers)                                      | 返回仅有一个 `number` 列的表，该列包含可指定的整数。                                                                                             |
| [prometheusQuery](/sql-reference/table-functions/prometheusQuery)                      | 使用 TimeSeries 表中的数据评估 Prometheus 查询。                                                                                        |
| [generate&#95;series (generateSeries)](/sql-reference/table-functions/generate_series) | 返回一张仅包含一个 `generate_series` 列（UInt64）的表，该列包含从 start 到 stop 的所有整数（含端点）。                                                      |
| [odbc](/sql-reference/table-functions/odbc)                                            | 返回通过 ODBC 访问的表。                                                                                                             |
| [postgresql](/sql-reference/table-functions/postgresql)                                | 允许对存储在远程 PostgreSQL 服务器上的数据执行 `SELECT` 和 `INSERT` 查询。                                                                       |
| [redis](/sql-reference/table-functions/redis)                                          | 该表函数用于将 ClickHouse 与 Redis 集成。                                                                                              |
| [remote, remoteSecure](/sql-reference/table-functions/remote)                          | 表函数 `remote` 允许在无需创建分布式表的情况下按需访问远程服务器。表函数 `remoteSecure` 与 `remote` 类似，但通过安全连接进行访问。                                         |
| [S3 表函数](/sql-reference/table-functions/s3)                                            | 提供类似于表的接口，可在 Amazon S3 和 Google Cloud Storage 中对文件执行 SELECT/INSERT 操作。此表函数类似于 `hdfs` 函数，但提供了 S3 特有的功能。                      |
| [s3Cluster](/sql-reference/table-functions/s3Cluster)                                  | `s3` 表函数的扩展，支持在指定集群内的多个节点上并行处理来自 Amazon S3 和 Google Cloud Storage 的文件。                                                      |
| [sqlite](/sql-reference/table-functions/sqlite)                                        | 允许对存储在 SQLite 数据库中的数据进行查询。                                                                                                  |
| [arrowFlight](/sql-reference/table-functions/arrowflight)                              | 允许对由 Apache Arrow Flight 服务器提供的数据执行查询。                                                                                      |
| [url](/sql-reference/table-functions/url)                                              | 根据指定的 `format` 和 `structure`，从 `URL` 创建表                                                                                    |
| [urlCluster](/sql-reference/table-functions/urlCluster)                                | 允许在指定集群内的多个节点上并行处理来自 URL 的文件。                                                                                               |
| [view](/sql-reference/table-functions/view)                                            | 将子查询转换为一张表。该函数可用于实现视图。                                                                                                      |
| [values](/sql-reference/table-functions/values)                                        | 创建一个临时存储，并为各列填充值。                                                                                                           |
| [loop](/sql-reference/table-functions/loop)                                            | ClickHouse 中的 `loop` 表函数用于在无限循环中返回查询结果。                                                                                     |

{/*AUTOGENERATED_END*/ }





## 用法

表函数可以在 `SELECT` 查询的 [`FROM`](../../sql-reference/statements/select/from.md) 子句中使用。\
例如，您可以使用 `file` 表函数从本地计算机上的文件中 `SELECT` 数据。

```bash
echo "1, 2, 3" > example.csv
```

```text
./clickhouse client
:) SELECT * FROM file('example.csv')
┌─c1─┬─c2─┬─c3─┐
│  1 │  2 │  3 │
└────┴────┴────┘
```

你还可以使用表函数创建仅在当前查询中可用的临时表。例如：

```sql title="Query"
SELECT * FROM generateSeries(1,5);
```

```response title="Response"
┌─generate_series─┐
│               1 │
│               2 │
│               3 │
│               4 │
│               5 │
└─────────────────┘
```

当查询结束时，该表将被删除。

可以使用表函数来创建表，其语法如下：

```sql
CREATE TABLE [IF NOT EXISTS] [db.]table_name AS table_function()
```

例如：

```sql title="Query"
CREATE TABLE series AS generateSeries(1, 5);
SELECT * FROM series;
```

```response
┌─generate_series─┐
│               1 │
│               2 │
│               3 │
│               4 │
│               5 │
└─────────────────┘
```

最后，表函数还可以用于向表中执行 `INSERT` 操作。例如，
我们可以再次使用 `file` 表函数，将之前示例中创建的表的内容
写入磁盘上的一个文件中：

```sql
INSERT INTO FUNCTION file('numbers.csv', 'CSV') SELECT * FROM series;
```

```bash
cat numbers.csv
1
2
3
4
5
```

:::note
如果禁用了 [allow&#95;ddl](/operations/settings/settings#allow_ddl) 设置，则不能使用表函数。
:::
