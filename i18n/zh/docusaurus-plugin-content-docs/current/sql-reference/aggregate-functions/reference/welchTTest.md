---
description: '对来自两个总体的样本执行 Welch t 检验。'
sidebar_label: 'welchTTest'
slug: /sql-reference/aggregate-functions/reference/welchttest
title: 'welchTTest'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## welchTTest \{#welchTTest\}

引入版本：v21.1

对来自两个总体的样本应用 [Welch&#39;s t-test](https://en.wikipedia.org/wiki/Welch%27s_t-test)。

两个样本的取值都在 `sample_data` 列中。
如果 `sample_index` 等于 0，则该行中的值属于第一个总体的样本；
否则，它属于第二个总体的样本。
原假设为两个总体的均值相等。
假设样本来自正态分布总体。
两个总体的方差可以不相等。

**语法**

```sql
welchTTest([confidence_level])(sample_data, sample_index)
```

**参数**

* `confidence_level` — 可选。用于计算置信区间的置信水平。[`Float`](/sql-reference/data-types/float)

**参数列表**

* `sample_data` — 样本数据。[`Int*`](/sql-reference/data-types/int-uint) 或 [`UInt*`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float) 或 [`Decimal*`](/sql-reference/data-types/decimal)
* `sample_index` — 样本索引。[`Int*`](/sql-reference/data-types/int-uint) 或 [`UInt*`](/sql-reference/data-types/int-uint)

**返回值**

返回一个包含两个或四个元素的 Tuple（如果指定了 `confidence_level` 参数）：计算得到的 t 统计量、计算得到的 p 值，以及可选的置信区间下界和置信区间上界。[`Tuple(Float64, Float64)`](/sql-reference/data-types/tuple) 或 [`Tuple(Float64, Float64, Float64, Float64)`](/sql-reference/data-types/tuple)

**示例**

**基本 Welch t 检验**

```sql title=Query
CREATE TABLE welch_ttest (sample_data Float64, sample_index UInt8) ENGINE = Memory;
INSERT INTO welch_ttest VALUES (20.3, 0), (22.1, 0), (21.9, 0), (18.9, 1), (20.3, 1), (19, 1);

SELECT welchTTest(sample_data, sample_index) FROM welch_ttest;
```

```response title=Response
┌─welchTTest(sample_data, sample_index)──────┐
│ (2.7988719532211235, 0.051807360348581945) │
└────────────────────────────────────────────┘
```

**包含置信水平**

```sql title=Query
SELECT welchTTest(0.95)(sample_data, sample_index) FROM welch_ttest;
```

```response title=Response
┌─welchTTest(0.95)(sample_data, sample_index)─────────────────────────────────────────┐
│ (2.7988719532211235, 0.05180736034858519, -0.026294346671631885, 4.092961013338302) │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**另请参阅**

* [Welch t 检验](https://en.wikipedia.org/wiki/Welch%27s_t-test)
* [studentTTest 函数](/sql-reference/aggregate-functions/reference/studentttest)
