---
description: '使用 HyperLogLog 算法计算不同参数值的近似数量。'
slug: /sql-reference/aggregate-functions/reference/uniqhll12
title: 'uniqHLL12'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## uniqHLL12 \{#uniqHLL12\}

引入版本：v1.1

使用 [HyperLogLog](https://en.wikipedia.org/wiki/HyperLogLog) 算法计算不同参数取值个数的近似值。

:::warning
我们不推荐使用此函数。在大多数情况下，请使用 [uniq](https://clickhouse.com/docs/sql-reference/aggregate-functions/reference/uniq) 或 [uniqCombined](https://clickhouse.com/docs/sql-reference/aggregate-functions/reference/uniqcombined) 函数。
:::

<details>
  <summary>实现细节</summary>
  此函数会为聚合中的所有参数计算哈希值，然后在计算中使用该哈希值。
  它使用 HyperLogLog 算法来估算不同参数值的数量。

  使用 2^12 个 5 位单元。
  状态的大小略大于 2.5 KB。
  对于较小的数据集（&lt;10K 个元素），结果不太精确（误差最高约为 10%）。
  但对于高基数数据集（10K-100M），结果相当精确，最大误差约为 1.6%。
  当数据量超过 100M 时，估算误差会增大；对于基数极高的数据集（1B+ 个元素），该函数会返回非常不精确的结果。

  返回确定性的结果（不依赖于查询处理顺序）。
</details>

**语法**

```sql
uniqHLL12(x[, ...])
```

**参数**

* `x` — 函数接受可变数量的参数。[`Tuple(T)`](/sql-reference/data-types/tuple) 或 [`Array(T)`](/sql-reference/data-types/array) 或 [`Date`](/sql-reference/data-types/date) 或 [`DateTime`](/sql-reference/data-types/datetime) 或 [`String`](/sql-reference/data-types/string) 或 [`(U)Int*`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float) 或 [`Decimal`](/sql-reference/data-types/decimal)

**返回值**

返回一个 `UInt64` 类型的数值，表示不同参数值的近似数量。[`UInt64`](/sql-reference/data-types/int-uint)

**示例**

**基本用法**

```sql title=Query
CREATE TABLE example_hll
(
    id UInt32,
    category String
)
ENGINE = Memory;

INSERT INTO example_hll VALUES
(1, 'A'), (2, 'B'), (3, 'A'), (4, 'C'), (5, 'B'), (6, 'A');

SELECT uniqHLL12(category) AS hll_unique_categories
FROM example_hll;
```

```response title=Response
┌─hll_unique_categories─┐
│                     3 │
└───────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**另请参阅**

* [uniq](/sql-reference/aggregate-functions/reference/uniq)
* [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
* [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
* [uniqTheta](/sql-reference/aggregate-functions/reference/uniqthetasketch)
