---
description: '计算所有区间（数轴上的线段）并集的总长度。'
sidebar_label: 'intervalLengthSum'
slug: /sql-reference/aggregate-functions/reference/intervalLengthSum
title: 'intervalLengthSum'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## intervalLengthSum \{#intervalLengthSum\}

引入版本：v21.7

接收多个数值区间，将所有重叠部分合并为单个统一区间后，计算其总长度。

:::note
参数必须具有相同的数据类型。
否则将抛出异常。
:::

**语法**

```sql
intervalLengthSum(start, end)
```

**参数**

* `start` — 区间的起始值。[`(U)Int32/64`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float) 或 [`DateTime`](/sql-reference/data-types/datetime) 或 [`Date`](/sql-reference/data-types/date)
* `end` — 区间的结束值。[`(U)Int32/64`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float) 或 [`DateTime`](/sql-reference/data-types/datetime) 或 [`Date`](/sql-reference/data-types/date)

**返回值**

返回所有区间（数轴上的线段）并集的总长度。根据参数类型不同，返回值可能为 [`UInt64`](/sql-reference/data-types/int-uint) 或 [`Float64`](/sql-reference/data-types/float)。

**示例**

**Float32 示例**

```sql title=Query
CREATE TABLE fl_interval (id String, start Float32, end Float32) ENGINE = Memory;
INSERT INTO fl_interval VALUES ('a', 1.1, 2.9), ('a', 2.5, 3.2), ('a', 4, 5);

SELECT id, intervalLengthSum(start, end), toTypeName(intervalLengthSum(start, end)) FROM fl_interval GROUP BY id ORDER BY id;
```

```response title=Response
┌─id─┬─intervalLengthSum(start, end)─┬─toTypeName(intervalLengthSum(start, end))─┐
│ a  │                           3.1 │ Float64                                   │
└────┴───────────────────────────────┴───────────────────────────────────────────┘
```

**DateTime 示例**

```sql title=Query
CREATE TABLE dt_interval (id String, start DateTime, end DateTime) ENGINE = Memory;
INSERT INTO dt_interval VALUES ('a', '2020-01-01 01:12:30', '2020-01-01 02:10:10'), ('a', '2020-01-01 02:05:30', '2020-01-01 02:50:31'), ('a', '2020-01-01 03:11:22', '2020-01-01 03:23:31');

SELECT id, intervalLengthSum(start, end), toTypeName(intervalLengthSum(start, end)) FROM dt_interval GROUP BY id ORDER BY id;
```

```response title=Response
┌─id─┬─intervalLengthSum(start, end)─┬─toTypeName(intervalLengthSum(start, end))─┐
│ a  │                          6610 │ UInt64                                    │
└────┴───────────────────────────────┴───────────────────────────────────────────┘
```

**日期示例**

```sql title=Query
CREATE TABLE date_interval (id String, start Date, end Date) ENGINE = Memory;
INSERT INTO date_interval VALUES ('a', '2020-01-01', '2020-01-04'), ('a', '2020-01-12', '2020-01-18');

SELECT id, intervalLengthSum(start, end), toTypeName(intervalLengthSum(start, end)) FROM date_interval GROUP BY id ORDER BY id;
```

```response title=Response
┌─id─┬─intervalLengthSum(start, end)─┬─toTypeName(intervalLengthSum(start, end))─┐
│ a  │                             9 │ UInt64                                    │
└────┴───────────────────────────────┴───────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
