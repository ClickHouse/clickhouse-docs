---
description: '使用 Theta Sketch Framework 计算不同参数取值的近似个数。'
slug: /sql-reference/aggregate-functions/reference/uniqthetasketch
title: 'uniqTheta'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## uniqTheta \{#uniqTheta\}

引入于：v21.6

使用 [Theta Sketch Framework](https://datasketches.apache.org/docs/Theta/ThetaSketches.html#theta-sketch-framework) 计算不同参数值数量的近似值。

<details>
  <summary>实现细节</summary>

  此函数对聚合中的所有参数计算哈希值，然后在计算中使用这些哈希值。
  它使用 [KMV](https://datasketches.apache.org/docs/Theta/InverseEstimate.html) 算法来近似计算不同参数值的数量。

  使用了 4096（2^12）个 64 位 sketch。
  状态大小约为 41 KB。

  相对误差为 3.125%（95% 置信水平），详情参见[相对误差表](https://datasketches.apache.org/docs/Theta/ThetaErrorTable.html)。
</details>

**语法**

```sql
uniqTheta(x[, ...])
```

**参数**

* `x` — 该函数接受可变数量的参数。[`Tuple(T)`](/sql-reference/data-types/tuple) 或 [`Array(T)`](/sql-reference/data-types/array) 或 [`Date`](/sql-reference/data-types/date) 或 [`DateTime`](/sql-reference/data-types/datetime) 或 [`String`](/sql-reference/data-types/string) 或 [`(U)Int*`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float) 或 [`Decimal`](/sql-reference/data-types/decimal)

**返回值**

返回一个 [`UInt64`](/sql-reference/data-types/int-uint) 类型的数值，表示不同参数值的近似个数。

**示例**

**基本用法**

```sql title=Query
CREATE TABLE example_theta
(
    id UInt32,
    category String
)
ENGINE = Memory;

INSERT INTO example_theta VALUES
(1, 'A'), (2, 'B'), (3, 'A'), (4, 'C'), (5, 'B'), (6, 'A');

SELECT uniqTheta(category) as theta_unique_categories
FROM example_theta;
```

```response title=Response
┌─theta_unique_categories─┐
│                       3 │
└─────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**另请参阅**

* [uniq](/sql-reference/aggregate-functions/reference/uniq)
* [uniqCombined](/sql-reference/aggregate-functions/reference/uniqcombined)
* [uniqCombined64](/sql-reference/aggregate-functions/reference/uniqcombined64)
* [uniqHLL12](/sql-reference/aggregate-functions/reference/uniqhll12)
* [uniqExact](/sql-reference/aggregate-functions/reference/uniqexact)
