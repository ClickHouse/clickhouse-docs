---
description: '将时间序列按时间戳升序排序。'
slug: /sql-reference/aggregate-functions/reference/timeSeriesGroupArray
title: 'timeSeriesGroupArray'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## timeSeriesGroupArray \{#timeSeriesGroupArray\}

引入版本：v25.9

按时间戳升序对时间序列数据进行排序。

:::note
此函数为实验性特性，可通过设置 `allow_experimental_ts_to_grid_aggregate_function=true` 来启用。
:::

**语法**

```sql
timeSeriesGroupArray(timestamp, value)
```

**参数**

* `timestamp` — 样本时间戳。[`DateTime`](/sql-reference/data-types/datetime) 或 [`UInt32`](/sql-reference/data-types/int-uint) 或 [`UInt64`](/sql-reference/data-types/int-uint)
* `value` — 与该时间戳对应的时间序列数值。[`(U)Int*`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float) 或 [`Decimal`](/sql-reference/data-types/decimal)

**返回值**

返回一个按时间戳升序排序的元组数组 `(timestamp, value)`。如果同一时间戳有多个值，则函数会取其中的最大值。[`Array(Tuple(T1, T2))`](/sql-reference/data-types/array)

**示例**

**使用单个值的基础用法**

```sql title=Query
WITH
    [110, 120, 130, 140, 140, 100]::Array(UInt32) AS timestamps,
    [1, 6, 8, 17, 19, 5]::Array(Float32) AS values
SELECT timeSeriesGroupArray(timestamp, value)
FROM
(
    SELECT
        arrayJoin(arrayZip(timestamps, values)) AS ts_and_val,
        ts_and_val.1 AS timestamp,
        ts_and_val.2 AS value
);
```

```response title=Response
┌─timeSeriesGroupArray(timestamp, value)───────────────┐
│ [(100, 5), (110, 1), (120, 6), (130, 8), (140, 19)]  │
└──────────────────────────────────────────────────────┘
```

**将多个时间戳和数值样本作为大小相同的数组传入**

```sql title=Query
WITH
    [110, 120, 130, 140, 140, 100]::Array(UInt32) AS timestamps,
    [1, 6, 8, 17, 19, 5]::Array(Float32) AS values
SELECT timeSeriesGroupArray(timestamps, values);
```

```response title=Response
┌─timeSeriesGroupArray(timestamps, values)──────────────┐
│ [(100, 5), (110, 1), (120, 6), (130, 8), (140, 19)]   │
└───────────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
