---
description: '在不对列进行实际压缩的情况下，估算给定列的压缩比。'
slug: /sql-reference/aggregate-functions/reference/estimateCompressionRatio
title: 'estimateCompressionRatio'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## estimateCompressionRatio \{#estimateCompressionRatio\}

引入于：v25.4

在不压缩给定列的情况下估算其压缩比。

:::note
对于下面的示例，结果会因服务器的默认压缩编解码器而有所不同。
参见 [列压缩编解码器](/sql-reference/statements/create/table#column_compression_codec)。
:::

**语法**

```sql
estimateCompressionRatio([codec, block_size_bytes])(column)
```

**参数**

* `codec` — 包含一个压缩编解码器名称，或由逗号分隔的多个编解码器名称的字符串。[`String`](/sql-reference/data-types/string)
* `block_size_bytes` — 压缩数据的块大小。类似于同时设置 [`max_compress_block_size`](../../../operations/settings/merge-tree-settings.md#max_compress_block_size) 和 [`min_compress_block_size`](../../../operations/settings/merge-tree-settings.md#min_compress_block_size)。默认值为 1 MiB（1048576 字节）。[`UInt64`](/sql-reference/data-types/int-uint)

**参数说明**

* `column` — 任意类型的列。[`Any`](/sql-reference/data-types)

**返回值**

返回指定列的压缩比估算值。[`Float64`](/sql-reference/data-types/float)

**示例**

**使用默认编解码器的基本用法**

```sql title=Query
CREATE TABLE compression_estimate_example
(
    `number` UInt64
)
ENGINE = MergeTree()
ORDER BY number
SETTINGS min_bytes_for_wide_part = 0;

INSERT INTO compression_estimate_example
SELECT number FROM system.numbers LIMIT 100_000;

SELECT estimateCompressionRatio(number) AS estimate FROM compression_estimate_example
```

```response title=Response
┌───────────estimate─┐
│ 1.9988506608699999 │
└────────────────────┘
```

**使用指定编解码器**

```sql title=Query
SELECT estimateCompressionRatio('T64')(number) AS estimate FROM compression_estimate_example
```

```response title=Response
┌──────────estimate─┐
│ 3.762758101688538 │
└───────────────────┘
```

**使用多个编解码器**

```sql title=Query
SELECT estimateCompressionRatio('T64, ZSTD')(number) AS estimate FROM compression_estimate_example
```

```response title=Response
┌───────────estimate─┐
│ 143.60078980434392 │
└────────────────────┘
```

{/*AUTOGENERATED_END*/ }
