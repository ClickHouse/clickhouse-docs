---
description: '与 quantileExact 类似，它计算数值数据序列的精确分位数。'
slug: /sql-reference/aggregate-functions/reference/quantileExactHigh
title: 'quantileExactHigh'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantileExactHigh \{#quantileExactHigh\}

引入版本：v20.8

与 [`quantileExact`](/sql-reference/aggregate-functions/reference/quantileexact) 类似，该函数计算数值数据序列的精确[分位数](https://en.wikipedia.org/wiki/Quantile)。

为了获得精确值，所有传入的值会被合并到一个数组中，然后对该数组进行完全排序。
排序算法的复杂度为 `O(N·log(N))`，其中 `N = std::distance(first, last)` 次比较。

返回值取决于分位数水平和选定集合中元素的数量。也就是说，如果水平为 0.5，则在元素数量为偶数时，函数返回较大的中位数值，在元素数量为奇数时，返回中间的中位数值。
中位数的计算方式与 Python 中使用的 [`median_high`](https://docs.python.org/3/library/statistics.html#statistics.median_high) 实现类似。

对于所有其他水平，返回索引位置对应于 `level * size_of_array` 的元素。

在查询中使用多个带有不同水平的 `quantile*` 函数时，其内部状态不会被合并（也就是说，该查询的执行效率低于理论上的最优情况）。
在这种情况下，请使用 [quantiles](/sql-reference/aggregate-functions/reference/quantiles) 函数。

**语法**

```sql
quantileExactHigh(level)(expr)
```

**别名**: `medianExactHigh`

**参数**

* `level` — 可选。分位数的水平。取值为 0 到 1 之间的常量浮点数。建议使用范围为 `[0.01, 0.99]` 的 `level` 值。默认值：0.5。当 `level=0.5` 时，函数计算中位数。[`Float*`](/sql-reference/data-types/float)

**参数说明**

* `expr` — 对列值进行运算的表达式，结果为数值类型、Date 或 DateTime。[`(U)Int*`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float) 或 [`Decimal*`](/sql-reference/data-types/decimal) 或 [`Date`](/sql-reference/data-types/date) 或 [`DateTime`](/sql-reference/data-types/datetime)

**返回值**

返回指定水平的分位数。[`Float64`](/sql-reference/data-types/float) 或 [`Date`](/sql-reference/data-types/date) 或 [`DateTime`](/sql-reference/data-types/datetime)

**示例**

**计算精确高位分位数**

```sql title=Query
SELECT quantileExactHigh(number) FROM numbers(10);
```

```response title=Response
┌─quantileExactHigh(number)─┐
│                         5 │
└───────────────────────────┘
```

**计算特定分位点**

```sql title=Query
SELECT quantileExactHigh(0.1)(number) FROM numbers(10);
```

```response title=Response
┌─quantileExactHigh(0.1)(number)─┐
│                              1 │
└────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
