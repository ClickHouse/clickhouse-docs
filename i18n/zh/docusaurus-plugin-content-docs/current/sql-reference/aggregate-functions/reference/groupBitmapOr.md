---
description: '对位图列执行 OR 运算，返回 UInt64 类型的基数值；如果添加后缀 -State，则返回一个位图对象。等价于 `groupBitmapMerge`。'
slug: /sql-reference/aggregate-functions/reference/groupbitmapor
title: 'groupBitmapOr'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## groupBitmapOr \{#groupBitmapOr\}

引入版本：v20.1

计算 bitmap 列的 OR 运算并返回其基数。
如果添加后缀组合子 [`-State`](/sql-reference/aggregate-functions/combinators#-state)，则返回一个 bitmap 对象。
这等价于 `groupBitmapMerge`（带 [`-Merge`](/sql-reference/aggregate-functions/combinators#-merge) 组合子后缀的 [`groupBitmap`](/sql-reference/aggregate-functions/reference/groupbitmap)）。

**语法**

```sql
groupBitmapOr(expr)
groupBitmapOrState(expr)
```

**参数**

* `expr` — 一个其结果类型为 `AggregateFunction(groupBitmap, UInt*)` 的表达式。[`AggregateFunction(groupBitmap, UInt*)`](/sql-reference/data-types/aggregatefunction)

**返回值**

返回 `UInt64` 类型的计数值；当使用 `-State` 后缀时，返回 bitmap 对象。[`UInt64`](/sql-reference/data-types/int-uint)

**示例**

**使用示例**

```sql title=Query
CREATE TABLE bitmap_column_expr_test2
(
    tag_id String,
    z AggregateFunction(groupBitmap, UInt32)
)
ENGINE = MergeTree
ORDER BY tag_id;

INSERT INTO bitmap_column_expr_test2 VALUES ('tag1', bitmapBuild(cast([1,2,3,4,5,6,7,8,9,10] AS Array(UInt32))));
INSERT INTO bitmap_column_expr_test2 VALUES ('tag2', bitmapBuild(cast([6,7,8,9,10,11,12,13,14,15] AS Array(UInt32))));
INSERT INTO bitmap_column_expr_test2 VALUES ('tag3', bitmapBuild(cast([2,4,6,8,10,12] AS Array(UInt32))));

SELECT groupBitmapOr(z) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%');
```

```response title=Response
┌─groupBitmapOr(z)─┐
│             15   │
└──────────────────┘
```

**使用 -State 组合器**

```sql title=Query
SELECT arraySort(bitmapToArray(groupBitmapOrState(z))) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%');
```

```response title=Response
┌─arraySort(bitmapToArray(groupBitmapOrState(z)))─┐
│ [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]           │
└─────────────────────────────────────────────────┘
```

{/*AUTOGENERATED_END*/ }
