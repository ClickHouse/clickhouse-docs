---
description: '计算样本的近似分位数，并提供相对误差保证。'
slug: /sql-reference/aggregate-functions/reference/quantileddsketch
title: 'quantileDD'
doc_type: 'reference'
---

{/*AUTOGENERATED_START*/ }

## quantileDD \{#quantileDD\}

首次引入于：v24.1

计算样本的近似[分位数](https://en.wikipedia.org/wiki/Quantile)，并提供相对误差保证。
通过构建一个 [DD](https://www.vldb.org/pvldb/vol12/p2195-masson.pdf) 来实现。

**语法**

```sql
quantileDD(relative_accuracy, [level])(expr)
```

**别名**：`medianDD`

**参数**

* `relative_accuracy` — 分位数的相对精度。取值范围为 0 到 1。sketch 结构的大小取决于数据范围和相对精度。数据范围越大、相对精度越小，sketch 越大。sketch 的大致内存占用为 `log(max_value/min_value)/relative_accuracy`。推荐值为 0.001 或更高。[`Float*`](/sql-reference/data-types/float)
* `level` — 可选。分位数级别。取值范围为 0 到 1。默认值：0.5。[`Float*`](/sql-reference/data-types/float)

**参数**

* `expr` — 包含数值数据的列。[`(U)Int*`](/sql-reference/data-types/int-uint) 或 [`Float*`](/sql-reference/data-types/float)

**返回值**

指定级别的近似分位数。[`Float64`](/sql-reference/data-types/float)

**示例**

**使用 DD sketch 计算分位数**

```sql title=Query
CREATE TABLE example_table (a UInt32, b Float32) ENGINE = Memory;
INSERT INTO example_table VALUES (1, 1.001), (2, 1.002), (3, 1.003), (4, 1.004);

SELECT quantileDD(0.01, 0.75)(a), quantileDD(0.01, 0.75)(b) FROM example_table;
```

```response title=Response
┌─quantileDD(0.01, 0.75)(a)─┬─quantileDD(0.01, 0.75)(b)─┐
│        2.974233423476717  │                      1.01 │
└───────────────────────────┴───────────────────────────┘
```

{/*AUTOGENERATED_END*/ }

**另请参阅**

* [median](/sql-reference/aggregate-functions/reference/median)
* [quantiles](../../../sql-reference/aggregate-functions/reference/quantiles.md)
