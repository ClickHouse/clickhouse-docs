---
description: 'H3 文档'
sidebar_label: 'H3 索引'
slug: /sql-reference/functions/geo/h3
title: '用于处理 H3 索引的函数'
doc_type: 'reference'
---

## H3 索引 {#h3-index}

[H3](https://h3geo.org/) 是一种地理空间索引系统，将地球表面划分为等大的六边形网格单元。该系统是分层的，即顶层的每个六边形（“父”）可以被划分为七个更小但同样等大的六边形（“子”），以此类推。

该分层级别称为 `resolution`，取值范围为 `0` 到 `15`，其中 `0` 为具有最大、最粗粒度单元的 `base` 层级。

一组纬度、经度坐标可以被转换为一个 64 位的 H3 索引，用于标识一个网格单元。

H3 索引主要用于对地理位置进行分桶（bucketing）以及其他地理空间操作。

关于 H3 系统的完整说明可在 [Uber Engineering 网站](https://www.uber.com/blog/h3/) 上找到。

## h3IsValid {#h3isvalid}

检查给定数值是否为有效的 [H3](#h3-index) 索引。

**语法**

```sql
h3IsValid(h3index)
```

**参数**

* `h3index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 1 — 该数值是有效的 H3 索引。[UInt8](../../data-types/int-uint.md)。
* 0 — 该数值不是有效的 H3 索引。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```sql
SELECT h3IsValid(630814730351855103) AS h3IsValid;
```

结果：

```text
┌─h3IsValid─┐
│         1 │
└───────────┘
```

## h3GetResolution {#h3getresolution}

返回给定 [H3](#h3-index) 索引的分辨率。

**语法**

```sql
h3GetResolution(h3index)
```

**参数**

* `h3index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 索引分辨率。范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。
* 如果索引无效，函数会返回一个随机值。使用 [h3IsValid](#h3isvalid) 来验证索引是否有效。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```sql
SELECT h3GetResolution(639821929606596015) AS resolution;
```

结果：

```text
┌─resolution─┐
│         14 │
└────────────┘
```

## h3EdgeAngle {#h3edgeangle}

计算 [H3](#h3-index) 六边形边长以角度制表示的平均值。

**语法**

```sql
h3EdgeAngle(resolution)
```

**参数**

* `resolution` — 索引分辨率。[UInt8](../../data-types/int-uint.md)。范围：`[0, 15]`。

**返回值**

* [H3](#h3-index) 六边形边长的平均值（以度为单位）。[Float64](../../data-types/float.md)。

**示例**

查询：

```sql
SELECT h3EdgeAngle(10) AS edgeAngle;
```

结果：

```text
┌───────h3EdgeAngle(10)─┐
│ 0.0005927224846720883 │
└───────────────────────┘
```

## h3EdgeLengthM {#h3edgelengthm}

计算 [H3](#h3-index) 六边形单元格边的平均长度（单位：米）。

**语法**

```sql
h3EdgeLengthM(resolution)
```

**参数**

* `resolution` — 索引分辨率。[UInt8](../../data-types/int-uint.md)。范围：`[0, 15]`。

**返回值**

* [H3](#h3-index) 六边形的平均边长（单位：米）。[Float64](../../data-types/float.md)。

**示例**

查询：

```sql
SELECT h3EdgeLengthM(15) AS edgeLengthM;
```

结果：

```text
┌─edgeLengthM─┐
│ 0.509713273 │
└─────────────┘
```

## h3EdgeLengthKm {#h3edgelengthkm}

计算一个 [H3](#h3-index) 六边形边长的平均值（单位：千米）。

**语法**

```sql
h3EdgeLengthKm(resolution)
```

**参数**

* `resolution` — 索引分辨率。[UInt8](../../data-types/int-uint.md)。范围：`[0, 15]`。

**返回值**

* [H3](#h3-index) 六边形边长的平均长度（单位：千米）。[Float64](../../data-types/float.md)。

**示例**

查询：

```sql
SELECT h3EdgeLengthKm(15) AS edgeLengthKm;
```

结果：

```text
┌─edgeLengthKm─┐
│  0.000509713 │
└──────────────┘
```

## geoToH3 {#geotoh3}

返回指定分辨率下 `(lat, lon)` 点的 [H3](#h3-index) 索引。

**语法**

```sql
geoToH3(lat, lon, resolution)
```

**参数**

* `lat` — 纬度。[Float64](../../data-types/float.md)。
* `lon` — 经度。[Float64](../../data-types/float.md)。
* `resolution` — 索引分辨率。取值范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 六边形索引号。[UInt64](../../data-types/int-uint.md)。
* 出错时返回 0。[UInt64](../../data-types/int-uint.md)。

注意：在 ClickHouse v25.4 或更早版本中，`geoToH3()` 的参数顺序为 `(lon, lat)`。从 ClickHouse v25.5 开始，输入参数顺序为 `(lat, lon)`。可以通过设置 `geotoh3_argument_order = 'lon_lat'` 恢复之前的行为。

**示例**

查询：

```sql
SELECT geoToH3(55.71290588, 37.79506683, 15) AS h3Index;
```

结果：

```text
┌────────────h3Index─┐
│ 644325524701193974 │
└────────────────────┘
```

## h3ToGeo {#h3togeo}

返回与提供的 [H3](#h3-index) 索引对应的中心点纬度和经度。

**语法**

```sql
h3ToGeo(h3Index)
```

**参数**

* `h3Index` — H3 索引。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 一个包含两个值的元组：`tuple(lat,lon)`。`lat` — 纬度。[Float64](../../data-types/float.md)。`lon` — 经度。[Float64](../../data-types/float.md)。

注意：在 ClickHouse v24.12 或更早版本中，`h3ToGeo()` 按 `(lon, lat)` 的顺序返回值。从 ClickHouse v25.1 起，返回值的顺序为 `(lat, lon)`。可以通过设置 `h3togeo_lon_lat_result_order = true` 来恢复之前的返回顺序。

**示例**

查询：

```sql
SELECT h3ToGeo(644325524701193974) AS coordinates;
```

结果：

```text
┌─coordinates───────────────────────────┐
│ (55.71290243145668,37.79506616830252) │
└───────────────────────────────────────┘
```

## h3ToGeoBoundary {#h3togeoboundary}

返回由 `(lat, lon)` 坐标对组成的数组，这些坐标对应于给定 H3 索引的边界。

**语法**

```sql
h3ToGeoBoundary(h3Index)
```

**参数**

* `h3Index` — H3 索引。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 由 `'(lat, lon)'`（纬度、经度）对组成的数组。[Array](../../data-types/array.md)([Float64](../../data-types/float.md), [Float64](../../data-types/float.md))。

**示例**

查询：

```sql
SELECT h3ToGeoBoundary(644325524701193974) AS coordinates;
```

结果：

```text
┌─h3ToGeoBoundary(599686042433355775)────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ [(37.2713558667319,-121.91508032705622),(37.353926450852256,-121.8622232890249),(37.42834118609435,-121.92354999630156),(37.42012867767779,-122.03773496427027),(37.33755608435299,-122.090428929044),(37.26319797461824,-122.02910130919001)] │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## h3kRing {#h3kring}

以给定六边形为中心，随机列出其半径为 `k` 范围内的所有 [H3](#h3-index) 六边形。

**语法**

```sql
h3kRing(h3index, k)
```

**参数**

* `h3index` — H3 六边形索引号。[UInt64](../../data-types/int-uint.md)。
* `k` — 半径。[integer](../../data-types/int-uint.md)。

**返回值**

* H3 索引数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```sql
SELECT arrayJoin(h3kRing(644325529233966508, 1)) AS h3index;
```

结果：

```text
┌────────────h3index─┐
│ 644325529233966508 │
│ 644325529233966497 │
│ 644325529233966510 │
│ 644325529233966504 │
│ 644325529233966509 │
│ 644325529233966355 │
│ 644325529233966354 │
└────────────────────┘
```

## h3PolygonToCells {#h3polygontocells}

返回在指定分辨率下位于给定几何体（环或（多）多边形）内的六边形单元。

**语法**

```

**Arguments**

- `geometry` can be one of the following [Geo Data Types](../../data-types/geo.md) or their underlying primitive types:
  - [Ring](../../data-types/geo.md#ring)
  - [Polygon](../../data-types/geo.md#polygon)
  - [MultiPolygon](../../data-types/geo.md#multipolygon)
- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).


**Returned values**

- Array of the contained H3-indexes. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).


**Example**

Query:

```

**参数**

* `geometry` 可以是以下任一[Geo 数据类型](../../data-types/geo.md)或其底层基础类型：
  * [Ring](../../data-types/geo.md#ring)
  * [Polygon](../../data-types/geo.md#polygon)
  * [MultiPolygon](../../data-types/geo.md#multipolygon)
* `resolution` — 索引分辨率。取值范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 所包含 H3 索引的数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetBaseCell {#h3getbasecell}

Returns the base cell number of the [H3](#h3-index) index.

**Syntax**

```

## h3GetBaseCell {#h3getbasecell}

返回 [H3](#h3-index) 索引的基础单元编号。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Hexagon base cell number. [UInt8](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 六边形基础单元编号。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3HexAreaM2 {#h3hexaream2}

Returns average hexagon area in square meters at the given resolution.

**Syntax**

```

## h3HexAreaM2 {#h3hexaream2}

返回在给定分辨率下的六边形平均面积（以平方米计）。

**语法**

```

**Parameter**

- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Returned value**

- Area in square meters. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `resolution` — 索引精度。范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 面积，单位为平方米。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3HexAreaKm2 {#h3hexareakm2}

Returns average hexagon area in square kilometers at the given resolution.

**Syntax**

```

## h3HexAreaKm2 {#h3hexareakm2}

返回给定分辨率下六边形的平均面积（平方千米）。

**语法**

```

**Parameter**

- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Returned value**

- Area in square kilometers. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `resolution` — 索引分辨率。取值范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 面积（单位：平方公里）。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3IndexesAreNeighbors {#h3indexesareneighbors}

Returns whether or not the provided [H3](#h3-index) indexes are neighbors.

**Syntax**

```

## h3IndexesAreNeighbors {#h3indexesareneighbors}

返回给定的 [H3](#h3-index) 索引是否互为邻居。

**语法**

```

**Arguments**

- `index1` — Hexagon index number. [UInt64](../../data-types/int-uint.md).
- `index2` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- `1` — Indexes are neighbours. [UInt8](../../data-types/int-uint.md).
- `0` — Indexes are not neighbours. [UInt8](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index1` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。
* `index2` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* `1` — 两个索引相邻。[UInt8](../../data-types/int-uint.md)。
* `0` — 两个索引不相邻。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3ToChildren {#h3tochildren}

Returns an array of child indexes for the given [H3](#h3-index) index.

**Syntax**

```

## h3ToChildren {#h3tochildren}

返回给定 [H3](#h3-index) 索引的子索引数组。

**语法**

```

**Arguments**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).
- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Returned values**

- Array of the child H3-indexes. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).

**Example**

Query:

```

**参数**

* `index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。
* `resolution` — 索引分辨率。取值范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 子 H3 索引组成的数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3ToParent {#h3toparent}

Returns the parent (coarser) index containing the given [H3](#h3-index) index.

**Syntax**

```

## h3ToParent {#h3toparent}

返回包含给定 [H3](#h3-index) 索引的父级（更粗粒度）索引。

**语法**

```

**Arguments**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).
- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Returned value**

- Parent H3 index. [UInt64](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。
* `resolution` — 索引分辨率。范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 父级 H3 索引。[UInt64](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3ToString {#h3tostring}

Converts the `H3Index` representation of the index to the string representation.

```

## h3ToString {#h3tostring}

将索引的 `H3Index` 表示形式转换为字符串形式。

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- String representation of the H3 index. [String](../../data-types/string.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* H3 索引的字符串表示形式。[String](../../data-types/string.md)。

**示例**

查询：

```

Result:

```

结果：

```

## stringToH3 {#stringtoh3}

Converts the string representation to the `H3Index` (UInt64) representation.

**Syntax**

```

## stringToH3 {#stringtoh3}

将字符串形式转换为 `H3Index`（UInt64）表示。

**语法**

```

**Parameter**

- `index_str` — String representation of the H3 index. [String](../../data-types/string.md).

**Returned value**

- Hexagon index number. Returns 0 on error. [UInt64](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index_str` — H3 索引的字符串形式。[String](../../data-types/string.md)。

**返回值**

* 六边形索引编号。发生错误时返回 0。[UInt64](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetResolution {#h3getresolution-1}

Returns the resolution of the [H3](#h3-index) index.

**Syntax**

```

## h3GetResolution {#h3getresolution-1}

返回 [H3](#h3-index) 索引的分辨率。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 索引分辨率。范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3IsResClassIII {#h3isresclassiii}

Returns whether [H3](#h3-index) index has a resolution with Class III orientation.

**Syntax**

```

## h3IsResClassIII {#h3isresclassiii}

返回 [H3](#h3-index) 索引的分辨率是否为 Class III 朝向。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- `1` — Index has a resolution with Class III orientation. [UInt8](../../data-types/int-uint.md).
- `0` — Index doesn't have a resolution with Class III orientation. [UInt8](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* `1` — 索引的分辨率为 Class III 方向。[UInt8](../../data-types/int-uint.md)。
* `0` — 索引的分辨率不为 Class III 方向。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3IsPentagon {#h3ispentagon}

Returns whether this [H3](#h3-index) index represents a pentagonal cell.

**Syntax**

```

## h3IsPentagon {#h3ispentagon}

返回该 [H3](#h3-index) 索引是否表示五边形单元格。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- `1` — Index represents a pentagonal cell. [UInt8](../../data-types/int-uint.md).
- `0` — Index doesn't represent a pentagonal cell. [UInt8](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* `1` — 索引对应一个五边形单元格。[UInt8](../../data-types/int-uint.md)。
* `0` — 索引不对应五边形单元格。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetFaces {#h3getfaces}

Returns icosahedron faces intersected by a given [H3](#h3-index) index.

**Syntax**

```

## h3GetFaces {#h3getfaces}

返回与给定 [H3](#h3-index) 索引相交的二十面体的面。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned values**

- Array containing icosahedron faces intersected by a given H3 index. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 包含与给定 H3 索引相交的二十面体面的数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3CellAreaM2 {#h3cellaream2}

Returns the exact area of a specific cell in square meters corresponding to the given input H3 index.

**Syntax**

```

## h3CellAreaM2 {#h3cellaream2}

返回与给定 H3 索引对应的单元格的精确面积（单位：平方米）。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Cell area in square meters. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 单元面积（平方米）。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3CellAreaRads2 {#h3cellarearads2}

Returns the exact area of a specific cell in square radians corresponding to the given input H3 index.

**Syntax**

```

## h3CellAreaRads2 {#h3cellarearads2}

返回给定输入 H3 索引所对应单元格的精确面积，单位为平方弧度。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Cell area in square radians. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 单元面积（平方弧度）。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3ToCenterChild {#h3tocenterchild}

Returns the center child (finer) [H3](#h3-index) index contained by given [H3](#h3-index) at the given resolution.

**Syntax**

```

## h3ToCenterChild {#h3tocenterchild}

在指定分辨率下，返回给定 [H3](#h3-index) 索引所包含的中心子（更高分辨率）[H3](#h3-index) 索引。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).
- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Returned values**

- [H3](#h3-index) index of the center child contained by given [H3](#h3-index) at the given resolution. [UInt64](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。
* `resolution` — 索引分辨率。取值范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 在给定分辨率下，给定 [H3](#h3-index) 所包含的中心子单元的 [H3](#h3-index) 索引。[UInt64](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3ExactEdgeLengthM {#h3exactedgelengthm}

Returns the exact edge length of the unidirectional edge represented by the input h3 index in meters.

**Syntax**

```

## h3ExactEdgeLengthM {#h3exactedgelengthm}

返回由输入的 h3 索引表示的单向边的精确边长（单位：米）。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Exact edge length in meters. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 精确的边长（单位：米）。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3ExactEdgeLengthKm {#h3exactedgelengthkm}

Returns the exact edge length of the unidirectional edge represented by the input h3 index in kilometers.

**Syntax**

```

## h3ExactEdgeLengthKm {#h3exactedgelengthkm}

返回由输入 h3 索引表示的单向边的精确长度，单位为千米。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Exact edge length in kilometers. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 精确的边长（公里）。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3ExactEdgeLengthRads {#h3exactedgelengthrads}

Returns the exact edge length of the unidirectional edge represented by the input h3 index in radians.

**Syntax**

```

## h3ExactEdgeLengthRads {#h3exactedgelengthrads}

返回输入 h3 索引所表示的有向边的精确长度（以弧度为单位）。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Exact edge length in radians. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 精确的边长，单位为弧度。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3NumHexagons {#h3numhexagons}

Returns the number of unique H3 indices at the given resolution.

**Syntax**

```

## h3NumHexagons {#h3numhexagons}

返回在给定分辨率下的唯一 H3 索引数量。

**语法**

```

**Parameter**

- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Returned value**

- Number of H3 indices. [Int64](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `resolution` — 索引分辨率。范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* H3 索引数量。[Int64](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3PointDistM {#h3pointdistm}

Returns the "great circle" or "haversine" distance between pairs of GeoCoord points (latitude/longitude) pairs in meters.

**Syntax**

```

## h3PointDistM {#h3pointdistm}

返回成对 GeoCoord 点（纬度/经度）之间的“大圆（great circle）”或“haversine”距离，单位为米。

**语法**

```

**Arguments**

- `lat1`, `lon1` — Latitude and Longitude of point1 in degrees. [Float64](../../data-types/float.md).
- `lat2`, `lon2` — Latitude and Longitude of point2 in degrees. [Float64](../../data-types/float.md).

**Returned values**

- Haversine or great circle distance in meters.[Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `lat1`, `lon1` — 点1的纬度和经度（单位：度）。[Float64](../../data-types/float.md)。
* `lat2`, `lon2` — 点2的纬度和经度（单位：度）。[Float64](../../data-types/float.md)。

**返回值**

* Haversine 或大圆距离，单位为米。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3PointDistKm {#h3pointdistkm}

Returns the "great circle" or "haversine" distance between pairs of GeoCoord points (latitude/longitude) pairs in kilometers.

**Syntax**

```

## h3PointDistKm {#h3pointdistkm}

返回 GeoCoord 点对（纬度/经度）之间的大圆（great circle）或半正矢（haversine）距离，单位为千米。

**语法**

```

**Arguments**

- `lat1`, `lon1` — Latitude and Longitude of point1 in degrees. [Float64](../../data-types/float.md).
- `lat2`, `lon2` — Latitude and Longitude of point2 in degrees. [Float64](../../data-types/float.md).

**Returned values**

- Haversine or great circle distance in kilometers. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `lat1`, `lon1` — 点 1 的纬度和经度（单位：度）。[Float64](../../data-types/float.md)。
* `lat2`, `lon2` — 点 2 的纬度和经度（单位：度）。[Float64](../../data-types/float.md)。

**返回值**

* Haversine 或大圆距离，单位：千米。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3PointDistRads {#h3pointdistrads}

Returns the "great circle" or "haversine" distance between pairs of GeoCoord points (latitude/longitude) pairs in radians.

**Syntax**

```

## h3PointDistRads {#h3pointdistrads}

返回成对 GeoCoord 点（纬度/经度）之间的“大圆”（great circle）或“半正矢”（haversine）距离，单位为弧度。

**语法**

```

**Arguments**

- `lat1`, `lon1` — Latitude and Longitude of point1 in degrees. [Float64](../../data-types/float.md).
- `lat2`, `lon2` — Latitude and Longitude of point2 in degrees. [Float64](../../data-types/float.md).

**Returned values**

- Haversine or great circle distance in radians. [Float64](../../data-types/float.md).

**Example**

Query:

```

**参数**

* `lat1`, `lon1` — 点 1 的纬度和经度（单位：度）。[Float64](../../data-types/float.md)。
* `lat2`, `lon2` — 点 2 的纬度和经度（单位：度）。[Float64](../../data-types/float.md)。

**返回值**

* Haversine 距离或大圆距离（单位：弧度）。[Float64](../../data-types/float.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetRes0Indexes {#h3getres0indexes}

Returns an array of all the resolution 0 H3 indexes.

**Syntax**

```

## h3GetRes0Indexes {#h3getres0indexes}

返回一个数组，包含所有分辨率为 0 的 H3 索引。

**语法**

```

**Returned values**

- Array of all the resolution 0 H3 indexes. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).

**Example**

Query:

```

**返回值**

* 所有分辨率为 0 的 H3 索引构成的数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetPentagonIndexes {#h3getpentagonindexes}

Returns all the pentagon H3 indexes at the specified resolution.

**Syntax**

```

## h3GetPentagonIndexes {#h3getpentagonindexes}

返回在指定分辨率下的所有五边形 H3 索引。

**语法**

```

**Parameter**

- `resolution` — Index resolution. Range: `[0, 15]`. [UInt8](../../data-types/int-uint.md).

**Returned value**

- Array of all pentagon H3 indexes. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).

**Example**

Query:

```

**参数**

* `resolution` — 索引分辨率。取值范围：`[0, 15]`。[UInt8](../../data-types/int-uint.md)。

**返回值**

* 所有 H3 五边形索引的数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3Line {#h3line}

Returns the line of indices between the two indices that are provided.

**Syntax**

```

## h3Line {#h3line}

返回位于提供的两个索引之间的一系列索引。

**语法**

```

**Parameter**

- `start` — Hexagon index number that represents a starting point. [UInt64](../../data-types/int-uint.md).
- `end` — Hexagon index number that represents an ending point. [UInt64](../../data-types/int-uint.md).

**Returned value**

Array of h3 indexes representing the line of indices between the two provided indices. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).

**Example**

Query:

```

**参数**

* `start` — 表示起点的六边形索引号。[UInt64](../../data-types/int-uint.md)。
* `end` — 表示终点的六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

表示连接这两个给定索引的索引路径的 h3 索引数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3Distance {#h3distance}

Returns the distance in grid cells between the two indices that are provided.

**Syntax**

```

## h3Distance {#h3distance}

返回以网格单元数表示的两个索引之间的距离。

**语法**

```

**Parameter**

- `start` — Hexagon index number that represents a starting point. [UInt64](../../data-types/int-uint.md).
- `end` — Hexagon index number that represents an ending point. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Number of grid cells. [Int64](../../data-types/int-uint.md).

Returns a negative number if finding the distance fails.

**Example**

Query:

```

**参数**

* `start` — 表示起点的六边形索引号。[UInt64](../../data-types/int-uint.md)。
* `end` — 表示终点的六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 网格单元的数量。[Int64](../../data-types/int-uint.md)。

如果无法计算距离，则返回负数。

**示例**

查询：

```

Result:

```

结果：

```

## h3HexRing {#h3hexring}

Returns the indexes of the hexagonal ring centered at the provided origin h3Index and length k.

Returns 0 if no pentagonal distortion was encountered.

**Syntax**

```

## h3HexRing {#h3hexring}

返回以提供的原点 `h3Index` 为中心、半径为 `k` 的六边形环中各索引。

如果未遇到五边形畸变，则返回 0。

**语法**

```

**Parameter**

- `index` — Hexagon index number that represents the origin. [UInt64](../../data-types/int-uint.md).
- `k` — Distance. [UInt64](../../data-types/int-uint.md).

**Returned values**

- Array of H3 indexes. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).

**Example**

Query:

```

**参数**

* `index` — 表示起点的六边形索引编号。[UInt64](../../data-types/int-uint.md)。
* `k` — 距离。[UInt64](../../data-types/int-uint.md)。

**返回值**

* H3 索引数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetUnidirectionalEdge {#h3getunidirectionaledge}

Returns a unidirectional edge H3 index based on the provided origin and destination and returns 0 on error.

**Syntax**

```

## h3GetUnidirectionalEdge {#h3getunidirectionaledge}

基于给定的起点和终点返回单向边 H3 索引，出错时返回 0。

**语法**

```

**Parameter**

- `originIndex` — Origin Hexagon index number. [UInt64](../../data-types/int-uint.md).
- `destinationIndex` — Destination Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Unidirectional Edge Hexagon Index number. [UInt64](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `originIndex` — 起点六边形索引号。[UInt64](../../data-types/int-uint.md)。
* `destinationIndex` — 终点六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 单向边六边形索引号。[UInt64](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3UnidirectionalEdgeIsValid {#h3unidirectionaledgeisvalid}

Determines if the provided H3Index is a valid unidirectional edge index. Returns 1 if it's a unidirectional edge and 0 otherwise.

**Syntax**

```

## h3UnidirectionalEdgeIsValid {#h3unidirectionaledgeisvalid}

判断给定的 H3Index 是否为有效的单向边索引。如果是单向边索引则返回 1，否则返回 0。

**语法**

```

**Parameter**

- `index` — Hexagon index number. [UInt64](../../data-types/int-uint.md).

**Returned value**

- 1 — The H3 index is a valid unidirectional edge. [UInt8](../../data-types/int-uint.md).
- 0 — The H3 index is not a valid unidirectional edge. [UInt8](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `index` — 六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 1 — 该 H3 索引是有效的单向边。[UInt8](../../data-types/int-uint.md)。
* 0 — 该 H3 索引不是有效的单向边。[UInt8](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetOriginIndexFromUnidirectionalEdge {#h3getoriginindexfromunidirectionaledge}

Returns the origin hexagon index from the unidirectional edge H3Index.

**Syntax**

```

## h3GetOriginIndexFromUnidirectionalEdge {#h3getoriginindexfromunidirectionaledge}

从单向边 H3Index 返回起点六边形索引。

**语法**

```

**Parameter**

- `edge` — Hexagon index number that represents a unidirectional edge. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Origin Hexagon Index number. [UInt64](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `edge` — 表示单向边的六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 起点六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetDestinationIndexFromUnidirectionalEdge {#h3getdestinationindexfromunidirectionaledge}

Returns the destination hexagon index from the unidirectional edge H3Index.

**Syntax**

```

## h3GetDestinationIndexFromUnidirectionalEdge {#h3getdestinationindexfromunidirectionaledge}

从单向边 `H3Index` 获取目标六边形索引。

**语法**

```

**Parameter**

- `edge` — Hexagon index number that represents a unidirectional edge. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Destination Hexagon Index number. [UInt64](../../data-types/int-uint.md).

**Example**

Query:

```

**参数**

* `edge` — 表示有向边的六边形索引值。 [UInt64](../../data-types/int-uint.md)。

**返回值**

* 目标六边形索引值。 [UInt64](../../data-types/int-uint.md)。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetIndexesFromUnidirectionalEdge {#h3getindexesfromunidirectionaledge}

Returns the origin and destination hexagon indexes from the given unidirectional edge H3Index.

**Syntax**

```

## h3GetIndexesFromUnidirectionalEdge {#h3getindexesfromunidirectionaledge}

返回给定单向边 H3Index 的起点和终点六边形索引。

**语法**

```

**Parameter**

- `edge` — Hexagon index number that represents a unidirectional edge. [UInt64](../../data-types/int-uint.md).

**Returned value**

A tuple consisting of two values `tuple(origin,destination)`:

- `origin` — Origin Hexagon index number. [UInt64](../../data-types/int-uint.md).
- `destination` — Destination Hexagon index number. [UInt64](../../data-types/int-uint.md).

Returns `(0,0)` if the provided input is not valid.

**Example**

Query:

```

**参数**

* `edge` — 表示有向边的六边形索引编号。[UInt64](../../data-types/int-uint.md)。

**返回值**

由两个值组成的元组 `tuple(origin,destination)`：

* `origin` — 起点六边形索引编号。[UInt64](../../data-types/int-uint.md)。
* `destination` — 终点六边形索引编号。[UInt64](../../data-types/int-uint.md)。

如果输入无效，则返回 `(0,0)`。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetUnidirectionalEdgesFromHexagon {#h3getunidirectionaledgesfromhexagon}

Provides all of the unidirectional edges from the provided H3Index.

**Syntax**

```

## h3GetUnidirectionalEdgesFromHexagon {#h3getunidirectionaledgesfromhexagon}

返回指定 H3Index 的所有单向边。

**语法**

```

**Parameter**

- `index` — Hexagon index number that represents a unidirectional edge. [UInt64](../../data-types/int-uint.md).

**Returned value**

Array of h3 indexes representing each unidirectional edge. [Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md)).

**Example**

Query:

```

**参数**

* `index` — 表示单向边的六边形索引号。 [UInt64](../../data-types/int-uint.md)。

**返回值**

由表示每条单向边的 H3 索引构成的数组。[Array](../../data-types/array.md)([UInt64](../../data-types/int-uint.md))。

**示例**

查询：

```

Result:

```

结果：

```

## h3GetUnidirectionalEdgeBoundary {#h3getunidirectionaledgeboundary}

Returns the coordinates defining the unidirectional edge.

**Syntax**

```

## h3GetUnidirectionalEdgeBoundary {#h3getunidirectionaledgeboundary}

返回定义该单向边的坐标。

**语法**

```

**Parameter**

- `index` — Hexagon index number that represents a unidirectional edge. [UInt64](../../data-types/int-uint.md).

**Returned value**

- Array of pairs '(lon, lat)'. [Array](../../data-types/array.md)([Float64](../../data-types/float.md), [Float64](../../data-types/float.md)).

**Example**

Query:

```

**参数**

* `index` — 表示有向边的六边形索引号。[UInt64](../../data-types/int-uint.md)。

**返回值**

* 由坐标对 &#39;(lon, lat)&#39; 组成的数组。[Array](../../data-types/array.md)([Float64](../../data-types/float.md), [Float64](../../data-types/float.md))。

**示例**

查询：

```

Result:

```

结果：

```text
┌─边界────────────────────────────────────────────────────────────────────────────┐
│ [(37.42012867767779,-122.03773496427027),(37.33755608435299,-122.090428929044)] │
└─────────────────────────────────────────────────────────────────────────────────┘
```
