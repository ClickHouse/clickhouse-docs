---
'description': '处理 nullable 值的函数的文档'
'sidebar_label': 'Nullable'
'slug': '/sql-reference/functions/functions-for-nulls'
'title': '处理 nullable 值的函数'
'keywords':
- 'nullable'
- 'functions'
'doc_type': 'reference'
---


# 处理可为NULL值的函数

<!-- 
下面标签的内部内容在文档框架构建时由 
从 system.functions 生成的文档替换。请勿修改或删除这些标签。
参见：https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
-->

<!--AUTOGENERATED_START-->
## assumeNotNull {#assumeNotNull}

引入于：v1.1


返回 [`Nullable`](../data-types/nullable.md) 类型值对应的非`Nullable`值。
如果原始值为`NULL`，则可以返回任意结果。

另请参见：函数 [`ifNull`](#ifNull) 和 [`coalesce`](#coalesce)。
    

**语法**

```sql
assumeNotNull(x)
```

**参数**

- `x` — 任何可为NULL类型的原始值。[`Nullable(T)`](/sql-reference/data-types/nullable)


**返回值**

如果原始值不是`NULL`，则返回非空值；如果输入值为`NULL`，则返回任意值。[`Any`](/sql-reference/data-types)

**示例**

**使用示例**

```sql title=Query
CREATE TABLE t_null (x Int8, y Nullable(Int8))
ENGINE=MergeTree()
ORDER BY x;

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT assumeNotNull(y) FROM table;
SELECT toTypeName(assumeNotNull(y)) FROM t_null;
```

```response title=Response
┌─assumeNotNull(y)─┐
│                0 │
│                3 │
└──────────────────┘
┌─toTypeName(assumeNotNull(y))─┐
│ Int8                         │
│ Int8                         │
└──────────────────────────────┘
```



## coalesce {#coalesce}

引入于：v1.1


返回最左侧的非`NULL`参数。
    

**语法**

```sql
coalesce(x[, y, ...])
```

**参数**

- `x[, y, ...]` — 任何数量的非复合类型参数。所有参数必须是相互兼容的数据类型。[ `Any`](/sql-reference/data-types)


**返回值**

返回第一个非`NULL`参数；如果所有参数均为`NULL`，则返回`NULL`。[ `Any`](/sql-reference/data-types) 或 [`NULL`](/sql-reference/syntax#null)

**示例**

**使用示例**

```sql title=Query
-- Consider a list of contacts that may specify multiple ways to contact a customer.

CREATE TABLE aBook
(
    name String,
    mail Nullable(String),
    phone Nullable(String),
    telegram Nullable(UInt32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO aBook VALUES ('client 1', NULL, '123-45-67', 123), ('client 2', NULL, NULL, NULL);

-- The mail and phone fields are of type String, but the telegram field is UInt32 so it needs to be converted to String.

-- Get the first available contact method for the customer from the contact list

SELECT name, coalesce(mail, phone, CAST(telegram,'Nullable(String)')) FROM aBook;
```

```response title=Response
┌─name─────┬─coalesce(mail, phone, CAST(telegram, 'Nullable(String)'))─┐
│ client 1 │ 123-45-67                                                 │
│ client 2 │ ᴺᵁᴸᴸ                                                      │
└──────────┴───────────────────────────────────────────────────────────┘
```



## firstNonDefault {#firstNonDefault}

引入于：v25.9

返回一组参数中的第一个非默认值

**语法**

```sql

```

**参数**

- `arg1` — 第一个要检查的参数 - `arg2` — 第二个要检查的参数 - `...` — 其他要检查的参数 

**返回值**

结果类型为所有参数的超类型

**示例**

**整数**

```sql title=Query
SELECT firstNonDefault(0, 1, 2)
```

```response title=Response
1
```

**字符串**

```sql title=Query
SELECT firstNonDefault('', 'hello', 'world')
```

```response title=Response
'hello'
```

**空值**

```sql title=Query
SELECT firstNonDefault(NULL, 0 :: UInt8, 1 :: UInt8)
```

```response title=Response
1
```

**可为NULL的零**

```sql title=Query
SELECT firstNonDefault(NULL, 0 :: Nullable(UInt8), 1 :: Nullable(UInt8))
```

```response title=Response
0
```



## ifNull {#ifNull}

引入于：v1.1


如果第一个参数为`NULL`，则返回一个替代值。
    

**语法**

```sql
ifNull(x, alt)
```

**参数**

- `x` — 要检查是否为`NULL`的值。[ `Any`](/sql-reference/data-types)
- `alt` — 如果`x`为`NULL`，该函数返回的值。[ `Any`](/sql-reference/data-types)


**返回值**

如果`x`不为`NULL`，则返回`x`的值；否则返回`alt`。[ `Any`](/sql-reference/data-types)

**示例**

**使用示例**

```sql title=Query
SELECT ifNull('a', 'b'), ifNull(NULL, 'b');
```

```response title=Response
┌─ifNull('a', 'b')─┬─ifNull(NULL, 'b')─┐
│ a                │ b                 │
└──────────────────┴───────────────────┘
```



## isNotDistinctFrom {#isNotDistinctFrom}

引入于：v23.8


执行两个`JOIN`键之间的空安全比较。该函数会将两个`NULL`值视为相同，并返回`true`，这与通常的相等行为不同，通常比较两个`NULL`值会返回`NULL`。

:::info
该函数是`JOIN ON`实现中使用的内部函数。
请勿在查询中手动使用。
:::

有关完整示例，请参见：[ `JOIN` 键中的 `NULL` 值](/sql-reference/statements/select/join#null-values-in-join-keys)。
    

**语法**

```sql
isNotDistinctFrom(x, y)
```

**参数**

- `x` — 第一个要比较的`JOIN`键。[ `Any`](/sql-reference/data-types)
- `y` — 第二个要比较的`JOIN`键。[ `Any`](/sql-reference/data-types)


**返回值**

当`x`和`y`均为`NULL`时返回`true`，否则返回`false`。[ `Bool`](/sql-reference/data-types/boolean)

**示例**



## isNotNull {#isNotNull}

引入于：v1.1


检查参数是否不为`NULL`。

另请参见：运算符 [`IS NOT NULL`](/sql-reference/operators#is_not_null)。
    

**语法**

```sql
isNotNull(x)
```

**参数**

- `x` — 非复合数据类型的值。[ `Any`](/sql-reference/data-types)


**返回值**

如果`x`不为`NULL`，则返回`1`；否则返回`0`。[ `UInt8`](/sql-reference/data-types/int-uint)

**示例**

**使用示例**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT x FROM t_null WHERE isNotNull(y);
```

```response title=Response
┌─x─┐
│ 2 │
└───┘
```



## isNull {#isNull}

引入于：v1.1


检查参数是否为`NULL`。

另请参见：运算符 [`IS NULL`](/sql-reference/operators#is_null)。
    

**语法**

```sql
isNull(x)
```

**参数**

- `x` — 非复合数据类型的值。[ `Any`](/sql-reference/data-types)


**返回值**

如果`x`为`NULL`，则返回`1`；否则返回`0`。[ `UInt8`](/sql-reference/data-types/int-uint)

**示例**

**使用示例**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT x FROM t_null WHERE isNull(y);
```

```response title=Response
┌─x─┐
│ 1 │
└───┘
```



## isNullable {#isNullable}

引入于：v22.7


检查参数的数据类型是否为`Nullable`（即是否允许`NULL`值）。
    

**语法**

```sql
isNullable(x)
```

**参数**

- `x` — 任何数据类型的值。[ `Any`](/sql-reference/data-types)


**返回值**

如果`x`的数据类型为`Nullable`，则返回`1`；否则返回`0`。[ `UInt8`](/sql-reference/data-types/int-uint)

**示例**

**使用示例**

```sql title=Query
CREATE TABLE tab (
    ordinary_col UInt32,
    nullable_col Nullable(UInt32)
)
ENGINE = MergeTree
ORDER BY tuple();
INSERT INTO tab (ordinary_col, nullable_col) VALUES (1,1), (2, 2), (3,3);
SELECT isNullable(ordinary_col), isNullable(nullable_col) FROM tab;
```

```response title=Response
┌───isNullable(ordinary_col)──┬───isNullable(nullable_col)──┐
│                           0 │                           1 │
│                           0 │                           1 │
│                           0 │                           1 │
└─────────────────────────────┴─────────────────────────────┘
```



## isZeroOrNull {#isZeroOrNull}

引入于：v20.3


检查参数是否为零（`0`）或`NULL`。
    

**语法**

```sql
isZeroOrNull(x)
```

**参数**

- `x` — 数值。[ `UInt`](/sql-reference/data-types/int-uint)


**返回值**

如果`x`为`NULL`或等于零，则返回`1`；否则返回`0`。[ `UInt8/16/32/64`](/sql-reference/data-types/int-uint) 或 [`Float32/Float64`](/sql-reference/data-types/float)

**示例**

**使用示例**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 0), (3, 3);

SELECT x FROM t_null WHERE isZeroOrNull(y);
```

```response title=Response
┌─x─┐
│ 1 │
│ 2 │
└───┘
```



## nullIf {#nullIf}

引入于：v1.1


如果两个参数相等，则返回`NULL`。
    

**语法**

```sql
nullIf(x, y)
```

**参数**

- `x` — 第一个值。[ `Any`](/sql-reference/data-types)
- `y` — 第二个值。[ `Any`](/sql-reference/data-types)


**返回值**

如果两个参数相等，则返回`NULL`，否则返回第一个参数。[ `NULL`](/sql-reference/syntax#null) 或 [`Nullable(x)`](/sql-reference/data-types/nullable)

**示例**

**使用示例**

```sql title=Query
SELECT nullIf(1, 1), nullIf(1, 2);
```

```response title=Response
┌─nullIf(1, 1)─┬─nullIf(1, 2)─┐
│         ᴺᵁᴸᴸ │            1 │
└──────────────┴──────────────┘
```



## toNullable {#toNullable}

引入于：v1.1


将提供的参数类型转换为`Nullable`。
    

**语法**

```sql
toNullable(x)
```

**参数**

- `x` — 任何非复合类型的值。[ `Any`](/sql-reference/data-types)


**返回值**

返回输入值但为`Nullable`类型。[ `Nullable(Any)`](/sql-reference/data-types/nullable)

**示例**

**使用示例**

```sql title=Query
SELECT toTypeName(10), toTypeName(toNullable(10));
```

```response title=Response
┌─toTypeName(10)─┬─toTypeName(toNullable(10))─┐
│ UInt8          │ Nullable(UInt8)            │
└────────────────┴────────────────────────────┘
```



<!--AUTOGENERATED_END-->
