---
description: 'uniqTheta 函数说明文档'
sidebar_label: 'uniqTheta'
slug: /sql-reference/functions/uniqtheta-functions
title: 'uniqTheta 函数'
doc_type: 'reference'
---



# uniqTheta 函数

uniqTheta 函数适用于两个 uniqThetaSketch 对象，用于执行集合运算，例如 ∪ / ∩ / ×（并集 / 交集 / 差集），并返回一个包含运算结果的新 uniqThetaSketch 对象。

uniqThetaSketch 对象由带有 -State 后缀的聚合函数 uniqTheta 构造。

UniqThetaSketch 是一种用于存储近似集合取值的数据结构。
关于 RoaringBitmap 的更多信息，请参阅：[Theta Sketch Framework](https://datasketches.apache.org/docs/Theta/ThetaSketchFramework.html)。



## uniqThetaUnion

对两个 uniqThetaSketch 对象执行并集运算（集合运算 ∪），结果会生成一个新的 uniqThetaSketch。

```sql
uniqThetaUnion(uniqThetaSketch,uniqThetaSketch)
```

**参数**

* `uniqThetaSketch` – uniqThetaSketch 对象。

**示例**

```sql
SELECT finalizeAggregation(uniqThetaUnion(a, b)) AS a_union_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[1,2]) AS a, arrayReduce('uniqThetaState',[2,3,4]) AS b );
```

```text
┌─a_union_b─┬─a_cardinality─┬─b_cardinality─┐
│         4 │             2 │             3 │
└───────────┴───────────────┴───────────────┘
```


## uniqThetaIntersect

对两个 uniqThetaSketch 对象执行交集计算（集合运算 ∩），返回一个新的 uniqThetaSketch。

```sql
uniqThetaIntersect(uniqThetaSketch,uniqThetaSketch)
```

**参数**

* `uniqThetaSketch` – `uniqThetaSketch` 对象。

**示例**

```sql
SELECT finalizeAggregation(uniqThetaIntersect(a, b)) AS a_intersect_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[1,2]) AS a, arrayReduce('uniqThetaState',[2,3,4]) AS b );
```

```text
┌─a_intersect_b─┬─a_cardinality─┬─b_cardinality─┐
│             1 │             2 │             3 │
└───────────────┴───────────────┴───────────────┘
```


## uniqThetaNot

对两个 uniqThetaSketch 对象执行 a&#95;not&#95;b 计算（集合运算 ×），返回一个新的 uniqThetaSketch。

```sql
uniqThetaNot(uniqThetaSketch,uniqThetaSketch)
```

**参数**

* `uniqThetaSketch` – uniqThetaSketch 对象。

**示例**

```sql
SELECT finalizeAggregation(uniqThetaNot(a, b)) AS a_not_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState',[2,3,4]) AS a, arrayReduce('uniqThetaState',[1,2]) AS b );
```

```text
┌─a_not_b─┬─a_cardinality─┬─b_cardinality─┐
│       2 │             3 │             2 │
└─────────┴───────────────┴───────────────┘
```

**另请参阅**

* [uniqThetaSketch](/sql-reference/aggregate-functions/reference/uniqthetasketch)

{/* 
  下列标签内的内容会在构建文档框架时替换为
  由 system.functions 生成的文档。请不要修改或删除这些标签。
  参见：https://github.com/ClickHouse/clickhouse-docs/blob/main/contribute/autogenerated-documentation-from-source.md
  */ }

{/*AUTOGENERATED_START*/ }

{/*AUTOGENERATED_END*/ }
