---
slug: /guides/sre/scaling-clusters
sidebar_label: '分片再均衡'
sidebar_position: 20
description: 'ClickHouse 不支持自动分片再均衡，因此本文提供了一些关于如何进行分片再均衡的最佳实践。'
title: '数据再均衡'
doc_type: 'guide'
keywords: ['扩展', '集群', '水平扩展', '容量规划', '性能']
---

# 数据再均衡

ClickHouse 不支持自动分片再均衡。不过，有以下按优先级排序的分片再均衡方法：

1. 调整[分布式表](/engines/table-engines/special/distributed.md)的分片配置，使写入倾向于新的分片。这可能会在集群上造成负载不均衡和热点，但在大多数写入吞吐量不是极高的场景下仍然可行。此方式不要求用户更改写入目标，即可以继续写入分布式表。但它无法帮助对已有数据进行再均衡。

2. 作为 (1) 的替代方案，可以修改现有集群，并在集群达到均衡前仅向新分片写入，通过手动控制写入权重来实现。这与 (1) 具有相同的局限性。

3. 如果需要对已有数据进行再均衡，并且数据已经分区，可考虑先分离分区，将其手动迁移到另一个节点后，再重新附加到新分片。与后续技术相比，这种方式更依赖人工操作，但可能更快且资源消耗更少。由于这是手动操作，因此需要自行规划并统筹数据再均衡。

4. 通过 [INSERT FROM SELECT](/sql-reference/statements/insert-into.md/#inserting-the-results-of-select) 将数据从源集群导出到新集群。在非常大的数据集上性能不会理想，并且可能在源集群上产生大量 IO，同时占用相当可观的网络资源。这应被视为最后的手段。