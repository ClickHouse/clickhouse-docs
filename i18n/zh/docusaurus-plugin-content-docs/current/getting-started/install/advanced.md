---
description: '从源码编译 ClickHouse 或安装 CI 生成的二进制文件的说明'
keywords: ['ClickHouse', 'install', 'advanced', 'compile from source', 'CI generated binary']
sidebar_label: '高级安装'
slug: /install/advanced
title: '高级安装方法'
hide_title: false
doc_type: 'guide'
---

## 从源码编译 {#compile-from-source}

要手动编译 ClickHouse，请按照 [Linux](/development/build.md) 或 [macOS](/development/build-osx.md) 的说明进行操作。

你可以编译生成软件包并安装它们，或者在不安装软件包的情况下直接使用程序。

```xml
Client: <build_directory>/programs/clickhouse-client
Server: <build_directory>/programs/clickhouse-server
```

你需要手动创建数据和元数据目录，并使用 `chown` 将其所有权设置为指定用户。它们的路径可以在服务器配置文件（src/programs/server/config.xml）中修改，默认路径为：

```bash
/var/lib/clickhouse/data/default/
/var/lib/clickhouse/metadata/default/
```

在 Gentoo 上，你只需运行 `emerge clickhouse` 即可从源代码安装 ClickHouse。

## 安装 CI 生成的二进制文件 {#install-a-ci-generated-binary}

ClickHouse 的持续集成（CI）基础设施会针对 [ClickHouse 代码仓库](https://github.com/clickhouse/clickhouse/) 中的每次提交生成专门的构建，例如 [sanitized](https://github.com/google/sanitizers) 构建、未优化（Debug）
构建、交叉编译构建等。此类构建通常只在开发过程中有用，但在某些情况下，对用户也可能有用。

:::note
由于 ClickHouse 的 CI 会随着时间演进，下载 CI 生成构建的具体步骤可能会有所不同。
此外，CI 可能会删除旧的构建产物，从而导致这些文件无法再下载。
:::

例如，要下载 ClickHouse v23.4 的 aarch64 二进制文件，请执行以下步骤：

- 找到 v23.4 发布版本对应的 GitHub Pull Request：[Release pull request for branch 23.4](https://github.com/ClickHouse/ClickHouse/pull/49238)
- 点击 “Commits”，然后在你想安装的具体版本中，点击类似 “Update autogenerated version to 23.4.2.1 and contributors” 的提交。
- 点击绿色对勾 / 黄色圆点 / 红色叉号，打开 CI 检查列表。
- 在列表中点击 “Builds” 旁边的 “Details”；它会打开一个类似于[此页面](https://s3.amazonaws.com/clickhouse-test-reports/46793/b460eb70bf29b19eadd19a1f959b15d186705394/clickhouse_build_check/report.html) 的页面。
- 找到 compiler = "clang-*-aarch64" 的行——会有多行。
- 下载这些构建的产物。
