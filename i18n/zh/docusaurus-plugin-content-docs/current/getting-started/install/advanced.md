---
description: '从源代码编译 ClickHouse 或安装 CI 生成的二进制文件的说明'
keywords: ['ClickHouse', 'install', 'advanced', 'compile from source', 'CI generated binary']
sidebar_label: '高级安装'
slug: /install/advanced
title: '高级安装方法'
hide_title: false
doc_type: 'guide'
---



## 从源代码编译 {#compile-from-source}

要手动编译 ClickHouse,请参考 [Linux](/development/build.md) 或 [macOS](/development/build-osx.md) 的构建说明。

您可以编译并安装软件包,也可以直接使用编译后的程序而无需安装。

```xml
Client: <build_directory>/programs/clickhouse-client
Server: <build_directory>/programs/clickhouse-server
```

您需要手动创建数据和元数据目录,并使用 `chown` 将其所有权分配给目标用户。这些路径可以在服务器配置文件(src/programs/server/config.xml)中修改,默认路径为:

```bash
/var/lib/clickhouse/data/default/
/var/lib/clickhouse/metadata/default/
```

在 Gentoo 系统上,您可以直接使用 `emerge clickhouse` 命令从源代码安装 ClickHouse。


## 安装 CI 生成的二进制文件 {#install-a-ci-generated-binary}

ClickHouse 的持续集成 (CI) 基础设施会为 [ClickHouse 代码仓库](https://github.com/clickhouse/clickhouse/)中的每次提交生成专用构建版本,例如 [sanitized](https://github.com/google/sanitizers) 构建、未优化 (Debug) 构建、交叉编译构建等。虽然这些构建通常仅在开发过程中有用,但在某些情况下对用户也可能有参考价值。

:::note
由于 ClickHouse 的 CI 会随时间不断演进,下载 CI 生成构建的具体步骤可能会有所变化。
此外,CI 可能会删除旧的构建产物,使其无法下载。
:::

例如,要下载 ClickHouse v23.4 的 aarch64 二进制文件,请按照以下步骤操作:

- 找到 v23.4 版本的 GitHub pull request:[分支 23.4 的发布 pull request](https://github.com/ClickHouse/ClickHouse/pull/49238)
- 点击 "Commits",然后点击类似 "Update autogenerated version to 23.4.2.1 and contributors" 的提交,选择您想要安装的特定版本。
- 点击绿色对勾/黄色圆点/红色叉号以打开 CI 检查列表。
- 点击列表中 "Builds" 旁边的 "Details";这将打开一个类似[此页面](https://s3.amazonaws.com/clickhouse-test-reports/46793/b460eb70bf29b19eadd19a1f959b15d186705394/clickhouse_build_check/report.html)的页面。
- 找到 compiler = "clang-\*-aarch64" 的行 — 会有多行。
- 下载这些构建的产物。
