---
title: "格式设置"
sidebar_label: "格式设置"
slug: /operations/settings/formats
toc_max_heading_level: 2
description: "控制输入和输出格式的设置。"
doc_type: "reference"
---

import ExperimentalBadge from "@theme/badges/ExperimentalBadge"
import BetaBadge from "@theme/badges/BetaBadge"
import SettingsInfoBlock from "@theme/SettingsInfoBlock/SettingsInfoBlock"
import VersionHistory from "@theme/VersionHistory/VersionHistory"

<!-- Autogenerated -->

这些设置从[源代码](https://github.com/ClickHouse/ClickHouse/blob/master/src/Core/FormatFactorySettings.h)自动生成。


## allow_special_bool_values_inside_variant {#allow_special_bool_values_inside_variant}

<SettingsInfoBlock type='Bool' default_value='0' />

允许从特殊的文本布尔值(如 "on"、"off"、"enable"、"disable" 等)解析 Variant 类型内的 Bool 值。


## bool_false_representation {#bool_false_representation}

<SettingsInfoBlock type='String' default_value='false' />

用于在 TSV/CSV/Vertical/Pretty 格式中表示布尔值 false 的文本。


## bool_true_representation {#bool_true_representation}

<SettingsInfoBlock type='String' default_value='true' />

用于在 TSV/CSV/Vertical/Pretty 格式中表示布尔值 true 的文本。


## column_names_for_schema_inference {#column_names_for_schema_inference}

用于对无列名格式进行模式推断时使用的列名列表。格式：'column1,column2,column3,...'


## cross_to_inner_join_rewrite {#cross_to_inner_join_rewrite}

<SettingsInfoBlock type='UInt64' default_value='1' />

当 WHERE 子句中存在连接表达式时,使用 INNER JOIN 代替逗号连接/CROSS JOIN。可选值:0 - 不重写;1 - 对逗号连接/CROSS JOIN 尽可能应用重写;2 - 强制重写所有逗号连接;cross - 尽可能应用重写


## date_time_64_output_format_cut_trailing_zeros_align_to_groups_of_thousands {#date_time_64_output_format_cut_trailing_zeros_align_to_groups_of_thousands}

<SettingsInfoBlock type='Bool' default_value='0' />

动态修剪 datetime64 值的尾随零,将输出刻度调整为 [0, 3, 6],
分别对应"秒"、"毫秒"和"微秒"


## date_time_input_format {#date_time_input_format}

<SettingsInfoBlock type='DateTimeInputFormat' default_value='basic' />

允许选择日期和时间文本表示形式的解析器。

该设置不适用于[日期和时间函数](../../sql-reference/functions/date-time-functions.md)。

可选值:

- `'best_effort'` — 启用扩展解析。

  ClickHouse 可以解析基本的 `YYYY-MM-DD HH:MM:SS` 格式以及所有 [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) 日期和时间格式。例如,`'2018-06-08T01:02:03.000Z'`。

- `'best_effort_us'` — 类似于 `best_effort`(差异请参见 [parseDateTimeBestEffortUS](../../sql-reference/functions/type-conversion-functions#parsedatetimebesteffortus))

- `'basic'` — 使用基本解析器。

  ClickHouse 只能解析基本的 `YYYY-MM-DD HH:MM:SS` 或 `YYYY-MM-DD` 格式。例如,`2019-08-20 10:18:56` 或 `2019-08-20`。

Cloud 默认值:`'best_effort'`。

另请参阅:

- [DateTime 数据类型。](../../sql-reference/data-types/datetime.md)
- [日期和时间处理函数。](../../sql-reference/functions/date-time-functions.md)


## date_time_output_format {#date_time_output_format}

<SettingsInfoBlock type='DateTimeOutputFormat' default_value='simple' />

允许选择日期和时间的文本表示输出格式。

可选值：

- `simple` - 简单输出格式。

  ClickHouse 以 `YYYY-MM-DD hh:mm:ss` 格式输出日期和时间。例如，`2019-08-20 10:18:56`。计算根据数据类型的时区(如果存在)或服务器时区进行。

- `iso` - ISO 输出格式。

  ClickHouse 以 [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) `YYYY-MM-DDThh:mm:ssZ` 格式输出日期和时间。例如，`2019-08-20T10:18:56Z`。注意输出使用 UTC 时区(`Z` 表示 UTC)。

- `unix_timestamp` - Unix 时间戳输出格式。

  ClickHouse 以 [Unix 时间戳](https://en.wikipedia.org/wiki/Unix_time)格式输出日期和时间。例如 `1566285536`。

另请参阅：

- [DateTime 数据类型。](../../sql-reference/data-types/datetime.md)
- [日期和时间函数。](../../sql-reference/functions/date-time-functions.md)


## date_time_overflow_behavior {#date_time_overflow_behavior}

<SettingsInfoBlock type='DateTimeOverflowBehavior' default_value='ignore' />

定义当 [Date](../../sql-reference/data-types/date.md)、[Date32](../../sql-reference/data-types/date32.md)、[DateTime](../../sql-reference/data-types/datetime.md)、[DateTime64](../../sql-reference/data-types/datetime64.md) 或整数类型转换为 Date、Date32、DateTime 或 DateTime64 类型时,若值无法在目标类型中表示的处理行为。

可能的值:

- `ignore` — 静默忽略溢出。结果未定义。
- `throw` — 发生溢出时抛出异常。
- `saturate` — 对结果进行饱和处理。如果值小于目标类型可表示的最小值,则结果取最小可表示值。如果值大于目标类型可表示的最大值,则结果取最大可表示值。

默认值:`ignore`。


## dictionary_use_async_executor {#dictionary_use_async_executor}

<SettingsInfoBlock type='Bool' default_value='0' />

使用多线程执行读取字典源的管道。仅支持使用本地 ClickHouse 源的字典。


## errors_output_format {#errors_output_format}

<SettingsInfoBlock type='String' default_value='CSV' />

将错误信息写入文本输出的方法。


## exact_rows_before_limit {#exact_rows_before_limit}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,ClickHouse 将为 rows_before_limit_at_least 统计信息提供精确值,但代价是需要完整读取 limit 之前的所有数据


## format_avro_schema_registry_url {#format_avro_schema_registry_url}

用于 AvroConfluent 格式:Confluent Schema Registry 的 URL。


## format_binary_max_array_size {#format_binary_max_array_size}

<SettingsInfoBlock type='UInt64' default_value='1073741824' />

RowBinary 格式中数组允许的最大大小。用于防止在数据损坏时分配过多内存。设置为 0 表示无限制


## format_binary_max_string_size {#format_binary_max_string_size}

<SettingsInfoBlock type='UInt64' default_value='1073741824' />

RowBinary 格式中 String 类型允许的最大大小。用于防止在数据损坏时分配过多内存。设置为 0 表示无限制


## format_capn_proto_enum_comparising_mode {#format_capn_proto_enum_comparising_mode}

<SettingsInfoBlock
  type='CapnProtoEnumComparingMode'
  default_value='by_values'
/>

如何映射 ClickHouse 枚举与 CapnProto 枚举


## format_capn_proto_use_autogenerated_schema {#format_capn_proto_use_autogenerated_schema}

<SettingsInfoBlock type='Bool' default_value='1' />

当未设置 format_schema 时使用自动生成的 CapnProto 架构


## format_csv_allow_double_quotes {#format_csv_allow_double_quotes}

<SettingsInfoBlock type='Bool' default_value='1' />

如果设置为 true,则允许使用双引号括起的字符串。


## format_csv_allow_single_quotes {#format_csv_allow_single_quotes}

<SettingsInfoBlock type='Bool' default_value='0' />

如果设置为 true，则允许单引号字符串。


## format_csv_delimiter {#format_csv_delimiter}

<SettingsInfoBlock type='Char' default_value=',' />

用作 CSV 数据分隔符的字符。如果使用字符串进行设置,字符串长度必须为 1。


## format_csv_null_representation {#format_csv_null_representation}

<SettingsInfoBlock type='String' default_value='\N' />

CSV 格式中的自定义 NULL 表示


## format_custom_escaping_rule {#format_custom_escaping_rule}

<SettingsInfoBlock type='EscapingRule' default_value='Escaped' />

字段转义规则(适用于 CustomSeparated 格式)


## format_custom_field_delimiter {#format_custom_field_delimiter}

<SettingsInfoBlock type='String' default_value='	' />

字段之间的分隔符(用于 CustomSeparated 格式)


## format_custom_result_after_delimiter {#format_custom_result_after_delimiter}

结果集后的后缀(用于 CustomSeparated 格式)


## format_custom_result_before_delimiter {#format_custom_result_before_delimiter}

结果集前的前缀(适用于 CustomSeparated 格式)


## format_custom_row_after_delimiter {#format_custom_row_after_delimiter}

<SettingsInfoBlock
  type='String'
  default_value='
'
/>

最后一列字段后的分隔符(适用于 CustomSeparated 格式)


## format_custom_row_before_delimiter {#format_custom_row_before_delimiter}

第一列字段前的分隔符(适用于 CustomSeparated 格式)


## format_custom_row_between_delimiter {#format_custom_row_between_delimiter}

行之间的分隔符(适用于 CustomSeparated 格式)


## format_display_secrets_in_show_and_select {#format_display_secrets_in_show_and_select}

<SettingsInfoBlock type='Bool' default_value='0' />

启用或禁用在表、数据库、表函数和字典的 `SHOW` 和 `SELECT` 查询中显示密钥。

希望查看密钥的用户还必须启用 [`display_secrets_in_show_and_select` 服务器设置](../server-configuration-parameters/settings#display_secrets_in_show_and_select)，并拥有 [`displaySecretsInShowAndSelect`](/sql-reference/statements/grant#displaysecretsinshowandselect) 权限。

可能的值：

- 0 — 禁用。
- 1 — 启用。


## format_json_object_each_row_column_for_object_name {#format_json_object_each_row_column_for_object_name}

用于在 [JSONObjectEachRow](/interfaces/formats/JSONObjectEachRow) 格式中存储/写入对象名称的列名称。
列类型应为 String。如果该值为空,则将使用默认名称 `row_{i}` 作为对象名称。


## format_protobuf_use_autogenerated_schema {#format_protobuf_use_autogenerated_schema}

<SettingsInfoBlock type='Bool' default_value='1' />

当未设置 format_schema 时使用自动生成的 Protobuf 架构


## format_regexp {#format_regexp}

正则表达式(用于 Regexp 格式)


## format_regexp_escaping_rule {#format_regexp_escaping_rule}

<SettingsInfoBlock type='EscapingRule' default_value='Raw' />

字段转义规则(适用于 Regexp 格式)


## format_regexp_skip_unmatched {#format_regexp_skip_unmatched}

<SettingsInfoBlock type='Bool' default_value='0' />

跳过与正则表达式不匹配的行(适用于 Regexp 格式)


## format_schema {#format_schema}

当使用需要模式定义的格式时,此参数非常有用,例如 [Cap'n Proto](https://capnproto.org/) 或 [Protobuf](https://developers.google.com/protocol-buffers/)。该参数的值取决于具体格式。


## format_schema_message_name {#format_schema_message_name}

定义 `format_schema` 中指定的模式里所需消息的名称。
为了保持与旧版 format_schema 格式(`file_name:message_name`)的兼容性:

- 如果未指定 `format_schema_message_name`,则消息名称将从旧版 `format_schema` 值的 `message_name` 部分推断得出。
- 如果在使用旧版格式时指定了 `format_schema_message_name`,将会引发错误。


## format_schema_source {#format_schema_source}

<SettingsInfoBlock type='String' default_value='file' />

定义 `format_schema` 的来源。
可选值：

- 'file'（默认值）：`format_schema` 为位于 `format_schemas` 目录中的模式文件名。
- 'string'：`format_schema` 为模式的字面内容。
- 'query'：`format_schema` 为用于检索模式的查询语句。
  当 `format_schema_source` 设置为 'query' 时，适用以下规则：
- 查询必须返回恰好一个值：单行单列的字符串。
- 查询结果将被视为模式内容。
- 该结果会在本地缓存到 `format_schemas` 目录中。
- 可以使用以下命令清除本地缓存：`SYSTEM DROP FORMAT SCHEMA CACHE FOR Files`。
- 一旦缓存后,在显式清除缓存之前,不会再次执行相同的查询来获取模式。
- 除本地缓存文件外,Protobuf 消息也会缓存在内存中。即使清除了本地缓存文件,仍需使用 `SYSTEM DROP FORMAT SCHEMA CACHE [FOR Protobuf]` 清除内存缓存才能完全刷新模式。
- 运行 `SYSTEM DROP FORMAT SCHEMA CACHE` 命令可同时清除缓存文件和 Protobuf 消息模式的缓存。


## format_template_resultset {#format_template_resultset}

包含结果集格式字符串的文件路径(用于 Template 格式)


## format_template_resultset_format {#format_template_resultset_format}

结果集的格式字符串(用于 Template 格式)


## format_template_row {#format_template_row}

包含行格式字符串的文件路径(用于 Template 格式)


## format_template_row_format {#format_template_row_format}

行的格式字符串(用于 Template 格式)


## format_template_rows_between_delimiter {#format_template_rows_between_delimiter}

<SettingsInfoBlock
  type='String'
  default_value='
'
/>

行之间的分隔符(用于 Template 格式)


## format_tsv_null_representation {#format_tsv_null_representation}

<SettingsInfoBlock type='String' default_value='\N' />

TSV 格式中的自定义 NULL 表示


## input_format_allow_errors_num {#input_format_allow_errors_num}

<SettingsInfoBlock type='UInt64' default_value='0' />

设置从文本格式(CSV、TSV 等)读取数据时允许的最大错误数。

默认值为 0。

应始终与 `input_format_allow_errors_ratio` 配合使用。

如果在读取行时发生错误,但错误计数仍小于 `input_format_allow_errors_num`,ClickHouse 会忽略该行并继续处理下一行。

如果 `input_format_allow_errors_num` 和 `input_format_allow_errors_ratio` 同时被超出,ClickHouse 将抛出异常。


## input_format_allow_errors_ratio {#input_format_allow_errors_ratio}

<SettingsInfoBlock type='Float' default_value='0' />

设置从文本格式(CSV、TSV 等)读取数据时允许的最大错误百分比。
错误百分比以 0 到 1 之间的浮点数表示。

默认值为 0。

始终与 `input_format_allow_errors_num` 配合使用。

如果在读取行时发生错误,但错误计数器仍小于 `input_format_allow_errors_ratio`,ClickHouse 会忽略该行并继续处理下一行。

如果同时超过 `input_format_allow_errors_num` 和 `input_format_allow_errors_ratio` 的限制,ClickHouse 将抛出异常。


## input_format_allow_seeks {#input_format_allow_seeks}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在读取 ORC/Parquet/Arrow 输入格式时执行 seek 操作。

默认启用。


## input_format_arrow_allow_missing_columns {#input_format_arrow_allow_missing_columns}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在读取 Arrow 输入格式时存在缺失的列


## input_format_arrow_case_insensitive_column_matching {#input_format_arrow_case_insensitive_column_matching}

<SettingsInfoBlock type='Bool' default_value='0' />

在匹配 Arrow 列与 ClickHouse 列时忽略大小写。


## input_format_arrow_skip_columns_with_unsupported_types_in_schema_inference {#input_format_arrow_skip_columns_with_unsupported_types_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='0' />

在 Arrow 格式的架构推断中跳过具有不支持类型的列


## input_format_avro_allow_missing_fields {#input_format_avro_allow_missing_fields}

<SettingsInfoBlock type='Bool' default_value='0' />

对于 Avro/AvroConfluent 格式:当在 schema 中找不到字段时,使用默认值而不是抛出错误


## input_format_avro_null_as_default {#input_format_avro_null_as_default}

<SettingsInfoBlock type='Bool' default_value='0' />

对于 Avro/AvroConfluent 格式:当遇到 null 值且列为非 Nullable 类型时,插入默认值


## input_format_binary_decode_types_in_binary_format {#input_format_binary_decode_types_in_binary_format}

<SettingsInfoBlock type='Bool' default_value='0' />

在 RowBinaryWithNamesAndTypes 输入格式中以二进制格式读取数据类型而非类型名称


## input_format_binary_read_json_as_string {#input_format_binary_read_json_as_string}

<SettingsInfoBlock type='Bool' default_value='0' />

在 RowBinary 输入格式中,将 [JSON](../../sql-reference/data-types/newjson.md) 数据类型的值读取为 JSON [String](../../sql-reference/data-types/string.md) 值。


## input_format_bson_skip_fields_with_unsupported_types_in_schema_inference {#input_format_bson_skip_fields_with_unsupported_types_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='0' />

在 BSON 格式的模式推断中跳过不支持的类型字段。


## input_format_capn_proto_skip_fields_with_unsupported_types_in_schema_inference {#input_format_capn_proto_skip_fields_with_unsupported_types_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='0' />

在 CapnProto 格式的架构推断中跳过不支持类型的列


## input_format_csv_allow_cr_end_of_line {#input_format_csv_allow_cr_end_of_line}

<SettingsInfoBlock type='Bool' default_value='0' />

如果设置为 true，则允许在行尾使用 \\r 且后面不跟随其他字符


## input_format_csv_allow_variable_number_of_columns {#input_format_csv_allow_variable_number_of_columns}

<SettingsInfoBlock type='Bool' default_value='0' />

忽略 CSV 输入中的多余列(当文件列数超过预期时),并将 CSV 输入中的缺失字段作为默认值处理


## input_format_csv_allow_whitespace_or_tab_as_delimiter {#input_format_csv_allow_whitespace_or_tab_as_delimiter}

<SettingsInfoBlock type='Bool' default_value='0' />

允许在 CSV 字符串中使用空格和制表符 (\\t) 作为字段分隔符


## input_format_csv_arrays_as_nested_csv {#input_format_csv_arrays_as_nested_csv}

<SettingsInfoBlock type='Bool' default_value='0' />

从 CSV 读取数组时,要求其元素已按嵌套 CSV 格式序列化后放入字符串。示例:\"[\"\"Hello\"\", \"\"world\"\", \"\"42\"\"\"\" TV\"\"]\"。可以省略数组外围的方括号。


## input_format_csv_deserialize_separate_columns_into_tuple {#input_format_csv_deserialize_separate_columns_into_tuple}

<SettingsInfoBlock type='Bool' default_value='1' />

如果设置为 true,则可以将 CSV 格式中的多个独立列反序列化为一个 Tuple 列。


## input_format_csv_detect_header {#input_format_csv_detect_header}

<SettingsInfoBlock type='Bool' default_value='1' />

自动检测 CSV 格式中的列名和类型标头


## input_format_csv_empty_as_default {#input_format_csv_empty_as_default}

<SettingsInfoBlock type='Bool' default_value='1' />

将 CSV 输入中的空字段视为默认值。


## input_format_csv_enum_as_number {#input_format_csv_enum_as_number}

<SettingsInfoBlock type='Bool' default_value='0' />

将 CSV 格式中插入的枚举值作为枚举索引处理


## input_format_csv_skip_first_lines {#input_format_csv_skip_first_lines}

<SettingsInfoBlock type='UInt64' default_value='0' />

跳过 CSV 格式数据开头的指定行数


## input_format_csv_skip_trailing_empty_lines {#input_format_csv_skip_trailing_empty_lines}

<SettingsInfoBlock type='Bool' default_value='0' />

跳过 CSV 格式末尾的空行


## input_format_csv_trim_whitespaces {#input_format_csv_trim_whitespaces}

<SettingsInfoBlock type='Bool' default_value='1' />

去除 CSV 字符串开头和结尾的空格和制表符 (\\t) 字符


## input_format_csv_try_infer_numbers_from_strings {#input_format_csv_try_infer_numbers_from_strings}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,在模式推断期间,ClickHouse 将尝试从字符串字段中推断数字。
如果 CSV 数据包含带引号的 UInt64 数字,此功能会很有用。

默认禁用。


## input_format_csv_try_infer_strings_from_quoted_tuples {#input_format_csv_try_infer_strings_from_quoted_tuples}

<SettingsInfoBlock type='Bool' default_value='1' />

将输入数据中带引号的元组解释为 String 类型的值。


## input_format_csv_use_best_effort_in_schema_inference {#input_format_csv_use_best_effort_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='1' />

在 CSV 格式中使用一些优化技巧和启发式算法来推断架构


## input_format_csv_use_default_on_bad_values {#input_format_csv_use_default_on_bad_values}

<SettingsInfoBlock type='Bool' default_value='0' />

当 CSV 字段因无效值反序列化失败时,允许为列设置默认值


## input_format_custom_allow_variable_number_of_columns {#input_format_custom_allow_variable_number_of_columns}

<SettingsInfoBlock type='Bool' default_value='0' />

忽略 CustomSeparated 输入中的多余列(当文件列数超过预期时),并将 CustomSeparated 输入中的缺失字段作为默认值处理


## input_format_custom_detect_header {#input_format_custom_detect_header}

<SettingsInfoBlock type='Bool' default_value='1' />

在 CustomSeparated 格式中自动检测包含名称和类型的表头


## input_format_custom_skip_trailing_empty_lines {#input_format_custom_skip_trailing_empty_lines}

<SettingsInfoBlock type='Bool' default_value='0' />

跳过 CustomSeparated 格式中的尾部空行


## input_format_defaults_for_omitted_fields {#input_format_defaults_for_omitted_fields}

<SettingsInfoBlock type='Bool' default_value='1' />

执行 `INSERT` 查询时,对于省略的输入列值,使用相应列的默认值进行替换。此选项适用于 [JSONEachRow](/interfaces/formats/JSONEachRow)(及其他 JSON 格式)、[CSV](/interfaces/formats/CSV)、[TabSeparated](/interfaces/formats/TabSeparated)、[TSKV](/interfaces/formats/TSKV)、[Parquet](/interfaces/formats/Parquet)、[Arrow](/interfaces/formats/Arrow)、[Avro](/interfaces/formats/Avro)、[ORC](/interfaces/formats/ORC)、[Native](/interfaces/formats/Native) 格式,以及带有 `WithNames`/`WithNamesAndTypes` 后缀的格式。

:::note
启用此选项时,扩展表元数据将从服务器发送到客户端。这会消耗服务器额外的计算资源,可能降低性能。
:::

可能的值:

- 0 — 禁用。
- 1 — 启用。


## input_format_force_null_for_omitted_fields {#input_format_force_null_for_omitted_fields}

<SettingsInfoBlock type='Bool' default_value='0' />

强制将缺失的字段初始化为 null 值


## input_format_hive_text_allow_variable_number_of_columns {#input_format_hive_text_allow_variable_number_of_columns}

<SettingsInfoBlock type='Bool' default_value='1' />

忽略 Hive Text 输入中的多余列(当文件列数超过预期时),并将 Hive Text 输入中缺失的字段作为默认值处理


## input_format_hive_text_collection_items_delimiter {#input_format_hive_text_collection_items_delimiter}

<SettingsInfoBlock type='Char' default_value='' />

Hive 文本文件中集合(数组或映射)项之间的分隔符


## input_format_hive_text_fields_delimiter {#input_format_hive_text_fields_delimiter}

<SettingsInfoBlock type='Char' default_value='' />

Hive 文本文件中字段间的分隔符


## input_format_hive_text_map_keys_delimiter {#input_format_hive_text_map_keys_delimiter}

<SettingsInfoBlock type='Char' default_value='' />

Hive 文本文件中 map 键值对之间的分隔符


## input_format_import_nested_json {#input_format_import_nested_json}

<SettingsInfoBlock type='Bool' default_value='0' />

启用或禁用插入包含嵌套对象的 JSON 数据。

支持的格式:

- [JSONEachRow](/interfaces/formats/JSONEachRow)

可选值:

- 0 — 禁用。
- 1 — 启用。

另请参阅:

- 在 `JSONEachRow` 格式中[使用嵌套结构](/integrations/data-formats/json/other-formats#accessing-nested-json-objects)。


## input_format_ipv4_default_on_conversion_error {#input_format_ipv4_default_on_conversion_error}

<SettingsInfoBlock type='Bool' default_value='0' />

IPv4 反序列化时,如果发生转换错误,将使用默认值而不是抛出异常。

默认禁用。


## input_format_ipv6_default_on_conversion_error {#input_format_ipv6_default_on_conversion_error}

<SettingsInfoBlock type='Bool' default_value='0' />

IPv6 反序列化时，如果发生转换错误，将使用默认值而不是抛出异常。

默认禁用。


## input_format_json_compact_allow_variable_number_of_columns {#input_format_json_compact_allow_variable_number_of_columns}

<SettingsInfoBlock type='Bool' default_value='0' />

允许 JSONCompact/JSONCompactEachRow 输入格式中的行包含可变数量的列。
对于列数超出预期的行,忽略其额外的列;对于缺失的列,将其视为默认值。

默认禁用。


## input_format_json_defaults_for_missing_elements_in_named_tuple {#input_format_json_defaults_for_missing_elements_in_named_tuple}

<SettingsInfoBlock type='Bool' default_value='1' />

在解析命名元组时，为 JSON 对象中缺失的元素插入默认值。
此设置仅在启用 `input_format_json_named_tuples_as_objects` 设置时生效。

默认启用。


## input_format_json_empty_as_default {#input_format_json_empty_as_default}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,将 JSON 中的空输入字段替换为默认值。对于复杂的默认表达式,还必须同时启用 `input_format_defaults_for_omitted_fields`。

可选值:

- 0 — 禁用。
- 1 — 启用。


## input_format_json_ignore_unknown_keys_in_named_tuple {#input_format_json_ignore_unknown_keys_in_named_tuple}

<SettingsInfoBlock type='Bool' default_value='1' />

忽略命名元组的 JSON 对象中的未知键。

默认启用。


## input_format_json_ignore_unnecessary_fields {#input_format_json_ignore_unnecessary_fields}

<SettingsInfoBlock type='Bool' default_value='1' />

忽略不必要的字段并跳过解析。启用此选项后,对于格式无效或包含重复字段的 JSON 字符串可能不会抛出异常


## input_format_json_infer_array_of_dynamic_from_array_of_different_types {#input_format_json_infer_array_of_dynamic_from_array_of_different_types}

<SettingsInfoBlock type='Bool' default_value='1' />

启用后,在模式推断过程中,ClickHouse 将对包含不同数据类型值的 JSON 数组使用 Array(Dynamic) 类型。

示例:

```sql
SET input_format_json_infer_array_of_dynamic_from_array_of_different_types=1;
DESC format(JSONEachRow, '{"a" : [42, "hello", [1, 2, 3]]}');
```

```response
┌─name─┬─type───────────┐
│ a    │ Array(Dynamic) │
└──────┴────────────────┘
```

```sql
SET input_format_json_infer_array_of_dynamic_from_array_of_different_types=0;
DESC format(JSONEachRow, '{"a" : [42, "hello", [1, 2, 3]]}');
```

```response
┌─name─┬─type─────────────────────────────────────────────────────────────┐
│ a    │ Tuple(Nullable(Int64), Nullable(String), Array(Nullable(Int64))) │
└──────┴──────────────────────────────────────────────────────────────────┘
```

默认启用。


## input_format_json_infer_incomplete_types_as_strings {#input_format_json_infer_incomplete_types_as_strings}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在模式推断期间,对数据样本中仅包含 `Null`/`{}`/`[]` 的 JSON 键使用 String 类型。
在 JSON 格式中,任何值都可以作为 String 读取,通过对未知类型的键使用 String 类型,可以避免在模式推断期间出现类似 `Cannot determine type for column 'column_name' by first 25000 rows of data, most likely this column contains only Nulls or empty Arrays/Maps` 的错误。

示例:

```sql
SET input_format_json_infer_incomplete_types_as_strings = 1, input_format_json_try_infer_named_tuples_from_objects = 1;
DESCRIBE format(JSONEachRow, '{"obj" : {"a" : [1,2,3], "b" : "hello", "c" : null, "d" : {}, "e" : []}}');
SELECT * FROM format(JSONEachRow, '{"obj" : {"a" : [1,2,3], "b" : "hello", "c" : null, "d" : {}, "e" : []}}');
```

结果:

```
┌─name─┬─type───────────────────────────────────────────────────────────────────────────────────────────────────────────────────┬─default_type─┬─default_expression─┬─comment─┬─codec_expression─┬─ttl_expression─┐
│ obj  │ Tuple(a Array(Nullable(Int64)), b Nullable(String), c Nullable(String), d Nullable(String), e Array(Nullable(String))) │              │                    │         │                  │                │
└──────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┴──────────────┴────────────────────┴─────────┴──────────────────┴────────────────┘

┌─obj────────────────────────────┐
│ ([1,2,3],'hello',NULL,'{}',[]) │
└────────────────────────────────┘
```

默认启用。


## input_format_json_map_as_array_of_tuples {#input_format_json_map_as_array_of_tuples}

<SettingsInfoBlock type='Bool' default_value='0' />

将 Map 类型列反序列化为 JSON 元组数组。

默认禁用。


## input_format_json_max_depth {#input_format_json_max_depth}

<SettingsInfoBlock type='UInt64' default_value='1000' />

JSON 字段的最大深度。这不是严格限制,不必精确应用。


## input_format_json_named_tuples_as_objects {#input_format_json_named_tuples_as_objects}

<SettingsInfoBlock type='Bool' default_value='1' />

将命名元组列解析为 JSON 对象。

默认启用。


## input_format_json_read_arrays_as_strings {#input_format_json_read_arrays_as_strings}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在 JSON 输入格式中将 JSON 数组解析为字符串。

示例：

```sql
SET input_format_json_read_arrays_as_strings = 1;
SELECT arr, toTypeName(arr), JSONExtractArrayRaw(arr)[3] from format(JSONEachRow, 'arr String', '{"arr" : [1, "Hello", [1,2,3]]}');
```

结果：

```
┌─arr───────────────────┬─toTypeName(arr)─┬─arrayElement(JSONExtractArrayRaw(arr), 3)─┐
│ [1, "Hello", [1,2,3]] │ String          │ [1,2,3]                                   │
└───────────────────────┴─────────────────┴───────────────────────────────────────────┘
```

默认启用。


## input_format_json_read_bools_as_numbers {#input_format_json_read_bools_as_numbers}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在 JSON 输入格式中将布尔值解析为数字。

默认启用。


## input_format_json_read_bools_as_strings {#input_format_json_read_bools_as_strings}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在 JSON 输入格式中将布尔值解析为字符串。

默认启用。


## input_format_json_read_numbers_as_strings {#input_format_json_read_numbers_as_strings}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在 JSON 输入格式中将数字解析为字符串。

默认启用。


## input_format_json_read_objects_as_strings {#input_format_json_read_objects_as_strings}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在 JSON 输入格式中将 JSON 对象解析为字符串。

示例:

```sql
SET input_format_json_read_objects_as_strings = 1;
CREATE TABLE test (id UInt64, obj String, date Date) ENGINE=Memory();
INSERT INTO test FORMAT JSONEachRow {"id" : 1, "obj" : {"a" : 1, "b" : "Hello"}, "date" : "2020-01-01"};
SELECT * FROM test;
```

结果:

```
┌─id─┬─obj──────────────────────┬───────date─┐
│  1 │ {"a" : 1, "b" : "Hello"} │ 2020-01-01 │
└────┴──────────────────────────┴────────────┘
```

默认启用。


## input_format_json_throw_on_bad_escape_sequence {#input_format_json_throw_on_bad_escape_sequence}

<SettingsInfoBlock type='Bool' default_value='1' />

当 JSON 输入格式中的 JSON 字符串包含错误的转义序列时抛出异常。如果禁用,错误的转义序列将在数据中保持原样。

默认启用。


## input_format_json_try_infer_named_tuples_from_objects {#input_format_json_try_infer_named_tuples_from_objects}

<SettingsInfoBlock type='Bool' default_value='1' />

启用后,在模式推断过程中,ClickHouse 将尝试从 JSON 对象推断命名元组。
生成的命名元组将包含样本数据中所有对应 JSON 对象的全部元素。

示例:

```sql
SET input_format_json_try_infer_named_tuples_from_objects = 1;
DESC format(JSONEachRow, '{"obj" : {"a" : 42, "b" : "Hello"}}, {"obj" : {"a" : 43, "c" : [1, 2, 3]}}, {"obj" : {"d" : {"e" : 42}}}')
```

结果:

```
┌─name─┬─type───────────────────────────────────────────────────────────────────────────────────────────────┬─default_type─┬─default_expression─┬─comment─┬─codec_expression─┬─ttl_expression─┐
│ obj  │ Tuple(a Nullable(Int64), b Nullable(String), c Array(Nullable(Int64)), d Tuple(e Nullable(Int64))) │              │                    │         │                  │                │
└──────┴────────────────────────────────────────────────────────────────────────────────────────────────────┴──────────────┴────────────────────┴─────────┴──────────────────┴────────────────┘
```

默认启用。


## input_format_json_try_infer_numbers_from_strings {#input_format_json_try_infer_numbers_from_strings}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,在模式推断期间,ClickHouse 将尝试从字符串字段中推断数字。
如果 JSON 数据包含带引号的 UInt64 数字,此功能会很有用。

默认禁用。


## input_format_json_use_string_type_for_ambiguous_paths_in_named_tuples_inference_from_objects {#input_format_json_use_string_type_for_ambiguous_paths_in_named_tuples_inference_from_objects}

<SettingsInfoBlock type='Bool' default_value='0' />

在从 JSON 对象推断命名元组时,若遇到歧义路径,使用 String 类型而非抛出异常


## input_format_json_validate_types_from_metadata {#input_format_json_validate_types_from_metadata}

<SettingsInfoBlock type='Bool' default_value='1' />

对于 JSON/JSONCompact/JSONColumnsWithMetadata 输入格式,如果将此设置设为 1,
则会将输入数据元数据中的类型与表中相应列的类型进行比较。

默认启用。


## input_format_max_block_size_bytes {#input_format_max_block_size_bytes}

<SettingsInfoBlock type='UInt64' default_value='0' />

限制输入格式在数据解析过程中形成的数据块大小(以字节为单位)。适用于基于行的输入格式,当数据块在 ClickHouse 端形成时使用。
0 表示不限制字节大小。


## input_format_max_bytes_to_read_for_schema_inference {#input_format_max_bytes_to_read_for_schema_inference}

<SettingsInfoBlock type='UInt64' default_value='33554432' />

自动推断模式时读取的最大数据量(以字节为单位)。


## input_format_max_rows_to_read_for_schema_inference {#input_format_max_rows_to_read_for_schema_inference}

<SettingsInfoBlock type='UInt64' default_value='25000' />

自动推断模式时读取的最大数据行数。


## input_format_msgpack_number_of_columns {#input_format_msgpack_number_of_columns}

<SettingsInfoBlock type='UInt64' default_value='0' />

插入的 MsgPack 数据中的列数。用于从数据中自动推断架构。


## input_format_mysql_dump_map_column_names {#input_format_mysql_dump_map_column_names}

<SettingsInfoBlock type='Bool' default_value='1' />

按名称匹配 MySQL 转储中的表列与 ClickHouse 表列


## input_format_mysql_dump_table_name {#input_format_mysql_dump_table_name}

要从 MySQL 转储文件中读取数据的表名


## input_format_native_allow_types_conversion {#input_format_native_allow_types_conversion}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在 Native 输入格式中转换数据类型


## input_format_native_decode_types_in_binary_format {#input_format_native_decode_types_in_binary_format}

<SettingsInfoBlock type='Bool' default_value='0' />

在 Native 输入格式中以二进制格式读取数据类型,而非读取类型名称


## input_format_null_as_default {#input_format_null_as_default}

<SettingsInfoBlock type='Bool' default_value='1' />

启用或禁用对 [NULL](/sql-reference/syntax#literals) 字段使用[默认值](/sql-reference/statements/create/table#default_values)进行初始化,前提是这些字段的数据类型不是[可空类型](/sql-reference/data-types/nullable)。
如果列类型不可空且禁用此设置,则插入 `NULL` 会引发异常。如果列类型可空,则无论此设置如何,`NULL` 值都会按原样插入。

此设置适用于大多数输入格式。

对于复杂的默认表达式,还必须启用 `input_format_defaults_for_omitted_fields`。

可能的值:

- 0 — 向不可空列插入 `NULL` 会引发异常。
- 1 — `NULL` 字段使用列的默认值进行初始化。


## input_format_orc_allow_missing_columns {#input_format_orc_allow_missing_columns}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 ORC 输入格式时允许列缺失


## input_format_orc_case_insensitive_column_matching {#input_format_orc_case_insensitive_column_matching}

<SettingsInfoBlock type='Bool' default_value='0' />

在将 ORC 列与 ClickHouse 列进行匹配时忽略大小写。


## input_format_orc_dictionary_as_low_cardinality {#input_format_orc_dictionary_as_low_cardinality}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 ORC 文件时,将 ORC 字典编码列作为 LowCardinality 列处理。


## input_format_orc_filter_push_down {#input_format_orc_filter_push_down}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 ORC 文件时,根据 WHERE/PREWHERE 表达式、min/max 统计信息或 ORC 元数据中的布隆过滤器跳过整个条带或行组。


## input_format_orc_reader_time_zone_name {#input_format_orc_reader_time_zone_name}

<SettingsInfoBlock type='String' default_value='GMT' />

ORC 行读取器的时区名称,默认时区为 GMT。


## input_format_orc_row_batch_size {#input_format_orc_row_batch_size}

<SettingsInfoBlock type='Int64' default_value='100000' />

读取 ORC 条带时的批处理大小。


## input_format_orc_skip_columns_with_unsupported_types_in_schema_inference {#input_format_orc_skip_columns_with_unsupported_types_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='0' />

在 ORC 格式的架构推断中跳过不支持的数据类型的列


## input_format_orc_use_fast_decoder {#input_format_orc_use_fast_decoder}

<SettingsInfoBlock type='Bool' default_value='1' />

使用更快的 ORC 解码器实现。


## input_format_parquet_allow_geoparquet_parser {#input_format_parquet_allow_geoparquet_parser}

<SettingsInfoBlock type='Bool' default_value='1' />

使用地理列解析器将 Array(UInt8) 转换为 Point/LineString/Polygon/MultiLineString/MultiPolygon 类型


## input_format_parquet_allow_missing_columns {#input_format_parquet_allow_missing_columns}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 Parquet 输入格式时允许缺失列


## input_format_parquet_bloom_filter_push_down {#input_format_parquet_bloom_filter_push_down}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 Parquet 文件时,基于 WHERE 表达式和 Parquet 元数据中的布隆过滤器跳过整个行组。


## input_format_parquet_case_insensitive_column_matching {#input_format_parquet_case_insensitive_column_matching}

<SettingsInfoBlock type='Bool' default_value='0' />

匹配 Parquet 列与 ClickHouse 列时忽略大小写。


## input_format_parquet_enable_json_parsing {#input_format_parquet_enable_json_parsing}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 Parquet 文件时,将 JSON 列解析为 ClickHouse JSON 列类型。


## input_format_parquet_enable_row_group_prefetch {#input_format_parquet_enable_row_group_prefetch}

<SettingsInfoBlock type='Bool' default_value='1' />

在解析 Parquet 时启用行组预取。目前仅单线程解析支持预取。


## input_format_parquet_filter_push_down {#input_format_parquet_filter_push_down}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 Parquet 文件时,基于 WHERE/PREWHERE 表达式和 Parquet 元数据中的最小值/最大值统计信息跳过整个行组。


## input_format_parquet_local_file_min_bytes_for_seek {#input_format_parquet_local_file_min_bytes_for_seek}

<SettingsInfoBlock type='UInt64' default_value='8192' />

在 Parquet 输入格式中,本地文件读取执行 seek 操作(而非忽略式读取)所需的最小字节数


## input_format_parquet_local_time_as_utc {#input_format_parquet_local_time_as_utc}

<SettingsInfoBlock type='Bool' default_value='1' />

确定在对 isAdjustedToUTC=false 的 Parquet 时间戳进行模式推断时所使用的数据类型。如果为 true:DateTime64(..., 'UTC'),如果为 false:DateTime64(...)。这两种行为都不完全正确,因为 ClickHouse 没有用于表示本地时钟时间的数据类型。虽然有违直觉,但 'true' 可能是相对较优的选项,因为将 'UTC' 时间戳格式化为字符串时会生成正确的本地时间表示。


## input_format_parquet_max_block_size {#input_format_parquet_max_block_size}

<SettingsInfoBlock type='NonZeroUInt64' default_value='65409' />

Parquet 读取器的最大数据块大小。


## input_format_parquet_memory_high_watermark {#input_format_parquet_memory_high_watermark}

<SettingsInfoBlock type='UInt64' default_value='4294967296' />

Parquet 读取器 v3 的近似内存限制。限制可并行读取的行组或列的数量。当在单个查询中读取多个文件时,该限制应用于所有文件的总内存使用量。


## input_format_parquet_memory_low_watermark {#input_format_parquet_memory_low_watermark}

<SettingsInfoBlock type='UInt64' default_value='2097152' />

当内存使用量低于此阈值时，更积极地调度预取操作。例如，当需要通过网络读取大量小型布隆过滤器时，此设置可能有用。


## input_format_parquet_page_filter_push_down {#input_format_parquet_page_filter_push_down}

<SettingsInfoBlock type='Bool' default_value='1' />

使用列索引中的最小/最大值跳过数据页。


## input_format_parquet_prefer_block_bytes {#input_format_parquet_prefer_block_bytes}

<SettingsInfoBlock type='UInt64' default_value='16744704' />

Parquet 读取器输出的平均数据块字节数


## input_format_parquet_preserve_order {#input_format_parquet_preserve_order}

<SettingsInfoBlock type='Bool' default_value='0' />

避免在读取 Parquet 文件时对行进行重新排序。不推荐使用,因为通常无法保证行顺序,且查询管道的其他部分可能会打破该顺序。请使用 `ORDER BY _row_number` 代替。


## input_format_parquet_skip_columns_with_unsupported_types_in_schema_inference {#input_format_parquet_skip_columns_with_unsupported_types_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='0' />

在 Parquet 格式的模式推断中跳过不支持的数据类型的列


## input_format_parquet_use_native_reader {#input_format_parquet_use_native_reader}

<SettingsInfoBlock type='Bool' default_value='0' />

使用原生 Parquet 读取器 v1。速度相对较快，但功能尚未完善。已弃用。


## input_format_parquet_use_native_reader_v3 {#input_format_parquet_use_native_reader_v3}

<SettingsInfoBlock type='Bool' default_value='1' />

使用 Parquet 读取器 v3。


## input_format_parquet_use_offset_index {#input_format_parquet_use_offset_index}

<SettingsInfoBlock type='Bool' default_value='1' />

当未使用页面过滤时,对从 Parquet 文件读取页面方式的细微调整。


## input_format_parquet_verify_checksums {#input_format_parquet_verify_checksums}

<SettingsInfoBlock type='Bool' default_value='1' />

读取 Parquet 文件时验证页校验和。


## input_format_protobuf_flatten_google_wrappers {#input_format_protobuf_flatten_google_wrappers}

<SettingsInfoBlock type='Bool' default_value='0' />

为常规非嵌套列启用 Google 包装器,例如为 String 类型的列 'str' 使用 google.protobuf.StringValue 'str'。对于 Nullable 列,空包装器将被识别为默认值,缺失的包装器将被识别为 null


## input_format_protobuf_oneof_presence {#input_format_protobuf_oneof_presence}

<SettingsInfoBlock type='Bool' default_value='0' />

通过在特殊列中设置枚举值来指示找到的 protobuf oneof 字段


## input_format_protobuf_skip_fields_with_unsupported_types_in_schema_inference {#input_format_protobuf_skip_fields_with_unsupported_types_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='0' />

在 Protobuf 格式的架构推断中跳过不支持的类型字段


## input_format_record_errors_file_path {#input_format_record_errors_file_path}

用于记录读取文本格式（CSV、TSV）时错误信息的文件路径。


## input_format_skip_unknown_fields {#input_format_skip_unknown_fields}

<SettingsInfoBlock type='Bool' default_value='1' />

启用或禁用跳过额外数据的插入。

写入数据时,如果输入数据包含目标表中不存在的列,ClickHouse 会抛出异常。如果启用跳过功能,ClickHouse 将不会插入额外数据,也不会抛出异常。

支持的格式:

- [JSONEachRow](/interfaces/formats/JSONEachRow)(及其他 JSON 格式)
- [BSONEachRow](/interfaces/formats/BSONEachRow)(及其他 JSON 格式)
- [TSKV](/interfaces/formats/TSKV)
- 所有带 WithNames/WithNamesAndTypes 后缀的格式
- [MySQLDump](/interfaces/formats/MySQLDump)
- [Native](/interfaces/formats/Native)

可选值:

- 0 — 禁用。
- 1 — 启用。


## input_format_try_infer_dates {#input_format_try_infer_dates}

<SettingsInfoBlock type='Bool' default_value='1' />

启用后,ClickHouse 将尝试在文本格式的架构推断中从字符串字段推断 `Date` 类型。如果输入数据中某列的所有字段都成功解析为日期,则结果类型为 `Date`;如果至少有一个字段未能解析为日期,则结果类型为 `String`。

默认启用。


## input_format_try_infer_datetimes {#input_format_try_infer_datetimes}

<SettingsInfoBlock type='Bool' default_value='1' />

启用后,ClickHouse 将尝试在文本格式的模式推断过程中从字符串字段推断 `DateTime64` 类型。如果输入数据中某列的所有字段均成功解析为日期时间,则结果类型为 `DateTime64`;如果至少有一个字段无法解析为日期时间,则结果类型为 `String`。

默认启用。


## input_format_try_infer_datetimes_only_datetime64 {#input_format_try_infer_datetimes_only_datetime64}

<SettingsInfoBlock type='Bool' default_value='0' />

当启用 input_format_try_infer_datetimes 时,仅推断 DateTime64 类型,不推断 DateTime 类型


## input_format_try_infer_exponent_floats {#input_format_try_infer_exponent_floats}

<SettingsInfoBlock type='Bool' default_value='0' />

在文本格式的模式推断中尝试推断科学计数法表示的浮点数(JSON 格式除外,JSON 中的科学计数法数值始终会被推断)


## input_format_try_infer_integers {#input_format_try_infer_integers}

<SettingsInfoBlock type='Bool' default_value='1' />

启用后,ClickHouse 将在文本格式的架构推断中尝试推断整数而非浮点数。如果输入数据列中的所有数字均为整数,则结果类型为 `Int64`;如果至少有一个数字为浮点数,则结果类型为 `Float64`。

默认启用。


## input_format_try_infer_variants {#input_format_try_infer_variants}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,当列/数组元素存在多种可能的类型时,ClickHouse 将尝试在文本格式的架构推断中推断 [`Variant`](../../sql-reference/data-types/variant.md) 类型。

可能的值:

- 0 — 禁用。
- 1 — 启用。


## input_format_tsv_allow_variable_number_of_columns {#input_format_tsv_allow_variable_number_of_columns}

<SettingsInfoBlock type='Bool' default_value='0' />

忽略 TSV 输入中的多余列(如果文件列数多于预期),并将 TSV 输入中缺失的字段视为默认值


## input_format_tsv_crlf_end_of_line {#input_format_tsv_crlf_end_of_line}

<SettingsInfoBlock type='Bool' default_value='0' />

如果设置为 true,file 函数将读取以 \\r\\n 而非 \\n 作为行结束符的 TSV 格式文件。


## input_format_tsv_detect_header {#input_format_tsv_detect_header}

<SettingsInfoBlock type='Bool' default_value='1' />

自动检测 TSV 格式中的标题行（包含列名和类型）


## input_format_tsv_empty_as_default {#input_format_tsv_empty_as_default}

<SettingsInfoBlock type='Bool' default_value='0' />

将 TSV 输入中的空字段视为默认值。


## input_format_tsv_enum_as_number {#input_format_tsv_enum_as_number}

<SettingsInfoBlock type='Bool' default_value='0' />

将 TSV 格式中插入的枚举值作为枚举索引处理。


## input_format_tsv_skip_first_lines {#input_format_tsv_skip_first_lines}

<SettingsInfoBlock type='UInt64' default_value='0' />

跳过 TSV 格式数据开头的指定行数


## input_format_tsv_skip_trailing_empty_lines {#input_format_tsv_skip_trailing_empty_lines}

<SettingsInfoBlock type='Bool' default_value='0' />

跳过 TSV 格式末尾的空行


## input_format_tsv_use_best_effort_in_schema_inference {#input_format_tsv_use_best_effort_in_schema_inference}

<SettingsInfoBlock type='Bool' default_value='1' />

在 TSV 格式中使用一些优化技巧和启发式算法来推断架构


## input_format_values_accurate_types_of_literals {#input_format_values_accurate_types_of_literals}

<SettingsInfoBlock type='Bool' default_value='1' />

对于 Values 格式:在使用模板解析和解释表达式时,会检查字面量的实际类型,以避免可能出现的溢出和精度问题。


## input_format_values_deduce_templates_of_expressions {#input_format_values_deduce_templates_of_expressions}

<SettingsInfoBlock type='Bool' default_value='1' />

对于 Values 格式:如果字段无法通过流式解析器解析,则运行 SQL 解析器,推导 SQL 表达式模板,尝试使用该模板解析所有行,然后对所有行解释表达式。


## input_format_values_interpret_expressions {#input_format_values_interpret_expressions}

<SettingsInfoBlock type='Bool' default_value='1' />

对于 Values 格式：如果字段无法通过流式解析器解析，则运行 SQL 解析器并尝试将其解释为 SQL 表达式。


## input_format_with_names_use_header {#input_format_with_names_use_header}

<SettingsInfoBlock type='Bool' default_value='1' />

启用或禁用插入数据时的列顺序检查。

如果您确定输入数据的列顺序与目标表一致,建议禁用此检查以提高插入性能。

支持的格式:

- [CSVWithNames](/interfaces/formats/CSVWithNames)
- [CSVWithNamesAndTypes](/interfaces/formats/CSVWithNamesAndTypes)
- [TabSeparatedWithNames](/interfaces/formats/TabSeparatedWithNames)
- [TabSeparatedWithNamesAndTypes](/interfaces/formats/TabSeparatedWithNamesAndTypes)
- [JSONCompactEachRowWithNames](/interfaces/formats/JSONCompactEachRowWithNames)
- [JSONCompactEachRowWithNamesAndTypes](/interfaces/formats/JSONCompactEachRowWithNamesAndTypes)
- [JSONCompactStringsEachRowWithNames](/interfaces/formats/JSONCompactStringsEachRowWithNames)
- [JSONCompactStringsEachRowWithNamesAndTypes](/interfaces/formats/JSONCompactStringsEachRowWithNamesAndTypes)
- [RowBinaryWithNames](/interfaces/formats/RowBinaryWithNames)
- [RowBinaryWithNamesAndTypes](/interfaces/formats/RowBinaryWithNamesAndTypes)
- [CustomSeparatedWithNames](/interfaces/formats/CustomSeparatedWithNames)
- [CustomSeparatedWithNamesAndTypes](/interfaces/formats/CustomSeparatedWithNamesAndTypes)

可选值:

- 0 — 禁用。
- 1 — 启用。


## input_format_with_types_use_header {#input_format_with_types_use_header}

<SettingsInfoBlock type='Bool' default_value='1' />

控制格式解析器是否检查输入数据的数据类型与目标表的数据类型是否匹配。

支持的格式：

- [CSVWithNamesAndTypes](/interfaces/formats/CSVWithNamesAndTypes)
- [TabSeparatedWithNamesAndTypes](/interfaces/formats/TabSeparatedWithNamesAndTypes)
- [JSONCompactEachRowWithNamesAndTypes](/interfaces/formats/JSONCompactEachRowWithNamesAndTypes)
- [JSONCompactStringsEachRowWithNamesAndTypes](/interfaces/formats/JSONCompactStringsEachRowWithNamesAndTypes)
- [RowBinaryWithNamesAndTypes](/interfaces/formats/RowBinaryWithNamesAndTypes)
- [CustomSeparatedWithNamesAndTypes](/interfaces/formats/CustomSeparatedWithNamesAndTypes)

可选值：

- 0 — 禁用。
- 1 — 启用。


## insert_distributed_one_random_shard {#insert_distributed_one_random_shard}

<SettingsInfoBlock type='Bool' default_value='0' />

启用或禁用在没有分布式键的情况下向 [Distributed](/engines/table-engines/special/distributed) 表随机插入分片数据。

默认情况下,向包含多个分片的 `Distributed` 表插入数据时,如果没有分布式键,ClickHouse 服务器将拒绝任何插入请求。当 `insert_distributed_one_random_shard = 1` 时,允许插入并将数据随机转发到所有分片。

可选值:

- 0 — 如果有多个分片且未提供分布式键,则拒绝插入。
- 1 — 未提供分布式键时,在所有可用分片中随机执行插入。


## interval_output_format {#interval_output_format}

<SettingsInfoBlock type='IntervalOutputFormat' default_value='numeric' />

允许选择间隔类型文本表示的不同输出格式。

可能的值：

- `kusto` - KQL 风格的输出格式。

  ClickHouse 以 [KQL 格式](https://learn.microsoft.com/en-us/dotnet/standard/base-types/standard-timespan-format-strings#the-constant-c-format-specifier)输出间隔。例如，`toIntervalDay(2)` 将被格式化为 `2.00:00:00`。请注意，对于长度可变的间隔类型（如 `IntervalMonth` 和 `IntervalYear`），会采用每个间隔的平均秒数进行计算。

- `numeric` - 数值输出格式。

  ClickHouse 以底层数值形式输出间隔。例如，`toIntervalDay(2)` 将被格式化为 `2`。

另请参阅：

- [Interval](../../sql-reference/data-types/special-data-types/interval.md)


## into_outfile_create_parent_directories {#into_outfile_create_parent_directories}

<SettingsInfoBlock type='Bool' default_value='0' />

使用 INTO OUTFILE 时,如果父目录不存在,则自动创建。


## json_type_escape_dots_in_keys {#json_type_escape_dots_in_keys}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后，JSON 键中的点号将在解析时被转义。


## output_format_arrow_compression_method {#output_format_arrow_compression_method}

<SettingsInfoBlock type='ArrowCompression' default_value='lz4_frame' />

Arrow 输出格式的压缩方法。支持的编解码器：lz4_frame、zstd、none（未压缩）


## output_format_arrow_fixed_string_as_fixed_byte_array {#output_format_arrow_fixed_string_as_fixed_byte_array}

<SettingsInfoBlock type='Bool' default_value='1' />

对 FixedString 列使用 Arrow FIXED_SIZE_BINARY 类型,而不是 Binary 类型。


## output_format_arrow_low_cardinality_as_dictionary {#output_format_arrow_low_cardinality_as_dictionary}

<SettingsInfoBlock type='Bool' default_value='0' />

启用将 LowCardinality 类型输出为 Dictionary Arrow 类型


## output_format_arrow_string_as_string {#output_format_arrow_string_as_string}

<SettingsInfoBlock type='Bool' default_value='1' />

对 String 列使用 Arrow String 类型而不是 Binary 类型


## output_format_arrow_use_64_bit_indexes_for_dictionary {#output_format_arrow_use_64_bit_indexes_for_dictionary}

<SettingsInfoBlock type='Bool' default_value='0' />

在 Arrow 格式中始终使用 64 位整数作为字典索引


## output_format_arrow_use_signed_indexes_for_dictionary {#output_format_arrow_use_signed_indexes_for_dictionary}

<SettingsInfoBlock type='Bool' default_value='1' />

在 Arrow 格式中使用有符号整数作为字典索引


## output_format_avro_codec {#output_format_avro_codec}

用于输出的压缩编解码器。可选值:'null'、'deflate'、'snappy'、'zstd'。


## output_format_avro_rows_in_file {#output_format_avro_rows_in_file}

<SettingsInfoBlock type='UInt64' default_value='1' />

文件中的最大行数（如果存储允许）


## output_format_avro_string_column_pattern {#output_format_avro_string_column_pattern}

用于 Avro 格式:用正则表达式选择要作为 AVRO 字符串类型的 String 列。


## output_format_avro_sync_interval {#output_format_avro_sync_interval}

<SettingsInfoBlock type='UInt64' default_value='16384' />

同步间隔，以字节为单位。


## output_format_binary_encode_types_in_binary_format {#output_format_binary_encode_types_in_binary_format}

<SettingsInfoBlock type='Bool' default_value='0' />

在 RowBinaryWithNamesAndTypes 输出格式中使用二进制格式写入数据类型，而非类型名称


## output_format_binary_write_json_as_string {#output_format_binary_write_json_as_string}

<SettingsInfoBlock type='Bool' default_value='0' />

在 RowBinary 输出格式中,将 [JSON](../../sql-reference/data-types/newjson.md) 数据类型的值以 JSON [String](../../sql-reference/data-types/string.md) 值的形式写入。


## output_format_bson_string_as_string {#output_format_bson_string_as_string}

<SettingsInfoBlock type='Bool' default_value='0' />

对 String 列使用 BSON String 类型而非 Binary 类型。


## output_format_csv_crlf_end_of_line {#output_format_csv_crlf_end_of_line}

<SettingsInfoBlock type='Bool' default_value='0' />

如果设置为 true,CSV 格式的行尾符将为 \\r\\n 而非 \\n。


## output_format_csv_serialize_tuple_into_separate_columns {#output_format_csv_serialize_tuple_into_separate_columns}

<SettingsInfoBlock type='Bool' default_value='1' />

如果设置为 true,CSV 格式中的 Tuple 会被序列化为单独的列(即元组中的嵌套结构会丢失)


## output_format_decimal_trailing_zeros {#output_format_decimal_trailing_zeros}

<SettingsInfoBlock type='Bool' default_value='0' />

打印 Decimal 值时输出尾随零。例如输出 1.230000 而不是 1.23。

默认禁用。


## output_format_json_array_of_rows {#output_format_json_array_of_rows}

<SettingsInfoBlock type='Bool' default_value='0' />

启用以 JSON 数组形式输出所有行的功能,使用 [JSONEachRow](/interfaces/formats/JSONEachRow) 格式。

可选值:

- 1 — ClickHouse 将所有行作为数组输出,每行使用 `JSONEachRow` 格式。
- 0 — ClickHouse 以 `JSONEachRow` 格式分别输出每一行。

**启用该设置的查询示例**

查询:

```sql
SET output_format_json_array_of_rows = 1;
SELECT number FROM numbers(3) FORMAT JSONEachRow;
```

结果:

```text
[
{"number":"0"},
{"number":"1"},
{"number":"2"}
]
```

**禁用该设置的查询示例**

查询:

```sql
SET output_format_json_array_of_rows = 0;
SELECT number FROM numbers(3) FORMAT JSONEachRow;
```

结果:

```text
{"number":"0"}
{"number":"1"}
{"number":"2"}
```


## output_format_json_escape_forward_slashes {#output_format_json_escape_forward_slashes}

<SettingsInfoBlock type='Bool' default_value='1' />

控制 JSON 输出格式中字符串的正斜杠转义。此功能用于与 JavaScript 保持兼容。注意不要与始终会被转义的反斜杠混淆。

默认启用。


## output_format_json_map_as_array_of_tuples {#output_format_json_map_as_array_of_tuples}

<SettingsInfoBlock type='Bool' default_value='0' />

将 Map 类型列序列化为 JSON 元组数组。

默认禁用。


## output_format_json_named_tuples_as_objects {#output_format_json_named_tuples_as_objects}

<SettingsInfoBlock type='Bool' default_value='1' />

将命名元组列序列化为 JSON 对象。

默认启用。


## output_format_json_pretty_print {#output_format_json_pretty_print}

<SettingsInfoBlock type='Bool' default_value='1' />

此设置决定在使用 JSON 输出格式时,`data` 数组中的嵌套结构(如元组 Tuple、映射 Map 和数组 Array)如何显示。

例如,不采用以下输出格式:

```json
"data":
[
  {
    "tuple": {"a":1,"b":2,"c":3},
    "array": [1,2,3],
    "map": {"a":1,"b":2,"c":3}
  }
],
```

而是格式化为:

```json
"data":
[
    {
        "tuple": {
            "a": 1,
            "b": 2,
            "c": 3
        },
        "array": [
            1,
            2,
            3
        ],
        "map": {
            "a": 1,
            "b": 2,
            "c": 3
        }
    }
],
```

默认启用。


## output_format_json_quote_64bit_floats {#output_format_json_quote_64bit_floats}

<SettingsInfoBlock type='Bool' default_value='0' />

控制在 JSON\* 格式输出时是否为 64 位[浮点数](../../sql-reference/data-types/float.md)添加引号。

默认禁用。


## output_format_json_quote_64bit_integers {#output_format_json_quote_64bit_integers}

<SettingsInfoBlock type='Bool' default_value='0' />

控制在以 [JSON](/interfaces/formats/JSON) 格式输出时,是否为 64 位或更大的[整数](../../sql-reference/data-types/int-uint.md)(如 `UInt64` 或 `Int128`)添加引号。
默认情况下,这些整数会用引号包围。此行为与大多数 JavaScript 实现兼容。

可能的值:

- 0 — 整数输出时不带引号。
- 1 — 整数输出时带引号。


## output_format_json_quote_decimals {#output_format_json_quote_decimals}

<SettingsInfoBlock type='Bool' default_value='0' />

控制 JSON 输出格式中十进制数值是否使用引号。

默认禁用。


## output_format_json_quote_denormals {#output_format_json_quote_denormals}

<SettingsInfoBlock type='Bool' default_value='0' />

在 [JSON](/interfaces/formats/JSON) 输出格式中启用 `+nan`、`-nan`、`+inf`、`-inf` 的输出。

可选值:

- 0 — 禁用。
- 1 — 启用。

**示例**

以下表 `account_orders` 为例:

```text
┌─id─┬─name───┬─duration─┬─period─┬─area─┐
│  1 │ Andrew │       20 │      0 │  400 │
│  2 │ John   │       40 │      0 │    0 │
│  3 │ Bob    │       15 │      0 │ -100 │
└────┴────────┴──────────┴────────┴──────┘
```

当 `output_format_json_quote_denormals = 0` 时,查询在输出中返回 `null` 值:

```sql
SELECT area/period FROM account_orders FORMAT JSON;
```

```json
{
  "meta": [
    {
      "name": "divide(area, period)",
      "type": "Float64"
    }
  ],

  "data": [
    {
      "divide(area, period)": null
    },
    {
      "divide(area, period)": null
    },
    {
      "divide(area, period)": null
    }
  ],

  "rows": 3,

  "statistics": {
    "elapsed": 0.003648093,
    "rows_read": 3,
    "bytes_read": 24
  }
}
```

当 `output_format_json_quote_denormals = 1` 时,查询返回:

```json
{
  "meta": [
    {
      "name": "divide(area, period)",
      "type": "Float64"
    }
  ],

  "data": [
    {
      "divide(area, period)": "inf"
    },
    {
      "divide(area, period)": "-nan"
    },
    {
      "divide(area, period)": "-inf"
    }
  ],

  "rows": 3,

  "statistics": {
    "elapsed": 0.000070241,
    "rows_read": 3,
    "bytes_read": 24
  }
}
```


## output_format_json_skip_null_value_in_named_tuples {#output_format_json_skip_null_value_in_named_tuples}

<SettingsInfoBlock type='Bool' default_value='0' />

将命名元组列序列化为 JSON 对象时，跳过值为 null 的键值对。仅当 output_format_json_named_tuples_as_objects 为 true 时此设置才有效。


## output_format_json_validate_utf8 {#output_format_json_validate_utf8}

<SettingsInfoBlock type='Bool' default_value='0' />

控制 JSON 输出格式中 UTF-8 序列的验证。不影响 JSON/JSONCompact/JSONColumnsWithMetadata 格式,它们始终会验证 UTF-8。

默认禁用。


## output_format_markdown_escape_special_characters {#output_format_markdown_escape_special_characters}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,对 Markdown 中的特殊字符进行转义。

[Common Mark](https://spec.commonmark.org/0.30/#example-12) 定义了以下可通过 \ 进行转义的特殊字符:

```
! " # $ % & ' ( ) * + , - . / : ; < = > ? @ [ \ ] ^ _ ` { | } ~
```

可选值:

- 0 — 禁用。
- 1 — 启用。


## output_format_msgpack_uuid_representation {#output_format_msgpack_uuid_representation}

<SettingsInfoBlock type='MsgPackUUIDRepresentation' default_value='ext' />

MsgPack 格式中 UUID 的输出方式。


## output_format_native_encode_types_in_binary_format {#output_format_native_encode_types_in_binary_format}

<SettingsInfoBlock type='Bool' default_value='0' />

在 Native 输出格式中使用二进制格式写入数据类型,而非类型名称


## output_format_native_use_flattened_dynamic_and_json_serialization {#output_format_native_use_flattened_dynamic_and_json_serialization}

<SettingsInfoBlock type='Bool' default_value='0' />

以扁平化格式写入 [JSON](../../sql-reference/data-types/newjson.md) 和 [Dynamic](../../sql-reference/data-types/dynamic.md) 列的数据(将所有类型/路径作为独立的子列)。


## output_format_native_write_json_as_string {#output_format_native_write_json_as_string}

<SettingsInfoBlock type='Bool' default_value='0' />

将 [JSON](../../sql-reference/data-types/newjson.md) 列的数据以包含 JSON 字符串的 [String](../../sql-reference/data-types/string.md) 列形式写入,而非使用默认的原生 JSON 序列化方式。


## output_format_orc_compression_block_size {#output_format_orc_compression_block_size}

<SettingsInfoBlock type='UInt64' default_value='262144' />

ORC 输出格式中压缩块的大小(以字节为单位)。


## output_format_orc_compression_method {#output_format_orc_compression_method}

<SettingsInfoBlock type='ORCCompression' default_value='zstd' />

ORC 输出格式的压缩方法。支持的编解码器:lz4、snappy、zlib、zstd、none(未压缩)


## output_format_orc_dictionary_key_size_threshold {#output_format_orc_dictionary_key_size_threshold}

<SettingsInfoBlock type='Double' default_value='0' />

对于 ORC 输出格式中的字符串列,如果不同值的数量大于非空行总数的该比例阈值,则禁用字典编码。否则启用字典编码


## output_format_orc_row_index_stride {#output_format_orc_row_index_stride}

<SettingsInfoBlock type='UInt64' default_value='10000' />

ORC 输出格式的目标行索引步幅


## output_format_orc_string_as_string {#output_format_orc_string_as_string}

<SettingsInfoBlock type='Bool' default_value='1' />

对 String 列使用 ORC String 类型而非 Binary 类型


## output_format_orc_writer_time_zone_name {#output_format_orc_writer_time_zone_name}

<SettingsInfoBlock type='String' default_value='GMT' />

ORC 写入器的时区名称,默认时区为 GMT。


## output_format_parquet_batch_size {#output_format_parquet_batch_size}

<SettingsInfoBlock type='NonZeroUInt64' default_value='1024' />

每隔指定行数检查一次页面大小。如果列的平均值大小超过几 KB,建议减小此值。


## output_format_parquet_bloom_filter_bits_per_value {#output_format_parquet_bloom_filter_bits_per_value}

<SettingsInfoBlock type='Double' default_value='10.5' />

Parquet 布隆过滤器中每个不同值使用的近似比特数。预估误报率：

- 6 bits - 10%
- 10.5 bits - 1%
- 16.9 bits - 0.1%
- 26.4 bits - 0.01%
- 41 bits - 0.001%


## output_format_parquet_bloom_filter_flush_threshold_bytes {#output_format_parquet_bloom_filter_flush_threshold_bytes}

<SettingsInfoBlock type='UInt64' default_value='134217728' />

指定在 Parquet 文件中放置布隆过滤器的位置。布隆过滤器将按照大约此大小的分组进行写入。具体规则如下:

- 如果为 0,每个行组的布隆过滤器将紧随该行组之后立即写入,
- 如果大于所有布隆过滤器的总大小,所有行组的布隆过滤器将先在内存中累积,然后在文件末尾附近统一写入,
- 否则,布隆过滤器将在内存中累积,当其总大小超过此值时即写出。


## output_format_parquet_compliant_nested_types {#output_format_parquet_compliant_nested_types}

<SettingsInfoBlock type='Bool' default_value='1' />

在 Parquet 文件架构中,列表元素使用名称 'element' 而非 'item'。这是 Arrow 库实现的历史遗留产物。通常可提高兼容性,但可能与某些旧版本的 Arrow 存在兼容问题。


## output_format_parquet_compression_method {#output_format_parquet_compression_method}

<SettingsInfoBlock type='ParquetCompression' default_value='zstd' />

Parquet 输出格式的压缩方法。支持的编解码器：snappy、lz4、brotli、zstd、gzip、none（未压缩）


## output_format_parquet_data_page_size {#output_format_parquet_data_page_size}

<SettingsInfoBlock type='UInt64' default_value='1048576' />

压缩前的目标页面大小（以字节为单位）。


## output_format_parquet_date_as_uint16 {#output_format_parquet_date_as_uint16}

<SettingsInfoBlock type='Bool' default_value='0' />

将 Date 值写入为普通的 16 位数字(读回时为 UInt16),而不是转换为 32 位 Parquet DATE 类型(读回时为 Date32)。


## output_format_parquet_datetime_as_uint32 {#output_format_parquet_datetime_as_uint32}

<SettingsInfoBlock type='Bool' default_value='0' />

将 DateTime 值写入为原始 Unix 时间戳(读回时为 UInt32),而不是转换为毫秒(读回时为 DateTime64(3))。


## output_format_parquet_enum_as_byte_array {#output_format_parquet_enum_as_byte_array}

<SettingsInfoBlock type='Bool' default_value='1' />

使用 Parquet 物理类型 BYTE_ARRAY 和逻辑类型 ENUM 写入枚举类型


## output_format_parquet_fixed_string_as_fixed_byte_array {#output_format_parquet_fixed_string_as_fixed_byte_array}

<SettingsInfoBlock type='Bool' default_value='1' />

对于 FixedString 列,使用 Parquet FIXED_LEN_BYTE_ARRAY 类型而非 Binary 类型。


## output_format_parquet_geometadata {#output_format_parquet_geometadata}

<SettingsInfoBlock type='Bool' default_value='1' />

允许在 Parquet 元数据中写入地理列的信息，并使用 WKB 格式对列进行编码。


## output_format_parquet_max_dictionary_size {#output_format_parquet_max_dictionary_size}

<SettingsInfoBlock type='UInt64' default_value='1048576' />

如果字典大小超过此字节数,则切换为不使用字典的编码方式。设置为 0 可禁用字典编码。


## output_format_parquet_parallel_encoding {#output_format_parquet_parallel_encoding}

<SettingsInfoBlock type='Bool' default_value='1' />

使用多线程进行 Parquet 编码。需要启用 output_format_parquet_use_custom_encoder。


## output_format_parquet_row_group_size {#output_format_parquet_row_group_size}

<SettingsInfoBlock type='UInt64' default_value='1000000' />

目标行组的大小（以行数为单位）。


## output_format_parquet_row_group_size_bytes {#output_format_parquet_row_group_size_bytes}

<SettingsInfoBlock type='UInt64' default_value='536870912' />

压缩前的目标行组大小（以字节为单位）。


## output_format_parquet_string_as_string {#output_format_parquet_string_as_string}

<SettingsInfoBlock type='Bool' default_value='1' />

对 String 列使用 Parquet String 类型而非 Binary 类型。


## output_format_parquet_use_custom_encoder {#output_format_parquet_use_custom_encoder}

<SettingsInfoBlock type='Bool' default_value='1' />

使用更快的 Parquet 编码器实现。


## output_format_parquet_version {#output_format_parquet_version}

<SettingsInfoBlock type='ParquetVersion' default_value='2.latest' />

输出格式使用的 Parquet 格式版本。支持的版本：1.0、2.4、2.6 和 2.latest（默认值）


## output_format_parquet_write_bloom_filter {#output_format_parquet_write_bloom_filter}

<SettingsInfoBlock type='Bool' default_value='1' />

在 Parquet 文件中写入布隆过滤器。需要 output_format_parquet_use_custom_encoder = true。


## output_format_parquet_write_checksums {#output_format_parquet_write_checksums}

<SettingsInfoBlock type='Bool' default_value='1' />

在 Parquet 页头中放置 CRC32 校验和。


## output_format_parquet_write_page_index {#output_format_parquet_write_page_index}

<SettingsInfoBlock type='Bool' default_value='1' />

将列索引和偏移索引(即每个数据页的统计信息,可用于读取时的谓词下推)写入 Parquet 文件。


## output_format_pretty_color {#output_format_pretty_color}

<SettingsInfoBlock type='UInt64Auto' default_value='auto' />

在 Pretty 格式中使用 ANSI 转义序列。0 - 禁用,1 - 启用,'auto' - 在终端环境下启用。


## output_format_pretty_display_footer_column_names {#output_format_pretty_display_footer_column_names}

<SettingsInfoBlock type='UInt64' default_value='1' />

当表格行数较多时在页脚显示列名。

可选值：

- 0 — 页脚中不显示列名。
- 1 — 当行数大于或等于 [output_format_pretty_display_footer_column_names_min_rows](#output_format_pretty_display_footer_column_names_min_rows) 设置的阈值时（默认为 50），在页脚中显示列名。

**示例**

查询：

```sql
SELECT *, toTypeName(*) FROM (SELECT * FROM system.numbers LIMIT 1000);
```

结果：

```response
      ┌─number─┬─toTypeName(number)─┐
   1. │      0 │ UInt64             │
   2. │      1 │ UInt64             │
   3. │      2 │ UInt64             │
   ...
 999. │    998 │ UInt64             │
1000. │    999 │ UInt64             │
      └─number─┴─toTypeName(number)─┘
```


## output_format_pretty_display_footer_column_names_min_rows {#output_format_pretty_display_footer_column_names_min_rows}

<SettingsInfoBlock type='UInt64' default_value='50' />

设置当 [output_format_pretty_display_footer_column_names](#output_format_pretty_display_footer_column_names) 启用时,显示包含列名的页脚所需的最小行数。


## output_format_pretty_fallback_to_vertical {#output_format_pretty_fallback_to_vertical}

<SettingsInfoBlock type='Bool' default_value='1' />

启用后,当表格宽度较大但行数较少时,Pretty 格式将以 Vertical 格式输出。
有关此行为的详细调整,请参阅 `output_format_pretty_fallback_to_vertical_max_rows_per_chunk` 和 `output_format_pretty_fallback_to_vertical_min_table_width`。


## output_format_pretty_fallback_to_vertical_max_rows_per_chunk {#output_format_pretty_fallback_to_vertical_max_rows_per_chunk}

<SettingsInfoBlock type='UInt64' default_value='10' />

仅当数据块中的记录数不超过指定值时,才会激活回退到 Vertical 格式的机制(参见 `output_format_pretty_fallback_to_vertical`)。


## output_format_pretty_fallback_to_vertical_min_columns {#output_format_pretty_fallback_to_vertical_min_columns}

<SettingsInfoBlock type='UInt64' default_value='5' />

仅当列数大于指定值时,才会激活回退到 Vertical 格式的机制(参见 `output_format_pretty_fallback_to_vertical`)。


## output_format_pretty_fallback_to_vertical_min_table_width {#output_format_pretty_fallback_to_vertical_min_table_width}

<SettingsInfoBlock type='UInt64' default_value='250' />

只有当表中所有列的长度总和至少达到指定值,或者至少有一个值包含换行符时,才会激活回退到 Vertical 格式(参见 `output_format_pretty_fallback_to_vertical`)。


## output_format_pretty_glue_chunks {#output_format_pretty_glue_chunks}

<SettingsInfoBlock type='UInt64Auto' default_value='auto' />

如果以 Pretty 格式渲染的数据分多个数据块到达,即使存在延迟,但下一个数据块与前一个数据块的列宽相同时,将使用 ANSI 转义序列回退到前一行并覆盖前一个数据块的页脚,从而用新数据块的数据继续显示。这使得输出结果在视觉上更加美观。

0 - 禁用,1 - 启用,'auto' - 在终端环境下启用。


## output_format_pretty_grid_charset {#output_format_pretty_grid_charset}

<SettingsInfoBlock type='String' default_value='UTF-8' />

用于打印网格边框的字符集。可用字符集：ASCII、UTF-8（默认值）。


## output_format_pretty_highlight_digit_groups {#output_format_pretty_highlight_digit_groups}

<SettingsInfoBlock type='Bool' default_value='1' />

如果启用且输出到终端,则用下划线突出显示千位、百万位等对应的每个数字。


## output_format_pretty_highlight_trailing_spaces {#output_format_pretty_highlight_trailing_spaces}

<SettingsInfoBlock type='Bool' default_value='1' />

如果启用此选项且输出到终端,则会以灰色和下划线高亮显示尾随空格。


## output_format_pretty_max_column_name_width_cut_to {#output_format_pretty_max_column_name_width_cut_to}

<SettingsInfoBlock type='UInt64' default_value='24' />

如果列名过长,将其截断为此长度。
当列名长度超过 `output_format_pretty_max_column_name_width_cut_to` 与 `output_format_pretty_max_column_name_width_min_chars_to_cut` 之和时,列名将被截断。


## output_format_pretty_max_column_name_width_min_chars_to_cut {#output_format_pretty_max_column_name_width_min_chars_to_cut}

<SettingsInfoBlock type='UInt64' default_value='4' />

当列名过长时要截断的最小字符数。
如果列名长度超过 `output_format_pretty_max_column_name_width_cut_to` 与 `output_format_pretty_max_column_name_width_min_chars_to_cut` 之和,则该列名将被截断。


## output_format_pretty_max_column_pad_width {#output_format_pretty_max_column_pad_width}

<SettingsInfoBlock type='UInt64' default_value='250' />

在 Pretty 格式中对列内所有值进行填充时的最大宽度。


## output_format_pretty_max_rows {#output_format_pretty_max_rows}

<SettingsInfoBlock type='UInt64' default_value='1000' />

Pretty 格式的最大行数限制。


## output_format_pretty_max_value_width {#output_format_pretty_max_value_width}

<SettingsInfoBlock type='UInt64' default_value='10000' />

在 Pretty 格式中显示值的最大宽度。如果超过该宽度,值将被截断。
值为 0 表示不截断。


## output_format_pretty_max_value_width_apply_for_single_value {#output_format_pretty_max_value_width_apply_for_single_value}

<SettingsInfoBlock type='UInt64' default_value='0' />

仅当块中存在多个值时才截断值(参见 `output_format_pretty_max_value_width` 设置)。如果块中只有单个值,则完整输出,这对 `SHOW CREATE TABLE` 查询特别有用。


## output_format_pretty_multiline_fields {#output_format_pretty_multiline_fields}

<SettingsInfoBlock type='Bool' default_value='1' />

启用后，Pretty 格式会在表格单元格内渲染多行字段，以保持表格轮廓完整。
禁用时，多行字段将按原样渲染，可能导致表格变形（禁用的一个优点是更便于复制粘贴多行值）。


## output_format_pretty_row_numbers {#output_format_pretty_row_numbers}

<SettingsInfoBlock type='Bool' default_value='1' />

在 pretty 输出格式中为每行前添加行号


## output_format_pretty_single_large_number_tip_threshold {#output_format_pretty_single_large_number_tip_threshold}

<SettingsInfoBlock type='UInt64' default_value='1000000' />

当数据块仅包含单个数值且该数值超过此阈值时(0除外),在表格右侧显示易读的数值提示


## output_format_pretty_squash_consecutive_ms {#output_format_pretty_squash_consecutive_ms}

<SettingsInfoBlock type='UInt64' default_value='50' />

等待下一个数据块最多指定的毫秒数,并在写入前将其与前一个数据块合并。
这可以避免频繁输出过小的数据块,同时仍允许以流式方式显示数据。


## output_format_pretty_squash_max_wait_ms {#output_format_pretty_squash_max_wait_ms}

<SettingsInfoBlock type='UInt64' default_value='1000' />

如果距离上次输出已超过指定的毫秒数,则以 pretty 格式输出待处理的数据块。


## output_format_protobuf_nullables_with_google_wrappers {#output_format_protobuf_nullables_with_google_wrappers}

<SettingsInfoBlock type='Bool' default_value='0' />

当使用 Google 包装器序列化 Nullable 列时,将默认值序列化为空包装器。如果关闭,则不序列化默认值和 null 值


## output_format_schema {#output_format_schema}

自动生成的架构将保存到的文件路径,格式为 [Cap'n Proto](/interfaces/formats/CapnProto) 或 [Protobuf](/interfaces/formats/Protobuf)。


## output_format_sql_insert_include_column_names {#output_format_sql_insert_include_column_names}

<SettingsInfoBlock type='Bool' default_value='1' />

在 INSERT 查询中包含列名


## output_format_sql_insert_max_batch_size {#output_format_sql_insert_max_batch_size}

<SettingsInfoBlock type='UInt64' default_value='65409' />

单个 INSERT 语句中允许的最大行数。


## output_format_sql_insert_quote_names {#output_format_sql_insert_quote_names}

<SettingsInfoBlock type='Bool' default_value='1' />

使用反引号 '`' 字符引用列名


## output_format_sql_insert_table_name {#output_format_sql_insert_table_name}

<SettingsInfoBlock type='String' default_value='table' />

输出的 INSERT 查询中的表名


## output_format_sql_insert_use_replace {#output_format_sql_insert_use_replace}

<SettingsInfoBlock type='Bool' default_value='0' />

使用 REPLACE 语句代替 INSERT 语句


## output_format_tsv_crlf_end_of_line {#output_format_tsv_crlf_end_of_line}

<SettingsInfoBlock type='Bool' default_value='0' />

如果设置为 true,TSV 格式的行尾符将为 \\r\\n 而非 \\n。


## output_format_values_escape_quote_with_quote {#output_format_values_escape_quote_with_quote}

<SettingsInfoBlock type='Bool' default_value='0' />

如果为 true，则使用 '' 转义单引号 '，否则使用 \\' 转义


## output_format_write_statistics {#output_format_write_statistics}

<SettingsInfoBlock type='Bool' default_value='1' />

在支持的输出格式中写入已读取的行数、字节数和耗时等统计信息。

默认启用


## precise_float_parsing {#precise_float_parsing}

<SettingsInfoBlock type='Bool' default_value='0' />

优先使用更精确(但速度较慢)的浮点数解析算法


## regexp_dict_allow_hyperscan {#regexp_dict_allow_hyperscan}

<SettingsInfoBlock type='Bool' default_value='1' />

允许 regexp_tree 字典使用 Hyperscan 库。


## regexp_dict_flag_case_insensitive {#regexp_dict_flag_case_insensitive}

<SettingsInfoBlock type='Bool' default_value='0' />

为 regexp_tree 字典启用不区分大小写的匹配。可在单个表达式中使用 (?i) 和 (?-i) 覆盖此设置。


## regexp_dict_flag_dotall {#regexp_dict_flag_dotall}

<SettingsInfoBlock type='Bool' default_value='0' />

允许 '.' 匹配 regexp_tree 字典的换行符。


## rows_before_aggregation {#rows_before_aggregation}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,ClickHouse 将为 rows_before_aggregation 统计信息提供精确值,表示聚合前读取的行数


## schema_inference_hints {#schema_inference_hints}

用于在无模式格式的模式推断中作为提示使用的列名和类型列表。

示例:

查询:

```sql
desc format(JSONEachRow, '{"x" : 1, "y" : "String", "z" : "0.0.0.0" }') settings schema_inference_hints='x UInt8, z IPv4';
```

结果:

```sql
x   UInt8
y   Nullable(String)
z   IPv4
```

:::note
如果 `schema_inference_hints` 格式不正确,或者存在拼写错误、错误的数据类型等问题,整个 schema_inference_hints 将被忽略。
:::


## schema_inference_make_columns_nullable {#schema_inference_make_columns_nullable}

<SettingsInfoBlock type='UInt64Auto' default_value='3' />

控制在模式推断中是否将推断的类型设为 `Nullable`。
可能的值:

- 0 - 推断的类型永远不会是 `Nullable`(此情况下使用 input_format_null_as_default 来控制如何处理 null 值),
- 1 - 所有推断的类型都将是 `Nullable`,
- 2 或 `auto` - 仅当列在模式推断期间解析的样本中包含 `NULL`,或文件元数据包含列可空性信息时,推断的类型才会是 `Nullable`,
- 3 - 如果格式包含文件元数据(例如 Parquet),则推断类型的可空性将与文件元数据匹配,否则始终为 Nullable(例如 CSV)。


## schema_inference_make_json_columns_nullable {#schema_inference_make_json_columns_nullable}

<SettingsInfoBlock type='Bool' default_value='0' />

控制在模式推断中是否将推断的 JSON 类型设为 `Nullable`。
如果此设置与 schema_inference_make_columns_nullable 同时启用,则推断的 JSON 类型将为 `Nullable`。


## schema_inference_mode {#schema_inference_mode}

<SettingsInfoBlock type='SchemaInferenceMode' default_value='default' />

模式推断的模式。'default' - 假定所有文件具有相同的模式,可以从任意文件推断出模式;'union' - 文件可以具有不同的模式,最终模式应为所有文件模式的并集


## show_create_query_identifier_quoting_rule {#show_create_query_identifier_quoting_rule}

<SettingsInfoBlock
  type='IdentifierQuotingRule'
  default_value='when_necessary'
/>

设置 SHOW CREATE 查询中标识符的引用规则


## show_create_query_identifier_quoting_style {#show_create_query_identifier_quoting_style}

<SettingsInfoBlock type='IdentifierQuotingStyle' default_value='Backticks' />

设置 SHOW CREATE 查询中标识符的引用样式


## type_json_skip_duplicated_paths {#type_json_skip_duplicated_paths}

<SettingsInfoBlock type='Bool' default_value='0' />

启用后,在将 JSON 对象解析为 JSON 类型时,重复的路径将被忽略,只保留第一个路径,而不是抛出异常


## validate_experimental_and_suspicious_types_inside_nested_types {#validate_experimental_and_suspicious_types_inside_nested_types}

<SettingsInfoBlock type='Bool' default_value='1' />

验证嵌套类型(如 Array/Map/Tuple)中实验性类型和可疑类型的使用情况
