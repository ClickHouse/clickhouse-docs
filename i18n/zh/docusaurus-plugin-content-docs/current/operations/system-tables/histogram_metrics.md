---
description: '此表包含可即时计算并以 Prometheus 格式导出的直方图指标，始终保持最新状态。'
keywords: ['system table', 'histogram_metrics']
slug: /operations/system-tables/histogram_metrics
title: 'system.histogram_metrics'
doc_type: 'reference'
---

import SystemTableCloud from '@site/i18n/zh/docusaurus-plugin-content-docs/current/_snippets/_system_table_cloud.md';


# histogram&#95;metrics \{#histogram&#95;metrics\}

<SystemTableCloud/>

该表包含可即时计算并以 Prometheus 格式导出的直方图指标，其数据始终为最新。用于取代已弃用的 `system.latency_log`。

列：

<!--AUTOGENERATED_START-->

* `metric` ([String](../../sql-reference/data-types/)) — 指标名称。
* `value` ([Int64](../../sql-reference/data-types/)) — 指标值。
* `description` ([String](../../sql-reference/data-types/)) — 指标描述。
* `labels` ([Map(String, String)](../../sql-reference/data-types/)) — 指标标签。

<!--AUTOGENERATED_END-->

**示例**

可以使用如下所示的查询，将所有直方图指标以 Prometheus 格式导出。

```sql
SELECT
  metric AS name,
  toFloat64(value) AS value,
  description AS help,
  labels,
  'histogram' AS type
FROM system.histogram_metrics
FORMAT Prometheus
```


## 指标说明 \{#metric_descriptions\}

### keeper_response_time_ms_bucket \{#keeper_response_time_ms_bucket\}

Keeper 的响应时间（单位：毫秒）。

### keeper_batch_size_elements_bucket \{#keeper_batch_size_elements_bucket\}

发送到 Raft 的批处理大小（按元素个数计）。

### keeper_batch_size_bytes_bucket \{#keeper_batch_size_bytes_bucket\}

发送到 Raft 的批次大小（单位：字节）。

**另请参阅**

- [system.asynchronous_metrics](/operations/system-tables/asynchronous_metrics) — 包含周期性计算的指标。
- [system.events](/operations/system-tables/events) — 包含发生的各类事件的数量。
- [system.metric_log](/operations/system-tables/metric_log) — 包含来自 `system.metrics` 和 `system.events` 表的指标值历史记录。
- [Monitoring](../../operations/monitoring.md) — ClickHouse 监控的基本概念。