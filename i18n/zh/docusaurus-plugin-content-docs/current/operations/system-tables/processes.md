---
description: '用于实现 `SHOW PROCESSLIST` 查询的系统表。'
keywords: ['系统表', '进程']
slug: /operations/system-tables/processes
title: 'system.processes'
doc_type: 'reference'
---

import SystemTableCloud from '@site/i18n/zh/docusaurus-plugin-content-docs/current/_snippets/_system_table_cloud.md';

# system.processes \{#systemprocesses\}

<SystemTableCloud />

此系统表用于实现 `SHOW PROCESSLIST` 查询。

列：

{/*AUTOGENERATED_START*/ }

* `is_initial_query` ([UInt8](../../sql-reference/data-types/)) — 表示该查询是直接由用户发起，还是在分布式查询执行过程中由 ClickHouse 服务器发起。
* `user` ([String](../../sql-reference/data-types/)) — 发起查询的用户。请注意，对于分布式处理，查询会以默认用户的身份发送到远程服务器。该字段包含的是该特定查询的用户名，而不是由此查询触发的其他查询的用户名。
* `query_id` ([String](../../sql-reference/data-types/)) — 查询 ID（若已定义）。
* `address` ([IPv6](../../sql-reference/data-types/)) — 发出查询的 IP 地址。对于分布式处理，该字段的值也是相同的。要跟踪分布式查询最初是从哪个节点发起的，请在查询发起端服务器上查看 system.processes。
* `port` ([UInt16](../../sql-reference/data-types/)) — 客户端发出该查询时使用的端口。
* `initial_user` ([String](../../sql-reference/data-types/)) — 执行初始查询的用户名（在分布式查询执行中使用）。
* `initial_query_id` ([String](../../sql-reference/data-types/)) — 初始查询 ID（用于分布式查询执行）。
* `initial_address` ([IPv6](../../sql-reference/data-types/)) — 父查询发起自的 IP 地址。
* `initial_port` ([UInt16](../../sql-reference/data-types/)) — 客户端用于发起父查询的端口。
* `interface` ([UInt8](../../sql-reference/data-types/)) — 用于发送查询的接口类型。TCP = 1，HTTP = 2，GRPC = 3，MYSQL = 4，POSTGRESQL = 5，LOCAL = 6，TCP&#95;INTERSERVER = 7。
* `os_user` ([String](../../sql-reference/data-types/)) — 运行 clickhouse-client 的操作系统用户的用户名。
* `client_hostname` ([String](../../sql-reference/data-types/)) — 运行 clickhouse-client 或其他 TCP 客户端的客户端机器的主机名。
* `client_name` ([String](../../sql-reference/data-types/)) — clickhouse-client 或其他 TCP 客户端的名称。
* `client_revision` ([UInt64](../../sql-reference/data-types/)) — clickhouse-client 或其他 TCP 客户端的修订版本号。
* `client_version_major` ([UInt64](../../sql-reference/data-types/)) — clickhouse-client 或其他 TCP 客户端的主版本号。`
* `client_version_minor` ([UInt64](../../sql-reference/data-types/)) — clickhouse-client 或其他 TCP 客户端的次版本号。
* `client_version_patch` ([UInt64](../../sql-reference/data-types/)) — clickhouse-client 或其他 TCP 客户端版本的补丁号部分。
* `http_method` ([UInt8](../../sql-reference/data-types/)) — 启动查询的 HTTP 方法。可能的取值为：0 — 查询是从 TCP 接口发起的。1 — 使用了 GET 方法。2 — 使用了 POST 方法。
* `http_user_agent` ([String](../../sql-reference/data-types/)) — 在 HTTP 查询中传递的 HTTP 头部 User-Agent 字段。
* `http_referer` ([String](../../sql-reference/data-types/)) — 在 HTTP 请求中传递的 Referer HTTP 头部（包含发出该请求的页面的完整或部分地址）。
* `forwarded_for` ([String](../../sql-reference/data-types/)) — HTTP 查询中传入的 X-Forwarded-For HTTP 头部。
* `quota_key` ([String](../../sql-reference/data-types/)) — 在 quotas 设置中指定的配额键（参见 keyed）。
* `distributed_depth` ([UInt64](../../sql-reference/data-types/)) — 查询在服务器节点之间进行内部重传的次数。
* `elapsed` ([Float64](../../sql-reference/data-types/)) — 自请求开始执行以来的时间（以秒为单位）。
* `is_cancelled` ([UInt8](../../sql-reference/data-types/)) — 查询是否已被取消。
* `is_all_data_sent` ([UInt8](../../sql-reference/data-types/)) — 是否已将全部数据发送给客户端（即查询已在服务器端完成）。
* `read_rows` ([UInt64](../../sql-reference/data-types/)) — 从表中读取的行数。对于分布式处理，在请求端服务器上，该值表示所有远程服务器的总和。
* `read_bytes` ([UInt64](../../sql-reference/data-types/)) — 从表中读取的未压缩字节数。对于分布式处理，在请求方服务器上，该值表示所有远程服务器的总和。
* `total_rows_approx` ([UInt64](../../sql-reference/data-types/)) — 需要读取的行总数的近似值。对于分布式处理，在请求端服务器上，该值表示所有远程服务器的总和。在请求处理期间，当发现新的待处理数据源时，该值可能会被更新。
* `written_rows` ([UInt64](../../sql-reference/data-types/)) — 写入到存储中的行数。
* `written_bytes` ([UInt64](../../sql-reference/data-types/)) — 写入到存储的字节数。
* `memory_usage` ([Int64](../../sql-reference/data-types/)) — 查询使用的 RAM 内存大小。其中可能不包含某些类型的专用内存。
* `peak_memory_usage` ([Int64](../../sql-reference/data-types/)) — 当前内存使用量峰值。
* `query` ([String](../../sql-reference/data-types/)) — 查询文本。对于 INSERT 查询，它不包含待插入的数据。
* `normalized_query_hash` ([UInt64](../../sql-reference/data-types/)) — 一个数值型哈希值，对于仅在字面量值上存在差异的查询，该哈希值相同。
* `query_kind` ([String](../../sql-reference/data-types/)) — 查询类型，例如 SELECT、INSERT 等。
* `thread_ids` ([Array(UInt64)](../../sql-reference/data-types/)) — 所有参与此查询的线程的标识符列表。
* `peak_threads_usage` ([UInt64](../../sql-reference/data-types/)) — 执行该查询的并发线程数量的最大值。
* `ProfileEvents` ([Map(LowCardinality(String), UInt64)](../../sql-reference/data-types/)) — 针对本次查询计算得到的 ProfileEvents。
* `Settings` ([Map(LowCardinality(String), LowCardinality(String))](../../sql-reference/data-types/)) — 已修改的用户级别设置列表。
* `current_database` ([String](../../sql-reference/data-types/)) — 当前数据库的名称。
* `is_internal` ([UInt8](../../sql-reference/data-types/)) — 表示是否为内部执行的辅助查询。

{/*AUTOGENERATED_END*/ }

```sql
SELECT * FROM system.processes LIMIT 10 FORMAT Vertical;
```

```response
Row 1:
──────
is_initial_query:     1
user:                 default
query_id:             35a360fa-3743-441d-8e1f-228c938268da
address:              ::ffff:172.23.0.1
port:                 47588
initial_user:         default
initial_query_id:     35a360fa-3743-441d-8e1f-228c938268da
initial_address:      ::ffff:172.23.0.1
initial_port:         47588
interface:            1
os_user:              bharatnc
client_hostname:      tower
client_name:          ClickHouse
client_revision:      54437
client_version_major: 20
client_version_minor: 7
client_version_patch: 2
http_method:          0
http_user_agent:
quota_key:
elapsed:              0.000582537
is_cancelled:         0
is_all_data_sent:     0
read_rows:            0
read_bytes:           0
total_rows_approx:    0
written_rows:         0
written_bytes:        0
memory_usage:         0
peak_memory_usage:    0
query:                SELECT * from system.processes LIMIT 10 FORMAT Vertical;
thread_ids:           [67]
ProfileEvents:        {'Query':1,'SelectQuery':1,'ReadCompressedBytes':36,'CompressedReadBufferBlocks':1,'CompressedReadBufferBytes':10,'IOBufferAllocs':1,'IOBufferAllocBytes':89,'ContextLock':15,'RWLockAcquiredReadLocks':1}
Settings:             {'background_pool_size':'32','load_balancing':'random','allow_suspicious_low_cardinality_types':'1','distributed_aggregation_memory_efficient':'1','skip_unavailable_shards':'1','log_queries':'1','max_bytes_before_external_group_by':'20000000000','max_bytes_before_external_sort':'20000000000','allow_introspection_functions':'1'}

1 rows in set. Elapsed: 0.002 sec.
```
